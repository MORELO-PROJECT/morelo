diff --git a/CMakeLists.txt b/CMakeLists.txt
index 0ab7057..3836861 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -500,15 +500,15 @@ endif()
 
 set(THREADS_PREFER_PTHREAD_FLAG ON)
 find_package(Threads)
-add_c_flag_if_supported(-pthread CMAKE_C_FLAGS)
-add_cxx_flag_if_supported(-pthread CMAKE_CXX_FLAGS)
+#add_c_flag_if_supported(-pthread CMAKE_C_FLAGS)
+#add_cxx_flag_if_supported(-pthread CMAKE_CXX_FLAGS)
 
 if(CMAKE_SYSTEM_NAME MATCHES "(SunOS|Solaris)")
   set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -pthreads")
 endif()
 
 if(APPLE AND NOT IOS)
-  set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -march=x86-64 -fvisibility=default -std=gnu++14")
+  set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -march=x86-64 -fvisibility=default -std=c++14")
   if(NOT OpenSSL_DIR)
       EXECUTE_PROCESS(COMMAND brew --prefix openssl
         OUTPUT_VARIABLE OPENSSL_ROOT_DIR
@@ -663,11 +663,13 @@ else()
 
   set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} ${ARCH_FLAG}")
   set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${ARCH_FLAG}")
+
   if(CMAKE_CXX_COMPILER_ID STREQUAL "Clang" OR CMAKE_CXX_COMPILER_ID STREQUAL "AppleClang")
     set(WARNINGS "-Wall -Wextra -Wpointer-arith -Wundef -Wvla -Wwrite-strings -Wno-error=extra -Wno-error=deprecated-declarations -Wno-unused-lambda-capture -Wno-unused-parameter -Wno-unused-variable -Wno-error=unused-variable -Wno-error=undef -Wno-error=uninitialized")
   else()
     set(WARNINGS "-Wall -Wextra -Wpointer-arith -Wundef -Wvla -Wwrite-strings -Wno-error=extra -Wno-error=deprecated-declarations -Wno-unused-parameter -Wno-unused-variable -Wno-error=unused-variable -Wno-error=undef -Wno-error=uninitialized -Wno-maybe-uninitialized")
   endif()
+
   if(CMAKE_C_COMPILER_ID STREQUAL "Clang" OR CMAKE_C_COMPILER_ID STREQUAL "AppleClang")
     if(ARM)
       set(WARNINGS "${WARNINGS} -Wno-error=inline-asm")
@@ -675,6 +677,7 @@ else()
   else()
     set(WARNINGS "${WARNINGS} -Wlogical-op -Wno-error=maybe-uninitialized -Wno-error=cpp")
   endif()
+
   if(MINGW)
     set(WARNINGS "${WARNINGS} -Wno-misleading-indentation -Wno-maybe-uninitialized -Wno-error=unused-value -Wno-error=unused-but-set-variable")
     set(MINGW_FLAG "${MINGW_FLAG} -DWIN32_LEAN_AND_MEAN")
@@ -738,13 +741,10 @@ else()
   endif()
 
   # linker
-  if(NOT WIN32 AND NOT (CMAKE_C_COMPILER_ID STREQUAL "Clang" OR CMAKE_C_COMPILER_ID STREQUAL "AppleClang") AND NOT (CMAKE_C_COMPILER_ID STREQUAL "GNU" AND CMAKE_C_COMPILER_VERSION VERSION_LESS 9.1))
+  if(NOT WIN32 AND (CMAKE_C_COMPILER_ID STREQUAL "GNU" AND CMAKE_C_COMPILER_VERSION VERSION_LESS 9.1))
     # Windows binaries die on startup with PIE compiled with GCC < 9.x
     add_linker_flag_if_supported(-pie LD_SECURITY_FLAGS)
   endif()
-  if(CMAKE_C_COMPILER_ID STREQUAL "Clang" OR CMAKE_C_COMPILER_ID STREQUAL "AppleClang")
-    add_linker_flag_if_supported(-Wl, -pie LD_SECURITY_FLAGS)
-  endif()
   add_linker_flag_if_supported(-Wl,-z,relro LD_SECURITY_FLAGS)
   add_linker_flag_if_supported(-Wl,-z,now LD_SECURITY_FLAGS)
   add_linker_flag_if_supported(-Wl,-z,noexecstack noexecstack_SUPPORTED)
@@ -770,15 +770,17 @@ else()
     add_linker_flag_if_supported(-Wl,--high-entropy-va LD_SECURITY_FLAGS)
   endif()
 
-  if(NOT CMAKE_C_COMPILER_ID STREQUAL "Clang" OR CMAKE_C_COMPILER_ID STREQUAL "AppleClang")
+  if(NOT CMAKE_CXX_COMPILER_ID STREQUAL "Clang" OR CMAKE_CXX_COMPILER_ID STREQUAL "AppleClang")
     set(LINKER_FLAGS "${LINKER_FLAGS} -ffunction-sections -fdata-sections -Wl,--gc-sections")
   else()
     set(LINKER_FLAGS "${LINKER_FLAGS} -ffunction-sections -fdata-sections -Wl,-dead_strip")
   # silence warning in link cases dead_strip cannot be used
     set(WARNINGS "${WARNINGS} -Wno-unused-command-line-argument")
   endif()
-  if(STATIC OR DEPENDS OR MINGW)
-    set(CMAKE_EXE_LINKER_OPTIONS_FLAGS "${CMAKE_EXE_LINKER_OPTIONS_FLAGS} -Wl,-s")
+  if(NOT CMAKE_CXX_COMPILER_ID STREQUAL "Clang" OR CMAKE_CXX_COMPILER_ID STREQUAL "AppleClang")
+    if(STATIC OR DEPENDS OR MINGW)
+      set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -Wl,-s")
+    endif()
   endif()
 
   statusinfo("Using C security hardening flags: ${C_SECURITY_FLAGS}")
@@ -788,12 +790,11 @@ else()
     statusinfo("Using linker elimination of unused data flags: ${LINKER_FLAGS}")
   else()
     statusinfo("Using linker elimination of unused data flags: ${LINKER_FLAGS}")
-    statusinfo("Using exe linker elimination of unused data flags: ${CMAKE_EXE_LINKER_OPTIONS_FLAGS}")
   endif()
 
-  set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -std=c11 -D_GNU_SOURCE ${MINGW_FLAG} ${WARNINGS} ${C_WARNINGS} ${COVERAGE_FLAGS} ${PIC_FLAG} ${C_SECURITY_FLAGS} ${BUILD_FLAGS} ${LINKER_FLAGS} ${VAR_OPT_FLAGS}")
-  set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=gnu++14 -D_GNU_SOURCE ${MINGW_FLAG} ${WARNINGS} ${CXX_WARNINGS} ${COVERAGE_FLAGS} ${PIC_FLAG} ${CXX_SECURITY_FLAGS} ${BUILD_FLAGS} ${LINKER_FLAGS} ${VAR_OPT_FLAGS}")
-  set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} ${LD_SECURITY_FLAGS} ${LD_BACKCOMPAT_FLAGS} ${VAR_OPT_FLAGS} ${CMAKE_EXE_LINKER_OPTIONS_FLAGS}")
+  set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -std=c11 -D_GNU_SOURCE ${MINGW_FLAG} ${WARNINGS} ${C_WARNINGS} ${COVERAGE_FLAGS} ${PIC_FLAG} ${C_SECURITY_FLAGS} ${BUILD_FLAGS} ${LINKER_FLAGS}")
+  set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++14 -D_GNU_SOURCE ${MINGW_FLAG} ${WARNINGS} ${CXX_WARNINGS} ${COVERAGE_FLAGS} ${PIC_FLAG} ${CXX_SECURITY_FLAGS} ${BUILD_FLAGS} ${LINKER_FLAGS}")
+  set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} ${LD_SECURITY_FLAGS} ${LD_BACKCOMPAT_FLAGS}")
 
   #  ${WRAP_CXA_THROW_FLAG}
   # With GCC 6.1.1 the compiled binary malfunctions due to aliasing. Until that
@@ -922,22 +923,13 @@ else()
     endif()
   endif()
 
-  if(CMAKE_BUILD_TYPE STREQUAL "Release" OR STATIC OR DEPENDS AND NOT (WIN32 OR MINGW))
-    set(VAR_OPT_FLAGS "${VAR_OPT_FLAGS} -fuse-ld=gold -foptimize-strlen -pipe")
-    set(CMAKE_AR "gcc-ar")
-    set(CMAKE_RANLIB "gcc-ranlib")
-    set(CMAKE_NM "gcc-nm")
-  endif()
-
-  set(CMAKE_C_FLAGS_DEBUG "${CMAKE_C_FLAGS_DEBUG} ${DEBUG_FLAGS}")
-  set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} ${DEBUG_FLAGS}")
-  set(CMAKE_C_FLAGS_RELEASE "${CMAKE_C_FLAGS_RELEASE} ${RELEASE_FLAGS}")
-  set(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS_RELEASE} ${RELEASE_FLAGS}")
 
-  if(STATIC OR DEPENDS AND NOT (APPLE OR WIN32 OR MINGW))
-    set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -static -lgcc_eh -lstdc++ -lm -latomic -lresolv -lrt")
-  elseif(WIN32 OR MINGW)
-    set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -static")
+  if(STATIC OR DEPENDS)
+    if(WIN32 OR MINGW)
+      set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -static")
+    else()
+      set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -static -lgcc_eh -lstdc++ -lm -latomic -lresolv -lrt")
+    endif()
   endif()
 
 #  if(CMAKE_BUILD_TYPE STREQUAL "Release" AND NOT APPLE)
@@ -1081,7 +1073,7 @@ option(BUILD_GUI_DEPS "Build GUI dependencies." OFF)
 
 # This is not nice, distribution packagers should not enable this, but depend
 # on libunbound shipped with their distribution instead
-option(INSTALL_VENDORED_LIBUNBOUND "Install libunbound binary built from source vendored with this repo." ON)
+option(INSTALL_VENDORED_LIBUNBOUND "Install libunbound binary built from source vendored with this repo." OFF)
 
 find_package(PythonInterp)
 find_program(iwyu_tool_path NAMES iwyu_tool.py iwyu_tool)
diff --git a/Makefile b/Makefile
index 624108b..8a39554 100644
--- a/Makefile
+++ b/Makefile
@@ -49,11 +49,11 @@ all: release-all
 
 depends:
 	cd contrib/depends && $(MAKE) HOST=$(target) && cd ../.. && mkdir -p build/$(target)/release
-	cd build/$(target)/release && cmake -DCMAKE_TOOLCHAIN_FILE=$(CURDIR)/contrib/depends/$(target)/share/toolchain.cmake ../../.. && $(MAKE)
+	cd build/$(target)/release && cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_TOOLCHAIN_FILE=$(CURDIR)/contrib/depends/$(target)/share/toolchain.cmake ../../.. && $(MAKE)
 
 depends-compat:
 	cd contrib/depends && $(MAKE) HOST=$(target) && cd ../.. && mkdir -p build/$(target)-compat/release
-	cd build/$(target)-compat/release && cmake -DBACKCOMPAT=ON -DCMAKE_TOOLCHAIN_FILE=$(CURDIR)/contrib/depends/$(target)/share/toolchain.cmake ../../.. && $(MAKE)
+	cd build/$(target)-compat/release && cmake -DCMAKE_BUILD_TYPE=Release -DBACKCOMPAT=ON -DCMAKE_TOOLCHAIN_FILE=$(CURDIR)/contrib/depends/$(target)/share/toolchain.cmake ../../.. && $(MAKE)
 
 cmake-debug:
 	mkdir -p $(builddir)/debug
diff --git a/README.md b/README.md
index 285c49a..6c99c15 100644
--- a/README.md
+++ b/README.md
@@ -109,6 +109,14 @@ That build is from the master branch, which is used for active development and c
 
 ### Dependencies
 
+#### We are strongly suggest to update cmake and boost to the latest available release.
+
+##### [Cmake v3.17.3](https://github.com/Kitware/CMake/releases/download/v3.17.3/cmake-3.17.3.tar.gz)
+
+##### [Boost](https://dl.bintray.com/boostorg/release/1.73.0/source/boost_1_73_0.tar.gz)
+
+##### Arqma build been tested on Ubuntu Server 20.04 Focal Fosa with above releases as long with [gcc9.3](https://gcc.gnu.org/gcc-9/)
+
 The following table summarizes the tools and libraries required to build. A
 few of the libraries are also included in this repository (marked as
 "Vendored"). By default, the build uses the library installed on the system,
@@ -121,15 +129,11 @@ library archives (`.a`).
 | Dep          | Min. version  | Vendored | Debian/Ubuntu pkg  | Arch pkg     | Fedora            | Optional | Purpose        |
 | ------------ | ------------- | -------- | ------------------ | ------------ | ----------------- | -------- | -------------- |
 | GCC          | 7.3.0         | NO       | `build-essential`  | `base-devel` | `gcc`             | NO       |                |
-| CMake        | 3.6.3         | NO       | `cmake`            | `cmake`      | `cmake`           | NO       |                |
+| CMake        | 3.12.0        | NO       | `cmake`            | `cmake`      | `cmake`           | NO       |                |
 | pkg-config   | any           | NO       | `pkg-config`       | `base-devel` | `pkgconf`         | NO       |                |
 | Boost        | 1.62          | NO       | `libboost-all-dev` | `boost`      | `boost-devel`     | NO       | C++ libraries  |
-| OpenSSL      | basically any | NO       | `libssl-dev`       | `openssl`    | `openssl-devel`   | NO       | sha256 sum     |
-| libzmq       | 3.0.0         | NO       | `libzmq3-dev`      | `zeromq`     | `zeromq-devel`    | NO       | ZeroMQ library |
-| OpenPGM      | ????          | NO       | `libpgm-dev`       | `libpgm`     | `openpgm-devel`   | NO       | For ZeroMQ     |
-| libnorm[2]   | ?             | NO       | `libnorm-dev`      |              |               `   | YES      | For ZeroMQ     |
-| libunbound   | 1.4.16        | YES      | `libunbound-dev`   | `unbound`    | `unbound-devel`   | NO       | DNS resolver   |
-| libsodium    | ?             | NO       | `libsodium-dev`    | ?            | `libsodium-devel` | NO       | Cryptography   |
+| OpenSSL      | 1.1.1g        | NO       | `libssl-dev`       | `openssl`    | `openssl-devel`   | NO       | sha256 sum     |
+| libsodium    | 1.0.16        | NO       | `libsodium-dev`    | ?            | `libsodium-devel` | NO       | Cryptography   |
 | libunwind    | any           | NO       | `libunwind8-dev`   | `libunwind`  | `libunwind-devel` | YES      | Stack traces   |
 | liblzma      | any           | NO       | `liblzma-dev`      | `xz`         | `xz-devel`        | YES      | For libunwind  |
 | libreadline  | 6.3.0         | NO       | `libreadline6-dev` | `readline`   | `readline-devel`  | YES      | Input editing  |
@@ -141,8 +145,6 @@ library archives (`.a`).
 | HIDAPI       | ?             | NO       | `libhidapi-dev`    | ``           | ``                | NO       | for Device     |
 | libusb-1.0   | 1.0           | NO       | `libusb-1.0-0-dev` | ``           | ``                | NO       |                |
 | libudev      | ?             | NO       | `libudev-dev`      | ``           | ``                | NO       |                |
-| protobuf     | ?             | NO       | `protobuf-compiler`| ``           | ``                | NO       | serializing    |
-|              |               |          | `libprotobuf-dev`  | ``           | ``                |          | structured data|
 -------------------------------------------------------------------------------------------------------------------------------
 
 
@@ -152,7 +154,7 @@ build the library binary manually. This can be done with the following command `
 
 Debian / Ubuntu one liner for all dependencies
 
-``` sudo apt update && sudo apt install build-essential curl cmake pkg-config libboost-all-dev libssl-dev libzmq3-dev libunbound-dev libsodium-dev libunwind8-dev liblzma-dev libreadline6-dev libldns-dev libexpat1-dev doxygen graphviz libpgm-dev libudev-dev libusb-1.0-0-dev libhidapi-dev protobuf-compiler libprotobuf-dev xsltproc gperf autoconf automake libtool-bin libprotobuf-c-dev ```
+``` sudo apt update && sudo apt install build-essential curl cmake pkg-config libboost-all-dev libssl-dev libsodium-dev libunwind-dev liblzma-dev libreadline-dev libldns-dev libexpat1-dev doxygen graphviz libudev-dev libusb-1.0-0-dev libhidapi-dev xsltproc gperf autoconf automake libtool-bin ```
 
 Install all dependencies at once on OSX:
 
@@ -187,8 +189,6 @@ invokes cmake commands as needed.
     this to be worthwhile, the machine should have one core and about 2GB of RAM
     available per thread.
 
-    *Note*: If cmake can not find zmq.hpp file on OS X, installing `zmq.hpp` from
-    https://github.com/zeromq/cppzmq to `/usr/local/include` should fix that error.
 
 * The resulting executables can be found in `build/release/bin`
 
@@ -313,7 +313,7 @@ application.
 
     To build for 64-bit Windows:
 
-        pacman -S git mingw-w64-x86_64-toolchain make mingw-w64-x86_64-cmake mingw-w64-x86_64-boost mingw-w64-x86_64-openssl mingw-w64-x86_64-zeromq mingw-w64-x86_64-libsodium mingw-w64-x86_64-hidapi protobuf-devel mingw-w64-x86_64-protobuf-c mingw-w64-x86_64-protobuf
+        pacman -S git mingw-w64-x86_64-toolchain make mingw-w64-x86_64-cmake mingw-w64-x86_64-boost mingw-w64-x86_64-openssl mingw-w64-x86_64-libsodium mingw-w64-x86_64-hidapi automake autoconf binutils patch
 
 **Building**
 
@@ -417,26 +417,6 @@ Build the cppzmq bindings.
 
 We assume you are compiling with a non-root user and you have `doas` enabled.
 
-```
-# Create cppzmq building directory
-mkdir ~/cppzmq
-cd ~/cppzmq
-
-# Fetch cppzmq source
-ftp -o cppzmq-4.2.3.tar.gz https://github.com/zeromq/cppzmq/archive/v4.2.3.tar.gz
-
-# MUST output: (SHA256) cppzmq-4.2.3.tar.gz: OK
-echo "3e6b57bf49115f4ae893b1ff7848ead7267013087dc7be1ab27636a97144d373 cppzmq-4.2.3.tar.gz" | sha256 -c
-tar xfz cppzmq-4.2.3.tar.gz
-
-# Start building cppzmq
-cd cppzmq-4.2.3
-mkdir build
-cd build
-cmake ..
-doas make install
-```
-
 Build Morelo: `env DEVELOPER_LOCAL_TOOLS=1 BOOST_ROOT=/usr/local make release-static`
 
 ### On Solaris:
@@ -467,23 +447,19 @@ By default, in either dynamically or statically linked builds, binaries target t
 * ```make release-static-linux-armv8``` builds binaries on Linux portable across POSIX systems on armv8 processors
 * ```make release-static-linux-armv7``` builds binaries on Linux portable across POSIX systems on armv7 processors
 * ```make release-static-linux-armv6``` builds binaries on Linux portable across POSIX systems on armv6 processors
-* ```make release-static-win64``` builds binaries on 64-bit Windows portable across 64-bit Windows systems
+* ```make release-static-win``` builds binaries on 64-bit Windows portable across 64-bit Windows systems
 
 ### Cross Compiling
 
 You can also cross-compile Morelo static binaries on Linux for Windows and macOS with the `depends` system.
 
 * ```make depends target=x86_64-linux-gnu``` for 64-bit linux binaries.
-* ```make depends target=x86_64-w64-mingw32``` for 64-bit windows binaries. Requires: python3 g++-mingw-w64-x86-64 wine1.6 bc
-* ```make depends target=x86_64-apple-darwin14``` for macOS binaries. Requires: cmake imagemagick libcap-dev librsvg2-bin libz-dev libbz2-dev libtiff-tools python3-dev curl libtiff-tools bsdmainutils libbz2-dev python3-setuptools
+* ```make depends target=x86_64-w64-mingw32``` for 64-bit windows binaries. Requires: python3 g++-mingw-w64-x86-64 wine64 bc
+* ```make depends target=x86_64-apple-darwin19.2.0``` for macOS binaries. Requires: curl librsvg2-bin libtiff-tools bsdmainutils cmake imagemagick libcap-dev libz-dev libbz2-dev python3-setuptools libtinfo5
 * ```make depends target=arm-linux-gnueabihf``` for armv7 binaries. Requires: g++-arm-linux-gnueabihf
 * ```make depends target=aarch64-linux-gnu``` for armv8 binaries. Requires: g++-aarch64-linux-gnu
 
-*** For `x86_64-apple-darwin14` you need to download SDK first ***    
-
-* ```git clone -b arqma https://github.com/malbit/MacOSX-SDKs.git contrib/depends/SDKs ```    
-
-You can download SDK at https://github.com/malbit/MacOSX-SDKs/releases/download/MacOSX10.11.sdk.arqma/MacOSX10.11.sdk.tar.gz and unpack it and put to contrib/depends/SDKs    
+*** For `x86_64-apple-darwin19.2.0` you need to download SDK first ***    
 
 The required packages are the names for each toolchain on apt. Depending on your OS Distribution, they may have different names.
 
diff --git a/cmake/32-bit-toolchain.cmake b/cmake/32-bit-toolchain.cmake
deleted file mode 100644
index c02fc77..0000000
--- a/cmake/32-bit-toolchain.cmake
+++ /dev/null
@@ -1,51 +0,0 @@
-# Copyright (c) 2018-2019, The Arqma Network
-# Copyright (c) 2014-2018, The Monero Project
-#
-# All rights reserved.
-#
-# Redistribution and use in source and binary forms, with or without modification, are
-# permitted provided that the following conditions are met:
-#
-# 1. Redistributions of source code must retain the above copyright notice, this list of
-#    conditions and the following disclaimer.
-#
-# 2. Redistributions in binary form must reproduce the above copyright notice, this list
-#    of conditions and the following disclaimer in the documentation and/or other
-#    materials provided with the distribution.
-#
-# 3. Neither the name of the copyright holder nor the names of its contributors may be
-#    used to endorse or promote products derived from this software without specific
-#    prior written permission.
-#
-# THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
-# EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
-# MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL
-# THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
-# SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
-# PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
-# INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
-# STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF
-# THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-
-if (NOT CMAKE_HOST_WIN32)
-  set (CMAKE_SYSTEM_NAME Windows)
-endif()
-
-set (GCC_PREFIX i686-w64-mingw32)
-set (CMAKE_C_COMPILER ${GCC_PREFIX}-gcc)
-set (CMAKE_CXX_COMPILER ${GCC_PREFIX}-g++)
-set (CMAKE_AR ar CACHE FILEPATH "" FORCE)
-set (CMAKE_NM nm CACHE FILEPATH "" FORCE)
-set (CMAKE_LINKER ld CACHE FILEPATH "" FORCE)
-#set (CMAKE_RANLIB ${GCC_PREFIX}-gcc-ranlib CACHE FILEPATH "" FORCE)
-set (CMAKE_RC_COMPILER windres)
-
-set (CMAKE_FIND_ROOT_PATH "${MSYS2_FOLDER}/mingw32")
-
-# Ensure cmake doesn't find things in the wrong places
-set (CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER) # Find programs on host
-set (CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY) # Find libs in target
-set (CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY) # Find includes in target
-
-set (MINGW_FLAG "-m32")
-set (USE_LTO_DEFAULT false)
diff --git a/cmake/FindBerkeleyDB.cmake b/cmake/FindBerkeleyDB.cmake
deleted file mode 100644
index 916d8f9..0000000
--- a/cmake/FindBerkeleyDB.cmake
+++ /dev/null
@@ -1,25 +0,0 @@
-# - Try to find Berkeley DB
-# Once done this will define
-#
-#  BERKELEY_DB_FOUND - system has Berkeley DB
-#  BERKELEY_DB_INCLUDE_DIR - the Berkeley DB include directory
-#  BERKELEY_DB_LIBRARIES - Link these to use Berkeley DB
-#  BERKELEY_DB_DEFINITIONS - Compiler switches required for using Berkeley DB
-
-# Copyright (c) 2006, Alexander Dymo, <adymo@kdevelop.org>
-#
-# Redistribution and use is allowed according to the terms of the BSD license.
-# For details see the accompanying COPYING-CMAKE-SCRIPTS file.
-
-find_path(BERKELEY_DB_INCLUDE_DIR db_cxx.h
-  /usr/include/db4
-  /usr/local/include/db4
-)
-
-find_library(BERKELEY_DB_LIBRARIES NAMES db_cxx )
-
-include(FindPackageHandleStandardArgs)
-find_package_handle_standard_args(Berkeley "Could not find Berkeley DB >= 4.1" BERKELEY_DB_INCLUDE_DIR BERKELEY_DB_LIBRARIES)
-# show the BERKELEY_DB_INCLUDE_DIR and BERKELEY_DB_LIBRARIES variables only in the advanced view
-mark_as_advanced(BERKELEY_DB_INCLUDE_DIR BERKELEY_DB_LIBRARIES )
-
diff --git a/cmake/test-protobuf.cpp b/cmake/test-protobuf.cpp
deleted file mode 100644
index 73b23c2..0000000
--- a/cmake/test-protobuf.cpp
+++ /dev/null
@@ -1,44 +0,0 @@
-// Copyright (c) 2018-2019, The Arqma Network
-// Copyright (c) 2014-2018, The Monero Project
-//
-// All rights reserved.
-//
-// Redistribution and use in source and binary forms, with or without modification, are
-// permitted provided that the following conditions are met:
-//
-// 1. Redistributions of source code must retain the above copyright notice, this list of
-//    conditions and the following disclaimer.
-//
-// 2. Redistributions in binary form must reproduce the above copyright notice, this list
-//    of conditions and the following disclaimer in the documentation and/or other
-//    materials provided with the distribution.
-//
-// 3. Neither the name of the copyright holder nor the names of its contributors may be
-//    used to endorse or promote products derived from this software without specific
-//    prior written permission.
-//
-// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
-// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
-// MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL
-// THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
-// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
-// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
-// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
-// STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF
-// THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-
-#include <string>
-#include <iostream>
-#include <google/protobuf/message.h>
-#include <google/protobuf/unknown_field_set.h>
-#include "test-protobuf.pb.h"
-
-int main(int argc, char *argv[]) {
-  google::protobuf::UnknownFieldSet ufs;
-  ufs.ClearAndFreeMemory();
-
-  Success sc;
-  sc.set_message("test");
-  sc.SerializeToOstream(&std::cerr);
-  return 0;
-}
diff --git a/cmake/test-protobuf.proto b/cmake/test-protobuf.proto
deleted file mode 100644
index bb80d6b..0000000
--- a/cmake/test-protobuf.proto
+++ /dev/null
@@ -1,7 +0,0 @@
-syntax = "proto2";
-
-import "google/protobuf/descriptor.proto";
-
-message Success {
-    optional string message = 1;
-}
\ No newline at end of file
diff --git a/cmake/test-static-assert.c b/cmake/test-static-assert.c
deleted file mode 100644
index 1cf5030..0000000
--- a/cmake/test-static-assert.c
+++ /dev/null
@@ -1,35 +0,0 @@
-// Copyright (c) 2018-2019, The Arqma Network
-// Copyright (c) 2014-2018, The Monero Project
-//
-// All rights reserved.
-//
-// Redistribution and use in source and binary forms, with or without modification, are
-// permitted provided that the following conditions are met:
-//
-// 1. Redistributions of source code must retain the above copyright notice, this list of
-//    conditions and the following disclaimer.
-//
-// 2. Redistributions in binary form must reproduce the above copyright notice, this list
-//    of conditions and the following disclaimer in the documentation and/or other
-//    materials provided with the distribution.
-//
-// 3. Neither the name of the copyright holder nor the names of its contributors may be
-//    used to endorse or promote products derived from this software without specific
-//    prior written permission.
-//
-// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
-// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
-// MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL
-// THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
-// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
-// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
-// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
-// STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF
-// THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-
-#include <assert.h>
-
-static_assert(1, "FAIL");
-int main(int argc, char *argv[]) {
-	return 0;
-}
diff --git a/cmake/test-static-assert.cpp b/cmake/test-static-assert.cpp
deleted file mode 100644
index 1cf5030..0000000
--- a/cmake/test-static-assert.cpp
+++ /dev/null
@@ -1,35 +0,0 @@
-// Copyright (c) 2018-2019, The Arqma Network
-// Copyright (c) 2014-2018, The Monero Project
-//
-// All rights reserved.
-//
-// Redistribution and use in source and binary forms, with or without modification, are
-// permitted provided that the following conditions are met:
-//
-// 1. Redistributions of source code must retain the above copyright notice, this list of
-//    conditions and the following disclaimer.
-//
-// 2. Redistributions in binary form must reproduce the above copyright notice, this list
-//    of conditions and the following disclaimer in the documentation and/or other
-//    materials provided with the distribution.
-//
-// 3. Neither the name of the copyright holder nor the names of its contributors may be
-//    used to endorse or promote products derived from this software without specific
-//    prior written permission.
-//
-// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
-// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
-// MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL
-// THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
-// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
-// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
-// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
-// STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF
-// THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-
-#include <assert.h>
-
-static_assert(1, "FAIL");
-int main(int argc, char *argv[]) {
-	return 0;
-}
diff --git a/contrib/apple/brew b/contrib/apple/brew
index 91eff85..11f280b 100644
--- a/contrib/apple/brew
+++ b/contrib/apple/brew
@@ -19,11 +19,7 @@ brew "pkg-config"
 brew "boost"
 brew "openssl"
 brew "hidapi"
-brew "zmq"
-brew "libpgm"
-brew "unbound"
 brew "libsodium"
-brew "miniupnpc"
 brew "readline"
 brew "ldns"
 brew "expat"
@@ -31,4 +27,3 @@ brew "doxygen"
 brew "graphviz"
 brew "libunwind-headers"
 brew "xz"
-brew "protobuf"
\ No newline at end of file
diff --git a/contrib/depends/Makefile b/contrib/depends/Makefile
index 6c19073..39715c2 100644
--- a/contrib/depends/Makefile
+++ b/contrib/depends/Makefile
@@ -4,13 +4,14 @@ SOURCES_PATH ?= $(BASEDIR)/sources
 BASE_CACHE ?= $(BASEDIR)/built
 SDK_PATH ?= $(BASEDIR)/SDKs
 FALLBACK_DOWNLOAD_PATH ?= https://bitcoincore.org/depends-sources
+MULTIPROCESS ?=
 
 BUILD = $(shell ./config.guess)
 HOST ?= $(BUILD)
 PATCHES_PATH = $(BASEDIR)/patches
 BASEDIR = $(CURDIR)
 HASH_LENGTH:=11
-DOWNLOAD_CONNECT_TIMEOUT:=10
+DOWNLOAD_CONNECT_TIMEOUT:=30
 DOWNLOAD_RETRIES:=3
 HOST_ID_SALT ?= salt
 BUILD_ID_SALT ?= salt
@@ -101,14 +102,26 @@ $(host_arch)_$(host_os)_id_string+=$(shell $(host_CXX) --version 2>/dev/null)
 $(host_arch)_$(host_os)_id_string+=$(shell $(host_RANLIB) --version 2>/dev/null)
 $(host_arch)_$(host_os)_id_string+=$(shell $(host_STRIP) --version 2>/dev/null)
 
+ifneq ($(strip $(FORCE_USE_SYSTEM_CLANG)),)
+build_id_string+=system_clang
+$(host_arch)_$(host_os)_id_string+=system_clang
+endif
+
+multiprocess_packages_$(MULTIPROCESS) = $(multiprocess_packages)
 
 packages += $($(host_arch)_$(host_os)_packages) $($(host_os)_packages)
 native_packages += $($(host_arch)_$(host_os)_native_packages) $($(host_os)_native_packages)
 
+ifeq ($(multiprocess_packages_),)
+packages += $(multiprocess_packages)
+native_packages += $(multiprocess_native_packages)
+endif
+
 all_packages = $(packages) $(native_packages)
 
 meta_depends = Makefile funcs.mk builders/default.mk hosts/default.mk hosts/$(host_os).mk builders/$(build_os).mk
 
+$(host_arch)_$(host_os)_native_binutils?=$($(host_os)_native_binutils)
 $(host_arch)_$(host_os)_native_toolchain?=$($(host_os)_native_toolchain)
 
 include funcs.mk
@@ -121,10 +134,14 @@ build-only-$(1)_$(3): CMAKE_TOOLCHAIN_DIR  = $(PREFIX)/$(3)/share/cmake/mxe-conf
 build-only-$(1)_$(3): CMAKE_STATIC_BOOL = $(if $(findstring shared,$(3)),OFF,ON)
 build-only-$(1)_$(3): CMAKE_SHARED_BOOL = $(if $(findstring shared,$(3)),ON,OFF)
 
-
+binutils_path=$($($(host_arch)_$(host_os)_native_binutils)_prefixbin)
+ifeq ($(strip $(FORCE_USE_SYSTEM_CLANG)),)
 toolchain_path=$($($(host_arch)_$(host_os)_native_toolchain)_prefixbin)
-final_build_id_long+=$(shell $(build_SHA256SUM) config.site.in)
+else
+toolchain_path=
+endif
 final_build_id_long+=$(shell $(build_SHA256SUM) toolchain.cmake.in)
+final_build_id_long+=$(shell $(build_SHA256SUM) config.site.in)
 final_build_id+=$(shell echo -n "$(final_build_id_long)" | $(build_SHA256SUM) | cut -c-$(HASH_LENGTH))
 $(host_prefix)/.stamp_$(final_build_id): $(native_packages) $(packages)
 	$(AT)rm -rf $(@D)
@@ -139,10 +156,10 @@ $(host_prefix)/share/config.site : config.site.in $(host_prefix)/.stamp_$(final_
 	$(AT)sed -e 's|@HOST@|$(host)|' \
             -e 's|@CC@|$(toolchain_path)$(host_CC)|' \
             -e 's|@CXX@|$(toolchain_path)$(host_CXX)|' \
-            -e 's|@AR@|$(toolchain_path)$(host_AR)|' \
-            -e 's|@RANLIB@|$(toolchain_path)$(host_RANLIB)|' \
-            -e 's|@NM@|$(toolchain_path)$(host_NM)|' \
-            -e 's|@STRIP@|$(toolchain_path)$(host_STRIP)|' \
+            -e 's|@AR@|$(binutils_path)$(host_AR)|' \
+            -e 's|@RANLIB@|$(binutils_path)$(host_RANLIB)|' \
+            -e 's|@NM@|$(binutils_path)$(host_NM)|' \
+            -e 's|@STRIP@|$(binutils_path)$(host_STRIP)|' \
             -e 's|@build_os@|$(build_os)|' \
             -e 's|@host_os@|$(host_os)|' \
             -e 's|@CFLAGS@|$(strip $(host_CFLAGS) $(host_$(release_type)_CFLAGS))|' \
@@ -150,6 +167,7 @@ $(host_prefix)/share/config.site : config.site.in $(host_prefix)/.stamp_$(final_
             -e 's|@CPPFLAGS@|$(strip $(host_CPPFLAGS) $(host_$(release_type)_CPPFLAGS))|' \
             -e 's|@LDFLAGS@|$(strip $(host_LDFLAGS) $(host_$(release_type)_LDFLAGS))|' \
             -e 's|@allow_host_packages@|$(ALLOW_HOST_PACKAGES)|' \
+            -e 's|@multiprocess@|$(MULTIPROCESS)|' \
             -e 's|@debug@|$(DEBUG)|' \
             $< > $@
 	$(AT)touch $@
@@ -159,10 +177,10 @@ $(host_prefix)/share/toolchain.cmake : toolchain.cmake.in $(host_prefix)/.stamp_
 	$(AT)sed -e 's|@HOST@|$(host)|' \
             -e 's|@CC@|$(toolchain_path)$(host_CC)|' \
             -e 's|@CXX@|$(toolchain_path)$(host_CXX)|' \
-            -e 's|@AR@|$(toolchain_path)$(host_AR)|' \
-            -e 's|@RANLIB@|$(toolchain_path)$(host_RANLIB)|' \
-            -e 's|@NM@|$(toolchain_path)$(host_NM)|' \
-            -e 's|@STRIP@|$(toolchain_path)$(host_STRIP)|' \
+            -e 's|@AR@|$(binutils_path)$(host_AR)|' \
+            -e 's|@RANLIB@|$(binutils_path)$(host_RANLIB)|' \
+            -e 's|@NM@|$(binutils_path)$(host_NM)|' \
+            -e 's|@STRIP@|$(binutils_path)$(host_STRIP)|' \
             -e 's|@build_os@|$(build_os)|' \
             -e 's|@host_os@|$(host_os)|' \
             -e 's|@CFLAGS@|$(strip $(host_CFLAGS) $(host_$(release_type)_CFLAGS))|' \
@@ -210,7 +228,7 @@ install: check-packages $(host_prefix)/share/toolchain.cmake
 download-one: check-sources $(all_sources)
 
 download-osx:
-	@$(MAKE) -s HOST=x86_64-apple-darwin14 download-one
+	@$(MAKE) -s HOST=x86_64-apple-darwin16 download-one
 download-linux:
 	@$(MAKE) -s HOST=x86_64-unknown-linux-gnu download-one
 download-win:
diff --git a/contrib/depends/builders/darwin.mk b/contrib/depends/builders/darwin.mk
index c2bfcae..a79bcb4 100644
--- a/contrib/depends/builders/darwin.mk
+++ b/contrib/depends/builders/darwin.mk
@@ -1,17 +1,17 @@
-build_darwin_CC: = $(shell xcrun -f clang)
-build_darwin_CXX: = $(shell xcrun -f clang++)
-build_darwin_AR: = $(shell xcrun -f ar)
-build_darwin_RANLIB: = $(shell xcrun -f ranlib)
-build_darwin_STRIP: = $(shell xcrun -f strip)
-build_darwin_OTOOL: = $(shell xcrun -f otool)
-build_darwin_NM: = $(shell xcrun -f nm)
+build_darwin_CC:=$(shell xcrun -f clang) --sysroot $(shell xcrun --show-sdk-path)
+build_darwin_CXX:=$(shell xcrun -f clang++) --sysroot $(shell xcrun --show-sdk-path)
+build_darwin_AR:=$(shell xcrun -f ar)
+build_darwin_RANLIB:=$(shell xcrun -f ranlib)
+build_darwin_STRIP:=$(shell xcrun -f strip)
+build_darwin_OTOOL:=$(shell xcrun -f otool)
+build_darwin_NM:=$(shell xcrun -f nm)
 build_darwin_INSTALL_NAME_TOOL:=$(shell xcrun -f install_name_tool)
 build_darwin_SHA256SUM=shasum -a 256
 build_darwin_DOWNLOAD=curl --location --fail --connect-timeout $(DOWNLOAD_CONNECT_TIMEOUT) --retry $(DOWNLOAD_RETRIES) -o
 
 #darwin host on darwin builder. overrides darwin host preferences.
-darwin_CC=$(shell xcrun -f clang) -mmacosx-version-min=$(OSX_MIN_VERSION)
-darwin_CXX:=$(shell xcrun -f clang++) -mmacosx-version-min=$(OSX_MIN_VERSION) -stdlib=libc++
+darwin_CC:=$(shell xcrun -f clang) -mmacosx-version-min=$(OSX_MIN_VERSION) --sysroot $(shell xcrun --show-sdk-path)
+darwin_CXX:=$(shell xcrun -f clang++) -mmacosx-version-min=$(OSX_MIN_VERSION) -stdlib=libc++ --sysroot $(shell xcrun --show-sdk-path)
 darwin_AR:=$(shell xcrun -f ar)
 darwin_RANLIB:=$(shell xcrun -f ranlib)
 darwin_STRIP:=$(shell xcrun -f strip)
@@ -19,4 +19,5 @@ darwin_LIBTOOL:=$(shell xcrun -f libtool)
 darwin_OTOOL:=$(shell xcrun -f otool)
 darwin_NM:=$(shell xcrun -f nm)
 darwin_INSTALL_NAME_TOOL:=$(shell xcrun -f install_name_tool)
+darwin_native_binutils=
 darwin_native_toolchain=
diff --git a/contrib/depends/builders/default.mk b/contrib/depends/builders/default.mk
index f097db6..c419143 100644
--- a/contrib/depends/builders/default.mk
+++ b/contrib/depends/builders/default.mk
@@ -17,4 +17,4 @@ define add_build_flags_func
 build_$(build_arch)_$(build_os)_$1 += $(build_$(build_os)_$1)
 build_$1=$$(build_$(build_arch)_$(build_os)_$1)
 endef
-$(foreach flags, CFLAGS CXXFLAGS LDFLAGS, $(eval $(call add_build_flags_func,$(flags))))
+$(foreach flags, CFLAGS CXXFLAGS ARFLAGS LDFLAGS, $(eval $(call add_build_flags_func,$(flags))))
diff --git a/contrib/depends/config.guess b/contrib/depends/config.guess
index 69ed3e5..7f9ebbe 100755
--- a/contrib/depends/config.guess
+++ b/contrib/depends/config.guess
@@ -1,8 +1,8 @@
 #! /bin/sh
 # Attempt to guess a canonical system name.
-#   Copyright 1992-2017 Free Software Foundation, Inc.
+#   Copyright 1992-2019 Free Software Foundation, Inc.
 
-timestamp='2017-03-05'
+timestamp='2019-09-10'
 
 # This file is free software; you can redistribute it and/or modify it
 # under the terms of the GNU General Public License as published by
@@ -15,7 +15,7 @@ timestamp='2017-03-05'
 # General Public License for more details.
 #
 # You should have received a copy of the GNU General Public License
-# along with this program; if not, see <http://www.gnu.org/licenses/>.
+# along with this program; if not, see <https://www.gnu.org/licenses/>.
 #
 # As a special exception to the GNU General Public License, if you
 # distribute this file as part of a program that contains a
@@ -27,7 +27,7 @@ timestamp='2017-03-05'
 # Originally written by Per Bothner; maintained since 2000 by Ben Elliston.
 #
 # You can get the latest version of this script from:
-# http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess
+# https://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess
 #
 # Please send patches to <config-patches@gnu.org>.
 
@@ -39,7 +39,7 @@ Usage: $0 [OPTION]
 
 Output the configuration name of the system \`$me' is run on.
 
-Operation modes:
+Options:
   -h, --help         print this help, then exit
   -t, --time-stamp   print date of last modification, then exit
   -v, --version      print version number, then exit
@@ -50,7 +50,7 @@ version="\
 GNU config.guess ($timestamp)
 
 Originally written by Per Bothner.
-Copyright 1992-2017 Free Software Foundation, Inc.
+Copyright 1992-2019 Free Software Foundation, Inc.
 
 This is free software; see the source for copying conditions.  There is NO
 warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
@@ -84,8 +84,6 @@ if test $# != 0; then
   exit 1
 fi
 
-trap 'exit 1' 1 2 15
-
 # CC_FOR_BUILD -- compiler used by this script. Note that the use of a
 # compiler to aid in system detection is discouraged as it requires
 # temporary files to be created and, as you can see below, it is a
@@ -96,34 +94,38 @@ trap 'exit 1' 1 2 15
 
 # Portable tmp directory creation inspired by the Autoconf team.
 
-set_cc_for_build='
-trap "exitcode=\$?; (rm -f \$tmpfiles 2>/dev/null; rmdir \$tmp 2>/dev/null) && exit \$exitcode" 0 ;
-trap "rm -f \$tmpfiles 2>/dev/null; rmdir \$tmp 2>/dev/null; exit 1" 1 2 13 15 ;
-: ${TMPDIR=/tmp} ;
- { tmp=`(umask 077 && mktemp -d "$TMPDIR/cgXXXXXX") 2>/dev/null` && test -n "$tmp" && test -d "$tmp" ; } ||
- { test -n "$RANDOM" && tmp=$TMPDIR/cg$$-$RANDOM && (umask 077 && mkdir $tmp) ; } ||
- { tmp=$TMPDIR/cg-$$ && (umask 077 && mkdir $tmp) && echo "Warning: creating insecure temp directory" >&2 ; } ||
- { echo "$me: cannot create a temporary directory in $TMPDIR" >&2 ; exit 1 ; } ;
-dummy=$tmp/dummy ;
-tmpfiles="$dummy.c $dummy.o $dummy.rel $dummy" ;
-case $CC_FOR_BUILD,$HOST_CC,$CC in
- ,,)    echo "int x;" > $dummy.c ;
-	for c in cc gcc c89 c99 ; do
-	  if ($c -c -o $dummy.o $dummy.c) >/dev/null 2>&1 ; then
-	     CC_FOR_BUILD="$c"; break ;
-	  fi ;
-	done ;
-	if test x"$CC_FOR_BUILD" = x ; then
-	  CC_FOR_BUILD=no_compiler_found ;
-	fi
-	;;
- ,,*)   CC_FOR_BUILD=$CC ;;
- ,*,*)  CC_FOR_BUILD=$HOST_CC ;;
-esac ; set_cc_for_build= ;'
+tmp=
+# shellcheck disable=SC2172
+trap 'test -z "$tmp" || rm -fr "$tmp"' 0 1 2 13 15
+
+set_cc_for_build() {
+    : "${TMPDIR=/tmp}"
+    # shellcheck disable=SC2039
+    { tmp=`(umask 077 && mktemp -d "$TMPDIR/cgXXXXXX") 2>/dev/null` && test -n "$tmp" && test -d "$tmp" ; } ||
+	{ test -n "$RANDOM" && tmp=$TMPDIR/cg$$-$RANDOM && (umask 077 && mkdir "$tmp" 2>/dev/null) ; } ||
+	{ tmp=$TMPDIR/cg-$$ && (umask 077 && mkdir "$tmp" 2>/dev/null) && echo "Warning: creating insecure temp directory" >&2 ; } ||
+	{ echo "$me: cannot create a temporary directory in $TMPDIR" >&2 ; exit 1 ; }
+    dummy=$tmp/dummy
+    case ${CC_FOR_BUILD-},${HOST_CC-},${CC-} in
+	,,)    echo "int x;" > "$dummy.c"
+	       for driver in cc gcc c89 c99 ; do
+		   if ($driver -c -o "$dummy.o" "$dummy.c") >/dev/null 2>&1 ; then
+		       CC_FOR_BUILD="$driver"
+		       break
+		   fi
+	       done
+	       if test x"$CC_FOR_BUILD" = x ; then
+		   CC_FOR_BUILD=no_compiler_found
+	       fi
+	       ;;
+	,,*)   CC_FOR_BUILD=$CC ;;
+	,*,*)  CC_FOR_BUILD=$HOST_CC ;;
+    esac
+}
 
 # This is needed to find uname on a Pyramid OSx when run in the BSD universe.
 # (ghazi@noc.rutgers.edu 1994-08-24)
-if (test -f /.attbin/uname) >/dev/null 2>&1 ; then
+if test -f /.attbin/uname ; then
 	PATH=$PATH:/.attbin ; export PATH
 fi
 
@@ -132,14 +134,14 @@ UNAME_RELEASE=`(uname -r) 2>/dev/null` || UNAME_RELEASE=unknown
 UNAME_SYSTEM=`(uname -s) 2>/dev/null`  || UNAME_SYSTEM=unknown
 UNAME_VERSION=`(uname -v) 2>/dev/null` || UNAME_VERSION=unknown
 
-case "${UNAME_SYSTEM}" in
+case "$UNAME_SYSTEM" in
 Linux|GNU|GNU/*)
 	# If the system lacks a compiler, then just pick glibc.
 	# We could probably try harder.
 	LIBC=gnu
 
-	eval $set_cc_for_build
-	cat <<-EOF > $dummy.c
+	set_cc_for_build
+	cat <<-EOF > "$dummy.c"
 	#include <features.h>
 	#if defined(__UCLIBC__)
 	LIBC=uclibc
@@ -149,13 +151,20 @@ Linux|GNU|GNU/*)
 	LIBC=gnu
 	#endif
 	EOF
-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^LIBC' | sed 's, ,,g'`
+	eval "`$CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^LIBC' | sed 's, ,,g'`"
+
+	# If ldd exists, use it to detect musl libc.
+	if command -v ldd >/dev/null && \
+		ldd --version 2>&1 | grep -q ^musl
+	then
+	    LIBC=musl
+	fi
 	;;
 esac
 
 # Note: order is significant - the case branches are not exclusive.
 
-case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
+case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
     *:NetBSD:*:*)
 	# NetBSD (nbsd) targets should (where applicable) match one or
 	# more of the tuples: *-*-netbsdelf*, *-*-netbsdaout*,
@@ -169,30 +178,30 @@ case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
 	# portion of the name.  We always set it to "unknown".
 	sysctl="sysctl -n hw.machine_arch"
 	UNAME_MACHINE_ARCH=`(uname -p 2>/dev/null || \
-	    /sbin/$sysctl 2>/dev/null || \
-	    /usr/sbin/$sysctl 2>/dev/null || \
+	    "/sbin/$sysctl" 2>/dev/null || \
+	    "/usr/sbin/$sysctl" 2>/dev/null || \
 	    echo unknown)`
-	case "${UNAME_MACHINE_ARCH}" in
+	case "$UNAME_MACHINE_ARCH" in
 	    armeb) machine=armeb-unknown ;;
 	    arm*) machine=arm-unknown ;;
 	    sh3el) machine=shl-unknown ;;
 	    sh3eb) machine=sh-unknown ;;
 	    sh5el) machine=sh5le-unknown ;;
 	    earmv*)
-		arch=`echo ${UNAME_MACHINE_ARCH} | sed -e 's,^e\(armv[0-9]\).*$,\1,'`
-		endian=`echo ${UNAME_MACHINE_ARCH} | sed -ne 's,^.*\(eb\)$,\1,p'`
-		machine=${arch}${endian}-unknown
+		arch=`echo "$UNAME_MACHINE_ARCH" | sed -e 's,^e\(armv[0-9]\).*$,\1,'`
+		endian=`echo "$UNAME_MACHINE_ARCH" | sed -ne 's,^.*\(eb\)$,\1,p'`
+		machine="${arch}${endian}"-unknown
 		;;
-	    *) machine=${UNAME_MACHINE_ARCH}-unknown ;;
+	    *) machine="$UNAME_MACHINE_ARCH"-unknown ;;
 	esac
 	# The Operating System including object format, if it has switched
 	# to ELF recently (or will in the future) and ABI.
-	case "${UNAME_MACHINE_ARCH}" in
+	case "$UNAME_MACHINE_ARCH" in
 	    earm*)
 		os=netbsdelf
 		;;
 	    arm*|i386|m68k|ns32k|sh3*|sparc|vax)
-		eval $set_cc_for_build
+		set_cc_for_build
 		if echo __ELF__ | $CC_FOR_BUILD -E - 2>/dev/null \
 			| grep -q __ELF__
 		then
@@ -208,10 +217,10 @@ case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
 		;;
 	esac
 	# Determine ABI tags.
-	case "${UNAME_MACHINE_ARCH}" in
+	case "$UNAME_MACHINE_ARCH" in
 	    earm*)
 		expr='s/^earmv[0-9]/-eabi/;s/eb$//'
-		abi=`echo ${UNAME_MACHINE_ARCH} | sed -e "$expr"`
+		abi=`echo "$UNAME_MACHINE_ARCH" | sed -e "$expr"`
 		;;
 	esac
 	# The OS release
@@ -219,45 +228,60 @@ case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
 	# thus, need a distinct triplet. However, they do not need
 	# kernel version information, so it can be replaced with a
 	# suitable tag, in the style of linux-gnu.
-	case "${UNAME_VERSION}" in
+	case "$UNAME_VERSION" in
 	    Debian*)
 		release='-gnu'
 		;;
 	    *)
-		release=`echo ${UNAME_RELEASE} | sed -e 's/[-_].*//' | cut -d. -f1,2`
+		release=`echo "$UNAME_RELEASE" | sed -e 's/[-_].*//' | cut -d. -f1,2`
 		;;
 	esac
 	# Since CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM:
 	# contains redundant information, the shorter form:
 	# CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM is used.
-	echo "${machine}-${os}${release}${abi}"
+	echo "$machine-${os}${release}${abi-}"
 	exit ;;
     *:Bitrig:*:*)
 	UNAME_MACHINE_ARCH=`arch | sed 's/Bitrig.//'`
-	echo ${UNAME_MACHINE_ARCH}-unknown-bitrig${UNAME_RELEASE}
+	echo "$UNAME_MACHINE_ARCH"-unknown-bitrig"$UNAME_RELEASE"
 	exit ;;
     *:OpenBSD:*:*)
 	UNAME_MACHINE_ARCH=`arch | sed 's/OpenBSD.//'`
-	echo ${UNAME_MACHINE_ARCH}-unknown-openbsd${UNAME_RELEASE}
+	echo "$UNAME_MACHINE_ARCH"-unknown-openbsd"$UNAME_RELEASE"
 	exit ;;
     *:LibertyBSD:*:*)
 	UNAME_MACHINE_ARCH=`arch | sed 's/^.*BSD\.//'`
-	echo ${UNAME_MACHINE_ARCH}-unknown-libertybsd${UNAME_RELEASE}
+	echo "$UNAME_MACHINE_ARCH"-unknown-libertybsd"$UNAME_RELEASE"
+	exit ;;
+    *:MidnightBSD:*:*)
+	echo "$UNAME_MACHINE"-unknown-midnightbsd"$UNAME_RELEASE"
 	exit ;;
     *:ekkoBSD:*:*)
-	echo ${UNAME_MACHINE}-unknown-ekkobsd${UNAME_RELEASE}
+	echo "$UNAME_MACHINE"-unknown-ekkobsd"$UNAME_RELEASE"
 	exit ;;
     *:SolidBSD:*:*)
-	echo ${UNAME_MACHINE}-unknown-solidbsd${UNAME_RELEASE}
+	echo "$UNAME_MACHINE"-unknown-solidbsd"$UNAME_RELEASE"
+	exit ;;
+    *:OS108:*:*)
+	echo "$UNAME_MACHINE"-unknown-os108_"$UNAME_RELEASE"
 	exit ;;
     macppc:MirBSD:*:*)
-	echo powerpc-unknown-mirbsd${UNAME_RELEASE}
+	echo powerpc-unknown-mirbsd"$UNAME_RELEASE"
 	exit ;;
     *:MirBSD:*:*)
-	echo ${UNAME_MACHINE}-unknown-mirbsd${UNAME_RELEASE}
+	echo "$UNAME_MACHINE"-unknown-mirbsd"$UNAME_RELEASE"
 	exit ;;
     *:Sortix:*:*)
-	echo ${UNAME_MACHINE}-unknown-sortix
+	echo "$UNAME_MACHINE"-unknown-sortix
+	exit ;;
+    *:Twizzler:*:*)
+	echo "$UNAME_MACHINE"-unknown-twizzler
+	exit ;;
+    *:Redox:*:*)
+	echo "$UNAME_MACHINE"-unknown-redox
+	exit ;;
+    mips:OSF1:*.*)
+	echo mips-dec-osf1
 	exit ;;
     alpha:OSF1:*:*)
 	case $UNAME_RELEASE in
@@ -310,28 +334,19 @@ case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
 	# A Tn.n version is a released field test version.
 	# A Xn.n version is an unreleased experimental baselevel.
 	# 1.2 uses "1.2" for uname -r.
-	echo ${UNAME_MACHINE}-dec-osf`echo ${UNAME_RELEASE} | sed -e 's/^[PVTX]//' | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz`
+	echo "$UNAME_MACHINE"-dec-osf"`echo "$UNAME_RELEASE" | sed -e 's/^[PVTX]//' | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz`"
 	# Reset EXIT trap before exiting to avoid spurious non-zero exit code.
 	exitcode=$?
 	trap '' 0
 	exit $exitcode ;;
-    Alpha\ *:Windows_NT*:*)
-	# How do we know it's Interix rather than the generic POSIX subsystem?
-	# Should we change UNAME_MACHINE based on the output of uname instead
-	# of the specific Alpha model?
-	echo alpha-pc-interix
-	exit ;;
-    21064:Windows_NT:50:3)
-	echo alpha-dec-winnt3.5
-	exit ;;
     Amiga*:UNIX_System_V:4.0:*)
 	echo m68k-unknown-sysv4
 	exit ;;
     *:[Aa]miga[Oo][Ss]:*:*)
-	echo ${UNAME_MACHINE}-unknown-amigaos
+	echo "$UNAME_MACHINE"-unknown-amigaos
 	exit ;;
     *:[Mm]orph[Oo][Ss]:*:*)
-	echo ${UNAME_MACHINE}-unknown-morphos
+	echo "$UNAME_MACHINE"-unknown-morphos
 	exit ;;
     *:OS/390:*:*)
 	echo i370-ibm-openedition
@@ -343,7 +358,7 @@ case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
 	echo powerpc-ibm-os400
 	exit ;;
     arm:RISC*:1.[012]*:*|arm:riscix:1.[012]*:*)
-	echo arm-acorn-riscix${UNAME_RELEASE}
+	echo arm-acorn-riscix"$UNAME_RELEASE"
 	exit ;;
     arm*:riscos:*:*|arm*:RISCOS:*:*)
 	echo arm-unknown-riscos
@@ -370,19 +385,19 @@ case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
 	    sparc) echo sparc-icl-nx7; exit ;;
 	esac ;;
     s390x:SunOS:*:*)
-	echo ${UNAME_MACHINE}-ibm-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+	echo "$UNAME_MACHINE"-ibm-solaris2"`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`"
 	exit ;;
     sun4H:SunOS:5.*:*)
-	echo sparc-hal-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+	echo sparc-hal-solaris2"`echo "$UNAME_RELEASE"|sed -e 's/[^.]*//'`"
 	exit ;;
     sun4*:SunOS:5.*:* | tadpole*:SunOS:5.*:*)
-	echo sparc-sun-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+	echo sparc-sun-solaris2"`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`"
 	exit ;;
     i86pc:AuroraUX:5.*:* | i86xen:AuroraUX:5.*:*)
-	echo i386-pc-auroraux${UNAME_RELEASE}
+	echo i386-pc-auroraux"$UNAME_RELEASE"
 	exit ;;
     i86pc:SunOS:5.*:* | i86xen:SunOS:5.*:*)
-	eval $set_cc_for_build
+	set_cc_for_build
 	SUN_ARCH=i386
 	# If there is a compiler, see if it is configured for 64-bit objects.
 	# Note that the Sun cc does not turn __LP64__ into 1 like gcc does.
@@ -395,13 +410,13 @@ case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
 		SUN_ARCH=x86_64
 	    fi
 	fi
-	echo ${SUN_ARCH}-pc-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+	echo "$SUN_ARCH"-pc-solaris2"`echo "$UNAME_RELEASE"|sed -e 's/[^.]*//'`"
 	exit ;;
     sun4*:SunOS:6*:*)
 	# According to config.sub, this is the proper way to canonicalize
 	# SunOS6.  Hard to guess exactly what SunOS6 will be like, but
 	# it's likely to be more like Solaris than SunOS4.
-	echo sparc-sun-solaris3`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+	echo sparc-sun-solaris3"`echo "$UNAME_RELEASE"|sed -e 's/[^.]*//'`"
 	exit ;;
     sun4*:SunOS:*:*)
 	case "`/usr/bin/arch -k`" in
@@ -410,25 +425,25 @@ case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
 		;;
 	esac
 	# Japanese Language versions have a version number like `4.1.3-JL'.
-	echo sparc-sun-sunos`echo ${UNAME_RELEASE}|sed -e 's/-/_/'`
+	echo sparc-sun-sunos"`echo "$UNAME_RELEASE"|sed -e 's/-/_/'`"
 	exit ;;
     sun3*:SunOS:*:*)
-	echo m68k-sun-sunos${UNAME_RELEASE}
+	echo m68k-sun-sunos"$UNAME_RELEASE"
 	exit ;;
     sun*:*:4.2BSD:*)
 	UNAME_RELEASE=`(sed 1q /etc/motd | awk '{print substr($5,1,3)}') 2>/dev/null`
-	test "x${UNAME_RELEASE}" = x && UNAME_RELEASE=3
+	test "x$UNAME_RELEASE" = x && UNAME_RELEASE=3
 	case "`/bin/arch`" in
 	    sun3)
-		echo m68k-sun-sunos${UNAME_RELEASE}
+		echo m68k-sun-sunos"$UNAME_RELEASE"
 		;;
 	    sun4)
-		echo sparc-sun-sunos${UNAME_RELEASE}
+		echo sparc-sun-sunos"$UNAME_RELEASE"
 		;;
 	esac
 	exit ;;
     aushp:SunOS:*:*)
-	echo sparc-auspex-sunos${UNAME_RELEASE}
+	echo sparc-auspex-sunos"$UNAME_RELEASE"
 	exit ;;
     # The situation for MiNT is a little confusing.  The machine name
     # can be virtually everything (everything which is not
@@ -439,44 +454,44 @@ case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
     # MiNT.  But MiNT is downward compatible to TOS, so this should
     # be no problem.
     atarist[e]:*MiNT:*:* | atarist[e]:*mint:*:* | atarist[e]:*TOS:*:*)
-	echo m68k-atari-mint${UNAME_RELEASE}
+	echo m68k-atari-mint"$UNAME_RELEASE"
 	exit ;;
     atari*:*MiNT:*:* | atari*:*mint:*:* | atarist[e]:*TOS:*:*)
-	echo m68k-atari-mint${UNAME_RELEASE}
+	echo m68k-atari-mint"$UNAME_RELEASE"
 	exit ;;
     *falcon*:*MiNT:*:* | *falcon*:*mint:*:* | *falcon*:*TOS:*:*)
-	echo m68k-atari-mint${UNAME_RELEASE}
+	echo m68k-atari-mint"$UNAME_RELEASE"
 	exit ;;
     milan*:*MiNT:*:* | milan*:*mint:*:* | *milan*:*TOS:*:*)
-	echo m68k-milan-mint${UNAME_RELEASE}
+	echo m68k-milan-mint"$UNAME_RELEASE"
 	exit ;;
     hades*:*MiNT:*:* | hades*:*mint:*:* | *hades*:*TOS:*:*)
-	echo m68k-hades-mint${UNAME_RELEASE}
+	echo m68k-hades-mint"$UNAME_RELEASE"
 	exit ;;
     *:*MiNT:*:* | *:*mint:*:* | *:*TOS:*:*)
-	echo m68k-unknown-mint${UNAME_RELEASE}
+	echo m68k-unknown-mint"$UNAME_RELEASE"
 	exit ;;
     m68k:machten:*:*)
-	echo m68k-apple-machten${UNAME_RELEASE}
+	echo m68k-apple-machten"$UNAME_RELEASE"
 	exit ;;
     powerpc:machten:*:*)
-	echo powerpc-apple-machten${UNAME_RELEASE}
+	echo powerpc-apple-machten"$UNAME_RELEASE"
 	exit ;;
     RISC*:Mach:*:*)
 	echo mips-dec-mach_bsd4.3
 	exit ;;
     RISC*:ULTRIX:*:*)
-	echo mips-dec-ultrix${UNAME_RELEASE}
+	echo mips-dec-ultrix"$UNAME_RELEASE"
 	exit ;;
     VAX*:ULTRIX*:*:*)
-	echo vax-dec-ultrix${UNAME_RELEASE}
+	echo vax-dec-ultrix"$UNAME_RELEASE"
 	exit ;;
     2020:CLIX:*:* | 2430:CLIX:*:*)
-	echo clipper-intergraph-clix${UNAME_RELEASE}
+	echo clipper-intergraph-clix"$UNAME_RELEASE"
 	exit ;;
     mips:*:*:UMIPS | mips:*:*:RISCos)
-	eval $set_cc_for_build
-	sed 's/^	//' << EOF >$dummy.c
+	set_cc_for_build
+	sed 's/^	//' << EOF > "$dummy.c"
 #ifdef __cplusplus
 #include <stdio.h>  /* for printf() prototype */
 	int main (int argc, char *argv[]) {
@@ -485,23 +500,23 @@ case "${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}" in
 #endif
 	#if defined (host_mips) && defined (MIPSEB)
 	#if defined (SYSTYPE_SYSV)
-	  printf ("mips-mips-riscos%ssysv\n", argv[1]); exit (0);
+	  printf ("mips-mips-riscos%ssysv\\n", argv[1]); exit (0);
 	#endif
 	#if defined (SYSTYPE_SVR4)
-	  printf ("mips-mips-riscos%ssvr4\n", argv[1]); exit (0);
+	  printf ("mips-mips-riscos%ssvr4\\n", argv[1]); exit (0);
 	#endif
 	#if defined (SYSTYPE_BSD43) || defined(SYSTYPE_BSD)
-	  printf ("mips-mips-riscos%sbsd\n", argv[1]); exit (0);
+	  printf ("mips-mips-riscos%sbsd\\n", argv[1]); exit (0);
 	#endif
 	#endif
 	  exit (-1);
 	}
 EOF
-	$CC_FOR_BUILD -o $dummy $dummy.c &&
-	  dummyarg=`echo "${UNAME_RELEASE}" | sed -n 's/\([0-9]*\).*/\1/p'` &&
-	  SYSTEM_NAME=`$dummy $dummyarg` &&
+	$CC_FOR_BUILD -o "$dummy" "$dummy.c" &&
+	  dummyarg=`echo "$UNAME_RELEASE" | sed -n 's/\([0-9]*\).*/\1/p'` &&
+	  SYSTEM_NAME=`"$dummy" "$dummyarg"` &&
 	    { echo "$SYSTEM_NAME"; exit; }
-	echo mips-mips-riscos${UNAME_RELEASE}
+	echo mips-mips-riscos"$UNAME_RELEASE"
 	exit ;;
     Motorola:PowerMAX_OS:*:*)
 	echo powerpc-motorola-powermax
@@ -527,17 +542,17 @@ EOF
     AViiON:dgux:*:*)
 	# DG/UX returns AViiON for all architectures
 	UNAME_PROCESSOR=`/usr/bin/uname -p`
-	if [ $UNAME_PROCESSOR = mc88100 ] || [ $UNAME_PROCESSOR = mc88110 ]
+	if [ "$UNAME_PROCESSOR" = mc88100 ] || [ "$UNAME_PROCESSOR" = mc88110 ]
 	then
-	    if [ ${TARGET_BINARY_INTERFACE}x = m88kdguxelfx ] || \
-	       [ ${TARGET_BINARY_INTERFACE}x = x ]
+	    if [ "$TARGET_BINARY_INTERFACE"x = m88kdguxelfx ] || \
+	       [ "$TARGET_BINARY_INTERFACE"x = x ]
 	    then
-		echo m88k-dg-dgux${UNAME_RELEASE}
+		echo m88k-dg-dgux"$UNAME_RELEASE"
 	    else
-		echo m88k-dg-dguxbcs${UNAME_RELEASE}
+		echo m88k-dg-dguxbcs"$UNAME_RELEASE"
 	    fi
 	else
-	    echo i586-dg-dgux${UNAME_RELEASE}
+	    echo i586-dg-dgux"$UNAME_RELEASE"
 	fi
 	exit ;;
     M88*:DolphinOS:*:*)	# DolphinOS (SVR3)
@@ -554,7 +569,7 @@ EOF
 	echo m68k-tektronix-bsd
 	exit ;;
     *:IRIX*:*:*)
-	echo mips-sgi-irix`echo ${UNAME_RELEASE}|sed -e 's/-/_/g'`
+	echo mips-sgi-irix"`echo "$UNAME_RELEASE"|sed -e 's/-/_/g'`"
 	exit ;;
     ????????:AIX?:[12].1:2)   # AIX 2.2.1 or AIX 2.1.1 is RT/PC AIX.
 	echo romp-ibm-aix     # uname -m gives an 8 hex-code CPU id
@@ -566,14 +581,14 @@ EOF
 	if [ -x /usr/bin/oslevel ] ; then
 		IBM_REV=`/usr/bin/oslevel`
 	else
-		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
+		IBM_REV="$UNAME_VERSION.$UNAME_RELEASE"
 	fi
-	echo ${UNAME_MACHINE}-ibm-aix${IBM_REV}
+	echo "$UNAME_MACHINE"-ibm-aix"$IBM_REV"
 	exit ;;
     *:AIX:2:3)
 	if grep bos325 /usr/include/stdio.h >/dev/null 2>&1; then
-		eval $set_cc_for_build
-		sed 's/^		//' << EOF >$dummy.c
+		set_cc_for_build
+		sed 's/^		//' << EOF > "$dummy.c"
 		#include <sys/systemcfg.h>
 
 		main()
@@ -584,7 +599,7 @@ EOF
 			exit(0);
 			}
 EOF
-		if $CC_FOR_BUILD -o $dummy $dummy.c && SYSTEM_NAME=`$dummy`
+		if $CC_FOR_BUILD -o "$dummy" "$dummy.c" && SYSTEM_NAME=`"$dummy"`
 		then
 			echo "$SYSTEM_NAME"
 		else
@@ -598,7 +613,7 @@ EOF
 	exit ;;
     *:AIX:*:[4567])
 	IBM_CPU_ID=`/usr/sbin/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }'`
-	if /usr/sbin/lsattr -El ${IBM_CPU_ID} | grep ' POWER' >/dev/null 2>&1; then
+	if /usr/sbin/lsattr -El "$IBM_CPU_ID" | grep ' POWER' >/dev/null 2>&1; then
 		IBM_ARCH=rs6000
 	else
 		IBM_ARCH=powerpc
@@ -607,18 +622,18 @@ EOF
 		IBM_REV=`/usr/bin/lslpp -Lqc bos.rte.libc |
 			   awk -F: '{ print $3 }' | sed s/[0-9]*$/0/`
 	else
-		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
+		IBM_REV="$UNAME_VERSION.$UNAME_RELEASE"
 	fi
-	echo ${IBM_ARCH}-ibm-aix${IBM_REV}
+	echo "$IBM_ARCH"-ibm-aix"$IBM_REV"
 	exit ;;
     *:AIX:*:*)
 	echo rs6000-ibm-aix
 	exit ;;
-    ibmrt:4.4BSD:*|romp-ibm:BSD:*)
+    ibmrt:4.4BSD:*|romp-ibm:4.4BSD:*)
 	echo romp-ibm-bsd4.4
 	exit ;;
     ibmrt:*BSD:*|romp-ibm:BSD:*)            # covers RT/PC BSD and
-	echo romp-ibm-bsd${UNAME_RELEASE}   # 4.3 with uname added to
+	echo romp-ibm-bsd"$UNAME_RELEASE"   # 4.3 with uname added to
 	exit ;;                             # report: romp-ibm BSD 4.3
     *:BOSX:*:*)
 	echo rs6000-bull-bosx
@@ -633,28 +648,28 @@ EOF
 	echo m68k-hp-bsd4.4
 	exit ;;
     9000/[34678]??:HP-UX:*:*)
-	HPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`
-	case "${UNAME_MACHINE}" in
-	    9000/31? )            HP_ARCH=m68000 ;;
-	    9000/[34]?? )         HP_ARCH=m68k ;;
+	HPUX_REV=`echo "$UNAME_RELEASE"|sed -e 's/[^.]*.[0B]*//'`
+	case "$UNAME_MACHINE" in
+	    9000/31?)            HP_ARCH=m68000 ;;
+	    9000/[34]??)         HP_ARCH=m68k ;;
 	    9000/[678][0-9][0-9])
 		if [ -x /usr/bin/getconf ]; then
 		    sc_cpu_version=`/usr/bin/getconf SC_CPU_VERSION 2>/dev/null`
 		    sc_kernel_bits=`/usr/bin/getconf SC_KERNEL_BITS 2>/dev/null`
-		    case "${sc_cpu_version}" in
+		    case "$sc_cpu_version" in
 		      523) HP_ARCH=hppa1.0 ;; # CPU_PA_RISC1_0
 		      528) HP_ARCH=hppa1.1 ;; # CPU_PA_RISC1_1
 		      532)                      # CPU_PA_RISC2_0
-			case "${sc_kernel_bits}" in
+			case "$sc_kernel_bits" in
 			  32) HP_ARCH=hppa2.0n ;;
 			  64) HP_ARCH=hppa2.0w ;;
 			  '') HP_ARCH=hppa2.0 ;;   # HP-UX 10.20
 			esac ;;
 		    esac
 		fi
-		if [ "${HP_ARCH}" = "" ]; then
-		    eval $set_cc_for_build
-		    sed 's/^		//' << EOF >$dummy.c
+		if [ "$HP_ARCH" = "" ]; then
+		    set_cc_for_build
+		    sed 's/^		//' << EOF > "$dummy.c"
 
 		#define _HPUX_SOURCE
 		#include <stdlib.h>
@@ -687,13 +702,13 @@ EOF
 		    exit (0);
 		}
 EOF
-		    (CCOPTS="" $CC_FOR_BUILD -o $dummy $dummy.c 2>/dev/null) && HP_ARCH=`$dummy`
+		    (CCOPTS="" $CC_FOR_BUILD -o "$dummy" "$dummy.c" 2>/dev/null) && HP_ARCH=`"$dummy"`
 		    test -z "$HP_ARCH" && HP_ARCH=hppa
 		fi ;;
 	esac
-	if [ ${HP_ARCH} = hppa2.0w ]
+	if [ "$HP_ARCH" = hppa2.0w ]
 	then
-	    eval $set_cc_for_build
+	    set_cc_for_build
 
 	    # hppa2.0w-hp-hpux* has a 64-bit kernel and a compiler generating
 	    # 32-bit code.  hppa64-hp-hpux* has the same kernel and a compiler
@@ -712,15 +727,15 @@ EOF
 		HP_ARCH=hppa64
 	    fi
 	fi
-	echo ${HP_ARCH}-hp-hpux${HPUX_REV}
+	echo "$HP_ARCH"-hp-hpux"$HPUX_REV"
 	exit ;;
     ia64:HP-UX:*:*)
-	HPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`
-	echo ia64-hp-hpux${HPUX_REV}
+	HPUX_REV=`echo "$UNAME_RELEASE"|sed -e 's/[^.]*.[0B]*//'`
+	echo ia64-hp-hpux"$HPUX_REV"
 	exit ;;
     3050*:HI-UX:*:*)
-	eval $set_cc_for_build
-	sed 's/^	//' << EOF >$dummy.c
+	set_cc_for_build
+	sed 's/^	//' << EOF > "$dummy.c"
 	#include <unistd.h>
 	int
 	main ()
@@ -745,11 +760,11 @@ EOF
 	  exit (0);
 	}
 EOF
-	$CC_FOR_BUILD -o $dummy $dummy.c && SYSTEM_NAME=`$dummy` &&
+	$CC_FOR_BUILD -o "$dummy" "$dummy.c" && SYSTEM_NAME=`"$dummy"` &&
 		{ echo "$SYSTEM_NAME"; exit; }
 	echo unknown-hitachi-hiuxwe2
 	exit ;;
-    9000/7??:4.3bsd:*:* | 9000/8?[79]:4.3bsd:*:* )
+    9000/7??:4.3bsd:*:* | 9000/8?[79]:4.3bsd:*:*)
 	echo hppa1.1-hp-bsd
 	exit ;;
     9000/8??:4.3bsd:*:*)
@@ -758,7 +773,7 @@ EOF
     *9??*:MPE/iX:*:* | *3000*:MPE/iX:*:*)
 	echo hppa1.0-hp-mpeix
 	exit ;;
-    hp7??:OSF1:*:* | hp8?[79]:OSF1:*:* )
+    hp7??:OSF1:*:* | hp8?[79]:OSF1:*:*)
 	echo hppa1.1-hp-osf
 	exit ;;
     hp8??:OSF1:*:*)
@@ -766,9 +781,9 @@ EOF
 	exit ;;
     i*86:OSF1:*:*)
 	if [ -x /usr/sbin/sysversion ] ; then
-	    echo ${UNAME_MACHINE}-unknown-osf1mk
+	    echo "$UNAME_MACHINE"-unknown-osf1mk
 	else
-	    echo ${UNAME_MACHINE}-unknown-osf1
+	    echo "$UNAME_MACHINE"-unknown-osf1
 	fi
 	exit ;;
     parisc*:Lites*:*:*)
@@ -793,128 +808,120 @@ EOF
 	echo c4-convex-bsd
 	exit ;;
     CRAY*Y-MP:*:*:*)
-	echo ymp-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+	echo ymp-cray-unicos"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
 	exit ;;
     CRAY*[A-Z]90:*:*:*)
-	echo ${UNAME_MACHINE}-cray-unicos${UNAME_RELEASE} \
+	echo "$UNAME_MACHINE"-cray-unicos"$UNAME_RELEASE" \
 	| sed -e 's/CRAY.*\([A-Z]90\)/\1/' \
 	      -e y/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/ \
 	      -e 's/\.[^.]*$/.X/'
 	exit ;;
     CRAY*TS:*:*:*)
-	echo t90-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+	echo t90-cray-unicos"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
 	exit ;;
     CRAY*T3E:*:*:*)
-	echo alphaev5-cray-unicosmk${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+	echo alphaev5-cray-unicosmk"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
 	exit ;;
     CRAY*SV1:*:*:*)
-	echo sv1-cray-unicos${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+	echo sv1-cray-unicos"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
 	exit ;;
     *:UNICOS/mp:*:*)
-	echo craynv-cray-unicosmp${UNAME_RELEASE} | sed -e 's/\.[^.]*$/.X/'
+	echo craynv-cray-unicosmp"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
 	exit ;;
     F30[01]:UNIX_System_V:*:* | F700:UNIX_System_V:*:*)
 	FUJITSU_PROC=`uname -m | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz`
 	FUJITSU_SYS=`uname -p | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/\///'`
-	FUJITSU_REL=`echo ${UNAME_RELEASE} | sed -e 's/ /_/'`
+	FUJITSU_REL=`echo "$UNAME_RELEASE" | sed -e 's/ /_/'`
 	echo "${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
 	exit ;;
     5000:UNIX_System_V:4.*:*)
 	FUJITSU_SYS=`uname -p | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/\///'`
-	FUJITSU_REL=`echo ${UNAME_RELEASE} | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/ /_/'`
+	FUJITSU_REL=`echo "$UNAME_RELEASE" | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/ /_/'`
 	echo "sparc-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
 	exit ;;
     i*86:BSD/386:*:* | i*86:BSD/OS:*:* | *:Ascend\ Embedded/OS:*:*)
-	echo ${UNAME_MACHINE}-pc-bsdi${UNAME_RELEASE}
+	echo "$UNAME_MACHINE"-pc-bsdi"$UNAME_RELEASE"
 	exit ;;
     sparc*:BSD/OS:*:*)
-	echo sparc-unknown-bsdi${UNAME_RELEASE}
+	echo sparc-unknown-bsdi"$UNAME_RELEASE"
 	exit ;;
     *:BSD/OS:*:*)
-	echo ${UNAME_MACHINE}-unknown-bsdi${UNAME_RELEASE}
+	echo "$UNAME_MACHINE"-unknown-bsdi"$UNAME_RELEASE"
+	exit ;;
+    arm:FreeBSD:*:*)
+	UNAME_PROCESSOR=`uname -p`
+	set_cc_for_build
+	if echo __ARM_PCS_VFP | $CC_FOR_BUILD -E - 2>/dev/null \
+	    | grep -q __ARM_PCS_VFP
+	then
+	    echo "${UNAME_PROCESSOR}"-unknown-freebsd"`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`"-gnueabi
+	else
+	    echo "${UNAME_PROCESSOR}"-unknown-freebsd"`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`"-gnueabihf
+	fi
 	exit ;;
     *:FreeBSD:*:*)
 	UNAME_PROCESSOR=`/usr/bin/uname -p`
-	case ${UNAME_PROCESSOR} in
+	case "$UNAME_PROCESSOR" in
 	    amd64)
 		UNAME_PROCESSOR=x86_64 ;;
 	    i386)
 		UNAME_PROCESSOR=i586 ;;
 	esac
-	echo ${UNAME_PROCESSOR}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`
+	echo "$UNAME_PROCESSOR"-unknown-freebsd"`echo "$UNAME_RELEASE"|sed -e 's/[-(].*//'`"
 	exit ;;
     i*:CYGWIN*:*)
-	echo ${UNAME_MACHINE}-pc-cygwin
+	echo "$UNAME_MACHINE"-pc-cygwin
 	exit ;;
     *:MINGW64*:*)
-	echo ${UNAME_MACHINE}-pc-mingw64
+	echo "$UNAME_MACHINE"-pc-mingw64
 	exit ;;
     *:MINGW*:*)
-	echo ${UNAME_MACHINE}-pc-mingw32
+	echo "$UNAME_MACHINE"-pc-mingw32
 	exit ;;
     *:MSYS*:*)
-	echo ${UNAME_MACHINE}-pc-msys
-	exit ;;
-    i*:windows32*:*)
-	# uname -m includes "-pc" on this system.
-	echo ${UNAME_MACHINE}-mingw32
+	echo "$UNAME_MACHINE"-pc-msys
 	exit ;;
     i*:PW*:*)
-	echo ${UNAME_MACHINE}-pc-pw32
+	echo "$UNAME_MACHINE"-pc-pw32
 	exit ;;
     *:Interix*:*)
-	case ${UNAME_MACHINE} in
+	case "$UNAME_MACHINE" in
 	    x86)
-		echo i586-pc-interix${UNAME_RELEASE}
+		echo i586-pc-interix"$UNAME_RELEASE"
 		exit ;;
 	    authenticamd | genuineintel | EM64T)
-		echo x86_64-unknown-interix${UNAME_RELEASE}
+		echo x86_64-unknown-interix"$UNAME_RELEASE"
 		exit ;;
 	    IA64)
-		echo ia64-unknown-interix${UNAME_RELEASE}
+		echo ia64-unknown-interix"$UNAME_RELEASE"
 		exit ;;
 	esac ;;
-    [345]86:Windows_95:* | [345]86:Windows_98:* | [345]86:Windows_NT:*)
-	echo i${UNAME_MACHINE}-pc-mks
-	exit ;;
-    8664:Windows_NT:*)
-	echo x86_64-pc-mks
-	exit ;;
-    i*:Windows_NT*:* | Pentium*:Windows_NT*:*)
-	# How do we know it's Interix rather than the generic POSIX subsystem?
-	# It also conflicts with pre-2.0 versions of AT&T UWIN. Should we
-	# UNAME_MACHINE based on the output of uname instead of i386?
-	echo i586-pc-interix
-	exit ;;
     i*:UWIN*:*)
-	echo ${UNAME_MACHINE}-pc-uwin
+	echo "$UNAME_MACHINE"-pc-uwin
 	exit ;;
     amd64:CYGWIN*:*:* | x86_64:CYGWIN*:*:*)
-	echo x86_64-unknown-cygwin
-	exit ;;
-    p*:CYGWIN*:*)
-	echo powerpcle-unknown-cygwin
+	echo x86_64-pc-cygwin
 	exit ;;
     prep*:SunOS:5.*:*)
-	echo powerpcle-unknown-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
+	echo powerpcle-unknown-solaris2"`echo "$UNAME_RELEASE"|sed -e 's/[^.]*//'`"
 	exit ;;
     *:GNU:*:*)
 	# the GNU system
-	echo `echo ${UNAME_MACHINE}|sed -e 's,[-/].*$,,'`-unknown-${LIBC}`echo ${UNAME_RELEASE}|sed -e 's,/.*$,,'`
+	echo "`echo "$UNAME_MACHINE"|sed -e 's,[-/].*$,,'`-unknown-$LIBC`echo "$UNAME_RELEASE"|sed -e 's,/.*$,,'`"
 	exit ;;
     *:GNU/*:*:*)
 	# other systems with GNU libc and userland
-	echo ${UNAME_MACHINE}-unknown-`echo ${UNAME_SYSTEM} | sed 's,^[^/]*/,,' | tr "[:upper:]" "[:lower:]"``echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`-${LIBC}
+	echo "$UNAME_MACHINE-unknown-`echo "$UNAME_SYSTEM" | sed 's,^[^/]*/,,' | tr "[:upper:]" "[:lower:]"``echo "$UNAME_RELEASE"|sed -e 's/[-(].*//'`-$LIBC"
 	exit ;;
-    i*86:Minix:*:*)
-	echo ${UNAME_MACHINE}-pc-minix
+    *:Minix:*:*)
+	echo "$UNAME_MACHINE"-unknown-minix
 	exit ;;
     aarch64:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
 	exit ;;
     aarch64_be:Linux:*:*)
 	UNAME_MACHINE=aarch64_be
-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
 	exit ;;
     alpha:Linux:*:*)
 	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
@@ -928,140 +935,168 @@ EOF
 	esac
 	objdump --private-headers /bin/sh | grep -q ld.so.1
 	if test "$?" = 0 ; then LIBC=gnulibc1 ; fi
-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
 	exit ;;
     arc:Linux:*:* | arceb:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
 	exit ;;
     arm*:Linux:*:*)
-	eval $set_cc_for_build
+	set_cc_for_build
 	if echo __ARM_EABI__ | $CC_FOR_BUILD -E - 2>/dev/null \
 	    | grep -q __ARM_EABI__
 	then
-	    echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	    echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
 	else
 	    if echo __ARM_PCS_VFP | $CC_FOR_BUILD -E - 2>/dev/null \
 		| grep -q __ARM_PCS_VFP
 	    then
-		echo ${UNAME_MACHINE}-unknown-linux-${LIBC}eabi
+		echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"eabi
 	    else
-		echo ${UNAME_MACHINE}-unknown-linux-${LIBC}eabihf
+		echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"eabihf
 	    fi
 	fi
 	exit ;;
     avr32*:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
 	exit ;;
     cris:Linux:*:*)
-	echo ${UNAME_MACHINE}-axis-linux-${LIBC}
+	echo "$UNAME_MACHINE"-axis-linux-"$LIBC"
 	exit ;;
     crisv32:Linux:*:*)
-	echo ${UNAME_MACHINE}-axis-linux-${LIBC}
+	echo "$UNAME_MACHINE"-axis-linux-"$LIBC"
 	exit ;;
     e2k:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
 	exit ;;
     frv:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
 	exit ;;
     hexagon:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
 	exit ;;
     i*86:Linux:*:*)
-	echo ${UNAME_MACHINE}-pc-linux-${LIBC}
+	echo "$UNAME_MACHINE"-pc-linux-"$LIBC"
 	exit ;;
     ia64:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
 	exit ;;
     k1om:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
 	exit ;;
     m32r*:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
 	exit ;;
     m68*:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
 	exit ;;
     mips:Linux:*:* | mips64:Linux:*:*)
-	eval $set_cc_for_build
-	sed 's/^	//' << EOF >$dummy.c
+	set_cc_for_build
+	IS_GLIBC=0
+	test x"${LIBC}" = xgnu && IS_GLIBC=1
+	sed 's/^	//' << EOF > "$dummy.c"
 	#undef CPU
-	#undef ${UNAME_MACHINE}
-	#undef ${UNAME_MACHINE}el
+	#undef mips
+	#undef mipsel
+	#undef mips64
+	#undef mips64el
+	#if ${IS_GLIBC} && defined(_ABI64)
+	LIBCABI=gnuabi64
+	#else
+	#if ${IS_GLIBC} && defined(_ABIN32)
+	LIBCABI=gnuabin32
+	#else
+	LIBCABI=${LIBC}
+	#endif
+	#endif
+
+	#if ${IS_GLIBC} && defined(__mips64) && defined(__mips_isa_rev) && __mips_isa_rev>=6
+	CPU=mipsisa64r6
+	#else
+	#if ${IS_GLIBC} && !defined(__mips64) && defined(__mips_isa_rev) && __mips_isa_rev>=6
+	CPU=mipsisa32r6
+	#else
+	#if defined(__mips64)
+	CPU=mips64
+	#else
+	CPU=mips
+	#endif
+	#endif
+	#endif
+
 	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)
-	CPU=${UNAME_MACHINE}el
+	MIPS_ENDIAN=el
 	#else
 	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)
-	CPU=${UNAME_MACHINE}
+	MIPS_ENDIAN=
 	#else
-	CPU=
+	MIPS_ENDIAN=
 	#endif
 	#endif
 EOF
-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^CPU'`
-	test x"${CPU}" != x && { echo "${CPU}-unknown-linux-${LIBC}"; exit; }
+	eval "`$CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^CPU\|^MIPS_ENDIAN\|^LIBCABI'`"
+	test "x$CPU" != x && { echo "$CPU${MIPS_ENDIAN}-unknown-linux-$LIBCABI"; exit; }
 	;;
     mips64el:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
 	exit ;;
     openrisc*:Linux:*:*)
-	echo or1k-unknown-linux-${LIBC}
+	echo or1k-unknown-linux-"$LIBC"
 	exit ;;
     or32:Linux:*:* | or1k*:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
 	exit ;;
     padre:Linux:*:*)
-	echo sparc-unknown-linux-${LIBC}
+	echo sparc-unknown-linux-"$LIBC"
 	exit ;;
     parisc64:Linux:*:* | hppa64:Linux:*:*)
-	echo hppa64-unknown-linux-${LIBC}
+	echo hppa64-unknown-linux-"$LIBC"
 	exit ;;
     parisc:Linux:*:* | hppa:Linux:*:*)
 	# Look for CPU level
 	case `grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2` in
-	  PA7*) echo hppa1.1-unknown-linux-${LIBC} ;;
-	  PA8*) echo hppa2.0-unknown-linux-${LIBC} ;;
-	  *)    echo hppa-unknown-linux-${LIBC} ;;
+	  PA7*) echo hppa1.1-unknown-linux-"$LIBC" ;;
+	  PA8*) echo hppa2.0-unknown-linux-"$LIBC" ;;
+	  *)    echo hppa-unknown-linux-"$LIBC" ;;
 	esac
 	exit ;;
     ppc64:Linux:*:*)
-	echo powerpc64-unknown-linux-${LIBC}
+	echo powerpc64-unknown-linux-"$LIBC"
 	exit ;;
     ppc:Linux:*:*)
-	echo powerpc-unknown-linux-${LIBC}
+	echo powerpc-unknown-linux-"$LIBC"
 	exit ;;
     ppc64le:Linux:*:*)
-	echo powerpc64le-unknown-linux-${LIBC}
+	echo powerpc64le-unknown-linux-"$LIBC"
 	exit ;;
     ppcle:Linux:*:*)
-	echo powerpcle-unknown-linux-${LIBC}
+	echo powerpcle-unknown-linux-"$LIBC"
 	exit ;;
     riscv32:Linux:*:* | riscv64:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
 	exit ;;
     s390:Linux:*:* | s390x:Linux:*:*)
-	echo ${UNAME_MACHINE}-ibm-linux-${LIBC}
+	echo "$UNAME_MACHINE"-ibm-linux-"$LIBC"
 	exit ;;
     sh64*:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
 	exit ;;
     sh*:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
 	exit ;;
     sparc:Linux:*:* | sparc64:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
 	exit ;;
     tile*:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
 	exit ;;
     vax:Linux:*:*)
-	echo ${UNAME_MACHINE}-dec-linux-${LIBC}
+	echo "$UNAME_MACHINE"-dec-linux-"$LIBC"
 	exit ;;
     x86_64:Linux:*:*)
-	echo ${UNAME_MACHINE}-pc-linux-${LIBC}
+	echo "$UNAME_MACHINE"-pc-linux-"$LIBC"
 	exit ;;
     xtensa*:Linux:*:*)
-	echo ${UNAME_MACHINE}-unknown-linux-${LIBC}
+	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
 	exit ;;
     i*86:DYNIX/ptx:4*:*)
 	# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.
@@ -1075,34 +1110,34 @@ EOF
 	# I am not positive that other SVR4 systems won't match this,
 	# I just have to hope.  -- rms.
 	# Use sysv4.2uw... so that sysv4* matches it.
-	echo ${UNAME_MACHINE}-pc-sysv4.2uw${UNAME_VERSION}
+	echo "$UNAME_MACHINE"-pc-sysv4.2uw"$UNAME_VERSION"
 	exit ;;
     i*86:OS/2:*:*)
 	# If we were able to find `uname', then EMX Unix compatibility
 	# is probably installed.
-	echo ${UNAME_MACHINE}-pc-os2-emx
+	echo "$UNAME_MACHINE"-pc-os2-emx
 	exit ;;
     i*86:XTS-300:*:STOP)
-	echo ${UNAME_MACHINE}-unknown-stop
+	echo "$UNAME_MACHINE"-unknown-stop
 	exit ;;
     i*86:atheos:*:*)
-	echo ${UNAME_MACHINE}-unknown-atheos
+	echo "$UNAME_MACHINE"-unknown-atheos
 	exit ;;
     i*86:syllable:*:*)
-	echo ${UNAME_MACHINE}-pc-syllable
+	echo "$UNAME_MACHINE"-pc-syllable
 	exit ;;
     i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.[02]*:*)
-	echo i386-unknown-lynxos${UNAME_RELEASE}
+	echo i386-unknown-lynxos"$UNAME_RELEASE"
 	exit ;;
     i*86:*DOS:*:*)
-	echo ${UNAME_MACHINE}-pc-msdosdjgpp
+	echo "$UNAME_MACHINE"-pc-msdosdjgpp
 	exit ;;
-    i*86:*:4.*:* | i*86:SYSTEM_V:4.*:*)
-	UNAME_REL=`echo ${UNAME_RELEASE} | sed 's/\/MP$//'`
+    i*86:*:4.*:*)
+	UNAME_REL=`echo "$UNAME_RELEASE" | sed 's/\/MP$//'`
 	if grep Novell /usr/include/link.h >/dev/null 2>/dev/null; then
-		echo ${UNAME_MACHINE}-univel-sysv${UNAME_REL}
+		echo "$UNAME_MACHINE"-univel-sysv"$UNAME_REL"
 	else
-		echo ${UNAME_MACHINE}-pc-sysv${UNAME_REL}
+		echo "$UNAME_MACHINE"-pc-sysv"$UNAME_REL"
 	fi
 	exit ;;
     i*86:*:5:[678]*)
@@ -1112,12 +1147,12 @@ EOF
 	    *Pentium)	     UNAME_MACHINE=i586 ;;
 	    *Pent*|*Celeron) UNAME_MACHINE=i686 ;;
 	esac
-	echo ${UNAME_MACHINE}-unknown-sysv${UNAME_RELEASE}${UNAME_SYSTEM}${UNAME_VERSION}
+	echo "$UNAME_MACHINE-unknown-sysv${UNAME_RELEASE}${UNAME_SYSTEM}${UNAME_VERSION}"
 	exit ;;
     i*86:*:3.2:*)
 	if test -f /usr/options/cb.name; then
 		UNAME_REL=`sed -n 's/.*Version //p' </usr/options/cb.name`
-		echo ${UNAME_MACHINE}-pc-isc$UNAME_REL
+		echo "$UNAME_MACHINE"-pc-isc"$UNAME_REL"
 	elif /bin/uname -X 2>/dev/null >/dev/null ; then
 		UNAME_REL=`(/bin/uname -X|grep Release|sed -e 's/.*= //')`
 		(/bin/uname -X|grep i80486 >/dev/null) && UNAME_MACHINE=i486
@@ -1127,9 +1162,9 @@ EOF
 			&& UNAME_MACHINE=i686
 		(/bin/uname -X|grep '^Machine.*Pentium Pro' >/dev/null) \
 			&& UNAME_MACHINE=i686
-		echo ${UNAME_MACHINE}-pc-sco$UNAME_REL
+		echo "$UNAME_MACHINE"-pc-sco"$UNAME_REL"
 	else
-		echo ${UNAME_MACHINE}-pc-sysv32
+		echo "$UNAME_MACHINE"-pc-sysv32
 	fi
 	exit ;;
     pc:*:*:*)
@@ -1149,9 +1184,9 @@ EOF
 	exit ;;
     i860:*:4.*:*) # i860-SVR4
 	if grep Stardent /usr/include/sys/uadmin.h >/dev/null 2>&1 ; then
-	  echo i860-stardent-sysv${UNAME_RELEASE} # Stardent Vistra i860-SVR4
+	  echo i860-stardent-sysv"$UNAME_RELEASE" # Stardent Vistra i860-SVR4
 	else # Add other i860-SVR4 vendors below as they are discovered.
-	  echo i860-unknown-sysv${UNAME_RELEASE}  # Unknown i860-SVR4
+	  echo i860-unknown-sysv"$UNAME_RELEASE"  # Unknown i860-SVR4
 	fi
 	exit ;;
     mini*:CTIX:SYS*5:*)
@@ -1171,9 +1206,9 @@ EOF
 	test -r /etc/.relid \
 	&& OS_REL=.`sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' < /etc/.relid`
 	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
-	  && { echo i486-ncr-sysv4.3${OS_REL}; exit; }
+	  && { echo i486-ncr-sysv4.3"$OS_REL"; exit; }
 	/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \
-	  && { echo i586-ncr-sysv4.3${OS_REL}; exit; } ;;
+	  && { echo i586-ncr-sysv4.3"$OS_REL"; exit; } ;;
     3[34]??:*:4.0:* | 3[34]??,*:*:4.0:*)
 	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
 	  && { echo i486-ncr-sysv4; exit; } ;;
@@ -1182,28 +1217,28 @@ EOF
 	test -r /etc/.relid \
 	    && OS_REL=.`sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' < /etc/.relid`
 	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
-	    && { echo i486-ncr-sysv4.3${OS_REL}; exit; }
+	    && { echo i486-ncr-sysv4.3"$OS_REL"; exit; }
 	/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \
-	    && { echo i586-ncr-sysv4.3${OS_REL}; exit; }
+	    && { echo i586-ncr-sysv4.3"$OS_REL"; exit; }
 	/bin/uname -p 2>/dev/null | /bin/grep pteron >/dev/null \
-	    && { echo i586-ncr-sysv4.3${OS_REL}; exit; } ;;
+	    && { echo i586-ncr-sysv4.3"$OS_REL"; exit; } ;;
     m68*:LynxOS:2.*:* | m68*:LynxOS:3.0*:*)
-	echo m68k-unknown-lynxos${UNAME_RELEASE}
+	echo m68k-unknown-lynxos"$UNAME_RELEASE"
 	exit ;;
     mc68030:UNIX_System_V:4.*:*)
 	echo m68k-atari-sysv4
 	exit ;;
     TSUNAMI:LynxOS:2.*:*)
-	echo sparc-unknown-lynxos${UNAME_RELEASE}
+	echo sparc-unknown-lynxos"$UNAME_RELEASE"
 	exit ;;
     rs6000:LynxOS:2.*:*)
-	echo rs6000-unknown-lynxos${UNAME_RELEASE}
+	echo rs6000-unknown-lynxos"$UNAME_RELEASE"
 	exit ;;
     PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.[02]*:*)
-	echo powerpc-unknown-lynxos${UNAME_RELEASE}
+	echo powerpc-unknown-lynxos"$UNAME_RELEASE"
 	exit ;;
     SM[BE]S:UNIX_SV:*:*)
-	echo mips-dde-sysv${UNAME_RELEASE}
+	echo mips-dde-sysv"$UNAME_RELEASE"
 	exit ;;
     RM*:ReliantUNIX-*:*:*)
 	echo mips-sni-sysv4
@@ -1214,7 +1249,7 @@ EOF
     *:SINIX-*:*:*)
 	if uname -p 2>/dev/null >/dev/null ; then
 		UNAME_MACHINE=`(uname -p) 2>/dev/null`
-		echo ${UNAME_MACHINE}-sni-sysv4
+		echo "$UNAME_MACHINE"-sni-sysv4
 	else
 		echo ns32k-sni-sysv
 	fi
@@ -1234,23 +1269,23 @@ EOF
 	exit ;;
     i*86:VOS:*:*)
 	# From Paul.Green@stratus.com.
-	echo ${UNAME_MACHINE}-stratus-vos
+	echo "$UNAME_MACHINE"-stratus-vos
 	exit ;;
     *:VOS:*:*)
 	# From Paul.Green@stratus.com.
 	echo hppa1.1-stratus-vos
 	exit ;;
     mc68*:A/UX:*:*)
-	echo m68k-apple-aux${UNAME_RELEASE}
+	echo m68k-apple-aux"$UNAME_RELEASE"
 	exit ;;
     news*:NEWS-OS:6*:*)
 	echo mips-sony-newsos6
 	exit ;;
     R[34]000:*System_V*:*:* | R4000:UNIX_SYSV:*:* | R*000:UNIX_SV:*:*)
 	if [ -d /usr/nec ]; then
-		echo mips-nec-sysv${UNAME_RELEASE}
+		echo mips-nec-sysv"$UNAME_RELEASE"
 	else
-		echo mips-unknown-sysv${UNAME_RELEASE}
+		echo mips-unknown-sysv"$UNAME_RELEASE"
 	fi
 	exit ;;
     BeBox:BeOS:*:*)	# BeOS running on hardware made by Be, PPC only.
@@ -1269,60 +1304,68 @@ EOF
 	echo x86_64-unknown-haiku
 	exit ;;
     SX-4:SUPER-UX:*:*)
-	echo sx4-nec-superux${UNAME_RELEASE}
+	echo sx4-nec-superux"$UNAME_RELEASE"
 	exit ;;
     SX-5:SUPER-UX:*:*)
-	echo sx5-nec-superux${UNAME_RELEASE}
+	echo sx5-nec-superux"$UNAME_RELEASE"
 	exit ;;
     SX-6:SUPER-UX:*:*)
-	echo sx6-nec-superux${UNAME_RELEASE}
+	echo sx6-nec-superux"$UNAME_RELEASE"
 	exit ;;
     SX-7:SUPER-UX:*:*)
-	echo sx7-nec-superux${UNAME_RELEASE}
+	echo sx7-nec-superux"$UNAME_RELEASE"
 	exit ;;
     SX-8:SUPER-UX:*:*)
-	echo sx8-nec-superux${UNAME_RELEASE}
+	echo sx8-nec-superux"$UNAME_RELEASE"
 	exit ;;
     SX-8R:SUPER-UX:*:*)
-	echo sx8r-nec-superux${UNAME_RELEASE}
+	echo sx8r-nec-superux"$UNAME_RELEASE"
 	exit ;;
     SX-ACE:SUPER-UX:*:*)
-	echo sxace-nec-superux${UNAME_RELEASE}
+	echo sxace-nec-superux"$UNAME_RELEASE"
 	exit ;;
     Power*:Rhapsody:*:*)
-	echo powerpc-apple-rhapsody${UNAME_RELEASE}
+	echo powerpc-apple-rhapsody"$UNAME_RELEASE"
 	exit ;;
     *:Rhapsody:*:*)
-	echo ${UNAME_MACHINE}-apple-rhapsody${UNAME_RELEASE}
+	echo "$UNAME_MACHINE"-apple-rhapsody"$UNAME_RELEASE"
 	exit ;;
     *:Darwin:*:*)
-	UNAME_PROCESSOR=`uname -p` || UNAME_PROCESSOR=unknown
-	eval $set_cc_for_build
-	if test "$UNAME_PROCESSOR" = unknown ; then
-	    UNAME_PROCESSOR=powerpc
+	UNAME_PROCESSOR=`uname -p`
+	case $UNAME_PROCESSOR in
+	    unknown) UNAME_PROCESSOR=powerpc ;;
+	esac
+	if command -v xcode-select > /dev/null 2> /dev/null && \
+		! xcode-select --print-path > /dev/null 2> /dev/null ; then
+	    # Avoid executing cc if there is no toolchain installed as
+	    # cc will be a stub that puts up a graphical alert
+	    # prompting the user to install developer tools.
+	    CC_FOR_BUILD=no_compiler_found
+	else
+	    set_cc_for_build
 	fi
-	if test `echo "$UNAME_RELEASE" | sed -e 's/\..*//'` -le 10 ; then
-	    if [ "$CC_FOR_BUILD" != no_compiler_found ]; then
-		if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \
-		    (CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
-		    grep IS_64BIT_ARCH >/dev/null
-		then
-		    case $UNAME_PROCESSOR in
-			i386) UNAME_PROCESSOR=x86_64 ;;
-			powerpc) UNAME_PROCESSOR=powerpc64 ;;
-		    esac
-		fi
+	if [ "$CC_FOR_BUILD" != no_compiler_found ]; then
+	    if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \
+		   (CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
+		   grep IS_64BIT_ARCH >/dev/null
+	    then
+		case $UNAME_PROCESSOR in
+		    i386) UNAME_PROCESSOR=x86_64 ;;
+		    powerpc) UNAME_PROCESSOR=powerpc64 ;;
+		esac
+	    fi
+	    # On 10.4-10.6 one might compile for PowerPC via gcc -arch ppc
+	    if (echo '#ifdef __POWERPC__'; echo IS_PPC; echo '#endif') | \
+		   (CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
+		   grep IS_PPC >/dev/null
+	    then
+		UNAME_PROCESSOR=powerpc
 	    fi
 	elif test "$UNAME_PROCESSOR" = i386 ; then
-	    # Avoid executing cc on OS X 10.9, as it ships with a stub
-	    # that puts up a graphical alert prompting to install
-	    # developer tools.  Any system running Mac OS X 10.7 or
-	    # later (Darwin 11 and later) is required to have a 64-bit
-	    # processor. This is not true of the ARM version of Darwin
-	    # that Apple uses in portable devices.
-	    UNAME_PROCESSOR=x86_64
+	    # uname -m returns i386 or x86_64
+	    UNAME_PROCESSOR=$UNAME_MACHINE
 	fi
-	echo ${UNAME_PROCESSOR}-apple-darwin${UNAME_RELEASE}
+	echo "$UNAME_PROCESSOR"-apple-darwin"$UNAME_RELEASE"
 	exit ;;
     *:procnto*:*:* | *:QNX:[0123456789]*:*)
 	UNAME_PROCESSOR=`uname -p`
@@ -1330,22 +1373,25 @@ EOF
 		UNAME_PROCESSOR=i386
 		UNAME_MACHINE=pc
 	fi
-	echo ${UNAME_PROCESSOR}-${UNAME_MACHINE}-nto-qnx${UNAME_RELEASE}
+	echo "$UNAME_PROCESSOR"-"$UNAME_MACHINE"-nto-qnx"$UNAME_RELEASE"
 	exit ;;
     *:QNX:*:4*)
 	echo i386-pc-qnx
 	exit ;;
-    NEO-?:NONSTOP_KERNEL:*:*)
-	echo neo-tandem-nsk${UNAME_RELEASE}
+    NEO-*:NONSTOP_KERNEL:*:*)
+	echo neo-tandem-nsk"$UNAME_RELEASE"
 	exit ;;
     NSE-*:NONSTOP_KERNEL:*:*)
-	echo nse-tandem-nsk${UNAME_RELEASE}
+	echo nse-tandem-nsk"$UNAME_RELEASE"
 	exit ;;
-    NSR-?:NONSTOP_KERNEL:*:*)
-	echo nsr-tandem-nsk${UNAME_RELEASE}
+    NSR-*:NONSTOP_KERNEL:*:*)
+	echo nsr-tandem-nsk"$UNAME_RELEASE"
 	exit ;;
-    NSX-?:NONSTOP_KERNEL:*:*)
-	echo nsx-tandem-nsk${UNAME_RELEASE}
+    NSV-*:NONSTOP_KERNEL:*:*)
+	echo nsv-tandem-nsk"$UNAME_RELEASE"
+	exit ;;
+    NSX-*:NONSTOP_KERNEL:*:*)
+	echo nsx-tandem-nsk"$UNAME_RELEASE"
 	exit ;;
     *:NonStop-UX:*:*)
 	echo mips-compaq-nonstopux
@@ -1354,18 +1400,19 @@ EOF
 	echo bs2000-siemens-sysv
 	exit ;;
     DS/*:UNIX_System_V:*:*)
-	echo ${UNAME_MACHINE}-${UNAME_SYSTEM}-${UNAME_RELEASE}
+	echo "$UNAME_MACHINE"-"$UNAME_SYSTEM"-"$UNAME_RELEASE"
 	exit ;;
     *:Plan9:*:*)
 	# "uname -m" is not consistent, so use $cputype instead. 386
 	# is converted to i386 for consistency with other x86
 	# operating systems.
+	# shellcheck disable=SC2154
 	if test "$cputype" = 386; then
 	    UNAME_MACHINE=i386
 	else
 	    UNAME_MACHINE="$cputype"
 	fi
-	echo ${UNAME_MACHINE}-unknown-plan9
+	echo "$UNAME_MACHINE"-unknown-plan9
 	exit ;;
     *:TOPS-10:*:*)
 	echo pdp10-unknown-tops10
@@ -1386,14 +1433,14 @@ EOF
 	echo pdp10-unknown-its
 	exit ;;
     SEI:*:*:SEIUX)
-	echo mips-sei-seiux${UNAME_RELEASE}
+	echo mips-sei-seiux"$UNAME_RELEASE"
 	exit ;;
     *:DragonFly:*:*)
-	echo ${UNAME_MACHINE}-unknown-dragonfly`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`
+	echo "$UNAME_MACHINE"-unknown-dragonfly"`echo "$UNAME_RELEASE"|sed -e 's/[-(].*//'`"
 	exit ;;
     *:*VMS:*:*)
 	UNAME_MACHINE=`(uname -p) 2>/dev/null`
-	case "${UNAME_MACHINE}" in
+	case "$UNAME_MACHINE" in
 	    A*) echo alpha-dec-vms ; exit ;;
 	    I*) echo ia64-dec-vms ; exit ;;
 	    V*) echo vax-dec-vms ; exit ;;
@@ -1402,32 +1449,184 @@ EOF
 	echo i386-pc-xenix
 	exit ;;
     i*86:skyos:*:*)
-	echo ${UNAME_MACHINE}-pc-skyos`echo ${UNAME_RELEASE} | sed -e 's/ .*$//'`
+	echo "$UNAME_MACHINE"-pc-skyos"`echo "$UNAME_RELEASE" | sed -e 's/ .*$//'`"
 	exit ;;
     i*86:rdos:*:*)
-	echo ${UNAME_MACHINE}-pc-rdos
+	echo "$UNAME_MACHINE"-pc-rdos
 	exit ;;
     i*86:AROS:*:*)
-	echo ${UNAME_MACHINE}-pc-aros
+	echo "$UNAME_MACHINE"-pc-aros
 	exit ;;
     x86_64:VMkernel:*:*)
-	echo ${UNAME_MACHINE}-unknown-esx
+	echo "$UNAME_MACHINE"-unknown-esx
 	exit ;;
     amd64:Isilon\ OneFS:*:*)
 	echo x86_64-unknown-onefs
 	exit ;;
+    *:Unleashed:*:*)
+	echo "$UNAME_MACHINE"-unknown-unleashed"$UNAME_RELEASE"
+	exit ;;
+esac
+
+# No uname command or uname output not recognized.
+set_cc_for_build
+cat > "$dummy.c" <<EOF
+#ifdef _SEQUENT_
+#include <sys/types.h>
+#include <sys/utsname.h>
+#endif
+#if defined(ultrix) || defined(_ultrix) || defined(__ultrix) || defined(__ultrix__)
+#if defined (vax) || defined (__vax) || defined (__vax__) || defined(mips) || defined(__mips) || defined(__mips__) || defined(MIPS) || defined(__MIPS__)
+#include <signal.h>
+#if defined(_SIZE_T_) || defined(SIGLOST)
+#include <sys/utsname.h>
+#endif
+#endif
+#endif
+main ()
+{
+#if defined (sony)
+#if defined (MIPSEB)
+  /* BFD wants "bsd" instead of "newsos".  Perhaps BFD should be changed,
+     I don't know....  */
+  printf ("mips-sony-bsd\n"); exit (0);
+#else
+#include <sys/param.h>
+  printf ("m68k-sony-newsos%s\n",
+#ifdef NEWSOS4
+  "4"
+#else
+  ""
+#endif
+  ); exit (0);
+#endif
+#endif
+
+#if defined (NeXT)
+#if !defined (__ARCHITECTURE__)
+#define __ARCHITECTURE__ "m68k"
+#endif
+  int version;
+  version=`(hostinfo | sed -n 's/.*NeXT Mach \([0-9]*\).*/\1/p') 2>/dev/null`;
+  if (version < 4)
+    printf ("%s-next-nextstep%d\n", __ARCHITECTURE__, version);
+  else
+    printf ("%s-next-openstep%d\n", __ARCHITECTURE__, version);
+  exit (0);
+#endif
+
+#if defined (MULTIMAX) || defined (n16)
+#if defined (UMAXV)
+  printf ("ns32k-encore-sysv\n"); exit (0);
+#else
+#if defined (CMU)
+  printf ("ns32k-encore-mach\n"); exit (0);
+#else
+  printf ("ns32k-encore-bsd\n"); exit (0);
+#endif
+#endif
+#endif
+
+#if defined (__386BSD__)
+  printf ("i386-pc-bsd\n"); exit (0);
+#endif
+
+#if defined (sequent)
+#if defined (i386)
+  printf ("i386-sequent-dynix\n"); exit (0);
+#endif
+#if defined (ns32000)
+  printf ("ns32k-sequent-dynix\n"); exit (0);
+#endif
+#endif
+
+#if defined (_SEQUENT_)
+  struct utsname un;
+
+  uname(&un);
+  if (strncmp(un.version, "V2", 2) == 0) {
+    printf ("i386-sequent-ptx2\n"); exit (0);
+  }
+  if (strncmp(un.version, "V1", 2) == 0) { /* XXX is V1 correct? */
+    printf ("i386-sequent-ptx1\n"); exit (0);
+  }
+  printf ("i386-sequent-ptx\n"); exit (0);
+#endif
+
+#if defined (vax)
+#if !defined (ultrix)
+#include <sys/param.h>
+#if defined (BSD)
+#if BSD == 43
+  printf ("vax-dec-bsd4.3\n"); exit (0);
+#else
+#if BSD == 199006
+  printf ("vax-dec-bsd4.3reno\n"); exit (0);
+#else
+  printf ("vax-dec-bsd\n"); exit (0);
+#endif
+#endif
+#else
+  printf ("vax-dec-bsd\n"); exit (0);
+#endif
+#else
+#if defined(_SIZE_T_) || defined(SIGLOST)
+  struct utsname un;
+  uname (&un);
+  printf ("vax-dec-ultrix%s\n", un.release); exit (0);
+#else
+  printf ("vax-dec-ultrix\n"); exit (0);
+#endif
+#endif
+#endif
+#if defined(ultrix) || defined(_ultrix) || defined(__ultrix) || defined(__ultrix__)
+#if defined(mips) || defined(__mips) || defined(__mips__) || defined(MIPS) || defined(__MIPS__)
+#if defined(_SIZE_T_) || defined(SIGLOST)
+  struct utsname *un;
+  uname (&un);
+  printf ("mips-dec-ultrix%s\n", un.release); exit (0);
+#else
+  printf ("mips-dec-ultrix\n"); exit (0);
+#endif
+#endif
+#endif
+
+#if defined (alliant) && defined (i860)
+  printf ("i860-alliant-bsd\n"); exit (0);
+#endif
+
+  exit (1);
+}
+EOF
+
+$CC_FOR_BUILD -o "$dummy" "$dummy.c" 2>/dev/null && SYSTEM_NAME=`$dummy` &&
+	{ echo "$SYSTEM_NAME"; exit; }
+
+# Apollos put the system type in the environment.
+test -d /usr/apollo && { echo "$ISP-apollo-$SYSTYPE"; exit; }
+
+echo "$0: unable to guess system type" >&2
+
+case "$UNAME_MACHINE:$UNAME_SYSTEM" in
+    mips:Linux | mips64:Linux)
+	# If we got here on MIPS GNU/Linux, output extra information.
+	cat >&2 <<EOF
+
+NOTE: MIPS GNU/Linux systems require a C compiler to fully recognize
+the system type. Please install a C compiler and try again.
+EOF
+	;;
 esac
 
 cat >&2 <<EOF
-$0: unable to guess system type
 
 This script (version $timestamp), has failed to recognize the
-operating system you are using. If your script is old, overwrite
-config.guess and config.sub with the latest versions from:
+operating system you are using. If your script is old, overwrite *all*
+copies of config.guess and config.sub with the latest versions from:
 
-  http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess
+  https://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess
 and
-  http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub
+  https://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub
 
 If $0 has already been updated, send the following data and any
 information you think might be pertinent to config-patches@gnu.org to
@@ -1450,16 +1649,16 @@ hostinfo               = `(hostinfo) 2>/dev/null`
 /usr/bin/oslevel       = `(/usr/bin/oslevel) 2>/dev/null`
 /usr/convex/getsysinfo = `(/usr/convex/getsysinfo) 2>/dev/null`
 
-UNAME_MACHINE = ${UNAME_MACHINE}
-UNAME_RELEASE = ${UNAME_RELEASE}
-UNAME_SYSTEM  = ${UNAME_SYSTEM}
-UNAME_VERSION = ${UNAME_VERSION}
+UNAME_MACHINE = "$UNAME_MACHINE"
+UNAME_RELEASE = "$UNAME_RELEASE"
+UNAME_SYSTEM  = "$UNAME_SYSTEM"
+UNAME_VERSION = "$UNAME_VERSION"
 EOF
 
 exit 1
 
 # Local variables:
-# eval: (add-hook 'write-file-hooks 'time-stamp)
+# eval: (add-hook 'before-save-hook 'time-stamp)
 # time-stamp-start: "timestamp='"
 # time-stamp-format: "%:y-%02m-%02d"
 # time-stamp-end: "'"
diff --git a/contrib/depends/config.site.in b/contrib/depends/config.site.in
index dcf336f..3a4a521 100644
--- a/contrib/depends/config.site.in
+++ b/contrib/depends/config.site.in
@@ -31,7 +31,6 @@ LDFLAGS="-L$depends_prefix/lib $LDFLAGS"
 CC="@CC@"
 CXX="@CXX@"
 OBJC="${CC}"
-CCACHE=$depends_prefix/native/bin/ccache
 PYTHONPATH=$depends_prefix/native/lib/python3/dist-packages:$PYTHONPATH
 
 if test -n "@AR@"; then
diff --git a/contrib/depends/config.sub b/contrib/depends/config.sub
index 40ea5df..a318a46 100755
--- a/contrib/depends/config.sub
+++ b/contrib/depends/config.sub
@@ -1,8 +1,8 @@
 #! /bin/sh
 # Configuration validation subroutine script.
-#   Copyright 1992-2017 Free Software Foundation, Inc.
+#   Copyright 1992-2019 Free Software Foundation, Inc.
 
-timestamp='2017-04-02'
+timestamp='2019-06-30'
 
 # This file is free software; you can redistribute it and/or modify it
 # under the terms of the GNU General Public License as published by
@@ -15,7 +15,7 @@ timestamp='2017-04-02'
 # General Public License for more details.
 #
 # You should have received a copy of the GNU General Public License
-# along with this program; if not, see <http://www.gnu.org/licenses/>.
+# along with this program; if not, see <https://www.gnu.org/licenses/>.
 #
 # As a special exception to the GNU General Public License, if you
 # distribute this file as part of a program that contains a
@@ -33,7 +33,7 @@ timestamp='2017-04-02'
 # Otherwise, we print the canonical config type on stdout and succeed.
 
 # You can get the latest version of this script from:
-# http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub
+# https://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub
 
 # This file is supposed to be the same for all GNU packages
 # and recognize all the CPU types, system types and aliases
@@ -57,7 +57,7 @@ Usage: $0 [OPTION] CPU-MFR-OPSYS or ALIAS
 
 Canonicalize a configuration name.
 
-Operation modes:
+Options:
   -h, --help         print this help, then exit
   -t, --time-stamp   print date of last modification, then exit
   -v, --version      print version number, then exit
@@ -67,7 +67,7 @@ Report bugs and patches to <config-patches@gnu.org>."
 version="\
 GNU config.sub ($timestamp)
 
-Copyright 1992-2017 Free Software Foundation, Inc.
+Copyright 1992-2019 Free Software Foundation, Inc.
 
 This is free software; see the source for copying conditions.  There is NO
 warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
@@ -89,12 +89,12 @@ while test $# -gt 0 ; do
     - )	# Use stdin as input.
        break ;;
     -* )
-       echo "$me: invalid option $1$help"
+       echo "$me: invalid option $1$help" >&2
        exit 1 ;;
 
     *local*)
        # First pass through any local machine types.
-       echo $1
+       echo "$1"
        exit ;;
 
     * )
@@ -110,1252 +110,1164 @@ case $# in
     exit 1;;
 esac
 
-# Separate what the user gave into CPU-COMPANY and OS or KERNEL-OS (if any).
-# Here we must recognize all the valid KERNEL-OS combinations.
-maybe_os=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\2/'`
-case $maybe_os in
-  nto-qnx* | linux-gnu* | linux-android* | linux-dietlibc | linux-newlib* | \
-  linux-musl* | linux-uclibc* | uclinux-uclibc* | uclinux-gnu* | kfreebsd*-gnu* | \
-  knetbsd*-gnu* | netbsd*-gnu* | netbsd*-eabi* | \
-  kopensolaris*-gnu* | cloudabi*-eabi* | \
-  storm-chaos* | os2-emx* | rtmk-nova*)
-    os=-$maybe_os
-    basic_machine=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\1/'`
-    ;;
-  android-linux)
-    os=-linux-android
-    basic_machine=`echo $1 | sed 's/^\(.*\)-\([^-]*-[^-]*\)$/\1/'`-unknown
-    ;;
-  *)
-    basic_machine=`echo $1 | sed 's/-[^-]*$//'`
-    if [ $basic_machine != $1 ]
-    then os=`echo $1 | sed 's/.*-/-/'`
-    else os=; fi
-    ;;
-esac
+# Split fields of configuration type
+# shellcheck disable=SC2162
+IFS="-" read field1 field2 field3 field4 <<EOF
+$1
+EOF
 
-### Let's recognize common machines as not being operating systems so
-### that things like config.sub decstation-3100 work.  We also
-### recognize some manufacturers as not being operating systems, so we
-### can provide default operating systems below.
-case $os in
-	-sun*os*)
-		# Prevent following clause from handling this invalid input.
-		;;
-	-dec* | -mips* | -sequent* | -encore* | -pc532* | -sgi* | -sony* | \
-	-att* | -7300* | -3300* | -delta* | -motorola* | -sun[234]* | \
-	-unicom* | -ibm* | -next | -hp | -isi* | -apollo | -altos* | \
-	-convergent* | -ncr* | -news | -32* | -3600* | -3100* | -hitachi* |\
-	-c[123]* | -convex* | -sun | -crds | -omron* | -dg | -ultra | -tti* | \
-	-harris | -dolphin | -highlevel | -gould | -cbm | -ns | -masscomp | \
-	-apple | -axis | -knuth | -cray | -microblaze*)
-		os=
-		basic_machine=$1
-		;;
-	-bluegene*)
-		os=-cnk
-		;;
-	-sim | -cisco | -oki | -wec | -winbond)
-		os=
-		basic_machine=$1
-		;;
-	-scout)
-		;;
-	-wrs)
-		os=-vxworks
-		basic_machine=$1
-		;;
-	-chorusos*)
-		os=-chorusos
-		basic_machine=$1
-		;;
-	-chorusrdb)
-		os=-chorusrdb
-		basic_machine=$1
-		;;
-	-hiux*)
-		os=-hiuxwe2
-		;;
-	-sco6)
-		os=-sco5v6
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-sco5)
-		os=-sco3.2v5
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-sco4)
-		os=-sco3.2v4
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-sco3.2.[4-9]*)
-		os=`echo $os | sed -e 's/sco3.2./sco3.2v/'`
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-sco3.2v[4-9]*)
-		# Don't forget version if it is 3.2v4 or newer.
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-sco5v6*)
-		# Don't forget version if it is 3.2v4 or newer.
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-sco*)
-		os=-sco3.2v2
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-udk*)
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-isc)
-		os=-isc2.2
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-clix*)
-		basic_machine=clipper-intergraph
-		;;
-	-isc*)
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-pc/'`
-		;;
-	-lynx*178)
-		os=-lynxos178
-		;;
-	-lynx*5)
-		os=-lynxos5
-		;;
-	-lynx*)
-		os=-lynxos
+# Separate into logical components for further validation
+case $1 in
+	*-*-*-*-*)
+		echo Invalid configuration \`"$1"\': more than four components >&2
+		exit 1
 		;;
-	-ptx*)
-		basic_machine=`echo $1 | sed -e 's/86-.*/86-sequent/'`
+	*-*-*-*)
+		basic_machine=$field1-$field2
+		os=$field3-$field4
 		;;
-	-windowsnt*)
-		os=`echo $os | sed -e 's/windowsnt/winnt/'`
+	*-*-*)
+		# Ambiguous whether COMPANY is present, or skipped and KERNEL-OS is two
+		# parts
+		maybe_os=$field2-$field3
+		case $maybe_os in
+			nto-qnx* | linux-gnu* | linux-android* | linux-dietlibc \
+			| linux-newlib* | linux-musl* | linux-uclibc* | uclinux-uclibc* \
+			| uclinux-gnu* | kfreebsd*-gnu* | knetbsd*-gnu* | netbsd*-gnu* \
+			| netbsd*-eabi* | kopensolaris*-gnu* | cloudabi*-eabi* \
+			| storm-chaos* | os2-emx* | rtmk-nova*)
+				basic_machine=$field1
+				os=$maybe_os
+				;;
+			android-linux)
+				basic_machine=$field1-unknown
+				os=linux-android
+				;;
+			*)
+				basic_machine=$field1-$field2
+				os=$field3
+				;;
+		esac
 		;;
-	-psos*)
-		os=-psos
+	*-*)
+		# A lone config we happen to match not fitting any pattern
+		case $field1-$field2 in
+			decstation-3100)
+				basic_machine=mips-dec
+				os=
+				;;
+			*-*)
+				# Second component is usually, but not always the OS
+				case $field2 in
+					# Prevent following clause from handling this valid os
+					sun*os*)
+						basic_machine=$field1
+						os=$field2
+						;;
+					# Manufacturers
+					dec* | mips* | sequent* | encore* | pc533* | sgi* | sony* \
+					| att* | 7300* | 3300* | delta* | motorola* | sun[234]* \
+					| unicom* | ibm* | next | hp | isi* | apollo | altos* \
+					| convergent* | ncr* | news | 32* | 3600* | 3100* \
+					| hitachi* | c[123]* | convex* | sun | crds | omron* | dg \
+					| ultra | tti* | harris | dolphin | highlevel | gould \
+					| cbm | ns | masscomp | apple | axis | knuth | cray \
+					| microblaze* | sim | cisco \
+					| oki | wec | wrs | winbond)
+						basic_machine=$field1-$field2
+						os=
+						;;
+					*)
+						basic_machine=$field1
+						os=$field2
+						;;
+				esac
+			;;
+		esac
 		;;
-	-mint | -mint[0-9]*)
-		basic_machine=m68k-atari
-		os=-mint
+	*)
+		# Convert single-component short-hands not valid as part of
+		# multi-component configurations.
+		case $field1 in
+			386bsd)
+				basic_machine=i386-pc
+				os=bsd
+				;;
+			a29khif)
+				basic_machine=a29k-amd
+				os=udi
+				;;
+			adobe68k)
+				basic_machine=m68010-adobe
+				os=scout
+				;;
+			alliant)
+				basic_machine=fx80-alliant
+				os=
+				;;
+			altos | altos3068)
+				basic_machine=m68k-altos
+				os=
+				;;
+			am29k)
+				basic_machine=a29k-none
+				os=bsd
+				;;
+			amdahl)
+				basic_machine=580-amdahl
+				os=sysv
+				;;
+			amiga)
+				basic_machine=m68k-unknown
+				os=
+				;;
+			amigaos | amigados)
+				basic_machine=m68k-unknown
+				os=amigaos
+				;;
+			amigaunix | amix)
+				basic_machine=m68k-unknown
+				os=sysv4
+				;;
+			apollo68)
+				basic_machine=m68k-apollo
+				os=sysv
+				;;
+			apollo68bsd)
+				basic_machine=m68k-apollo
+				os=bsd
+				;;
+			aros)
+				basic_machine=i386-pc
+				os=aros
+				;;
+			aux)
+				basic_machine=m68k-apple
+				os=aux
+				;;
+			balance)
+				basic_machine=ns32k-sequent
+				os=dynix
+				;;
+			blackfin)
+				basic_machine=bfin-unknown
+				os=linux
+				;;
+			cegcc)
+				basic_machine=arm-unknown
+				os=cegcc
+				;;
+			convex-c1)
+				basic_machine=c1-convex
+				os=bsd
+				;;
+			convex-c2)
+				basic_machine=c2-convex
+				os=bsd
+				;;
+			convex-c32)
+				basic_machine=c32-convex
+				os=bsd
+				;;
+			convex-c34)
+				basic_machine=c34-convex
+				os=bsd
+				;;
+			convex-c38)
+				basic_machine=c38-convex
+				os=bsd
+				;;
+			cray)
+				basic_machine=j90-cray
+				os=unicos
+				;;
+			crds | unos)
+				basic_machine=m68k-crds
+				os=
+				;;
+			da30)
+				basic_machine=m68k-da30
+				os=
+				;;
+			decstation | pmax | pmin | dec3100 | decstatn)
+				basic_machine=mips-dec
+				os=
+				;;
+			delta88)
+				basic_machine=m88k-motorola
+				os=sysv3
+				;;
+			dicos)
+				basic_machine=i686-pc
+				os=dicos
+				;;
+			djgpp)
+				basic_machine=i586-pc
+				os=msdosdjgpp
+				;;
+			ebmon29k)
+				basic_machine=a29k-amd
+				os=ebmon
+				;;
+			es1800 | OSE68k | ose68k | ose | OSE)
+				basic_machine=m68k-ericsson
+				os=ose
+				;;
+			gmicro)
+				basic_machine=tron-gmicro
+				os=sysv
+				;;
+			go32)
+				basic_machine=i386-pc
+				os=go32
+				;;
+			h8300hms)
+				basic_machine=h8300-hitachi
+				os=hms
+				;;
+			h8300xray)
+				basic_machine=h8300-hitachi
+				os=xray
+				;;
+			h8500hms)
+				basic_machine=h8500-hitachi
+				os=hms
+				;;
+			harris)
+				basic_machine=m88k-harris
+				os=sysv3
+				;;
+			hp300 | hp300hpux)
+				basic_machine=m68k-hp
+				os=hpux
+				;;
+			hp300bsd)
+				basic_machine=m68k-hp
+				os=bsd
+				;;
+			hppaosf)
+				basic_machine=hppa1.1-hp
+				os=osf
+				;;
+			hppro)
+				basic_machine=hppa1.1-hp
+				os=proelf
+				;;
+			i386mach)
+				basic_machine=i386-mach
+				os=mach
+				;;
+			isi68 | isi)
+				basic_machine=m68k-isi
+				os=sysv
+				;;
+			m68knommu)
+				basic_machine=m68k-unknown
+				os=linux
+				;;
+			magnum | m3230)
+				basic_machine=mips-mips
+				os=sysv
+				;;
+			merlin)
+				basic_machine=ns32k-utek
+				os=sysv
+				;;
+			mingw64)
+				basic_machine=x86_64-pc
+				os=mingw64
+				;;
+			mingw32)
+				basic_machine=i686-pc
+				os=mingw32
+				;;
+			mingw32ce)
+				basic_machine=arm-unknown
+				os=mingw32ce
+				;;
+			monitor)
+				basic_machine=m68k-rom68k
+				os=coff
+				;;
+			morphos)
+				basic_machine=powerpc-unknown
+				os=morphos
+				;;
+			moxiebox)
+				basic_machine=moxie-unknown
+				os=moxiebox
+				;;
+			msdos)
+				basic_machine=i386-pc
+				os=msdos
+				;;
+			msys)
+				basic_machine=i686-pc
+				os=msys
+				;;
+			mvs)
+				basic_machine=i370-ibm
+				os=mvs
+				;;
+			nacl)
+				basic_machine=le32-unknown
+				os=nacl
+				;;
+			ncr3000)
+				basic_machine=i486-ncr
+				os=sysv4
+				;;
+			netbsd386)
+				basic_machine=i386-pc
+				os=netbsd
+				;;
+			netwinder)
+				basic_machine=armv4l-rebel
+				os=linux
+				;;
+			news | news700 | news800 | news900)
+				basic_machine=m68k-sony
+				os=newsos
+				;;
+			news1000)
+				basic_machine=m68030-sony
+				os=newsos
+				;;
+			necv70)
+				basic_machine=v70-nec
+				os=sysv
+				;;
+			nh3000)
+				basic_machine=m68k-harris
+				os=cxux
+				;;
+			nh[45]000)
+				basic_machine=m88k-harris
+				os=cxux
+				;;
+			nindy960)
+				basic_machine=i960-intel
+				os=nindy
+				;;
+			mon960)
+				basic_machine=i960-intel
+				os=mon960
+				;;
+			nonstopux)
+				basic_machine=mips-compaq
+				os=nonstopux
+				;;
+			os400)
+				basic_machine=powerpc-ibm
+				os=os400
+				;;
+			OSE68000 | ose68000)
+				basic_machine=m68000-ericsson
+				os=ose
+				;;
+			os68k)
+				basic_machine=m68k-none
+				os=os68k
+				;;
+			paragon)
+				basic_machine=i860-intel
+				os=osf
+				;;
+			parisc)
+				basic_machine=hppa-unknown
+				os=linux
+				;;
+			pw32)
+				basic_machine=i586-unknown
+				os=pw32
+				;;
+			rdos | rdos64)
+				basic_machine=x86_64-pc
+				os=rdos
+				;;
+			rdos32)
+				basic_machine=i386-pc
+				os=rdos
+				;;
+			rom68k)
+				basic_machine=m68k-rom68k
+				os=coff
+				;;
+			sa29200)
+				basic_machine=a29k-amd
+				os=udi
+				;;
+			sei)
+				basic_machine=mips-sei
+				os=seiux
+				;;
+			sequent)
+				basic_machine=i386-sequent
+				os=
+				;;
+			sps7)
+				basic_machine=m68k-bull
+				os=sysv2
+				;;
+			st2000)
+				basic_machine=m68k-tandem
+				os=
+				;;
+			stratus)
+				basic_machine=i860-stratus
+				os=sysv4
+				;;
+			sun2)
+				basic_machine=m68000-sun
+				os=
+				;;
+			sun2os3)
+				basic_machine=m68000-sun
+				os=sunos3
+				;;
+			sun2os4)
+				basic_machine=m68000-sun
+				os=sunos4
+				;;
+			sun3)
+				basic_machine=m68k-sun
+				os=
+				;;
+			sun3os3)
+				basic_machine=m68k-sun
+				os=sunos3
+				;;
+			sun3os4)
+				basic_machine=m68k-sun
+				os=sunos4
+				;;
+			sun4)
+				basic_machine=sparc-sun
+				os=
+				;;
+			sun4os3)
+				basic_machine=sparc-sun
+				os=sunos3
+				;;
+			sun4os4)
+				basic_machine=sparc-sun
+				os=sunos4
+				;;
+			sun4sol2)
+				basic_machine=sparc-sun
+				os=solaris2
+				;;
+			sun386 | sun386i | roadrunner)
+				basic_machine=i386-sun
+				os=
+				;;
+			sv1)
+				basic_machine=sv1-cray
+				os=unicos
+				;;
+			symmetry)
+				basic_machine=i386-sequent
+				os=dynix
+				;;
+			t3e)
+				basic_machine=alphaev5-cray
+				os=unicos
+				;;
+			t90)
+				basic_machine=t90-cray
+				os=unicos
+				;;
+			toad1)
+				basic_machine=pdp10-xkl
+				os=tops20
+				;;
+			tpf)
+				basic_machine=s390x-ibm
+				os=tpf
+				;;
+			udi29k)
+				basic_machine=a29k-amd
+				os=udi
+				;;
+			ultra3)
+				basic_machine=a29k-nyu
+				os=sym1
+				;;
+			v810 | necv810)
+				basic_machine=v810-nec
+				os=none
+				;;
+			vaxv)
+				basic_machine=vax-dec
+				os=sysv
+				;;
+			vms)
+				basic_machine=vax-dec
+				os=vms
+				;;
+			vsta)
+				basic_machine=i386-pc
+				os=vsta
+				;;
+			vxworks960)
+				basic_machine=i960-wrs
+				os=vxworks
+				;;
+			vxworks68)
+				basic_machine=m68k-wrs
+				os=vxworks
+				;;
+			vxworks29k)
+				basic_machine=a29k-wrs
+				os=vxworks
+				;;
+			xbox)
+				basic_machine=i686-pc
+				os=mingw32
+				;;
+			ymp)
+				basic_machine=ymp-cray
+				os=unicos
+				;;
+			*)
+				basic_machine=$1
+				os=
+				;;
+		esac
 		;;
 esac
 
-# Decode aliases for certain CPU-COMPANY combinations.
+# Decode 1-component or ad-hoc basic machines
 case $basic_machine in
-	# Recognize the basic CPU types without company name.
-	# Some are omitted here because they have special meanings below.
-	1750a | 580 \
-	| a29k \
-	| aarch64 | aarch64_be \
-	| alpha | alphaev[4-8] | alphaev56 | alphaev6[78] | alphapca5[67] \
-	| alpha64 | alpha64ev[4-8] | alpha64ev56 | alpha64ev6[78] | alpha64pca5[67] \
-	| am33_2.0 \
-	| arc | arceb \
-	| arm | arm[bl]e | arme[lb] | armv[2-8] | armv[3-8][lb] | armv7[arm] \
-	| avr | avr32 \
-	| ba \
-	| be32 | be64 \
-	| bfin \
-	| c4x | c8051 | clipper \
-	| d10v | d30v | dlx | dsp16xx \
-	| e2k | epiphany \
-	| fido | fr30 | frv | ft32 \
-	| h8300 | h8500 | hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \
-	| hexagon \
-	| i370 | i860 | i960 | ia16 | ia64 \
-	| ip2k | iq2000 \
-	| k1om \
-	| le32 | le64 \
-	| lm32 \
-	| m32c | m32r | m32rle | m68000 | m68k | m88k \
-	| maxq | mb | microblaze | microblazeel | mcore | mep | metag \
-	| mips | mipsbe | mipseb | mipsel | mipsle \
-	| mips16 \
-	| mips64 | mips64el \
-	| mips64octeon | mips64octeonel \
-	| mips64orion | mips64orionel \
-	| mips64r5900 | mips64r5900el \
-	| mips64vr | mips64vrel \
-	| mips64vr4100 | mips64vr4100el \
-	| mips64vr4300 | mips64vr4300el \
-	| mips64vr5000 | mips64vr5000el \
-	| mips64vr5900 | mips64vr5900el \
-	| mipsisa32 | mipsisa32el \
-	| mipsisa32r2 | mipsisa32r2el \
-	| mipsisa32r6 | mipsisa32r6el \
-	| mipsisa64 | mipsisa64el \
-	| mipsisa64r2 | mipsisa64r2el \
-	| mipsisa64r6 | mipsisa64r6el \
-	| mipsisa64sb1 | mipsisa64sb1el \
-	| mipsisa64sr71k | mipsisa64sr71kel \
-	| mipsr5900 | mipsr5900el \
-	| mipstx39 | mipstx39el \
-	| mn10200 | mn10300 \
-	| moxie \
-	| mt \
-	| msp430 \
-	| nds32 | nds32le | nds32be \
-	| nios | nios2 | nios2eb | nios2el \
-	| ns16k | ns32k \
-	| open8 | or1k | or1knd | or32 \
-	| pdp10 | pdp11 | pj | pjl \
-	| powerpc | powerpc64 | powerpc64le | powerpcle \
-	| pru \
-	| pyramid \
-	| riscv32 | riscv64 \
-	| rl78 | rx \
-	| score \
-	| sh | sh[1234] | sh[24]a | sh[24]aeb | sh[23]e | sh[234]eb | sheb | shbe | shle | sh[1234]le | sh3ele \
-	| sh64 | sh64le \
-	| sparc | sparc64 | sparc64b | sparc64v | sparc86x | sparclet | sparclite \
-	| sparcv8 | sparcv9 | sparcv9b | sparcv9v \
-	| spu \
-	| tahoe | tic4x | tic54x | tic55x | tic6x | tic80 | tron \
-	| ubicom32 \
-	| v850 | v850e | v850e1 | v850e2 | v850es | v850e2v3 \
-	| visium \
-	| wasm32 \
-	| we32k \
-	| x86 | xc16x | xstormy16 | xtensa \
-	| z8k | z80)
-		basic_machine=$basic_machine-unknown
-		;;
-	c54x)
-		basic_machine=tic54x-unknown
-		;;
-	c55x)
-		basic_machine=tic55x-unknown
-		;;
-	c6x)
-		basic_machine=tic6x-unknown
-		;;
-	leon|leon[3-9])
-		basic_machine=sparc-$basic_machine
+	# Here we handle the default manufacturer of certain CPU types.  It is in
+	# some cases the only manufacturer, in others, it is the most popular.
+	w89k)
+		cpu=hppa1.1
+		vendor=winbond
 		;;
-	m6811 | m68hc11 | m6812 | m68hc12 | m68hcs12x | nvptx | picochip)
-		basic_machine=$basic_machine-unknown
-		os=-none
+	op50n)
+		cpu=hppa1.1
+		vendor=oki
 		;;
-	m88110 | m680[12346]0 | m683?2 | m68360 | m5200 | v70 | w65 | z8k)
+	op60c)
+		cpu=hppa1.1
+		vendor=oki
 		;;
-	ms1)
-		basic_machine=mt-unknown
+	ibm*)
+		cpu=i370
+		vendor=ibm
 		;;
-
-	strongarm | thumb | xscale)
-		basic_machine=arm-unknown
-		;;
-	xgate)
-		basic_machine=$basic_machine-unknown
-		os=-none
+	orion105)
+		cpu=clipper
+		vendor=highlevel
 		;;
-	xscaleeb)
-		basic_machine=armeb-unknown
+	mac | mpw | mac-mpw)
+		cpu=m68k
+		vendor=apple
 		;;
-
-	xscaleel)
-		basic_machine=armel-unknown
+	pmac | pmac-mpw)
+		cpu=powerpc
+		vendor=apple
 		;;
 
-	# We use `pc' rather than `unknown'
-	# because (1) that's what they normally are, and
-	# (2) the word "unknown" tends to confuse beginning users.
-	i*86 | x86_64)
-	  basic_machine=$basic_machine-pc
-	  ;;
-	# Object if more than one company name word.
-	*-*-*)
-		echo Invalid configuration \`$1\': machine \`$basic_machine\' not recognized 1>&2
-		exit 1
-		;;
-	# Recognize the basic CPU types with company name.
-	580-* \
-	| a29k-* \
-	| aarch64-* | aarch64_be-* \
-	| alpha-* | alphaev[4-8]-* | alphaev56-* | alphaev6[78]-* \
-	| alpha64-* | alpha64ev[4-8]-* | alpha64ev56-* | alpha64ev6[78]-* \
-	| alphapca5[67]-* | alpha64pca5[67]-* | arc-* | arceb-* \
-	| arm-*  | armbe-* | armle-* | armeb-* | armv*-* \
-	| avr-* | avr32-* \
-	| ba-* \
-	| be32-* | be64-* \
-	| bfin-* | bs2000-* \
-	| c[123]* | c30-* | [cjt]90-* | c4x-* \
-	| c8051-* | clipper-* | craynv-* | cydra-* \
-	| d10v-* | d30v-* | dlx-* \
-	| e2k-* | elxsi-* \
-	| f30[01]-* | f700-* | fido-* | fr30-* | frv-* | fx80-* \
-	| h8300-* | h8500-* \
-	| hppa-* | hppa1.[01]-* | hppa2.0-* | hppa2.0[nw]-* | hppa64-* \
-	| hexagon-* \
-	| i*86-* | i860-* | i960-* | ia16-* | ia64-* \
-	| ip2k-* | iq2000-* \
-	| k1om-* \
-	| le32-* | le64-* \
-	| lm32-* \
-	| m32c-* | m32r-* | m32rle-* \
-	| m68000-* | m680[012346]0-* | m68360-* | m683?2-* | m68k-* \
-	| m88110-* | m88k-* | maxq-* | mcore-* | metag-* \
-	| microblaze-* | microblazeel-* \
-	| mips-* | mipsbe-* | mipseb-* | mipsel-* | mipsle-* \
-	| mips16-* \
-	| mips64-* | mips64el-* \
-	| mips64octeon-* | mips64octeonel-* \
-	| mips64orion-* | mips64orionel-* \
-	| mips64r5900-* | mips64r5900el-* \
-	| mips64vr-* | mips64vrel-* \
-	| mips64vr4100-* | mips64vr4100el-* \
-	| mips64vr4300-* | mips64vr4300el-* \
-	| mips64vr5000-* | mips64vr5000el-* \
-	| mips64vr5900-* | mips64vr5900el-* \
-	| mipsisa32-* | mipsisa32el-* \
-	| mipsisa32r2-* | mipsisa32r2el-* \
-	| mipsisa32r6-* | mipsisa32r6el-* \
-	| mipsisa64-* | mipsisa64el-* \
-	| mipsisa64r2-* | mipsisa64r2el-* \
-	| mipsisa64r6-* | mipsisa64r6el-* \
-	| mipsisa64sb1-* | mipsisa64sb1el-* \
-	| mipsisa64sr71k-* | mipsisa64sr71kel-* \
-	| mipsr5900-* | mipsr5900el-* \
-	| mipstx39-* | mipstx39el-* \
-	| mmix-* \
-	| mt-* \
-	| msp430-* \
-	| nds32-* | nds32le-* | nds32be-* \
-	| nios-* | nios2-* | nios2eb-* | nios2el-* \
-	| none-* | np1-* | ns16k-* | ns32k-* \
-	| open8-* \
-	| or1k*-* \
-	| orion-* \
-	| pdp10-* | pdp11-* | pj-* | pjl-* | pn-* | power-* \
-	| powerpc-* | powerpc64-* | powerpc64le-* | powerpcle-* \
-	| pru-* \
-	| pyramid-* \
-	| riscv32-* | riscv64-* \
-	| rl78-* | romp-* | rs6000-* | rx-* \
-	| sh-* | sh[1234]-* | sh[24]a-* | sh[24]aeb-* | sh[23]e-* | sh[34]eb-* | sheb-* | shbe-* \
-	| shle-* | sh[1234]le-* | sh3ele-* | sh64-* | sh64le-* \
-	| sparc-* | sparc64-* | sparc64b-* | sparc64v-* | sparc86x-* | sparclet-* \
-	| sparclite-* \
-	| sparcv8-* | sparcv9-* | sparcv9b-* | sparcv9v-* | sv1-* | sx*-* \
-	| tahoe-* \
-	| tic30-* | tic4x-* | tic54x-* | tic55x-* | tic6x-* | tic80-* \
-	| tile*-* \
-	| tron-* \
-	| ubicom32-* \
-	| v850-* | v850e-* | v850e1-* | v850es-* | v850e2-* | v850e2v3-* \
-	| vax-* \
-	| visium-* \
-	| wasm32-* \
-	| we32k-* \
-	| x86-* | x86_64-* | xc16x-* | xps100-* \
-	| xstormy16-* | xtensa*-* \
-	| ymp-* \
-	| z8k-* | z80-*)
-		;;
-	# Recognize the basic CPU types without company name, with glob match.
-	xtensa*)
-		basic_machine=$basic_machine-unknown
-		;;
 	# Recognize the various machine names and aliases which stand
 	# for a CPU type and a company and sometimes even an OS.
-	386bsd)
-		basic_machine=i386-unknown
-		os=-bsd
-		;;
 	3b1 | 7300 | 7300-att | att-7300 | pc7300 | safari | unixpc)
-		basic_machine=m68000-att
+		cpu=m68000
+		vendor=att
 		;;
 	3b*)
-		basic_machine=we32k-att
-		;;
-	a29khif)
-		basic_machine=a29k-amd
-		os=-udi
-		;;
-	abacus)
-		basic_machine=abacus-unknown
-		;;
-	adobe68k)
-		basic_machine=m68010-adobe
-		os=-scout
-		;;
-	alliant | fx80)
-		basic_machine=fx80-alliant
-		;;
-	altos | altos3068)
-		basic_machine=m68k-altos
-		;;
-	am29k)
-		basic_machine=a29k-none
-		os=-bsd
-		;;
-	amd64)
-		basic_machine=x86_64-pc
-		;;
-	amd64-*)
-		basic_machine=x86_64-`echo $basic_machine | sed 's/^[^-]*-//'`
-		;;
-	amdahl)
-		basic_machine=580-amdahl
-		os=-sysv
-		;;
-	amiga | amiga-*)
-		basic_machine=m68k-unknown
-		;;
-	amigaos | amigados)
-		basic_machine=m68k-unknown
-		os=-amigaos
-		;;
-	amigaunix | amix)
-		basic_machine=m68k-unknown
-		os=-sysv4
-		;;
-	apollo68)
-		basic_machine=m68k-apollo
-		os=-sysv
-		;;
-	apollo68bsd)
-		basic_machine=m68k-apollo
-		os=-bsd
-		;;
-	aros)
-		basic_machine=i386-pc
-		os=-aros
-		;;
-	asmjs)
-		basic_machine=asmjs-unknown
-		;;
-	aux)
-		basic_machine=m68k-apple
-		os=-aux
-		;;
-	balance)
-		basic_machine=ns32k-sequent
-		os=-dynix
-		;;
-	blackfin)
-		basic_machine=bfin-unknown
-		os=-linux
-		;;
-	blackfin-*)
-		basic_machine=bfin-`echo $basic_machine | sed 's/^[^-]*-//'`
-		os=-linux
+		cpu=we32k
+		vendor=att
 		;;
 	bluegene*)
-		basic_machine=powerpc-ibm
-		os=-cnk
-		;;
-	c54x-*)
-		basic_machine=tic54x-`echo $basic_machine | sed 's/^[^-]*-//'`
-		;;
-	c55x-*)
-		basic_machine=tic55x-`echo $basic_machine | sed 's/^[^-]*-//'`
-		;;
-	c6x-*)
-		basic_machine=tic6x-`echo $basic_machine | sed 's/^[^-]*-//'`
-		;;
-	c90)
-		basic_machine=c90-cray
-		os=-unicos
-		;;
-	cegcc)
-		basic_machine=arm-unknown
-		os=-cegcc
-		;;
-	convex-c1)
-		basic_machine=c1-convex
-		os=-bsd
-		;;
-	convex-c2)
-		basic_machine=c2-convex
-		os=-bsd
-		;;
-	convex-c32)
-		basic_machine=c32-convex
-		os=-bsd
-		;;
-	convex-c34)
-		basic_machine=c34-convex
-		os=-bsd
-		;;
-	convex-c38)
-		basic_machine=c38-convex
-		os=-bsd
-		;;
-	cray | j90)
-		basic_machine=j90-cray
-		os=-unicos
-		;;
-	craynv)
-		basic_machine=craynv-cray
-		os=-unicosmp
-		;;
-	cr16 | cr16-*)
-		basic_machine=cr16-unknown
-		os=-elf
-		;;
-	crds | unos)
-		basic_machine=m68k-crds
-		;;
-	crisv32 | crisv32-* | etraxfs*)
-		basic_machine=crisv32-axis
-		;;
-	cris | cris-* | etrax*)
-		basic_machine=cris-axis
-		;;
-	crx)
-		basic_machine=crx-unknown
-		os=-elf
-		;;
-	da30 | da30-*)
-		basic_machine=m68k-da30
-		;;
-	decstation | decstation-3100 | pmax | pmax-* | pmin | dec3100 | decstatn)
-		basic_machine=mips-dec
+		cpu=powerpc
+		vendor=ibm
+		os=cnk
 		;;
 	decsystem10* | dec10*)
-		basic_machine=pdp10-dec
-		os=-tops10
+		cpu=pdp10
+		vendor=dec
+		os=tops10
 		;;
 	decsystem20* | dec20*)
-		basic_machine=pdp10-dec
-		os=-tops20
+		cpu=pdp10
+		vendor=dec
+		os=tops20
 		;;
 	delta | 3300 | motorola-3300 | motorola-delta \
 	      | 3300-motorola | delta-motorola)
-		basic_machine=m68k-motorola
+		cpu=m68k
+		vendor=motorola
 		;;
-	delta88)
-		basic_machine=m88k-motorola
-		os=-sysv3
-		;;
-	dicos)
-		basic_machine=i686-pc
-		os=-dicos
-		;;
-	djgpp)
-		basic_machine=i586-pc
-		os=-msdosdjgpp
-		;;
-	dpx20 | dpx20-*)
-		basic_machine=rs6000-bull
-		os=-bosx
-		;;
-	dpx2* | dpx2*-bull)
-		basic_machine=m68k-bull
-		os=-sysv3
-		;;
-	e500v[12])
-		basic_machine=powerpc-unknown
-		os=$os"spe"
-		;;
-	e500v[12]-*)
-		basic_machine=powerpc-`echo $basic_machine | sed 's/^[^-]*-//'`
-		os=$os"spe"
-		;;
-	ebmon29k)
-		basic_machine=a29k-amd
-		os=-ebmon
-		;;
-	elxsi)
-		basic_machine=elxsi-elxsi
-		os=-bsd
+	dpx2*)
+		cpu=m68k
+		vendor=bull
+		os=sysv3
 		;;
 	encore | umax | mmax)
-		basic_machine=ns32k-encore
+		cpu=ns32k
+		vendor=encore
 		;;
-	es1800 | OSE68k | ose68k | ose | OSE)
-		basic_machine=m68k-ericsson
-		os=-ose
+	elxsi)
+		cpu=elxsi
+		vendor=elxsi
+		os=${os:-bsd}
 		;;
 	fx2800)
-		basic_machine=i860-alliant
+		cpu=i860
+		vendor=alliant
 		;;
 	genix)
-		basic_machine=ns32k-ns
-		;;
-	gmicro)
-		basic_machine=tron-gmicro
-		os=-sysv
-		;;
-	go32)
-		basic_machine=i386-pc
-		os=-go32
+		cpu=ns32k
+		vendor=ns
 		;;
 	h3050r* | hiux*)
-		basic_machine=hppa1.1-hitachi
-		os=-hiuxwe2
-		;;
-	h8300hms)
-		basic_machine=h8300-hitachi
-		os=-hms
-		;;
-	h8300xray)
-		basic_machine=h8300-hitachi
-		os=-xray
-		;;
-	h8500hms)
-		basic_machine=h8500-hitachi
-		os=-hms
-		;;
-	harris)
-		basic_machine=m88k-harris
-		os=-sysv3
-		;;
-	hp300-*)
-		basic_machine=m68k-hp
-		;;
-	hp300bsd)
-		basic_machine=m68k-hp
-		os=-bsd
-		;;
-	hp300hpux)
-		basic_machine=m68k-hp
-		os=-hpux
+		cpu=hppa1.1
+		vendor=hitachi
+		os=hiuxwe2
 		;;
 	hp3k9[0-9][0-9] | hp9[0-9][0-9])
-		basic_machine=hppa1.0-hp
+		cpu=hppa1.0
+		vendor=hp
 		;;
 	hp9k2[0-9][0-9] | hp9k31[0-9])
-		basic_machine=m68000-hp
+		cpu=m68000
+		vendor=hp
 		;;
 	hp9k3[2-9][0-9])
-		basic_machine=m68k-hp
+		cpu=m68k
+		vendor=hp
 		;;
 	hp9k6[0-9][0-9] | hp6[0-9][0-9])
-		basic_machine=hppa1.0-hp
+		cpu=hppa1.0
+		vendor=hp
 		;;
 	hp9k7[0-79][0-9] | hp7[0-79][0-9])
-		basic_machine=hppa1.1-hp
+		cpu=hppa1.1
+		vendor=hp
 		;;
 	hp9k78[0-9] | hp78[0-9])
 		# FIXME: really hppa2.0-hp
-		basic_machine=hppa1.1-hp
+		cpu=hppa1.1
+		vendor=hp
 		;;
 	hp9k8[67]1 | hp8[67]1 | hp9k80[24] | hp80[24] | hp9k8[78]9 | hp8[78]9 | hp9k893 | hp893)
 		# FIXME: really hppa2.0-hp
-		basic_machine=hppa1.1-hp
+		cpu=hppa1.1
+		vendor=hp
 		;;
 	hp9k8[0-9][13679] | hp8[0-9][13679])
-		basic_machine=hppa1.1-hp
+		cpu=hppa1.1
+		vendor=hp
 		;;
 	hp9k8[0-9][0-9] | hp8[0-9][0-9])
-		basic_machine=hppa1.0-hp
-		;;
-	hppa-next)
-		os=-nextstep3
-		;;
-	hppaosf)
-		basic_machine=hppa1.1-hp
-		os=-osf
-		;;
-	hppro)
-		basic_machine=hppa1.1-hp
-		os=-proelf
-		;;
-	i370-ibm* | ibm*)
-		basic_machine=i370-ibm
+		cpu=hppa1.0
+		vendor=hp
 		;;
 	i*86v32)
-		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
-		os=-sysv32
+		cpu=`echo "$1" | sed -e 's/86.*/86/'`
+		vendor=pc
+		os=sysv32
 		;;
 	i*86v4*)
-		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
-		os=-sysv4
+		cpu=`echo "$1" | sed -e 's/86.*/86/'`
+		vendor=pc
+		os=sysv4
 		;;
 	i*86v)
-		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
-		os=-sysv
+		cpu=`echo "$1" | sed -e 's/86.*/86/'`
+		vendor=pc
+		os=sysv
 		;;
 	i*86sol2)
-		basic_machine=`echo $1 | sed -e 's/86.*/86-pc/'`
-		os=-solaris2
-		;;
-	i386mach)
-		basic_machine=i386-mach
-		os=-mach
+		cpu=`echo "$1" | sed -e 's/86.*/86/'`
+		vendor=pc
+		os=solaris2
 		;;
-	i386-vsta | vsta)
-		basic_machine=i386-unknown
-		os=-vsta
+	j90 | j90-cray)
+		cpu=j90
+		vendor=cray
+		os=${os:-unicos}
 		;;
 	iris | iris4d)
-		basic_machine=mips-sgi
+		cpu=mips
+		vendor=sgi
 		case $os in
-		    -irix*)
+		    irix*)
 			;;
 		    *)
-			os=-irix4
+			os=irix4
 			;;
 		esac
 		;;
-	isi68 | isi)
-		basic_machine=m68k-isi
-		os=-sysv
-		;;
-	leon-*|leon[3-9]-*)
-		basic_machine=sparc-`echo $basic_machine | sed 's/-.*//'`
-		;;
-	m68knommu)
-		basic_machine=m68k-unknown
-		os=-linux
-		;;
-	m68knommu-*)
-		basic_machine=m68k-`echo $basic_machine | sed 's/^[^-]*-//'`
-		os=-linux
-		;;
-	m88k-omron*)
-		basic_machine=m88k-omron
-		;;
-	magnum | m3230)
-		basic_machine=mips-mips
-		os=-sysv
-		;;
-	merlin)
-		basic_machine=ns32k-utek
-		os=-sysv
-		;;
-	microblaze*)
-		basic_machine=microblaze-xilinx
-		;;
-	mingw64)
-		basic_machine=x86_64-pc
-		os=-mingw64
-		;;
-	mingw32)
-		basic_machine=i686-pc
-		os=-mingw32
-		;;
-	mingw32ce)
-		basic_machine=arm-unknown
-		os=-mingw32ce
-		;;
 	miniframe)
-		basic_machine=m68000-convergent
-		;;
-	*mint | -mint[0-9]* | *MiNT | *MiNT[0-9]*)
-		basic_machine=m68k-atari
-		os=-mint
-		;;
-	mips3*-*)
-		basic_machine=`echo $basic_machine | sed -e 's/mips3/mips64/'`
-		;;
-	mips3*)
-		basic_machine=`echo $basic_machine | sed -e 's/mips3/mips64/'`-unknown
-		;;
-	monitor)
-		basic_machine=m68k-rom68k
-		os=-coff
-		;;
-	morphos)
-		basic_machine=powerpc-unknown
-		os=-morphos
-		;;
-	moxiebox)
-		basic_machine=moxie-unknown
-		os=-moxiebox
-		;;
-	msdos)
-		basic_machine=i386-pc
-		os=-msdos
-		;;
-	ms1-*)
-		basic_machine=`echo $basic_machine | sed -e 's/ms1-/mt-/'`
-		;;
-	msys)
-		basic_machine=i686-pc
-		os=-msys
-		;;
-	mvs)
-		basic_machine=i370-ibm
-		os=-mvs
-		;;
-	nacl)
-		basic_machine=le32-unknown
-		os=-nacl
+		cpu=m68000
+		vendor=convergent
 		;;
-	ncr3000)
-		basic_machine=i486-ncr
-		os=-sysv4
-		;;
-	netbsd386)
-		basic_machine=i386-unknown
-		os=-netbsd
-		;;
-	netwinder)
-		basic_machine=armv4l-rebel
-		os=-linux
-		;;
-	news | news700 | news800 | news900)
-		basic_machine=m68k-sony
-		os=-newsos
-		;;
-	news1000)
-		basic_machine=m68030-sony
-		os=-newsos
+	*mint | mint[0-9]* | *MiNT | *MiNT[0-9]*)
+		cpu=m68k
+		vendor=atari
+		os=mint
 		;;
 	news-3600 | risc-news)
-		basic_machine=mips-sony
-		os=-newsos
+		cpu=mips
+		vendor=sony
+		os=newsos
 		;;
-	necv70)
-		basic_machine=v70-nec
-		os=-sysv
-		;;
-	next | m*-next )
-		basic_machine=m68k-next
+	next | m*-next)
+		cpu=m68k
+		vendor=next
 		case $os in
-		    -nextstep* )
+		    openstep*)
+		        ;;
+		    nextstep*)
 			;;
-		    -ns2*)
-		      os=-nextstep2
+		    ns2*)
+		      os=nextstep2
 			;;
 		    *)
-		      os=-nextstep3
+		      os=nextstep3
 			;;
 		esac
 		;;
-	nh3000)
-		basic_machine=m68k-harris
-		os=-cxux
-		;;
-	nh[45]000)
-		basic_machine=m88k-harris
-		os=-cxux
-		;;
-	nindy960)
-		basic_machine=i960-intel
-		os=-nindy
-		;;
-	mon960)
-		basic_machine=i960-intel
-		os=-mon960
-		;;
-	nonstopux)
-		basic_machine=mips-compaq
-		os=-nonstopux
-		;;
 	np1)
-		basic_machine=np1-gould
-		;;
-	neo-tandem)
-		basic_machine=neo-tandem
-		;;
-	nse-tandem)
-		basic_machine=nse-tandem
-		;;
-	nsr-tandem)
-		basic_machine=nsr-tandem
-		;;
-	nsx-tandem)
-		basic_machine=nsx-tandem
+		cpu=np1
+		vendor=gould
 		;;
 	op50n-* | op60c-*)
-		basic_machine=hppa1.1-oki
-		os=-proelf
-		;;
-	openrisc | openrisc-*)
-		basic_machine=or32-unknown
-		;;
-	os400)
-		basic_machine=powerpc-ibm
-		os=-os400
-		;;
-	OSE68000 | ose68000)
-		basic_machine=m68000-ericsson
-		os=-ose
-		;;
-	os68k)
-		basic_machine=m68k-none
-		os=-os68k
+		cpu=hppa1.1
+		vendor=oki
+		os=proelf
 		;;
 	pa-hitachi)
-		basic_machine=hppa1.1-hitachi
-		os=-hiuxwe2
-		;;
-	paragon)
-		basic_machine=i860-intel
-		os=-osf
-		;;
-	parisc)
-		basic_machine=hppa-unknown
-		os=-linux
-		;;
-	parisc-*)
-		basic_machine=hppa-`echo $basic_machine | sed 's/^[^-]*-//'`
-		os=-linux
+		cpu=hppa1.1
+		vendor=hitachi
+		os=hiuxwe2
 		;;
 	pbd)
-		basic_machine=sparc-tti
+		cpu=sparc
+		vendor=tti
 		;;
 	pbb)
-		basic_machine=m68k-tti
-		;;
-	pc532 | pc532-*)
-		basic_machine=ns32k-pc532
+		cpu=m68k
+		vendor=tti
 		;;
-	pc98)
-		basic_machine=i386-pc
-		;;
-	pc98-*)
-		basic_machine=i386-`echo $basic_machine | sed 's/^[^-]*-//'`
-		;;
-	pentium | p5 | k5 | k6 | nexgen | viac3)
-		basic_machine=i586-pc
-		;;
-	pentiumpro | p6 | 6x86 | athlon | athlon_*)
-		basic_machine=i686-pc
-		;;
-	pentiumii | pentium2 | pentiumiii | pentium3)
-		basic_machine=i686-pc
-		;;
-	pentium4)
-		basic_machine=i786-pc
-		;;
-	pentium-* | p5-* | k5-* | k6-* | nexgen-* | viac3-*)
-		basic_machine=i586-`echo $basic_machine | sed 's/^[^-]*-//'`
-		;;
-	pentiumpro-* | p6-* | 6x86-* | athlon-*)
-		basic_machine=i686-`echo $basic_machine | sed 's/^[^-]*-//'`
-		;;
-	pentiumii-* | pentium2-* | pentiumiii-* | pentium3-*)
-		basic_machine=i686-`echo $basic_machine | sed 's/^[^-]*-//'`
-		;;
-	pentium4-*)
-		basic_machine=i786-`echo $basic_machine | sed 's/^[^-]*-//'`
+	pc532)
+		cpu=ns32k
+		vendor=pc532
 		;;
 	pn)
-		basic_machine=pn-gould
+		cpu=pn
+		vendor=gould
 		;;
-	power)	basic_machine=power-ibm
-		;;
-	ppc | ppcbe)	basic_machine=powerpc-unknown
-		;;
-	ppc-* | ppcbe-*)
-		basic_machine=powerpc-`echo $basic_machine | sed 's/^[^-]*-//'`
-		;;
-	ppcle | powerpclittle)
-		basic_machine=powerpcle-unknown
-		;;
-	ppcle-* | powerpclittle-*)
-		basic_machine=powerpcle-`echo $basic_machine | sed 's/^[^-]*-//'`
-		;;
-	ppc64)	basic_machine=powerpc64-unknown
-		;;
-	ppc64-*) basic_machine=powerpc64-`echo $basic_machine | sed 's/^[^-]*-//'`
-		;;
-	ppc64le | powerpc64little)
-		basic_machine=powerpc64le-unknown
-		;;
-	ppc64le-* | powerpc64little-*)
-		basic_machine=powerpc64le-`echo $basic_machine | sed 's/^[^-]*-//'`
+	power)
+		cpu=power
+		vendor=ibm
 		;;
 	ps2)
-		basic_machine=i386-ibm
-		;;
-	pw32)
-		basic_machine=i586-unknown
-		os=-pw32
-		;;
-	rdos | rdos64)
-		basic_machine=x86_64-pc
-		os=-rdos
-		;;
-	rdos32)
-		basic_machine=i386-pc
-		os=-rdos
-		;;
-	rom68k)
-		basic_machine=m68k-rom68k
-		os=-coff
+		cpu=i386
+		vendor=ibm
 		;;
 	rm[46]00)
-		basic_machine=mips-siemens
+		cpu=mips
+		vendor=siemens
 		;;
 	rtpc | rtpc-*)
-		basic_machine=romp-ibm
-		;;
-	s390 | s390-*)
-		basic_machine=s390-ibm
-		;;
-	s390x | s390x-*)
-		basic_machine=s390x-ibm
-		;;
-	sa29200)
-		basic_machine=a29k-amd
-		os=-udi
-		;;
-	sb1)
-		basic_machine=mipsisa64sb1-unknown
-		;;
-	sb1el)
-		basic_machine=mipsisa64sb1el-unknown
+		cpu=romp
+		vendor=ibm
 		;;
 	sde)
-		basic_machine=mipsisa32-sde
-		os=-elf
+		cpu=mipsisa32
+		vendor=sde
+		os=${os:-elf}
 		;;
-	sei)
-		basic_machine=mips-sei
-		os=-seiux
+	simso-wrs)
+		cpu=sparclite
+		vendor=wrs
+		os=vxworks
 		;;
-	sequent)
-		basic_machine=i386-sequent
+	tower | tower-32)
+		cpu=m68k
+		vendor=ncr
 		;;
-	sh)
-		basic_machine=sh-hitachi
-		os=-hms
+	vpp*|vx|vx-*)
+		cpu=f301
+		vendor=fujitsu
 		;;
-	sh5el)
-		basic_machine=sh5le-unknown
+	w65)
+		cpu=w65
+		vendor=wdc
 		;;
-	sh64)
-		basic_machine=sh64-unknown
+	w89k-*)
+		cpu=hppa1.1
+		vendor=winbond
+		os=proelf
 		;;
-	sparclite-wrs | simso-wrs)
-		basic_machine=sparclite-wrs
-		os=-vxworks
+	none)
+		cpu=none
+		vendor=none
 		;;
-	sps7)
-		basic_machine=m68k-bull
-		os=-sysv2
+	leon|leon[3-9])
+		cpu=sparc
+		vendor=$basic_machine
 		;;
-	spur)
-		basic_machine=spur-unknown
+	leon-*|leon[3-9]-*)
+		cpu=sparc
+		vendor=`echo "$basic_machine" | sed 's/-.*//'`
 		;;
-	st2000)
-		basic_machine=m68k-tandem
+
+	*-*)
+		# shellcheck disable=SC2162
+		IFS="-" read cpu vendor <<EOF
+$basic_machine
+EOF
 		;;
-	stratus)
-		basic_machine=i860-stratus
-		os=-sysv4
+	# We use `pc' rather than `unknown'
+	# because (1) that's what they normally are, and
+	# (2) the word "unknown" tends to confuse beginning users.
+	i*86 | x86_64)
+		cpu=$basic_machine
+		vendor=pc
 		;;
-	strongarm-* | thumb-*)
-		basic_machine=arm-`echo $basic_machine | sed 's/^[^-]*-//'`
+	# These rules are duplicated from below for sake of the special case above;
+	# i.e. things that normalized to x86 arches should also default to "pc"
+	pc98)
+		cpu=i386
+		vendor=pc
 		;;
-	sun2)
-		basic_machine=m68000-sun
+	x64 | amd64)
+		cpu=x86_64
+		vendor=pc
 		;;
-	sun2os3)
-		basic_machine=m68000-sun
-		os=-sunos3
+	# Recognize the basic CPU types without company name.
+	*)
+		cpu=$basic_machine
+		vendor=unknown
 		;;
-	sun2os4)
-		basic_machine=m68000-sun
-		os=-sunos4
+esac
+
+unset -v basic_machine
+
+# Decode basic machines in the full and proper CPU-Company form.
+case $cpu-$vendor in
+	# Here we handle the default manufacturer of certain CPU types in canonical form. It is in
+	# some cases the only manufacturer, in others, it is the most popular.
+	craynv-unknown)
+		vendor=cray
+		os=${os:-unicosmp}
 		;;
-	sun3os3)
-		basic_machine=m68k-sun
-		os=-sunos3
+	c90-unknown | c90-cray)
+		vendor=cray
+		os=${os:-unicos}
 		;;
-	sun3os4)
-		basic_machine=m68k-sun
-		os=-sunos4
+	fx80-unknown)
+		vendor=alliant
 		;;
-	sun4os3)
-		basic_machine=sparc-sun
-		os=-sunos3
+	romp-unknown)
+		vendor=ibm
 		;;
-	sun4os4)
-		basic_machine=sparc-sun
-		os=-sunos4
+	mmix-unknown)
+		vendor=knuth
 		;;
-	sun4sol2)
-		basic_machine=sparc-sun
-		os=-solaris2
+	microblaze-unknown | microblazeel-unknown)
+		vendor=xilinx
 		;;
-	sun3 | sun3-*)
-		basic_machine=m68k-sun
+	rs6000-unknown)
+		vendor=ibm
 		;;
-	sun4)
-		basic_machine=sparc-sun
+	vax-unknown)
+		vendor=dec
 		;;
-	sun386 | sun386i | roadrunner)
-		basic_machine=i386-sun
+	pdp11-unknown)
+		vendor=dec
 		;;
-	sv1)
-		basic_machine=sv1-cray
-		os=-unicos
+	we32k-unknown)
+		vendor=att
 		;;
-	symmetry)
-		basic_machine=i386-sequent
-		os=-dynix
+	cydra-unknown)
+		vendor=cydrome
 		;;
-	t3e)
-		basic_machine=alphaev5-cray
-		os=-unicos
+	i370-ibm*)
+		vendor=ibm
 		;;
-	t90)
-		basic_machine=t90-cray
-		os=-unicos
+	orion-unknown)
+		vendor=highlevel
 		;;
-	tile*)
-		basic_machine=$basic_machine-unknown
-		os=-linux-gnu
+	xps-unknown | xps100-unknown)
+		cpu=xps100
+		vendor=honeywell
 		;;
-	tx39)
-		basic_machine=mipstx39-unknown
+
+	# Here we normalize CPU types with a missing or matching vendor
+	dpx20-unknown | dpx20-bull)
+		cpu=rs6000
+		vendor=bull
+		os=${os:-bosx}
 		;;
-	tx39el)
-		basic_machine=mipstx39el-unknown
+
+	# Here we normalize CPU types irrespective of the vendor
+	amd64-*)
+		cpu=x86_64
 		;;
-	toad1)
-		basic_machine=pdp10-xkl
-		os=-tops20
+	blackfin-*)
+		cpu=bfin
+		os=linux
 		;;
-	tower | tower-32)
-		basic_machine=m68k-ncr
+	c54x-*)
+		cpu=tic54x
 		;;
-	tpf)
-		basic_machine=s390x-ibm
-		os=-tpf
+	c55x-*)
+		cpu=tic55x
 		;;
-	udi29k)
-		basic_machine=a29k-amd
-		os=-udi
+	c6x-*)
+		cpu=tic6x
 		;;
-	ultra3)
-		basic_machine=a29k-nyu
-		os=-sym1
+	e500v[12]-*)
+		cpu=powerpc
+		os=$os"spe"
 		;;
-	v810 | necv810)
-		basic_machine=v810-nec
-		os=-none
+	mips3*-*)
+		cpu=mips64
 		;;
-	vaxv)
-		basic_machine=vax-dec
-		os=-sysv
+	ms1-*)
+		cpu=mt
 		;;
-	vms)
-		basic_machine=vax-dec
-		os=-vms
+	m68knommu-*)
+		cpu=m68k
+		os=linux
 		;;
-	vpp*|vx|vx-*)
-		basic_machine=f301-fujitsu
+	m9s12z-* | m68hcs12z-* | hcs12z-* | s12z-*)
+		cpu=s12z
 		;;
-	vxworks960)
-		basic_machine=i960-wrs
-		os=-vxworks
+	openrisc-*)
+		cpu=or32
 		;;
-	vxworks68)
-		basic_machine=m68k-wrs
-		os=-vxworks
+	parisc-*)
+		cpu=hppa
+		os=linux
 		;;
-	vxworks29k)
-		basic_machine=a29k-wrs
-		os=-vxworks
+	pentium-* | p5-* | k5-* | k6-* | nexgen-* | viac3-*)
+		cpu=i586
 		;;
-	wasm32)
-		basic_machine=wasm32-unknown
+	pentiumpro-* | p6-* | 6x86-* | athlon-* | athalon_*-*)
+		cpu=i686
 		;;
-	w65*)
-		basic_machine=w65-wdc
-		os=-none
+	pentiumii-* | pentium2-* | pentiumiii-* | pentium3-*)
+		cpu=i686
 		;;
-	w89k-*)
-		basic_machine=hppa1.1-winbond
-		os=-proelf
+	pentium4-*)
+		cpu=i786
 		;;
-	xbox)
-		basic_machine=i686-pc
-		os=-mingw32
+	pc98-*)
+		cpu=i386
 		;;
-	xps | xps100)
-		basic_machine=xps100-honeywell
+	ppc-* | ppcbe-*)
+		cpu=powerpc
 		;;
-	xscale-* | xscalee[bl]-*)
-		basic_machine=`echo $basic_machine | sed 's/^xscale/arm/'`
+	ppcle-* | powerpclittle-*)
+		cpu=powerpcle
 		;;
-	ymp)
-		basic_machine=ymp-cray
-		os=-unicos
+	ppc64-*)
+		cpu=powerpc64
 		;;
-	z8k-*-coff)
-		basic_machine=z8k-unknown
-		os=-sim
+	ppc64le-* | powerpc64little-*)
+		cpu=powerpc64le
 		;;
-	z80-*-coff)
-		basic_machine=z80-unknown
-		os=-sim
+	sb1-*)
+		cpu=mipsisa64sb1
 		;;
-	none)
-		basic_machine=none-none
-		os=-none
+	sb1el-*)
+		cpu=mipsisa64sb1el
 		;;
-
-# Here we handle the default manufacturer of certain CPU types.  It is in
-# some cases the only manufacturer, in others, it is the most popular.
-	w89k)
-		basic_machine=hppa1.1-winbond
+	sh5e[lb]-*)
+		cpu=`echo "$cpu" | sed 's/^\(sh.\)e\(.\)$/\1\2e/'`
 		;;
-	op50n)
-		basic_machine=hppa1.1-oki
+	spur-*)
+		cpu=spur
 		;;
-	op60c)
-		basic_machine=hppa1.1-oki
+	strongarm-* | thumb-*)
+		cpu=arm
 		;;
-	romp)
-		basic_machine=romp-ibm
+	tx39-*)
+		cpu=mipstx39
 		;;
-	mmix)
-		basic_machine=mmix-knuth
+	tx39el-*)
+		cpu=mipstx39el
 		;;
-	rs6000)
-		basic_machine=rs6000-ibm
+	x64-*)
+		cpu=x86_64
 		;;
-	vax)
-		basic_machine=vax-dec
+	xscale-* | xscalee[bl]-*)
+		cpu=`echo "$cpu" | sed 's/^xscale/arm/'`
 		;;
-	pdp10)
-		# there are many clones, so DEC is not a safe bet
-		basic_machine=pdp10-unknown
+
+	# Recognize the canonical CPU Types that limit and/or modify the
+	# company names they are paired with.
+	cr16-*)
+		os=${os:-elf}
 		;;
-	pdp11)
-		basic_machine=pdp11-dec
+	crisv32-* | etraxfs*-*)
+		cpu=crisv32
+		vendor=axis
 		;;
-	we32k)
-		basic_machine=we32k-att
+	cris-* | etrax*-*)
+		cpu=cris
+		vendor=axis
 		;;
-	sh[1234] | sh[24]a | sh[24]aeb | sh[34]eb | sh[1234]le | sh[23]ele)
-		basic_machine=sh-unknown
+	crx-*)
+		os=${os:-elf}
 		;;
-	sparc | sparcv8 | sparcv9 | sparcv9b | sparcv9v)
-		basic_machine=sparc-sun
+	neo-tandem)
+		cpu=neo
+		vendor=tandem
 		;;
-	cydra)
-		basic_machine=cydra-cydrome
+	nse-tandem)
+		cpu=nse
+		vendor=tandem
 		;;
-	orion)
-		basic_machine=orion-highlevel
+	nsr-tandem)
+		cpu=nsr
+		vendor=tandem
 		;;
-	orion105)
-		basic_machine=clipper-highlevel
+	nsv-tandem)
+		cpu=nsv
+		vendor=tandem
 		;;
-	mac | mpw | mac-mpw)
-		basic_machine=m68k-apple
+	nsx-tandem)
+		cpu=nsx
+		vendor=tandem
 		;;
-	pmac | pmac-mpw)
-		basic_machine=powerpc-apple
+	s390-*)
+		cpu=s390
+		vendor=ibm
+		;;
+	s390x-*)
+		cpu=s390x
+		vendor=ibm
 		;;
-	*-unknown)
-		# Make sure to match an already-canonicalized machine name.
+	tile*-*)
+		os=${os:-linux-gnu}
 		;;
+
 	*)
-		echo Invalid configuration \`$1\': machine \`$basic_machine\' not recognized 1>&2
-		exit 1
+		# Recognize the canonical CPU types that are allowed with any
+		# company name.
+		case $cpu in
+			1750a | 580 \
+			| a29k \
+			| aarch64 | aarch64_be \
+			| abacus \
+			| alpha | alphaev[4-8] | alphaev56 | alphaev6[78] \
+			| alpha64 | alpha64ev[4-8] | alpha64ev56 | alpha64ev6[78] \
+			| alphapca5[67] | alpha64pca5[67] \
+			| am33_2.0 \
+			| amdgcn \
+			| arc | arceb \
+			| arm  | arm[lb]e | arme[lb] | armv* \
+			| avr | avr32 \
+			| asmjs \
+			| ba \
+			| be32 | be64 \
+			| bfin | bpf | bs2000 \
+			| c[123]* | c30 | [cjt]90 | c4x \
+			| c8051 | clipper | craynv | csky | cydra \
+			| d10v | d30v | dlx | dsp16xx \
+			| e2k | elxsi | epiphany \
+			| f30[01] | f700 | fido | fr30 | frv | ft32 | fx80 \
+			| h8300 | h8500 \
+			| hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \
+			| hexagon \
+			| i370 | i*86 | i860 | i960 | ia16 | ia64 \
+			| ip2k | iq2000 \
+			| k1om \
+			| le32 | le64 \
+			| lm32 \
+			| m32c | m32r | m32rle \
+			| m5200 | m68000 | m680[012346]0 | m68360 | m683?2 | m68k \
+			| m6811 | m68hc11 | m6812 | m68hc12 | m68hcs12x \
+			| m88110 | m88k | maxq | mb | mcore | mep | metag \
+			| microblaze | microblazeel \
+			| mips | mipsbe | mipseb | mipsel | mipsle \
+			| mips16 \
+			| mips64 | mips64eb | mips64el \
+			| mips64octeon | mips64octeonel \
+			| mips64orion | mips64orionel \
+			| mips64r5900 | mips64r5900el \
+			| mips64vr | mips64vrel \
+			| mips64vr4100 | mips64vr4100el \
+			| mips64vr4300 | mips64vr4300el \
+			| mips64vr5000 | mips64vr5000el \
+			| mips64vr5900 | mips64vr5900el \
+			| mipsisa32 | mipsisa32el \
+			| mipsisa32r2 | mipsisa32r2el \
+			| mipsisa32r6 | mipsisa32r6el \
+			| mipsisa64 | mipsisa64el \
+			| mipsisa64r2 | mipsisa64r2el \
+			| mipsisa64r6 | mipsisa64r6el \
+			| mipsisa64sb1 | mipsisa64sb1el \
+			| mipsisa64sr71k | mipsisa64sr71kel \
+			| mipsr5900 | mipsr5900el \
+			| mipstx39 | mipstx39el \
+			| mmix \
+			| mn10200 | mn10300 \
+			| moxie \
+			| mt \
+			| msp430 \
+			| nds32 | nds32le | nds32be \
+			| nfp \
+			| nios | nios2 | nios2eb | nios2el \
+			| none | np1 | ns16k | ns32k | nvptx \
+			| open8 \
+			| or1k* \
+			| or32 \
+			| orion \
+			| picochip \
+			| pdp10 | pdp11 | pj | pjl | pn | power \
+			| powerpc | powerpc64 | powerpc64le | powerpcle | powerpcspe \
+			| pru \
+			| pyramid \
+			| riscv | riscv32 | riscv64 \
+			| rl78 | romp | rs6000 | rx \
+			| score \
+			| sh | shl \
+			| sh[1234] | sh[24]a | sh[24]ae[lb] | sh[23]e | she[lb] | sh[lb]e \
+			| sh[1234]e[lb] |  sh[12345][lb]e | sh[23]ele | sh64 | sh64le \
+			| sparc | sparc64 | sparc64b | sparc64v | sparc86x | sparclet \
+			| sparclite \
+			| sparcv8 | sparcv9 | sparcv9b | sparcv9v | sv1 | sx* \
+			| spu \
+			| tahoe \
+			| tic30 | tic4x | tic54x | tic55x | tic6x | tic80 \
+			| tron \
+			| ubicom32 \
+			| v70 | v850 | v850e | v850e1 | v850es | v850e2 | v850e2v3 \
+			| vax \
+			| visium \
+			| w65 \
+			| wasm32 | wasm64 \
+			| we32k \
+			| x86 | x86_64 | xc16x | xgate | xps100 \
+			| xstormy16 | xtensa* \
+			| ymp \
+			| z8k | z80)
+				;;
+
+			*)
+				echo Invalid configuration \`"$1"\': machine \`"$cpu-$vendor"\' not recognized 1>&2
+				exit 1
+				;;
+		esac
 		;;
 esac
 
 # Here we canonicalize certain aliases for manufacturers.
-case $basic_machine in
-	*-digital*)
-		basic_machine=`echo $basic_machine | sed 's/digital.*/dec/'`
+case $vendor in
+	digital*)
+		vendor=dec
 		;;
-	*-commodore*)
-		basic_machine=`echo $basic_machine | sed 's/commodore.*/cbm/'`
+	commodore*)
+		vendor=cbm
 		;;
 	*)
 		;;
@@ -1363,200 +1275,244 @@ esac
 
 # Decode manufacturer-specific aliases for certain operating systems.
 
-if [ x"$os" != x"" ]
+if [ x$os != x ]
 then
 case $os in
-	# First match some system type aliases
-	# that might get confused with valid system types.
-	# -solaris* is a basic system type, with this one exception.
-	-auroraux)
-		os=-auroraux
+	# First match some system type aliases that might get confused
+	# with valid system types.
+	# solaris* is a basic system type, with this one exception.
+	auroraux)
+		os=auroraux
 		;;
-	-solaris1 | -solaris1.*)
-		os=`echo $os | sed -e 's|solaris1|sunos4|'`
+	bluegene*)
+		os=cnk
 		;;
-	-solaris)
-		os=-solaris2
+	solaris1 | solaris1.*)
+		os=`echo $os | sed -e 's|solaris1|sunos4|'`
 		;;
-	-svr4*)
-		os=-sysv4
+	solaris)
+		os=solaris2
 		;;
-	-unixware*)
-		os=-sysv4.2uw
+	unixware*)
+		os=sysv4.2uw
 		;;
-	-gnu/linux*)
+	gnu/linux*)
 		os=`echo $os | sed -e 's|gnu/linux|linux-gnu|'`
 		;;
-	# First accept the basic system types.
+	# es1800 is here to avoid being matched by es* (a different OS)
+	es1800*)
+		os=ose
+		;;
+	# Some version numbers need modification
+	chorusos*)
+		os=chorusos
+		;;
+	isc)
+		os=isc2.2
+		;;
+	sco6)
+		os=sco5v6
+		;;
+	sco5)
+		os=sco3.2v5
+		;;
+	sco4)
+		os=sco3.2v4
+		;;
+	sco3.2.[4-9]*)
+		os=`echo $os | sed -e 's/sco3.2./sco3.2v/'`
+		;;
+	sco3.2v[4-9]* | sco5v6*)
+		# Don't forget version if it is 3.2v4 or newer.
+		;;
+	scout)
+		# Don't match below
+		;;
+	sco*)
+		os=sco3.2v2
+		;;
+	psos*)
+		os=psos
+		;;
+	# Now accept the basic system types.
 	# The portable systems comes first.
-	# Each alternative MUST END IN A *, to match a version number.
-	# -sysv* is not here because it comes later, after sysvr4.
-	-gnu* | -bsd* | -mach* | -minix* | -genix* | -ultrix* | -irix* \
-	      | -*vms* | -sco* | -esix* | -isc* | -aix* | -cnk* | -sunos | -sunos[34]*\
-	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -auroraux* | -solaris* \
-	      | -sym* | -kopensolaris* | -plan9* \
-	      | -amigaos* | -amigados* | -msdos* | -newsos* | -unicos* | -aof* \
-	      | -aos* | -aros* | -cloudabi* | -sortix* \
-	      | -nindy* | -vxsim* | -vxworks* | -ebmon* | -hms* | -mvs* \
-	      | -clix* | -riscos* | -uniplus* | -iris* | -rtu* | -xenix* \
-	      | -hiux* | -386bsd* | -knetbsd* | -mirbsd* | -netbsd* \
-	      | -bitrig* | -openbsd* | -solidbsd* | -libertybsd* \
-	      | -ekkobsd* | -kfreebsd* | -freebsd* | -riscix* | -lynxos* \
-	      | -bosx* | -nextstep* | -cxux* | -aout* | -elf* | -oabi* \
-	      | -ptx* | -coff* | -ecoff* | -winnt* | -domain* | -vsta* \
-	      | -udi* | -eabi* | -lites* | -ieee* | -go32* | -aux* \
-	      | -chorusos* | -chorusrdb* | -cegcc* | -glidix* \
-	      | -cygwin* | -msys* | -pe* | -psos* | -moss* | -proelf* | -rtems* \
-	      | -midipix* | -mingw32* | -mingw64* | -linux-gnu* | -linux-android* \
-	      | -linux-newlib* | -linux-musl* | -linux-uclibc* \
-	      | -uxpv* | -beos* | -mpeix* | -udk* | -moxiebox* \
-	      | -interix* | -uwin* | -mks* | -rhapsody* | -darwin* | -opened* \
-	      | -openstep* | -oskit* | -conix* | -pw32* | -nonstopux* \
-	      | -storm-chaos* | -tops10* | -tenex* | -tops20* | -its* \
-	      | -os2* | -vos* | -palmos* | -uclinux* | -nucleus* \
-	      | -morphos* | -superux* | -rtmk* | -rtmk-nova* | -windiss* \
-	      | -powermax* | -dnix* | -nx6 | -nx7 | -sei* | -dragonfly* \
-	      | -skyos* | -haiku* | -rdos* | -toppers* | -drops* | -es* \
-	      | -onefs* | -tirtos* | -phoenix* | -fuchsia* | -redox*)
+	# Each alternative MUST end in a * to match a version number.
+	# sysv* is not here because it comes later, after sysvr4.
+	gnu* | bsd* | mach* | minix* | genix* | ultrix* | irix* \
+	     | *vms* | esix* | aix* | cnk* | sunos | sunos[34]*\
+	     | hpux* | unos* | osf* | luna* | dgux* | auroraux* | solaris* \
+	     | sym* | kopensolaris* | plan9* \
+	     | amigaos* | amigados* | msdos* | newsos* | unicos* | aof* \
+	     | aos* | aros* | cloudabi* | sortix* \
+	     | nindy* | vxsim* | vxworks* | ebmon* | hms* | mvs* \
+	     | clix* | riscos* | uniplus* | iris* | isc* | rtu* | xenix* \
+	     | knetbsd* | mirbsd* | netbsd* \
+	     | bitrig* | openbsd* | solidbsd* | libertybsd* | os108* \
+	     | ekkobsd* | kfreebsd* | freebsd* | riscix* | lynxos* \
+	     | bosx* | nextstep* | cxux* | aout* | elf* | oabi* \
+	     | ptx* | coff* | ecoff* | winnt* | domain* | vsta* \
+	     | udi* | eabi* | lites* | ieee* | go32* | aux* | hcos* \
+	     | chorusrdb* | cegcc* | glidix* \
+	     | cygwin* | msys* | pe* | moss* | proelf* | rtems* \
+	     | midipix* | mingw32* | mingw64* | linux-gnu* | linux-android* \
+	     | linux-newlib* | linux-musl* | linux-uclibc* \
+	     | uxpv* | beos* | mpeix* | udk* | moxiebox* \
+	     | interix* | uwin* | mks* | rhapsody* | darwin* \
+	     | openstep* | oskit* | conix* | pw32* | nonstopux* \
+	     | storm-chaos* | tops10* | tenex* | tops20* | its* \
+	     | os2* | vos* | palmos* | uclinux* | nucleus* \
+	     | morphos* | superux* | rtmk* | windiss* \
+	     | powermax* | dnix* | nx6 | nx7 | sei* | dragonfly* \
+	     | skyos* | haiku* | rdos* | toppers* | drops* | es* \
+	     | onefs* | tirtos* | phoenix* | fuchsia* | redox* | bme* \
+	     | midnightbsd* | amdhsa* | unleashed* | emscripten* | wasi* \
+	     | nsk* | powerunix)
 	# Remember, each alternative MUST END IN *, to match a version number.
 		;;
-	-qnx*)
-		case $basic_machine in
-		    x86-* | i*86-*)
+	qnx*)
+		case $cpu in
+		    x86 | i*86)
 			;;
 		    *)
-			os=-nto$os
+			os=nto-$os
 			;;
 		esac
 		;;
-	-nto-qnx*)
+	hiux*)
+		os=hiuxwe2
 		;;
-	-nto*)
-		os=`echo $os | sed -e 's|nto|nto-qnx|'`
+	nto-qnx*)
 		;;
-	-sim | -es1800* | -hms* | -xray | -os68k* | -none* | -v88r* \
-	      | -windows* | -osx | -abug | -netware* | -os9* | -beos* | -haiku* \
-	      | -macos* | -mpw* | -magic* | -mmixware* | -mon960* | -lnews*)
+	nto*)
+		os=`echo $os | sed -e 's|nto|nto-qnx|'`
 		;;
-	-mac*)
-		os=`echo $os | sed -e 's|mac|macos|'`
+	sim | xray | os68k* | v88r* \
+	    | windows* | osx | abug | netware* | os9* \
+	    | macos* | mpw* | magic* | mmixware* | mon960* | lnews*)
 		;;
-	-linux-dietlibc)
-		os=-linux-dietlibc
+	linux-dietlibc)
+		os=linux-dietlibc
 		;;
-	-linux*)
+	linux*)
 		os=`echo $os | sed -e 's|linux|linux-gnu|'`
 		;;
-	-sunos5*)
-		os=`echo $os | sed -e 's|sunos5|solaris2|'`
+	lynx*178)
+		os=lynxos178
+		;;
+	lynx*5)
+		os=lynxos5
 		;;
-	-sunos6*)
-		os=`echo $os | sed -e 's|sunos6|solaris3|'`
+	lynx*)
+		os=lynxos
 		;;
-	-opened*)
-		os=-openedition
+	mac*)
+		os=`echo "$os" | sed -e 's|mac|macos|'`
 		;;
-	-os400*)
-		os=-os400
+	opened*)
+		os=openedition
 		;;
-	-wince*)
-		os=-wince
+	os400*)
+		os=os400
 		;;
-	-osfrose*)
-		os=-osfrose
+	sunos5*)
+		os=`echo "$os" | sed -e 's|sunos5|solaris2|'`
 		;;
-	-osf*)
-		os=-osf
+	sunos6*)
+		os=`echo "$os" | sed -e 's|sunos6|solaris3|'`
 		;;
-	-utek*)
-		os=-bsd
+	wince*)
+		os=wince
 		;;
-	-dynix*)
-		os=-bsd
+	utek*)
+		os=bsd
 		;;
-	-acis*)
-		os=-aos
+	dynix*)
+		os=bsd
 		;;
-	-atheos*)
-		os=-atheos
+	acis*)
+		os=aos
 		;;
-	-syllable*)
-		os=-syllable
+	atheos*)
+		os=atheos
 		;;
-	-386bsd)
-		os=-bsd
+	syllable*)
+		os=syllable
 		;;
-	-ctix* | -uts*)
-		os=-sysv
+	386bsd)
+		os=bsd
 		;;
-	-nova*)
-		os=-rtmk-nova
+	ctix* | uts*)
+		os=sysv
 		;;
-	-ns2 )
-		os=-nextstep2
+	nova*)
+		os=rtmk-nova
 		;;
-	-nsk*)
-		os=-nsk
+	ns2)
+		os=nextstep2
 		;;
 	# Preserve the version number of sinix5.
-	-sinix5.*)
+	sinix5.*)
 		os=`echo $os | sed -e 's|sinix|sysv|'`
 		;;
-	-sinix*)
-		os=-sysv4
-		;;
-	-tpf*)
-		os=-tpf
+	sinix*)
+		os=sysv4
 		;;
-	-triton*)
-		os=-sysv3
+	tpf*)
+		os=tpf
 		;;
-	-oss*)
-		os=-sysv3
+	triton*)
+		os=sysv3
 		;;
-	-svr4)
-		os=-sysv4
+	oss*)
+		os=sysv3
 		;;
-	-svr3)
-		os=-sysv3
+	svr4*)
+		os=sysv4
 		;;
-	-sysvr4)
-		os=-sysv4
+	svr3)
+		os=sysv3
 		;;
-	# This must come after -sysvr4.
-	-sysv*)
+	sysvr4)
+		os=sysv4
 		;;
-	-ose*)
-		os=-ose
+	# This must come after sysvr4.
+	sysv*)
 		;;
-	-es1800*)
-		os=-ose
+	ose*)
+		os=ose
 		;;
-	-xenix)
-		os=-xenix
+	*mint | mint[0-9]* | *MiNT | MiNT[0-9]*)
+		os=mint
 		;;
-	-*mint | -mint[0-9]* | -*MiNT | -MiNT[0-9]*)
-		os=-mint
+	zvmoe)
+		os=zvmoe
 		;;
-	-aros*)
-		os=-aros
+	dicos*)
+		os=dicos
 		;;
-	-zvmoe)
-		os=-zvmoe
+	pikeos*)
+		# Until real need of OS specific support for
+		# particular features comes up, bare metal
+		# configurations are quite functional.
+		case $cpu in
+		    arm*)
+			os=eabi
+			;;
+		    *)
+			os=elf
+			;;
+		esac
 		;;
-	-dicos*)
-		os=-dicos
+	nacl*)
 		;;
-	-nacl*)
+	ios)
 		;;
-	-ios)
+	none)
 		;;
-	-none)
+	*-eabi)
 		;;
 	*)
-		# Get rid of the `-' at the beginning of $os.
-		os=`echo $os | sed 's/[^-]*-//'`
-		echo Invalid configuration \`$1\': system \`$os\' not recognized 1>&2
+		echo Invalid configuration \`"$1"\': system \`"$os"\' not recognized 1>&2
 		exit 1
 		;;
 esac
@@ -1572,264 +1528,265 @@ else
 # will signal an error saying that MANUFACTURER isn't an operating
 # system, and we'll never get to this point.
 
-case $basic_machine in
+case $cpu-$vendor in
 	score-*)
-		os=-elf
+		os=elf
 		;;
 	spu-*)
-		os=-elf
+		os=elf
 		;;
 	*-acorn)
-		os=-riscix1.2
+		os=riscix1.2
 		;;
 	arm*-rebel)
-		os=-linux
+		os=linux
 		;;
 	arm*-semi)
-		os=-aout
+		os=aout
 		;;
 	c4x-* | tic4x-*)
-		os=-coff
+		os=coff
 		;;
 	c8051-*)
-		os=-elf
+		os=elf
+		;;
+	clipper-intergraph)
+		os=clix
 		;;
 	hexagon-*)
-		os=-elf
+		os=elf
 		;;
 	tic54x-*)
-		os=-coff
+		os=coff
 		;;
 	tic55x-*)
-		os=-coff
+		os=coff
 		;;
 	tic6x-*)
-		os=-coff
+		os=coff
 		;;
 	# This must come before the *-dec entry.
 	pdp10-*)
-		os=-tops20
+		os=tops20
 		;;
 	pdp11-*)
-		os=-none
+		os=none
 		;;
 	*-dec | vax-*)
-		os=-ultrix4.2
+		os=ultrix4.2
 		;;
 	m68*-apollo)
-		os=-domain
+		os=domain
 		;;
 	i386-sun)
-		os=-sunos4.0.2
+		os=sunos4.0.2
 		;;
 	m68000-sun)
-		os=-sunos3
+		os=sunos3
 		;;
 	m68*-cisco)
-		os=-aout
+		os=aout
 		;;
 	mep-*)
-		os=-elf
+		os=elf
 		;;
 	mips*-cisco)
-		os=-elf
+		os=elf
 		;;
 	mips*-*)
-		os=-elf
+		os=elf
 		;;
 	or32-*)
-		os=-coff
+		os=coff
 		;;
 	*-tti)	# must be before sparc entry or we get the wrong os.
-		os=-sysv3
+		os=sysv3
 		;;
 	sparc-* | *-sun)
-		os=-sunos4.1.1
+		os=sunos4.1.1
 		;;
 	pru-*)
-		os=-elf
+		os=elf
 		;;
 	*-be)
-		os=-beos
-		;;
-	*-haiku)
-		os=-haiku
+		os=beos
 		;;
 	*-ibm)
-		os=-aix
+		os=aix
 		;;
 	*-knuth)
-		os=-mmixware
+		os=mmixware
 		;;
 	*-wec)
-		os=-proelf
+		os=proelf
 		;;
 	*-winbond)
-		os=-proelf
+		os=proelf
 		;;
 	*-oki)
-		os=-proelf
+		os=proelf
 		;;
 	*-hp)
-		os=-hpux
+		os=hpux
 		;;
 	*-hitachi)
-		os=-hiux
+		os=hiux
 		;;
 	i860-* | *-att | *-ncr | *-altos | *-motorola | *-convergent)
-		os=-sysv
+		os=sysv
 		;;
 	*-cbm)
-		os=-amigaos
+		os=amigaos
 		;;
 	*-dg)
-		os=-dgux
+		os=dgux
 		;;
 	*-dolphin)
-		os=-sysv3
+		os=sysv3
 		;;
 	m68k-ccur)
-		os=-rtu
+		os=rtu
 		;;
 	m88k-omron*)
-		os=-luna
+		os=luna
 		;;
-	*-next )
-		os=-nextstep
+	*-next)
+		os=nextstep
 		;;
 	*-sequent)
-		os=-ptx
+		os=ptx
 		;;
 	*-crds)
-		os=-unos
+		os=unos
 		;;
 	*-ns)
-		os=-genix
+		os=genix
 		;;
 	i370-*)
-		os=-mvs
-		;;
-	*-next)
-		os=-nextstep3
+		os=mvs
 		;;
 	*-gould)
-		os=-sysv
+		os=sysv
 		;;
 	*-highlevel)
-		os=-bsd
+		os=bsd
 		;;
 	*-encore)
-		os=-bsd
+		os=bsd
 		;;
 	*-sgi)
-		os=-irix
+		os=irix
 		;;
 	*-siemens)
-		os=-sysv4
+		os=sysv4
 		;;
 	*-masscomp)
-		os=-rtu
+		os=rtu
 		;;
 	f30[01]-fujitsu | f700-fujitsu)
-		os=-uxpv
+		os=uxpv
 		;;
 	*-rom68k)
-		os=-coff
+		os=coff
 		;;
 	*-*bug)
-		os=-coff
+		os=coff
 		;;
 	*-apple)
-		os=-macos
+		os=macos
 		;;
 	*-atari*)
-		os=-mint
+		os=mint
+		;;
+	*-wrs)
+		os=vxworks
 		;;
 	*)
-		os=-none
+		os=none
 		;;
 esac
 fi
 
 # Here we handle the case where we know the os, and the CPU type, but not the
 # manufacturer.  We pick the logical manufacturer.
-vendor=unknown
-case $basic_machine in
-	*-unknown)
+case $vendor in
+	unknown)
 		case $os in
-			-riscix*)
+			riscix*)
 				vendor=acorn
 				;;
-			-sunos*)
+			sunos*)
 				vendor=sun
 				;;
-			-cnk*|-aix*)
+			cnk*|-aix*)
 				vendor=ibm
 				;;
-			-beos*)
+			beos*)
 				vendor=be
 				;;
-			-hpux*)
+			hpux*)
 				vendor=hp
 				;;
-			-mpeix*)
+			mpeix*)
 				vendor=hp
 				;;
-			-hiux*)
+			hiux*)
 				vendor=hitachi
 				;;
-			-unos*)
+			unos*)
 				vendor=crds
 				;;
-			-dgux*)
+			dgux*)
 				vendor=dg
 				;;
-			-luna*)
+			luna*)
 				vendor=omron
 				;;
-			-genix*)
+			genix*)
 				vendor=ns
 				;;
-			-mvs* | -opened*)
+			clix*)
+				vendor=intergraph
+				;;
+			mvs* | opened*)
 				vendor=ibm
 				;;
-			-os400*)
+			os400*)
 				vendor=ibm
 				;;
-			-ptx*)
+			ptx*)
 				vendor=sequent
 				;;
-			-tpf*)
+			tpf*)
 				vendor=ibm
 				;;
-			-vxsim* | -vxworks* | -windiss*)
+			vxsim* | vxworks* | windiss*)
 				vendor=wrs
 				;;
-			-aux*)
+			aux*)
 				vendor=apple
 				;;
-			-hms*)
+			hms*)
 				vendor=hitachi
 				;;
-			-mpw* | -macos*)
+			mpw* | macos*)
 				vendor=apple
 				;;
-			-*mint | -mint[0-9]* | -*MiNT | -MiNT[0-9]*)
+			*mint | mint[0-9]* | *MiNT | MiNT[0-9]*)
 				vendor=atari
 				;;
-			-vos*)
+			vos*)
 				vendor=stratus
 				;;
 		esac
-		basic_machine=`echo $basic_machine | sed "s/unknown/$vendor/"`
 		;;
 esac
 
-echo $basic_machine$os
+echo "$cpu-$vendor-$os"
 exit
 
 # Local variables:
-# eval: (add-hook 'write-file-hooks 'time-stamp)
+# eval: (add-hook 'before-save-hook 'time-stamp)
 # time-stamp-start: "timestamp='"
 # time-stamp-format: "%:y-%02m-%02d"
 # time-stamp-end: "'"
diff --git a/contrib/depends/funcs.mk b/contrib/depends/funcs.mk
index a778e1c..6822737 100644
--- a/contrib/depends/funcs.mk
+++ b/contrib/depends/funcs.mk
@@ -10,6 +10,7 @@ $(1)_libtool=$($($(1)_type)_LIBTOOL)
 $(1)_nm=$($($(1)_type)_NM)
 $(1)_cflags=$($($(1)_type)_CFLAGS) $($($(1)_type)_$(release_type)_CFLAGS)
 $(1)_cxxflags=$($($(1)_type)_CXXFLAGS) $($($(1)_type)_$(release_type)_CXXFLAGS)
+$(1)_arflags=$($($(1)_type)_ARFLAGS) $($($(1)_type)_$(release_type)_ARFLAGS)
 $(1)_ldflags=$($($(1)_type)_LDFLAGS) $($($(1)_type)_$(release_type)_LDFLAGS) -L$($($(1)_type)_prefix)/lib
 $(1)_cppflags=$($($(1)_type)_CPPFLAGS) $($($(1)_type)_$(release_type)_CPPFLAGS) -I$($($(1)_type)_prefix)/include
 $(1)_recipe_hash:=
@@ -41,7 +42,7 @@ endef
 
 define int_get_build_id
 $(eval $(1)_dependencies += $($(1)_$(host_arch)_$(host_os)_dependencies) $($(1)_$(host_os)_dependencies))
-$(eval $(1)_all_dependencies:=$(call int_get_all_dependencies,$(1),$($($(1)_type)_native_toolchain) $($(1)_dependencies)))
+$(eval $(1)_all_dependencies:=$(call int_get_all_dependencies,$(1),$($($(1)_type)_native_toolchain) $($($(1)_type)_native_binutils) $($(1)_dependencies)))
 $(foreach dep,$($(1)_all_dependencies),$(eval $(1)_build_id_deps+=$(dep)-$($(dep)_version)-$($(dep)_recipe_hash)))
 $(eval $(1)_build_id_long:=$(1)-$($(1)_version)-$($(1)_recipe_hash)-$(release_type) $($(1)_build_id_deps) $($($(1)_type)_id_string))
 $(eval $(1)_build_id:=$(shell echo -n "$($(1)_build_id_long)" | $(build_SHA256SUM) | cut -c-$(HASH_LENGTH)))
@@ -102,6 +103,11 @@ $(1)_cxxflags+=$($(1)_cxxflags_$(host_arch)) $($(1)_cxxflags_$(host_arch)_$(rele
 $(1)_cxxflags+=$($(1)_cxxflags_$(host_os)) $($(1)_cxxflags_$(host_os)_$(release_type))
 $(1)_cxxflags+=$($(1)_cxxflags_$(host_arch)_$(host_os)) $($(1)_cxxflags_$(host_arch)_$(host_os)_$(release_type))
 
+$(1)_arflags+=$($(1)_arflags_$(release_type))
+$(1)_arflags+=$($(1)_arflags_$(host_arch)) $($(1)_arflags_$(host_arch)_$(release_type))
+$(1)_arflags+=$($(1)_arflags_$(host_os)) $($(1)_arflags_$(host_os)_$(release_type))
+$(1)_arflags+=$($(1)_arflags_$(host_arch)_$(host_os)) $($(1)_arflags_$(host_arch)_$(host_os)_$(release_type))
+
 $(1)_cppflags+=$($(1)_cppflags_$(release_type))
 $(1)_cppflags+=$($(1)_cppflags_$(host_arch)) $($(1)_cppflags_$(host_arch)_$(release_type))
 $(1)_cppflags+=$($(1)_cppflags_$(host_os)) $($(1)_cppflags_$(host_os)_$(release_type))
@@ -129,10 +135,11 @@ $(1)_config_env+=$($(1)_config_env_$(host_arch)_$(host_os)) $($(1)_config_env_$(
 
 $(1)_config_env+=PKG_CONFIG_LIBDIR=$($($(1)_type)_prefix)/lib/pkgconfig
 $(1)_config_env+=PKG_CONFIG_PATH=$($($(1)_type)_prefix)/share/pkgconfig
+$(1)_config_env+=CMAKE_MODULE_PATH=$($($(1)_type)_prefix)/lib/cmake
 $(1)_config_env+=PATH="$(build_prefix)/bin:$(PATH)"
 $(1)_build_env+=PATH="$(build_prefix)/bin:$(PATH)"
 $(1)_stage_env+=PATH="$(build_prefix)/bin:$(PATH)"
-$(1)_autoconf=./configure --host=$($($(1)_type)_host) --disable-dependency-tracking --prefix=$($($(1)_type)_prefix) $$($(1)_config_opts) CC="$$($(1)_cc)" CXX="$$($(1)_cxx)"
+$(1)_autoconf=./configure --host=$($($(1)_type)_host) --prefix=$($($(1)_type)_prefix) $$($(1)_config_opts) CC="$$($(1)_cc)" CXX="$$($(1)_cxx)"
 
 ifneq ($($(1)_nm),)
 $(1)_autoconf += NM="$$($(1)_nm)"
@@ -143,6 +150,9 @@ endif
 ifneq ($($(1)_ar),)
 $(1)_autoconf += AR="$$($(1)_ar)"
 endif
+ifneq ($($(1)_arflags),)
+$(1)_autoconf += ARFLAGS="$$($(1)_arflags)"
+endif
 ifneq ($($(1)_cflags),)
 $(1)_autoconf += CFLAGS="$$($(1)_cflags)"
 endif
@@ -155,6 +165,20 @@ endif
 ifneq ($($(1)_ldflags),)
 $(1)_autoconf += LDFLAGS="$$($(1)_ldflags)"
 endif
+
+$(1)_cmake=env CC="$$($(1)_cc)" \
+               CXX="$$($(1)_cxx)" \
+               CFLAGS="$$($(1)_cppflags) $$($(1)_cflags)" \
+               CXXFLAGS="$$($(1)_cppflags) $$($(1)_cxxflags)" \
+               LDFLAGS="$$($(1)_ldflags)" \
+             cmake -DCMAKE_INSTALL_PREFIX:PATH="$$($($(1)_type)_prefix)"
+ifneq ($($(1)_type),build)
+ifneq ($(host),$(build))
+$(1)_cmake += -DCMAKE_SYSTEM_NAME=$($(host_os)_cmake_system)
+$(1)_cmake += -DCMAKE_C_COMPILER_TARGET=$(host)
+$(1)_cmake += -DCMAKE_CXX_COMPILER_TARGET=$(host)
+endif
+endif
 endef
 
 define int_add_cmds
@@ -178,7 +202,7 @@ $($(1)_preprocessed): | $($(1)_dependencies) $($(1)_extracted)
 	$(AT)touch $$@
 $($(1)_configured): | $($(1)_preprocessed)
 	$(AT)echo Configuring $(1)...
-	$(AT)rm -rf $(host_prefix); mkdir -p $(host_prefix)/lib; cd $(host_prefix); $(foreach package,$($(1)_all_dependencies), tar xf $($(package)_cached); )
+	$(AT)rm -rf $(host_prefix); mkdir -p $(host_prefix)/lib; cd $(host_prefix); $(foreach package,$($(1)_all_dependencies), tar --no-same-owner -xf $($(package)_cached); )
 	$(AT)mkdir -p $$(@D)
 	$(AT)+cd $$(@D); $($(1)_config_env) $(call $(1)_config_cmds, $(1))
 	$(AT)touch $$@
@@ -250,4 +274,4 @@ $(foreach package,$(all_packages),$(eval $(call int_config_attach_build_config,$
 $(foreach package,$(all_packages),$(eval $(call int_add_cmds,$(package))))
 
 #special exception: if a toolchain package exists, all non-native packages depend on it
-$(foreach package,$(packages),$(eval $($(package)_unpacked): |$($($(host_arch)_$(host_os)_native_toolchain)_cached) ))
+$(foreach package,$(packages),$(eval $($(package)_extracted): |$($($(host_arch)_$(host_os)_native_toolchain)_cached) $($($(host_arch)_$(host_os)_native_binutils)_cached) ))
diff --git a/contrib/depends/hosts/darwin.mk b/contrib/depends/hosts/darwin.mk
index 8b74862..593e912 100644
--- a/contrib/depends/hosts/darwin.mk
+++ b/contrib/depends/hosts/darwin.mk
@@ -1,17 +1,51 @@
-OSX_MIN_VERSION=10.10
-OSX_SDK_VERSION=10.11
-OSX_SDK=$(SDK_PATH)/MacOSX$(OSX_SDK_VERSION).sdk
-LD64_VERSION=253.9
-darwin_CC=clang -target $(host) -mmacosx-version-min=$(OSX_MIN_VERSION) --sysroot $(OSX_SDK) -mlinker-version=$(LD64_VERSION) -B $(host_prefix)/native/bin
-darwin_CXX=clang++ -target $(host) -mmacosx-version-min=$(OSX_MIN_VERSION) --sysroot $(OSX_SDK) -mlinker-version=$(LD64_VERSION) -stdlib=libc++ -B $(host_prefix)/native/bin
+OSX_MIN_VERSION=10.14
+OSX_SDK_VERSION=10.15.1
+XCODE_VERSION=11.3.1
+XCODE_BUILD_ID=11C505
+LD64_VERSION=530
+
+OSX_SDK=$(SDK_PATH)/Xcode-$(XCODE_VERSION)-$(XCODE_BUILD_ID)-extracted-SDK-with-libcxx-headers
+
+# Flag explanations:
+#
+#     -mlinker-version
+#
+#         Ensures that modern linker features are enabled. See here for more
+#         details: https://github.com/bitcoin/bitcoin/pull/19407.
+#
+#     -B$(build_prefix)/bin
+#
+#         Explicitly point to our binaries (e.g. cctools) so that they are
+#         ensured to be found and preferred over other possibilities.
+#
+#     -nostdinc++ -isystem $(OSX_SDK)/usr/include/c++/v1
+#
+#         Forces clang to use the libc++ headers from our SDK and completely
+#         forget about the libc++ headers from the standard directories
+#
+#         TODO: Once we start requiring a clang version that has the
+#         -stdlib++-isystem<directory> flag first introduced here:
+#         https://reviews.llvm.org/D64089, we should use that instead. Read the
+#         differential summary there for more details.
+#
+darwin_CC=clang -target $(host) -mmacosx-version-min=$(OSX_MIN_VERSION) --sysroot $(OSX_SDK) -mlinker-version=$(LD64_VERSION) -B$(build_prefix)/bin
+darwin_CXX=clang++ -target $(host) -mmacosx-version-min=$(OSX_MIN_VERSION) --sysroot $(OSX_SDK) -stdlib=libc++ -mlinker-version=$(LD64_VERSION) -B$(build_prefix)/bin 
+#-nostdinc++ -isystem $(OSX_SDK)/usr/include/c++/v1
 
 darwin_CFLAGS=-pipe
 darwin_CXXFLAGS=$(darwin_CFLAGS)
 
-darwin_release_CFLAGS=-O1
+darwin_release_CFLAGS=-O2
 darwin_release_CXXFLAGS=$(darwin_release_CFLAGS)
 
 darwin_debug_CFLAGS=-O1
 darwin_debug_CXXFLAGS=$(darwin_debug_CFLAGS)
 
+darwin_native_binutils=native_cctools
+ifeq ($(strip $(FORCE_USE_SYSTEM_CLANG)),)
 darwin_native_toolchain=native_cctools
+else
+darwin_native_toolchain=
+endif
+
+darwin_cmake_system=Darwin
diff --git a/contrib/depends/hosts/default.mk b/contrib/depends/hosts/default.mk
index 6f60d6b..6bd8466 100644
--- a/contrib/depends/hosts/default.mk
+++ b/contrib/depends/hosts/default.mk
@@ -9,9 +9,18 @@ default_host_OTOOL = $(host_toolchain)otool
 default_host_NM = $(host_toolchain)nm
 
 define add_host_tool_func
+ifneq ($(filter $(origin $1),undefined default),)
+# Do not consider the well-known var $1 if it is undefined or is taking a value
+# that is predefined by "make" (e.g. the make variable "CC" has a predefined
+# value of "cc")
 $(host_os)_$1?=$$(default_host_$1)
 $(host_arch)_$(host_os)_$1?=$$($(host_os)_$1)
 $(host_arch)_$(host_os)_$(release_type)_$1?=$$($(host_os)_$1)
+else
+$(host_os)_$1=$(or $($1),$($(host_os)_$1),$(default_host_$1))
+$(host_arch)_$(host_os)_$1=$(or $($1),$($(host_arch)_$(host_os)_$1),$$($(host_os)_$1))
+$(host_arch)_$(host_os)_$(release_type)_$1=$(or $($1),$($(host_arch)_$(host_os)_$(release_type)_$1),$$($(host_os)_$1))
+endif
 host_$1=$$($(host_arch)_$(host_os)_$1)
 endef
 
@@ -23,4 +32,4 @@ host_$(release_type)_$1 = $$($(host_arch)_$(host_os)_$(release_type)_$1)
 endef
 
 $(foreach tool,CC CXX AR RANLIB STRIP NM LIBTOOL OTOOL INSTALL_NAME_TOOL,$(eval $(call add_host_tool_func,$(tool))))
-$(foreach flags,CFLAGS CXXFLAGS CPPFLAGS LDFLAGS, $(eval $(call add_host_flags_func,$(flags))))
+$(foreach flags,CFLAGS CXXFLAGS ARFLAGS CPPFLAGS LDFLAGS, $(eval $(call add_host_flags_func,$(flags))))
diff --git a/contrib/depends/hosts/linux.mk b/contrib/depends/hosts/linux.mk
index b13a0f1..912fdb0 100644
--- a/contrib/depends/hosts/linux.mk
+++ b/contrib/depends/hosts/linux.mk
@@ -1,5 +1,6 @@
 linux_CFLAGS=-pipe
 linux_CXXFLAGS=$(linux_CFLAGS)
+linux_ARFLAGS=cr
 
 linux_release_CFLAGS=-O2
 linux_release_CXXFLAGS=$(linux_release_CFLAGS)
diff --git a/contrib/depends/hosts/mingw32.mk b/contrib/depends/hosts/mingw32.mk
index dbfb62f..268b816 100644
--- a/contrib/depends/hosts/mingw32.mk
+++ b/contrib/depends/hosts/mingw32.mk
@@ -1,5 +1,6 @@
 mingw32_CFLAGS=-pipe
 mingw32_CXXFLAGS=$(mingw32_CFLAGS)
+mingw32_ARFLAGS=cr
 
 mingw32_release_CFLAGS=-O2
 mingw32_release_CXXFLAGS=$(mingw32_release_CFLAGS)
@@ -8,3 +9,4 @@ mingw32_debug_CFLAGS=-O1
 mingw32_debug_CXXFLAGS=$(mingw32_debug_CFLAGS)
 
 mingw32_debug_CPPFLAGS=-D_GLIBCXX_DEBUG -D_GLIBCXX_DEBUG_PEDANTIC
+
diff --git a/contrib/depends/packages/boost.mk b/contrib/depends/packages/boost.mk
index 1f586c6..26ef429 100644
--- a/contrib/depends/packages/boost.mk
+++ b/contrib/depends/packages/boost.mk
@@ -1,41 +1,43 @@
 package=boost
-$(package)_version=1_64_0
-$(package)_download_path=https://dl.bintray.com/boostorg/release/1.64.0/source/
-$(package)_file_name=$(package)_$($(package)_version).tar.bz2
-$(package)_sha256_hash=7bcc5caace97baa948931d712ea5f37038dbb1c5d89b43ad4def4ed7cb683332
+$(package)_version=1_73_0
+$(package)_download_path=https://dl.bintray.com/boostorg/release/1.73.0/source/
+$(package)_file_name=boost_$($(package)_version).tar.bz2
+$(package)_sha256_hash=4eb3b8d442b426dc35346235c8733b5ae35ba431690e38c6a8263dce9fcbb402
 
 define $(package)_set_vars
 $(package)_config_opts_release=variant=release
 $(package)_config_opts_debug=variant=debug
 $(package)_config_opts=--layout=tagged --build-type=complete --user-config=user-config.jam
 $(package)_config_opts+=threading=multi link=static -sNO_BZIP2=1 -sNO_ZLIB=1
-$(package)_config_opts_linux=threadapi=pthread runtime-link=shared
-$(package)_config_opts_darwin=--toolset=darwin-4.2.1 runtime-link=shared
+$(package)_config_opts_linux=target-os=linux threadapi=pthread runtime-link=static
+$(package)_config_opts_darwin=target-os=darwin runtime-link=static
 $(package)_config_opts_mingw32=binary-format=pe target-os=windows threadapi=win32 runtime-link=static
 $(package)_config_opts_x86_64_mingw32=address-model=64
-$(package)_config_opts_i686_mingw32=address-model=32
-$(package)_config_opts_i686_linux=address-model=32 architecture=x86
 $(package)_toolset_$(host_os)=gcc
+$(package)_toolset_darwin=clang
+ifneq (,$(findstring clang,$($(package)_cxx)))
+   $(package)_toolset_$(host_os)=clang
+endif
 $(package)_archiver_$(host_os)=$($(package)_ar)
-$(package)_toolset_darwin=darwin
-$(package)_archiver_darwin=$($(package)_libtool)
-$(package)_config_libraries=chrono,filesystem,program_options,system,thread,test,date_time,regex,serialization,locale
-$(package)_cxxflags=-std=c++11
+$(package)_config_libraries=chrono,filesystem,program_options,system,thread,test,date_time,regex,serialization,locale,atomic
+$(package)_cxxflags_linux=-std=c++14
+$(package)_cxxflags_mingw32=-std=c++14
 $(package)_cxxflags_linux=-fPIC
+$(package)_cxxflags_darwin=-std=c++14 -fvisibility=default
 endef
 
 define $(package)_preprocess_cmds
-  echo "using $(boost_toolset_$(host_os)) : : $($(package)_cxx) : <cxxflags>\"$($(package)_cxxflags) $($(package)_cppflags)\" <linkflags>\"$($(package)_ldflags)\" <archiver>\"$(boost_archiver_$(host_os))\" <striper>\"$(host_STR    IP)\"  <ranlib>\"$(host_RANLIB)\" <rc>\"$(host_WINDRES)\" : ;" > user-config.jam
+  echo "using $($(package)_toolset_$(host_os)) : : $($(package)_cxx) : <cxxflags>\"$($(package)_cxxflags) $($(package)_cppflags)\" <linkflags>\"$($(package)_ldflags)\" <archiver>\"$(boost_archiver_$(host_os))\" <arflags>\"$($(package)_arflags)\" <striper>\"$(host_STRIP)\" <ranlib>\"$(host_RANLIB)\" <rc>\"$(host_WINDRES)\" : ;" > user-config.jam
 endef
 
 define $(package)_config_cmds
-  ./bootstrap.sh --without-icu --with-libraries=$(boost_config_libraries)
+  ./bootstrap.sh --without-icu --with-libraries=$(boost_config_libraries) --with-toolset=$($(package)_toolset_$(host_os))
 endef
 
 define $(package)_build_cmds
-  ./b2 -d2 -j2 -d1 --prefix=$($(package)_staging_prefix_dir) $($(package)_config_opts) stage
+  ./b2 -d2 -j2 -d1 --prefix=$($(package)_staging_prefix_dir) $($(package)_config_opts) toolset=$($(package)_toolset_$(host_os)) stage
 endef
 
 define $(package)_stage_cmds
-  ./b2 -d0 -j4 --prefix=$($(package)_staging_prefix_dir) $($(package)_config_opts) install
+  ./b2 -d0 -j4 --prefix=$($(package)_staging_prefix_dir) $($(package)_config_opts) toolset=$($(package)_toolset_$(host_os)) install
 endef
diff --git a/contrib/depends/packages/cppzmq.mk b/contrib/depends/packages/cppzmq.mk
deleted file mode 100644
index ed4ddbe..0000000
--- a/contrib/depends/packages/cppzmq.mk
+++ /dev/null
@@ -1,15 +0,0 @@
-package=cppzmq
-$(package)_version=4.6.0
-$(package)_download_path=https://github.com/zeromq/cppzmq/archive/
-$(package)_file_name=v$($(package)_version).tar.gz
-$(package)_sha256_hash=e9203391a0b913576153a2ad22a2dc1479b1ec325beb6c46a3237c669aef5a52
-$(package)_dependencies=zeromq
-
-define $(package)_stage_cmds
-  mkdir $($(package)_staging_prefix_dir)/include &&\
-  cp zmq.hpp $($(package)_staging_prefix_dir)/include
-endef
-
-define $(package)_postprocess_cmds
-  rm -rf bin share
-endef
\ No newline at end of file
diff --git a/contrib/depends/packages/eudev.mk b/contrib/depends/packages/eudev.mk
index a7795b7..8ba3709 100644
--- a/contrib/depends/packages/eudev.mk
+++ b/contrib/depends/packages/eudev.mk
@@ -9,7 +9,7 @@ define $(package)_set_vars
 endef
 
 define $(package)_config_cmds
-  $($(package)_autoconf)
+  $($(package)_autoconf) AR_FLAGS=$($(package)_arflags)
 endef
 
 define $(package)_build_cmd
@@ -23,7 +23,3 @@ endef
 define $(package)_stage_cmds
   $(MAKE) DESTDIR=$($(package)_staging_dir) install
 endef
-
-define $(package)_postprocess_cmds
-  rm lib/*.la
-endef
diff --git a/contrib/depends/packages/expat.mk b/contrib/depends/packages/expat.mk
index ef81636..4944952 100644
--- a/contrib/depends/packages/expat.mk
+++ b/contrib/depends/packages/expat.mk
@@ -1,13 +1,12 @@
 package=expat
 $(package)_version=2.2.4
-$(package)_download_path=https://downloads.sourceforge.net/project/expat/expat/$($(package)_version)
+$(package)_download_path=https://github.com/libexpat/libexpat/releases/download/$($(package)_version)
 $(package)_file_name=$(package)-$($(package)_version).tar.bz2
 $(package)_sha256_hash=03ad85db965f8ab2d27328abcf0bc5571af6ec0a414874b2066ee3fdd372019e
 
 define $(package)_set_vars
 $(package)_config_opts=--enable-static
 $(package)_config_opts=--disable-shared
-$(package)_config_opts+=--prefix=$(host_prefix)
 endef
 
 define $(package)_config_cmds
@@ -22,7 +21,3 @@ define $(package)_stage_cmds
   $(MAKE) DESTDIR=$($(package)_staging_dir) install
 endef
 
-define $(package)_postprocess_cmds
-  rm lib/*.la
-endef
-
diff --git a/contrib/depends/packages/hidapi.mk b/contrib/depends/packages/hidapi.mk
index 3d7c72a..0b4c929 100644
--- a/contrib/depends/packages/hidapi.mk
+++ b/contrib/depends/packages/hidapi.mk
@@ -8,7 +8,7 @@ $(package)_linux_dependencies=libusb eudev
 define $(package)_set_vars
 $(package)_config_opts=--enable-static --disable-shared
 $(package)_config_opts+=--prefix=$(host_prefix)
-$(package)_config_opts_darwin+=RANLIB="$(host_prefix)/native/bin/x86_64-apple-darwin14-ranlib" AR="$(host_prefix)/native/bin/x86_64-apple-darwin14-ar" CC="$(host_prefix)/native/bin/$($(package)_cc)"
+$(package)_config_opts_darwin+=RANLIB="$(host_prefix)/native/bin/x86_64-apple-darwin16-ranlib" AR="$(host_prefix)/native/bin/x86_64-apple-darwin16-ar" CC="$(host_prefix)/native/bin/$($(package)_cc)"
 $(package)_config_opts_linux+=libudev_LIBS="-L$(host_prefix)/lib -ludev"
 $(package)_config_opts_linux+=libudev_CFLAGS=-I$(host_prefix)/include
 $(package)_config_opts_linux+=libusb_LIBS="-L$(host_prefix)/lib -lusb-1.0"
@@ -18,7 +18,7 @@ endef
 
 define $(package)_config_cmds
   ./bootstrap &&\
-  $($(package)_autoconf) $($(package)_config_opts)
+  $($(package)_autoconf) $($(package)_config_opts) ARFLAGS=$($(package)_arflags)
 endef
 
 define $(package)_build_cmds
@@ -29,7 +29,3 @@ define $(package)_stage_cmds
   $(MAKE) DESTDIR=$($(package)_staging_dir) install
 endef
 
-define $(package)_postprocess_cmds
-  rm lib/*.la
-endef
-
diff --git a/contrib/depends/packages/ldns.mk b/contrib/depends/packages/ldns.mk
index ea49021..bf29076 100644
--- a/contrib/depends/packages/ldns.mk
+++ b/contrib/depends/packages/ldns.mk
@@ -1,8 +1,8 @@
 package=ldns
-$(package)_version=1.6.17
+$(package)_version=1.7.1
 $(package)_download_path=https://www.nlnetlabs.nl/downloads/ldns/
 $(package)_file_name=$(package)-$($(package)_version).tar.gz
-$(package)_sha256_hash=8b88e059452118e8949a2752a55ce59bc71fa5bc414103e17f5b6b06f9bcc8cd
+$(package)_sha256_hash=8ac84c16bdca60e710eea75782356f3ac3b55680d40e1530d7cea474ac208229
 $(package)_dependencies=openssl
 
 define $(package)_set_vars
@@ -12,6 +12,10 @@ define $(package)_set_vars
   $(package)_config_opts_linux=--with-pic
 endef
 
+define $(package)_preprocess_cmds
+   cp -f $(BASEDIR)/config.guess $(BASEDIR)/config.sub .
+endef
+
 define $(package)_config_cmds
   $($(package)_autoconf)
 endef
@@ -25,6 +29,4 @@ define $(package)_stage_cmds
 endef
 
 define $(package)_postprocess_cmds
-  rm lib/*.la
 endef
-
diff --git a/contrib/depends/packages/libiconv.mk b/contrib/depends/packages/libiconv.mk
index d4995c1..8aca1e7 100644
--- a/contrib/depends/packages/libiconv.mk
+++ b/contrib/depends/packages/libiconv.mk
@@ -1,9 +1,8 @@
 package=libiconv
-$(package)_version=1.15
-$(package)_download_path=https://ftp.gnu.org/gnu/libiconv
+$(package)_version=1.16
+$(package)_download_path=https://ftp.gnu.org/pub/gnu/libiconv
 $(package)_file_name=libiconv-$($(package)_version).tar.gz
-$(package)_sha256_hash=ccf536620a45458d26ba83887a983b96827001e92a13847b45e4925cc8913178
-$(package)_patches=fix-whitespace.patch
+$(package)_sha256_hash=e6a1b1b589654277ee790cce3734f07876ac4ccfaecbee8afa0b649cf529cc04
 
 define $(package)_set_vars
   $(package)_config_opts=--disable-nls
@@ -13,12 +12,11 @@ define $(package)_set_vars
 endef
 
 define $(package)_preprocess_cmds
-  cp -f $(BASEDIR)/config.guess $(BASEDIR)/config.sub build-aux/ &&\
-  patch -p1 < $($(package)_patch_dir)/fix-whitespace.patch
+  cp -f $(BASEDIR)/config.guess $(BASEDIR)/config.sub build-aux/
 endef
 
 define $(package)_config_cmds
-  $($(package)_autoconf)
+  $($(package)_autoconf) AR_FLAGS=$($(package)_arflags)
 endef
 
 define $(package)_build_cmds
@@ -30,5 +28,4 @@ define $(package)_stage_cmds
 endef
 
 define $(package)_postprocess_cmds
-  rm lib/*.la
 endef
diff --git a/contrib/depends/packages/libusb.mk b/contrib/depends/packages/libusb.mk
index d865d2a..e51c62d 100644
--- a/contrib/depends/packages/libusb.mk
+++ b/contrib/depends/packages/libusb.mk
@@ -1,8 +1,8 @@
 package=libusb
-$(package)_version=1.0.22
-$(package)_download_path=https://sourceforge.net/projects/libusb/files/libusb-1.0/libusb-$($(package)_version)/
+$(package)_version=1.0.23
+$(package)_download_path=https://github.com/libusb/libusb/releases/download/v$($(package)_version)
 $(package)_file_name=$(package)-$($(package)_version).tar.bz2
-$(package)_sha256_hash=75aeb9d59a4fdb800d329a545c2e6799f732362193b465ea198f2aa275518157
+$(package)_sha256_hash=db11c06e958a82dac52cf3c65cb4dd2c3f339c8a988665110e0d24d19312ad8d
 
 define $(package)_preprocess_cmds
   autoreconf -i
@@ -19,11 +19,11 @@ ifneq ($(host_os),darwin)
   define $(package)_config_cmds
     cp -f $(BASEDIR)/config.guess config.guess &&\
     cp -f $(BASEDIR)/config.sub config.sub &&\
-    $($(package)_autoconf)
+    $($(package)_autoconf) ARFLAGS=$($(package)_arflags)
   endef
 else
   define $(package)_config_cmds
-    $($(package)_autoconf)
+    $($(package)_autoconf) ARFLAGS=$($(package)_arflags)
   endef
 endif
 
@@ -35,5 +35,6 @@ define $(package)_stage_cmds
   $(MAKE) DESTDIR=$($(package)_staging_dir) install
 endef
 
-define $(package)_postprocess_cmds  cp -f lib/libusb-1.0.a lib/libusb.a
+define $(package)_postprocess_cmds
+  cp -f lib/libusb-1.0.a lib/libusb.a
 endef
diff --git a/contrib/depends/packages/native_biplist.mk b/contrib/depends/packages/native_biplist.mk
index 3c6e890..c3054cb 100644
--- a/contrib/depends/packages/native_biplist.mk
+++ b/contrib/depends/packages/native_biplist.mk
@@ -1,20 +1,15 @@
 package=native_biplist
-$(package)_version=0.9
-$(package)_download_path=https://pypi.python.org/packages/source/b/biplist
+$(package)_version=1.0.3
+$(package)_download_path=https://bitbucket.org/wooster/biplist/downloads
 $(package)_file_name=biplist-$($(package)_version).tar.gz
-$(package)_sha256_hash=b57cadfd26e4754efdf89e9e37de87885f9b5c847b2615688ca04adfaf6ca604
-$(package)_install_libdir=$(build_prefix)/lib/python/dist-packages
-$(package)_patches=sorted_list.patch
-
-define $(package)_preprocess_cmds
-  patch -p1 < $($(package)_patch_dir)/sorted_list.patch
-endef
+$(package)_sha256_hash=4c0549764c5fe50b28042ec21aa2e14fe1a2224e239a1dae77d9e7f3932aa4c6
+$(package)_install_libdir=$(build_prefix)/lib/python3/dist-packages
 
 define $(package)_build_cmds
-    python setup.py build
+    python3 setup.py build
 endef
 
 define $(package)_stage_cmds
     mkdir -p $($(package)_install_libdir) && \
-    python setup.py install --root=$($(package)_staging_dir) --prefix=$(build_prefix) --install-lib=$($(package)_install_libdir)
+    python3 setup.py install --root=$($(package)_staging_dir) --prefix=$(build_prefix) --install-lib=$($(package)_install_libdir)
 endef
diff --git a/contrib/depends/packages/native_cctools.mk b/contrib/depends/packages/native_cctools.mk
index bcfe1af..393ad58 100644
--- a/contrib/depends/packages/native_cctools.mk
+++ b/contrib/depends/packages/native_cctools.mk
@@ -1,45 +1,86 @@
 package=native_cctools
-$(package)_version=807d6fd1be5d2224872e381870c0a75387fe05e6
-$(package)_download_path=https://github.com/theuni/cctools-port/archive
+$(package)_version=55562e4073dea0fbfd0b20e0bf69ffe6390c7f97
+$(package)_download_path=https://github.com/tpoechtrager/cctools-port/archive
 $(package)_file_name=$($(package)_version).tar.gz
-$(package)_sha256_hash=a09c9ba4684670a0375e42d9d67e7f12c1f62581a27f28f7c825d6d7032ccc6a
+$(package)_sha256_hash=e51995a843533a3dac155dd0c71362dd471597a2d23f13dff194c6285362f875
 $(package)_build_subdir=cctools
-$(package)_clang_version=3.7.1
-$(package)_clang_download_path=http://llvm.org/releases/$($(package)_clang_version)
+$(package)_patches=ld64_disable_threading.patch
+
+ifeq ($(strip $(FORCE_USE_SYSTEM_CLANG)),)
+$(package)_clang_version=8.0.0
+$(package)_clang_download_path=https://releases.llvm.org/$($(package)_clang_version)
 $(package)_clang_download_file=clang+llvm-$($(package)_clang_version)-x86_64-linux-gnu-ubuntu-14.04.tar.xz
 $(package)_clang_file_name=clang-llvm-$($(package)_clang_version)-x86_64-linux-gnu-ubuntu-14.04.tar.xz
-$(package)_clang_sha256_hash=99b28a6b48e793705228a390471991386daa33a9717cd9ca007fcdde69608fd9
-$(package)_extra_sources=$($(package)_clang_file_name)
+$(package)_clang_sha256_hash=9ef854b71949f825362a119bf2597f744836cb571131ae6b721cd102ffea8cd0
+endif
+
+$(package)_libtapi_version=3efb201881e7a76a21e0554906cf306432539cef
+$(package)_libtapi_download_path=https://github.com/tpoechtrager/apple-libtapi/archive
+$(package)_libtapi_download_file=$($(package)_libtapi_version).tar.gz
+$(package)_libtapi_file_name=$($(package)_libtapi_version).tar.gz
+$(package)_libtapi_sha256_hash=380c1ca37cfa04a8699d0887a8d3ee1ad27f3d08baba78887c73b09485c0fbd3
 
+$(package)_extra_sources=$($(package)_libtapi_file_name)
+ifeq ($(strip $(FORCE_USE_SYSTEM_CLANG)),)
+$(package)_extra_sources += $($(package)_clang_file_name)
+endif
+
+ifeq ($(strip $(FORCE_USE_SYSTEM_CLANG)),)
 define $(package)_fetch_cmds
 $(call fetch_file,$(package),$($(package)_download_path),$($(package)_download_file),$($(package)_file_name),$($(package)_sha256_hash)) && \
-$(call fetch_file,$(package),$($(package)_clang_download_path),$($(package)_clang_download_file),$($(package)_clang_file_name),$($(package)_clang_sha256_hash))
+$(call fetch_file,$(package),$($(package)_clang_download_path),$($(package)_clang_download_file),$($(package)_clang_file_name),$($(package)_clang_sha256_hash)) && \
+$(call fetch_file,$(package),$($(package)_libtapi_download_path),$($(package)_libtapi_download_file),$($(package)_libtapi_file_name),$($(package)_libtapi_sha256_hash))
 endef
+else
+define $(package)_fetch_cmds
+$(call fetch_file,$(package),$($(package)_download_path),$($(package)_download_file),$($(package)_file_name),$($(package)_sha256_hash)) && \
+$(call fetch_file,$(package),$($(package)_libtapi_download_path),$($(package)_libtapi_download_file),$($(package)_libtapi_file_name),$($(package)_libtapi_sha256_hash))
+endef
+endif
 
+ifeq ($(strip $(FORCE_USE_SYSTEM_CLANG)),)
 define $(package)_extract_cmds
   mkdir -p $($(package)_extract_dir) && \
   echo "$($(package)_sha256_hash)  $($(package)_source)" > $($(package)_extract_dir)/.$($(package)_file_name).hash && \
   echo "$($(package)_clang_sha256_hash)  $($(package)_source_dir)/$($(package)_clang_file_name)" >> $($(package)_extract_dir)/.$($(package)_file_name).hash && \
+  echo "$($(package)_libtapi_sha256_hash)  $($(package)_source_dir)/$($(package)_libtapi_file_name)" >> $($(package)_extract_dir)/.$($(package)_file_name).hash && \
   $(build_SHA256SUM) -c $($(package)_extract_dir)/.$($(package)_file_name).hash && \
-  mkdir -p toolchain/bin toolchain/lib/clang/3.5/include && \
-  tar --strip-components=1 -C toolchain -xf $($(package)_source_dir)/$($(package)_clang_file_name) && \
+  mkdir -p toolchain/bin toolchain/lib/clang/$($(package)_clang_version)/include && \
+  mkdir -p libtapi && \
+  tar --no-same-owner --strip-components=1 -C libtapi -xf $($(package)_source_dir)/$($(package)_libtapi_file_name) && \
+  tar --no-same-owner --strip-components=1 -C toolchain -xf $($(package)_source_dir)/$($(package)_clang_file_name) && \
   rm -f toolchain/lib/libc++abi.so* && \
-  echo "#!/bin/sh" > toolchain/bin/$(host)-dsymutil && \
-  echo "exit 0" >> toolchain/bin/$(host)-dsymutil && \
-  chmod +x toolchain/bin/$(host)-dsymutil && \
-  tar --strip-components=1 -xf $($(package)_source)
+  tar --no-same-owner --strip-components=1 -xf $($(package)_source)
+endef
+else
+define $(package)_extract_cmds
+  mkdir -p $($(package)_extract_dir) && \
+  echo "$($(package)_sha256_hash)  $($(package)_source)" > $($(package)_extract_dir)/.$($(package)_file_name).hash && \
+  echo "$($(package)_libtapi_sha256_hash)  $($(package)_source_dir)/$($(package)_libtapi_file_name)" >> $($(package)_extract_dir)/.$($(package)_file_name).hash && \
+  $(build_SHA256SUM) -c $($(package)_extract_dir)/.$($(package)_file_name).hash && \
+  mkdir -p libtapi && \
+  tar --no-same-owner --strip-components=1 -C libtapi -xf $($(package)_source_dir)/$($(package)_libtapi_file_name) && \
+  tar --no-same-owner --strip-components=1 -xf $($(package)_source)
 endef
+endif
 
 define $(package)_set_vars
-$(package)_config_opts=--target=$(host) --disable-lto-support
-$(package)_ldflags+=-Wl,-rpath=\\$$$$$$$$\$$$$$$$$ORIGIN/../lib
-$(package)_cc=$($(package)_extract_dir)/toolchain/bin/clang
-$(package)_cxx=$($(package)_extract_dir)/toolchain/bin/clang++
+  $(package)_config_opts=--target=$(host)  --with-libtapi=$($(package)_extract_dir)
+  $(package)_ldflags+=-Wl,-rpath=\\$$$$$$$$\$$$$$$$$ORIGIN/../lib
+  ifeq ($(strip $(FORCE_USE_SYSTEM_CLANG)),)
+  $(package)_config_opts+=--enable-lto-support --with-llvm-config=$($(package)_extract_dir)/toolchain/bin/llvm-config
+  $(package)_cc=$($(package)_extract_dir)/toolchain/bin/clang
+  $(package)_cxx=$($(package)_extract_dir)/toolchain/bin/clang++
+  else
+  $(package)_cc=clang
+  $(package)_cxx=clang++
+  endif
 endef
 
 define $(package)_preprocess_cmds
-  cd $($(package)_build_subdir); ./autogen.sh && \
-  sed -i.old "/define HAVE_PTHREADS/d" ld64/src/ld/InputFiles.h
+  CC=$($(package)_cc) CXX=$($(package)_cxx) INSTALLPREFIX=$($(package)_extract_dir) ./libtapi/build.sh && \
+  CC=$($(package)_cc) CXX=$($(package)_cxx) INSTALLPREFIX=$($(package)_extract_dir) ./libtapi/install.sh && \
+  patch -p1 < $($(package)_patch_dir)/ld64_disable_threading.patch
 endef
 
 define $(package)_config_cmds
@@ -50,9 +91,13 @@ define $(package)_build_cmds
   $(MAKE)
 endef
 
+ifeq ($(strip $(FORCE_USE_SYSTEM_CLANG)),)
 define $(package)_stage_cmds
   $(MAKE) DESTDIR=$($(package)_staging_dir) install && \
-  cp $($(package)_extract_dir)/cctools/misc/install_name_tool $($(package)_staging_prefix_dir)/bin/ &&\
+  mkdir -p $($(package)_staging_prefix_dir)/lib/ && \
+  cd $($(package)_extract_dir) && \
+  cp lib/libtapi.so.6 $($(package)_staging_prefix_dir)/lib/ && \
+  cp $($(package)_extract_dir)/cctools/misc/install_name_tool $($(package)_staging_prefix_dir)/bin/ && \
   cd $($(package)_extract_dir)/toolchain && \
   mkdir -p $($(package)_staging_prefix_dir)/lib/clang/$($(package)_clang_version)/include && \
   mkdir -p $($(package)_staging_prefix_dir)/bin $($(package)_staging_prefix_dir)/include && \
@@ -60,7 +105,13 @@ define $(package)_stage_cmds
   cp -P bin/clang++ $($(package)_staging_prefix_dir)/bin/ &&\
   cp lib/libLTO.so $($(package)_staging_prefix_dir)/lib/ && \
   cp -rf lib/clang/$($(package)_clang_version)/include/* $($(package)_staging_prefix_dir)/lib/clang/$($(package)_clang_version)/include/ && \
-  cp bin/llvm-dsymutil $($(package)_staging_prefix_dir)/bin/$(host)-dsymutil && \
-  if `test -d include/c++/`; then cp -rf include/c++/ $($(package)_staging_prefix_dir)/include/; fi && \
-  if `test -d lib/c++/`; then cp -rf lib/c++/ $($(package)_staging_prefix_dir)/lib/; fi
+  cp bin/dsymutil $($(package)_staging_prefix_dir)/bin/$(host)-dsymutil
+endef
+else
+define $(package)_stage_cmds
+  $(MAKE) DESTDIR=$($(package)_staging_dir) install && \
+  mkdir -p $($(package)_staging_prefix_dir)/lib/ && \
+  cd $($(package)_extract_dir) && \
+  cp lib/libtapi.so.6 $($(package)_staging_prefix_dir)/lib/
 endef
+endif
diff --git a/contrib/depends/packages/native_cdrkit.mk b/contrib/depends/packages/native_cdrkit.mk
index 8243458..4c21987 100644
--- a/contrib/depends/packages/native_cdrkit.mk
+++ b/contrib/depends/packages/native_cdrkit.mk
@@ -3,14 +3,17 @@ $(package)_version=1.1.11
 $(package)_download_path=https://distro.ibiblio.org/fatdog/source/600/c
 $(package)_file_name=cdrkit-$($(package)_version).tar.bz2
 $(package)_sha256_hash=b50d64c214a65b1a79afe3a964c691931a4233e2ba605d793eb85d0ac3652564
-$(package)_patches=cdrkit-deterministic.patch
+$(package)_patches=cdrkit-deterministic.patch cdrkit-wodim.patch
 
 define $(package)_preprocess_cmds
-  patch -p1 < $($(package)_patch_dir)/cdrkit-deterministic.patch
+  patch -p1 < $($(package)_patch_dir)/cdrkit-deterministic.patch && \
+  patch -p1 < $($(package)_patch_dir)/cdrkit-wodim.patch
 endef
 
+# Starting with 10.1, GCC defaults to -fno-common, resulting in linking errors.
+# Pass -fcommon to retain the legacy behaviour.
 define $(package)_config_cmds
-  cmake -DCMAKE_INSTALL_PREFIX=$(build_prefix)
+  $($(package)_cmake) -DCMAKE_C_FLAGS="$$($(1)_cflags) -fcommon" -DCMAKE_POLICY_DEFAULT_CMP0015=NEW
 endef
 
 define $(package)_build_cmds
diff --git a/contrib/depends/packages/native_cmake-unused.mk b/contrib/depends/packages/native_cmake-unused.mk
deleted file mode 100644
index c9ab757..0000000
--- a/contrib/depends/packages/native_cmake-unused.mk
+++ /dev/null
@@ -1,23 +0,0 @@
-package=native_cmake
-$(package)_version=3.14.0
-$(package)_version_dot=v3.14
-$(package)_download_path=https://cmake.org/files/$($(package)_version_dot)/
-$(package)_file_name=cmake-$($(package)_version).tar.gz
-$(package)_sha256_hash=aa76ba67b3c2af1946701f847073f4652af5cbd9f141f221c97af99127e75502
-
-define $(package)_set_vars
-$(package)_config_opts=
-endef
-
-define $(package)_config_cmds
-  ./bootstrap &&\
-  ./configure $($(package)_config_opts)
-endef
-
-define $(package)_build_cmd
-  $(MAKE)
-endef
-
-define $(package)_stage_cmds
-  $(MAKE) DESTDIR=$($(package)_staging_dir) install
-endef
diff --git a/contrib/depends/packages/native_ds_store.mk b/contrib/depends/packages/native_ds_store.mk
index 49f5829..f99b689 100644
--- a/contrib/depends/packages/native_ds_store.mk
+++ b/contrib/depends/packages/native_ds_store.mk
@@ -1,17 +1,16 @@
 package=native_ds_store
-$(package)_version=1.1.0
-$(package)_download_path=https://bitbucket.org/al45tair/ds_store/get
-$(package)_download_file=v$($(package)_version).tar.bz2
-$(package)_file_name=$(package)-$($(package)_version).tar.bz2
-$(package)_sha256_hash=921596764d71d1bbd3297a90ef6d286f718794d667e4f81d91d14053525d64c1
-$(package)_install_libdir=$(build_prefix)/lib/python/dist-packages
+$(package)_version=1.1.2
+$(package)_download_path=https://github.com/al45tair/ds_store/archive/
+$(package)_file_name=v$($(package)_version).tar.gz
+$(package)_sha256_hash=3b3ecb7bf0a5157f5b6010bc3af7c141fb0ad3527084e63336220d22744bc20c
+$(package)_install_libdir=$(build_prefix)/lib/python3/dist-packages
 $(package)_dependencies=native_biplist
 
 define $(package)_build_cmds
-    python setup.py build
+    python3 setup.py build
 endef
 
 define $(package)_stage_cmds
     mkdir -p $($(package)_install_libdir) && \
-    python setup.py install --root=$($(package)_staging_dir) --prefix=$(build_prefix) --install-lib=$($(package)_install_libdir)
+    python3 setup.py install --root=$($(package)_staging_dir) --prefix=$(build_prefix) --install-lib=$($(package)_install_libdir)
 endef
diff --git a/contrib/depends/packages/native_libdmg-hfsplus.mk b/contrib/depends/packages/native_libdmg-hfsplus.mk
index a4ffb60..d51699b 100644
--- a/contrib/depends/packages/native_libdmg-hfsplus.mk
+++ b/contrib/depends/packages/native_libdmg-hfsplus.mk
@@ -1,16 +1,18 @@
 package=native_libdmg-hfsplus
-$(package)_version=0.1
-$(package)_download_path=https://github.com/theuni/libdmg-hfsplus/archive
-$(package)_file_name=libdmg-hfsplus-v$($(package)_version).tar.gz
-$(package)_sha256_hash=6569a02eb31c2827080d7d59001869ea14484c281efab0ae7f2b86af5c3120b3
+$(package)_version=tarball
+$(package)_download_path=https://github.com/planetbeing/libdmg-hfsplus/tarball/master/
+$(package)_file_name=libdmg-hfsplus.tar.gz
+$(package)_sha256_hash=6f75eedb5d81b5c0cc38111ae4386e8aba9e4bf6efcd70a1bb918f04ec1345a5
 $(package)_build_subdir=build
+$(package)_patches=remove-libcrypto-dependency.patch
 
 define $(package)_preprocess_cmds
+  patch -p1 < $($(package)_patch_dir)/remove-libcrypto-dependency.patch && \
   mkdir build
 endef
 
 define $(package)_config_cmds
-  cmake -DCMAKE_INSTALL_PREFIX:PATH=$(build_prefix)/bin ..
+  $($(package)_cmake) -DCMAKE_C_FLAGS="$$($(1)_cflags) -Wl,--build-id=none" ..
 endef
 
 define $(package)_build_cmds
diff --git a/contrib/depends/packages/native_mac_alias.mk b/contrib/depends/packages/native_mac_alias.mk
index 85a8a40..9b7376c 100644
--- a/contrib/depends/packages/native_mac_alias.mk
+++ b/contrib/depends/packages/native_mac_alias.mk
@@ -1,21 +1,16 @@
 package=native_mac_alias
-$(package)_version=1.1.0
-$(package)_download_path=https://bitbucket.org/al45tair/mac_alias/get
-$(package)_download_file=v$($(package)_version).tar.bz2
-$(package)_file_name=$(package)-$($(package)_version).tar.bz2
-$(package)_sha256_hash=87ad827e66790028361e43fc754f68ed041a9bdb214cca03c853f079b04fb120
-$(package)_install_libdir=$(build_prefix)/lib/python/dist-packages
-$(package)_patches=python3.patch
-
-define $(package)_preprocess_cmds
-  patch -p1 < $($(package)_patch_dir)/python3.patch
-endef
+$(package)_version=2.0.7
+$(package)_download_path=https://github.com/al45tair/mac_alias/archive/
+$(package)_download_file=v$($(package)_version).tar.gz
+$(package)_file_name=$(package)-$($(package)_version).tar.gz
+$(package)_sha256_hash=6f606d3b6bccd2112aeabf1a063f5b5ece87005a5d7e97c8faca23b916e88838
+$(package)_install_libdir=$(build_prefix)/lib/python3/dist-packages
 
 define $(package)_build_cmds
-    python setup.py build
+    python3 setup.py build
 endef
 
 define $(package)_stage_cmds
     mkdir -p $($(package)_install_libdir) && \
-    python setup.py install --root=$($(package)_staging_dir) --prefix=$(build_prefix) --install-lib=$($(package)_install_libdir)
+    python3 setup.py install --root=$($(package)_staging_dir) --prefix=$(build_prefix) --install-lib=$($(package)_install_libdir)
 endef
diff --git a/contrib/depends/packages/native_protobuf.mk b/contrib/depends/packages/native_protobuf.mk
deleted file mode 100644
index 35f648b..0000000
--- a/contrib/depends/packages/native_protobuf.mk
+++ /dev/null
@@ -1,27 +0,0 @@
-package=protobuf3
-$(package)_version=3.6.1
-$(package)_download_path=https://github.com/protocolbuffers/protobuf/releases/download/v$($(package)_version)/
-$(package)_file_name=protobuf-cpp-$($(package)_version).tar.gz
-$(package)_sha256_hash=b3732e471a9bb7950f090fd0457ebd2536a9ba0891b7f3785919c654fe2a2529
-$(package)_cxxflags=-std=c++11
-
-define $(package)_set_vars
-  $(package)_config_opts=--disable-shared --prefix=$(build_prefix)
-  $(package)_config_opts_linux=--with-pic
-endef
-
-define $(package)_config_cmds
-  $($(package)_autoconf)
-endef
-
-define $(package)_build_cmds
-  $(MAKE) -C src
-endef
-
-define $(package)_stage_cmds
-  $(MAKE) DESTDIR=$($(package)_staging_dir) -C src install
-endef
-
-define $(package)_postprocess_cmds
-  rm lib/libprotoc.a
-endef
diff --git a/contrib/depends/packages/openssl.mk b/contrib/depends/packages/openssl.mk
index c870cc5..a65a9c6 100644
--- a/contrib/depends/packages/openssl.mk
+++ b/contrib/depends/packages/openssl.mk
@@ -1,36 +1,29 @@
 package=openssl
-$(package)_version=1.0.2r
- $(package)_download_path=https://ftp.openssl.org/source/old/1.0.2
+$(package)_version=1.1.1g
+$(package)_download_path=https://www.openssl.org/source/
 $(package)_file_name=$(package)-$($(package)_version).tar.gz
-$(package)_sha256_hash=ae51d08bba8a83958e894946f15303ff894d75c2b8bbd44a852b64e3fe11d0d6
+$(package)_sha256_hash=ddb04774f1e32f0c49751e21b67216ac87852ceb056b75209af2443400636d46
 
 define $(package)_set_vars
-$(package)_config_env=AR="$($(package)_ar)" RANLIB="$($(package)_ranlib)" CC="$($(package)_cc)"
+$(package)_config_env=AR="$($(package)_ar)" ARFLAGS=$($(package)_arflags) RANLIB="$($(package)_ranlib)" CC="$($(package)_cc)"
 $(package)_config_opts=--prefix=$(host_prefix) --openssldir=$(host_prefix)/etc/openssl
 $(package)_config_opts+=no-capieng
 $(package)_config_opts+=no-dso
 $(package)_config_opts+=no-dtls1
 $(package)_config_opts+=no-ec_nistp_64_gcc_128
 $(package)_config_opts+=no-gost
-$(package)_config_opts+=no-gmp
 $(package)_config_opts+=no-heartbeats
-$(package)_config_opts+=no-jpake
-$(package)_config_opts+=no-krb5
-$(package)_config_opts+=no-libunbound
 $(package)_config_opts+=no-md2
 $(package)_config_opts+=no-rc5
 $(package)_config_opts+=no-rdrand
 $(package)_config_opts+=no-rfc3779
-$(package)_config_opts+=no-rsax
 $(package)_config_opts+=no-sctp
-$(package)_config_opts+=no-sha0
 $(package)_config_opts+=no-shared
 $(package)_config_opts+=no-ssl-trace
 $(package)_config_opts+=no-ssl2
 $(package)_config_opts+=no-ssl3
-$(package)_config_opts+=no-static_engine
-$(package)_config_opts+=no-store
-$(package)_config_opts+=no-unit-test
+$(package)_config_opts+=no-tests
+$(package)_config_opts+=no-static-engine
 $(package)_config_opts+=no-weak-ssl-ciphers
 $(package)_config_opts+=no-zlib
 $(package)_config_opts+=no-zlib-dynamic
@@ -49,8 +42,7 @@ $(package)_config_opts_i686_mingw32=mingw
 endef
 
 define $(package)_preprocess_cmds
-  sed -i.old "/define DATE/d" util/mkbuildinf.pl && \
-  sed -i.old "s|engines apps test|engines|" Makefile.org
+  sed -i.old 's/^\(my \$date = .*\) time()/\1 1575269735/' util/mkbuildinf.pl
 endef
 
 define $(package)_config_cmds
@@ -62,9 +54,5 @@ define $(package)_build_cmds
 endef
 
 define $(package)_stage_cmds
-  $(MAKE) INSTALL_PREFIX=$($(package)_staging_dir) -j1 install_sw
-endef
-
-define $(package)_postprocess_cmds
-  rm -rf share bin etc
+  $(MAKE) DESTDIR=$($(package)_staging_dir) -j1 install_dev install_engines && sleep 10
 endef
diff --git a/contrib/depends/packages/packages.mk b/contrib/depends/packages/packages.mk
index 9e48b63..bb1d614 100644
--- a/contrib/depends/packages/packages.mk
+++ b/contrib/depends/packages/packages.mk
@@ -1,25 +1,27 @@
-packages:=boost openssl zeromq cppzmq expat ldns readline libiconv hidapi protobuf libusb
-native_packages := native_ccache native_protobuf
+packages:=boost openssl zeromq libevent
 
-darwin_native_packages = native_biplist native_ds_store native_mac_alias
-darwin_packages = sodium_darwin
+native_packages := native_ccache
 
-linux_packages = eudev
+hardware_packages := hidapi libusb
+hardware_native_packages :=
+
+multiprocess_packages = libmultiprocess capnp
+multiprocess_native_packages = native_libmultiprocess native_capnp
+
+darwin_native_packages = native_biplist native_ds_store native_mac_alias $(hardware_native_packages)
+darwin_packages = sodium ncurses readline $(hardware_packages)
+
+linux_packages = unwind eudev ncurses readline sodium $(hardware_packages)
+linux_native_packages = $(hardware_native_packages)
 
 ifeq ($(build_tests),ON)
 packages += gtest
 endif
 
-ifeq ($(host_os),mingw32)
-packages += icu4c
-packages += sodium
-endif
-
-ifeq ($(host_os),linux)
-packages += unwind
-packages += sodium
-endif
+mingw32_packages = icu4c sodium $(hardware_packages)
+mingw32_native_packages = $(hardware_native_packages)
 
 ifneq ($(build_os),darwin)
 darwin_native_packages += native_cctools native_cdrkit native_libdmg-hfsplus
 endif
+
diff --git a/contrib/depends/packages/protobuf.mk b/contrib/depends/packages/protobuf.mk
deleted file mode 100644
index 81fa78a..0000000
--- a/contrib/depends/packages/protobuf.mk
+++ /dev/null
@@ -1,31 +0,0 @@
-package=protobuf
-$(package)_version=$(native_$(package)_version)
-$(package)_download_path=$(native_$(package)_download_path)
-$(package)_file_name=$(native_$(package)_file_name)
-$(package)_sha256_hash=$(native_$(package)_sha256_hash)
-$(package)_dependencies=native_$(package)
-$(package)_cxxflags=-std=c++11
-
-define $(package)_set_vars
-  $(package)_config_opts=--disable-shared --with-protoc=$(build_prefix)/bin/protoc
-  $(package)_config_opts_linux=--with-pic
-endef
-
-define $(package)_config_cmds
-  $($(package)_autoconf)
-endef
-
-define $(package)_build_cmds
-  $(MAKE) -C src libprotobuf.la
-endef
-
-define $(package)_stage_cmds
-  $(MAKE) DESTDIR=$($(package)_staging_dir) -C src install-libLTLIBRARIES install-nobase_includeHEADERS &&\
-  $(MAKE) DESTDIR=$($(package)_staging_dir) install-pkgconfigDATA
-endef
-
-define $(package)_postprocess_cmds
-  rm lib/libprotoc.a &&\
-  rm lib/*.la
-endef
-
diff --git a/contrib/depends/packages/readline.mk b/contrib/depends/packages/readline.mk
index afefc7f..855eb53 100644
--- a/contrib/depends/packages/readline.mk
+++ b/contrib/depends/packages/readline.mk
@@ -3,19 +3,22 @@ $(package)_version=8.0
 $(package)_download_path=https://ftp.gnu.org/gnu/readline
 $(package)_file_name=$(package)-$($(package)_version).tar.gz
 $(package)_sha256_hash=e339f51971478d369f8a053a330a190781acb9864cf4c541060f12078948e461
+$(package)_dependencies=ncurses
 
 define $(package)_set_vars
   $(package)_build_opts=CC="$($(package)_cc)"
-  $(package)_config_env=AR="$($(package)_ar)" RANLIB="$($(package)_ranlib)" CC="$($(package)_cc)"
-  $(package)_config_opts=--prefix=$(host_prefix)
-  $(package)_config_opts+=--disable-shared --enable-multibye --without-purify --without-curses
+  $(package)_config_env=AR="$($(package)_ar)" RANLIB="$($(package)_ranlib)" CC="$($(package)_cc)" LDFLAGS="-L$(host_prefix)/lib" ARFLAGS=$($(package)_arflags)
+  $(package)_config_env_darwin=RANLIB="$(host_prefix)/native/bin/x86_64-apple-darwin16-ranlib" AR="$(host_prefix)/native/bin/x86_64-apple-darwin16-ar" CC="$(host_prefix)/native/bin/$($(package)_cc)"
+  $(package)_config_opts+=--prefix=$(host_prefix)
+  $(package)_config_opts+=--exec-prefix=$(host_prefix)
+  $(package)_config_opts+=--host=$(HOST)
+  $(package)_config_opts+=--disable-shared --with-curses
   $(package)_config_opts_release=--disable-debug-mode
+  $(package)_config_opts_darwin+=RANLIB="$(host_prefix)/native/bin/x86_64-apple-darwin16-ranlib" AR="$(host_prefix)/native/bin/x86_64-apple-darwin16-ar" CC="$(host_prefix)/native/bin/$($(package)_cc)"
   $(package)_build_opts=CFLAGS="$($(package)_cflags) $($(package)_cppflags) -fPIC"
 endef
 
 define $(package)_config_cmds
-  export bash_cv_have_mbstate_t=yes &&\
-  export bash_cv_wcwidth_broken=yes &&\
   ./configure $($(package)_config_opts)
 endef
 
@@ -24,6 +27,6 @@ define $(package)_build_cmds
 endef
 
 define $(package)_stage_cmds
-  $(MAKE) DESTDIR=$($(package)_staging_dir) install
+  $(MAKE) install DESTDIR=$($(package)_staging_dir) prefix=$(host_prefix) exec-prefix=$(host_prefix)
 endef
 
diff --git a/contrib/depends/packages/sodium.mk b/contrib/depends/packages/sodium.mk
index ff37307..b6f1c50 100644
--- a/contrib/depends/packages/sodium.mk
+++ b/contrib/depends/packages/sodium.mk
@@ -1,19 +1,22 @@
 package=sodium
-$(package)_version=1.0.18
-$(package)_download_path=https://download.libsodium.org/libsodium/releases/
-$(package)_file_name=libsodium-$($(package)_version).tar.gz
+lib_name=libsodium
+$(package)_version_full=1.0.18-RELEASE
+$(package)_version_short=1.0.18
+$(package)_download_path=https://github.com/jedisct1/libsodium/releases/download/$($(package)_version_full)/
+$(package)_file_name=$(lib_name)-$($(package)_version_short).tar.gz
 $(package)_sha256_hash=6f504490b342a4f8a4c4a02fc9b866cbef8622d5df4e5452b46be121e46636c1
 $(package)_patches=fix-whitespace.patch
 
 define $(package)_set_vars
 $(package)_config_opts=--enable-static --disable-shared
 $(package)_config_opts+=--prefix=$(host_prefix)
+$(package)_config_opts_darwin=RANLIB="$(host_prefix)/native/bin/x86_64-apple-darwin16-ranlib" AR="$(host_prefix)/native/bin/x86_64-apple-darwin16-ar" CC="$(host_prefix)/native/bin/$($(package)_cc)"
 endef
 
 define $(package)_config_cmds
   ./autogen.sh &&\
   patch -p1 < $($(package)_patch_dir)/fix-whitespace.patch &&\
-  $($(package)_autoconf) $($(package)_config_opts)
+  $($(package)_autoconf) $($(package)_config_opts) ARFLAGS=$($(package)_arflags)
 endef
 
 define $(package)_build_cmds
@@ -23,7 +26,3 @@ endef
 define $(package)_stage_cmds
   $(MAKE) DESTDIR=$($(package)_staging_dir) install
 endef
-
-define $(package)_postprocess_cmds
-  rm lib/*.la
-endef
diff --git a/contrib/depends/packages/sodium_darwin.mk b/contrib/depends/packages/sodium_darwin.mk
deleted file mode 100644
index 46f39a9..0000000
--- a/contrib/depends/packages/sodium_darwin.mk
+++ /dev/null
@@ -1,29 +0,0 @@
-package=sodium-darwin
-$(package)_version=1.0.18
-$(package)_download_path=https://download.libsodium.org/libsodium/releases/
-$(package)_file_name=libsodium-$($(package)_version).tar.gz
-$(package)_sha256_hash=6f504490b342a4f8a4c4a02fc9b866cbef8622d5df4e5452b46be121e46636c1
-
-define $(package)_set_vars
-$(package)_build_opts_darwin=OS=Darwin LIBTOOL="$($(package)_libtool)"
-$(package)_config_opts=--enable-static --disable-shared
-$(package)_config_opts+=--prefix=$(host_prefix)
-endef
-
-define $(package)_config_cmds
-  ./autogen.sh &&\
-  $($(package)_autoconf) $($(package)_config_opts) RANLIB="$(host_prefix)/native/bin/x86_64-apple-darwin14-ranlib" AR="$(host_prefix)/native/bin/x86_64-apple-darwin14-ar" CC="$(host_prefix)/native/bin/$($(package)_cc)"
-endef
-
-define $(package)_build_cmds
-  echo "path is problematic here" &&\
-  make
-endef
-
-define $(package)_stage_cmds
-  $(MAKE) DESTDIR=$($(package)_staging_dir) install
-endef
-
-define $(package)_postprocess_cmds
-  rm lib/*.la
-endef
diff --git a/contrib/depends/packages/unbound.mk b/contrib/depends/packages/unbound.mk
deleted file mode 100644
index 733a7f2..0000000
--- a/contrib/depends/packages/unbound.mk
+++ /dev/null
@@ -1,28 +0,0 @@
-package=unbound
-$(package)_version=1.6.8
-$(package)_download_path=https://www.unbound.net/downloads/
-$(package)_file_name=$(package)-$($(package)_version).tar.gz
-$(package)_sha256_hash=e3b428e33f56a45417107448418865fe08d58e0e7fea199b855515f60884dd49
-$(package)_dependencies=openssl expat ldns
-
-define $(package)_set_vars
-  $(package)_config_opts=--disable-shared --enable-static --without-pyunbound --prefix=$(host_prefix) --with-libexpat=$(host_prefix) --with-ssl=$(host_prefix) --with-libevent=no --without-pythonmodule --disable-flto --with-pthreads
-  $(package)_config_opts_linux=--with-pic
-  $(package)_config_opts_w64=--enable-static-exe --sysconfdir=/etc --prefix=$(host_prefix) --target=$(host_prefix)
-  $(package)_build_opts_mingw32=LDFLAGS="$($(package)_ldflags) -lpthread"
-endef
-
-define $(package)_config_cmds
-  $($(package)_autoconf) $($(package)_config_opts)
-endef
-
-define $(package)_build_cmds
-  $(MAKE) $($(package)_build_opts)
-endef
-
-define $(package)_stage_cmds
-  $(MAKE) DESTDIR=$($(package)_staging_dir) install
-endef
-
-define $(package)_postprocess_cmds
-endef
diff --git a/contrib/depends/packages/unwind.mk b/contrib/depends/packages/unwind.mk
index fddbd05..17f530e 100644
--- a/contrib/depends/packages/unwind.mk
+++ b/contrib/depends/packages/unwind.mk
@@ -3,11 +3,16 @@ $(package)_version=1.2
 $(package)_download_path=https://download.savannah.nongnu.org/releases/libunwind
 $(package)_file_name=lib$(package)-$($(package)_version).tar.gz
 $(package)_sha256_hash=1de38ffbdc88bd694d10081865871cd2bfbb02ad8ef9e1606aee18d65532b992
+$(package)_patches=fix_obj_order.patch
+
+define $(package)_preprocess_cmds
+  patch -p0 < $($(package)_patch_dir)/fix_obj_order.patch
+endef
 
 define $(package)_config_cmds
   cp -f $(BASEDIR)/config.guess config/config.guess &&\
   cp -f $(BASEDIR)/config.sub config/config.sub &&\
-  $($(package)_autoconf) --disable-shared --enable-static
+  $($(package)_autoconf) --disable-shared --enable-static ARFLAGS=$($(package)_arflags)
 endef
 
 define $(package)_build_cmds
@@ -17,8 +22,3 @@ endef
 define $(package)_stage_cmds
   $(MAKE) DESTDIR=$($(package)_staging_dir) install
 endef
-
-define $(package)_postprocess_cmds
-  rm lib/*.la
-endef
-
diff --git a/contrib/depends/packages/zeromq.mk b/contrib/depends/packages/zeromq.mk
index 2b3b8a6..9f8f6ab 100644
--- a/contrib/depends/packages/zeromq.mk
+++ b/contrib/depends/packages/zeromq.mk
@@ -1,35 +1,36 @@
 package=zeromq
-$(package)_version=4.1.7
-$(package)_download_path=https://github.com/zeromq/zeromq4-1/releases/download/v$($(package)_version)/
+$(package)_version=4.3.2
+$(package)_download_path=https://github.com/zeromq/libzmq/releases/download/v$($(package)_version)/
 $(package)_file_name=$(package)-$($(package)_version).tar.gz
-$(package)_sha256_hash=31c383cfcd3be1dc8a66e448c403029e793687e70473b89c4cc0bd626e7da299
-$(package)_patches=9114d3957725acd34aa8b8d011585812f3369411.patch 9e6745c12e0b100cd38acecc16ce7db02905e27c.patch
+$(package)_sha256_hash=ebd7b5c830d6428956b67a0454a7f8cbed1de74b3b01e5c33c5378e22740f763
+$(package)_dependencies=sodium
+$(package)_patches=b3123a2fd1e77cbdceb5ee7a70e796063b5ee5b9.patch 87b81926aaaea70c84d5a5ea6eda982b3425ceeb.patch
 
 define $(package)_set_vars
-  $(package)_config_opts=--without-documentation --disable-shared --without-libsodium --disable-curve
+  $(package)_config_opts=--without-docs --enable-static=yes --enable-shared=no --with-libsodium=yes --with-pgm=no --with-norm=no --disable-perf --disable-Werror --disable-drafts --enable-option-checking
   $(package)_config_opts_linux=--with-pic
-  $(package)_cxxflags=-std=c++11
+  $(package)_cxxflags_linux=-std=c++14
+  $(package)_cxxflags_mingw32=-std=c++14
+  $(package)_cxxflags_darwin=-std=c++14 -fvisibility=default
 endef
 
 define $(package)_preprocess_cmds
-  patch -p1 < $($(package)_patch_dir)/9114d3957725acd34aa8b8d011585812f3369411.patch && \
-  patch -p1 < $($(package)_patch_dir)/9e6745c12e0b100cd38acecc16ce7db02905e27c.patch && \
+  patch -p1 < $($(package)_patch_dir)/b3123a2fd1e77cbdceb5ee7a70e796063b5ee5b9.patch && \
+  patch -p1 < $($(package)_patch_dir)/87b81926aaaea70c84d5a5ea6eda982b3425ceeb.patch && \
   ./autogen.sh
 endef
 
 define $(package)_config_cmds
-  $($(package)_autoconf)
+  $($(package)_autoconf) ARFLAGS=$($(package)_arflags)
 endef
 
 define $(package)_build_cmds
-  $(MAKE) libzmq.la
+  $(MAKE)
 endef
 
 define $(package)_stage_cmds
-  $(MAKE) DESTDIR=$($(package)_staging_dir) install-libLTLIBRARIES install-includeHEADERS install-pkgconfigDATA
+  $(MAKE) DESTDIR=$($(package)_staging_dir) install
 endef
 
 define $(package)_postprocess_cmds
-  rm -rf bin share &&\
-  rm lib/*.la
 endef
diff --git a/contrib/depends/patches/zeromq/0001-fix-build-with-older-mingw64.patch b/contrib/depends/patches/zeromq/0001-fix-build-with-older-mingw64.patch
deleted file mode 100644
index b911ac5..0000000
--- a/contrib/depends/patches/zeromq/0001-fix-build-with-older-mingw64.patch
+++ /dev/null
@@ -1,30 +0,0 @@
-From f6866b0f166ad168618aae64c7fbee8775d3eb23 Mon Sep 17 00:00:00 2001
-From: mruddy <6440430+mruddy@users.noreply.github.com>
-Date: Sat, 30 Jun 2018 09:44:58 -0400
-Subject: [PATCH] fix build with older mingw64
-
----
- src/windows.hpp | 7 +++++++
- 1 file changed, 7 insertions(+)
-
-diff --git a/src/windows.hpp b/src/windows.hpp
-index 6c3839fd..2c32ec79 100644
---- a/src/windows.hpp
-+++ b/src/windows.hpp
-@@ -58,6 +58,13 @@
- #include <winsock2.h>
- #include <windows.h>
- #include <mswsock.h>
-+
-+#if defined __MINGW64_VERSION_MAJOR && __MINGW64_VERSION_MAJOR < 4
-+// Workaround for mingw-w64 < v4.0 which did not include ws2ipdef.h in iphlpapi.h.
-+// Fixed in mingw-w64 by 9bd8fe9148924840d315b4c915dd099955ea89d1.
-+#include <ws2def.h>
-+#include <ws2ipdef.h>
-+#endif
- #include <iphlpapi.h>
- 
- #if !defined __MINGW32__
--- 
-2.17.1
-
diff --git a/contrib/depends/patches/zeromq/0002-disable-pthread_set_name_np.patch b/contrib/depends/patches/zeromq/0002-disable-pthread_set_name_np.patch
deleted file mode 100644
index 022e311..0000000
--- a/contrib/depends/patches/zeromq/0002-disable-pthread_set_name_np.patch
+++ /dev/null
@@ -1,35 +0,0 @@
-From c9bbdd6581d07acfe8971e4bcebe278a3676cf03 Mon Sep 17 00:00:00 2001
-From: mruddy <6440430+mruddy@users.noreply.github.com>
-Date: Sat, 30 Jun 2018 09:57:18 -0400
-Subject: [PATCH] disable pthread_set_name_np
-
-pthread_set_name_np adds a Glibc requirement on >= 2.12.
----
- src/thread.cpp | 4 +++-
- 1 file changed, 3 insertions(+), 1 deletion(-)
-
-diff --git a/src/thread.cpp b/src/thread.cpp
-index a1086b0c..9943f354 100644
---- a/src/thread.cpp
-+++ b/src/thread.cpp
-@@ -307,7 +307,7 @@ void zmq::thread_t::setThreadName (const char *name_)
-  */
-     if (!name_)
-         return;
--
-+#if 0
- #if defined(ZMQ_HAVE_PTHREAD_SETNAME_1)
-     int rc = pthread_setname_np (name_);
-     if (rc)
-@@ -323,6 +323,8 @@ void zmq::thread_t::setThreadName (const char *name_)
- #elif defined(ZMQ_HAVE_PTHREAD_SET_NAME)
-     pthread_set_name_np (descriptor, name_);
- #endif
-+#endif
-+    return;
- }
- 
- #endif
--- 
-2.17.1
-
diff --git a/contrib/depends/patches/zeromq/9114d3957725acd34aa8b8d011585812f3369411.patch b/contrib/depends/patches/zeromq/9114d3957725acd34aa8b8d011585812f3369411.patch
deleted file mode 100644
index f704b3d..0000000
--- a/contrib/depends/patches/zeromq/9114d3957725acd34aa8b8d011585812f3369411.patch
+++ /dev/null
@@ -1,22 +0,0 @@
-From 9114d3957725acd34aa8b8d011585812f3369411 Mon Sep 17 00:00:00 2001
-From: Jeroen Ooms <jeroenooms@gmail.com>
-Date: Tue, 20 Oct 2015 13:10:38 +0200
-Subject: [PATCH] enable static libraries on mingw
-
----
- configure.ac | 2 +-
- 1 file changed, 1 insertion(+), 1 deletion(-)
-
-diff --git a/configure.ac b/configure.ac
-index 393505b..e92131a 100644
---- a/configure.ac
-+++ b/configure.ac
-@@ -265,7 +265,7 @@ case "${host_os}" in
-         libzmq_dso_visibility="no"
-
-         if test "x$enable_static" = "xyes"; then
--            AC_MSG_ERROR([Building static libraries is not supported under MinGW32])
-+            CPPFLAGS="-DZMQ_STATIC"
-         fi
-
- 	# Set FD_SETSIZE to 1024
\ No newline at end of file
diff --git a/contrib/depends/patches/zeromq/9e6745c12e0b100cd38acecc16ce7db02905e27c.patch b/contrib/depends/patches/zeromq/9e6745c12e0b100cd38acecc16ce7db02905e27c.patch
deleted file mode 100644
index 9aff2c1..0000000
--- a/contrib/depends/patches/zeromq/9e6745c12e0b100cd38acecc16ce7db02905e27c.patch
+++ /dev/null
@@ -1,22 +0,0 @@
-From 9e6745c12e0b100cd38acecc16ce7db02905e27c Mon Sep 17 00:00:00 2001
-From: David Millard <dmillard10@gmail.com>
-Date: Tue, 10 May 2016 13:53:53 -0700
-Subject: [PATCH] Fix autotools for static MinGW builds
-
----
- configure.ac | 2 +-
- 1 file changed, 1 insertion(+), 1 deletion(-)
-
-diff --git a/configure.ac b/configure.ac
-index 5a0fa14..def6ea7 100644
---- a/configure.ac
-+++ b/configure.ac
-@@ -259,7 +259,7 @@ case "${host_os}" in
-         libzmq_dso_visibility="no"
-
-         if test "x$enable_static" = "xyes"; then
--            CPPFLAGS="-DZMQ_STATIC"
-+            CPPFLAGS="-DZMQ_STATIC $CPPFLAGS"
-         fi
-
- 	# Set FD_SETSIZE to 1024
\ No newline at end of file
diff --git a/contrib/depends/protobuf.mk b/contrib/depends/protobuf.mk
deleted file mode 100644
index 54d3fd9..0000000
--- a/contrib/depends/protobuf.mk
+++ /dev/null
@@ -1,29 +0,0 @@
-package=protobuf
-$(package)_version=$(native_$(package)_version)
-$(package)_download_path=$(native_$(package)_download_path)
-$(package)_file_name=$(native_$(package)_file_name)
-$(package)_sha256_hash=$(native_$(package)_sha256_hash)
-$(package)_dependencies=native_$(package)
-$(package)_cxxflags=-std=c++11
-
-define $(package)_set_vars
-  $(package)_config_opts=--disable-shared --with-protoc=$(build_prefix)/bin/protoc
-  $(package)_config_opts_linux=--with-pic
-endef
-
-define $(package)_config_cmds
-  $($(package)_autoconf)
-endef
-
-define $(package)_build_cmds
-  $(MAKE) -C src libprotobuf.la
-endef
-
-define $(package)_stage_cmds
-  $(MAKE) DESTDIR=$($(package)_staging_dir) -C src install-libLTLIBRARIES install-nobase_includeHEADERS &&\
-  $(MAKE) DESTDIR=$($(package)_staging_dir) install-pkgconfigDATA
-endef
-
-define $(package)_postprocess_cmds
-  rm lib/libprotoc.a
-endef
diff --git a/contrib/depends/toolchain.cmake.in b/contrib/depends/toolchain.cmake.in
index 1d39243..85a2cbb 100644
--- a/contrib/depends/toolchain.cmake.in
+++ b/contrib/depends/toolchain.cmake.in
@@ -1,5 +1,6 @@
 # Set the system name, either Darwin, Linux, or Windows
 SET(CMAKE_SYSTEM_NAME @depends@)
+SET(CMAKE_SYSTEM_PROCESSOR @arch@)
 SET(CMAKE_BUILD_TYPE @release_type@)
 
 OPTION(STATIC "Link libraries statically" ON)
@@ -15,36 +16,41 @@ SET(CMAKE_FIND_ROOT_PATH @prefix@ /usr)
 
 SET(ENV{PKG_CONFIG_PATH} @prefix@/lib/pkgconfig)
 
-SET(LRELEASE_PATH @prefix@/native/bin CACHE FILEPATH "path to lrelease" FORCE)
-
 SET(Readline_ROOT_DIR @prefix@)
+SET(Readline_INCLUDE_DIR @prefix@/include)
+SET(Readline_LIBRARY @prefix@/lib/libreadline.a)
+SET(Terminfo_LIBRARY @prefix@/lib/libtinfo.a)
+
+SET(LRELEASE_PATH @prefix@/native/bin CACHE FILEPATH "path to lrelease" FORCE)
 
-SET(LIBUNWIND_INCLUDE_DIR @prefix@/include)
+SET(LIBUNWIND_INCLUDE_DIRS @prefix@/include)
 SET(LIBUNWIND_LIBRARIES @prefix@/lib/libunwind.a)
 SET(LIBUNWIND_LIBRARY_DIRS @prefix@/lib)
 
 SET(LIBUSB-1.0_LIBRARY @prefix@/lib/libusb-1.0.a)
 SET(LIBUDEV_LIBRARY @prefix@/lib/libudev.a)
 
-SET(Protobuf_FOUND 1)
-SET(Protobuf_PROTOC_EXECUTABLE @prefix@/native/bin/protoc CACHE FILEPATH "Path to the native protoc")
-SET(Protobuf_INCLUDE_DIR @prefix@/include CACHE PATH "Protobuf include dir")
-SET(Protobuf_INCLUDE_DIRS @prefix@/include CACHE PATH "Protobuf include dir")
-SET(Protobuf_LIBRARY @prefix@/lib/libprotobuf.a CACHE FILEPATH "Protobuf library")
+SET(ZMQ_INCLUDE_DIRS @prefix@/include)
+SET(ZMQ_LIBRARIES @prefix@/lib/libzmq.a)
+SET(ZMQ_LIBRARY_DIR @prefix@/lib)
 
-SET(ZMQ_INCLUDE_PATH @prefix@/include)
-SET(ZMQ_LIB @prefix@/lib/libzmq.a)
+SET(SODIUM_INCLUDE_DIRS @prefix@/include)
+SET(SODIUM_LIBRARIES @prefix@/lib/libsodium.a)
+SET(SODIUM_LIBRARY_DIRS @prefix@/lib)
 
 SET(Boost_IGNORE_SYSTEM_PATH ON)
-SET(BOOST_ROOT @prefix@)
-SET(BOOST_INCLUDEDIR @prefix@/include)
-SET(BOOST_LIBRARYDIR @prefix@/lib)
+SET(Boost_ROOT @prefix@)
+SET(Boost_INCLUDE_DIRS @prefix@/include)
+SET(Boost_LIBRARY_DIRS @prefix@/lib)
 SET(Boost_IGNORE_SYSTEM_PATHS_DEFAULT OFF)
 SET(Boost_NO_SYSTEM_PATHS ON)
 SET(Boost_USE_STATIC_LIBS ON)
 SET(Boost_USE_STATIC_RUNTIME ON)
 
-SET(OpenSSL_DIR @prefix@/lib)
+#SET(OPENSSL_LIBRARY_DIR @prefix@/lib)
+#SET(OPENSSL_INCLUDE_DIR @prefix@/include)
+#SET(OPENSSL_LIBRARIES @prefix@/lib/libcrypto.a)
+SET(OPENSSL_ROOT_DIR @prefix@)
 SET(ARCHITECTURE @arch@)
 
 # for libraries and headers in the target directories
@@ -52,23 +58,25 @@ set (CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER) # Find programs on host
 set (CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY) # Find libs in target
 set (CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY) # Find includes in target
 
-set(CMAKE_SYSTEM_PROCESSOR ${CMAKE_HOST_SYSTEM_PROCESSOR} CACHE STRING "" FORCE)
+#set(CMAKE_SYSTEM_PROCESSOR ${CMAKE_HOST_SYSTEM_PROCESSOR} CACHE STRING "" FORCE)
 
 # specify the cross compiler to be used. Darwin uses clang provided by the SDK.
 if(CMAKE_SYSTEM_NAME STREQUAL "Darwin")
   SET(CMAKE_C_COMPILER @prefix@/native/bin/clang)
-  SET(CMAKE_C_COMPILER_TARGET x86_64-apple-darwin14)
+  SET(CMAKE_C_COMPILER_TARGET x86_64-apple-darwin16)
   SET(CMAKE_CXX_COMPILER @prefix@/native/bin/clang++ -stdlib=libc++)
-  SET(CMAKE_CXX_COMPILER_TARGET x86_64-apple-darwin14)
-  SET(_CMAKE_TOOLCHAIN_PREFIX x86_64-apple-darwin14-)
+  SET(CMAKE_CXX_COMPILER_TARGET x86_64-apple-darwin16)
+  SET(CMAKE_ASM_COMPILER_TARGET x86_64-apple-darwin16)
+  SET(CMAKE_ASM-ATT_COMPILER_TARGET x86_64-apple-darwin16)
+  SET(_CMAKE_TOOLCHAIN_PREFIX x86_64-apple-darwin16-)
   SET(APPLE True)
   SET(BUILD_TAG "mac-x64")
   SET(BUILD_64 ON)
   SET(BREW OFF)
   SET(PORT OFF)
-  SET(CMAKE_OSX_SYSROOT "@sdk@/MacOSX10.11.sdk/")
-  SET(CMAKE_OSX_DEPLOYMENT_TARGET "10.10")
-  SET(CMAKE_CXX_STANDARD 11)
+  SET(CMAKE_OSX_SYSROOT "@sdk@/Xcode-11.3.1-11C505-extracted-SDK-with-libcxx-headers")
+  SET(CMAKE_OSX_DEPLOYMENT_TARGET "10.14")
+  SET(CMAKE_CXX_STANDARD 14)
   SET(CMAKE_OSX_ARCHITECTURES "x86_64")
   SET(LLVM_ENABLE_PIC OFF)
   SET(LLVM_ENABLE_PIE OFF)
@@ -82,7 +90,7 @@ if(ARCHITECTURE STREQUAL "arm")
   set(ARM ON)
   set(ARM_ID "armv7-a")
   set(BUILD_64 OFF)
-  set(CMAKE_BUILD_TYPE release)
+  set(CMAKE_BUILD_TYPE Release)
   set(BUILD_TAG "linux-armv7")
   set(ARM7)
 elseif(ARCHITECTURE STREQUAL "aarch64")
@@ -93,14 +101,24 @@ elseif(ARCHITECTURE STREQUAL "aarch64")
   set(BUILD_64 ON)
 endif()
 
-if(ARCHITECTURE STREQUAL "i686" AND CMAKE_SYSTEM_NAME STREQUAL "Linux")
-  SET(LINUX_32 ON)
+if(ARCHITECTURE STREQUAL "i686")
   SET(ARCH_ID "i386")
+  if(CMAKE_SYSTEM_NAME STREQUAL "Linux")
+    set(BUILD_TAG "linux-x86")
+    SET(LINUX_32 ON)
+  elseif(CMAKE_SYSTEM_NAME STREQUAL "Windows")
+    set(BUILD_TAG "win-x32")
+  endif()
 endif()
 
-if(ARCHITECTURE STREQUAL "x86_64" AND CMAKE_SYSTEM_NAME STREQUAL "Linux")
+if(ARCHITECTURE STREQUAL "x86_64")
+  if(CMAKE_SYSTEM_NAME STREQUAL "Linux")
+    set(BUILD_TAG "linux-x64")
+  elseif(CMAKE_SYSTEM_NAME STREQUAL "Windows")
+    set(BUILD_TAG "win-x64")
+  endif()
   SET(ARCH_ID "x86_64")
 endif()
 
 #Create a new global cmake flag that indicates building with depends
-set (DEPENDS true)
+set(DEPENDS true)
diff --git a/contrib/epee/include/console_handler.h b/contrib/epee/include/console_handler.h
index 6e7efd1..23659cb 100644
--- a/contrib/epee/include/console_handler.h
+++ b/contrib/epee/include/console_handler.h
@@ -434,7 +434,7 @@ eof:
   bool run_default_console_handler_no_srv_param(t_server* ptsrv, t_handler handlr, std::function<std::string(void)> prompt, const std::string& usage = "")
   {
     async_console_handler console_handler;
-    return console_handler.run(ptsrv, boost::bind<bool>(no_srv_param_adapter<t_server, t_handler>, _1, _2, handlr), prompt, usage);
+    return console_handler.run(ptsrv, std::bind<bool>(no_srv_param_adapter<t_server, t_handler>, std::placeholders::_1, std::placeholders::_2, handlr), prompt, usage);
   }
 
   template<class t_server, class t_handler>
@@ -564,7 +564,7 @@ eof:
 
     bool run_handling(std::function<std::string(void)> prompt, const std::string& usage_string, std::function<void(void)> exit_handler = NULL)
     {
-      return m_console_handler.run(boost::bind(&console_handlers_binder::process_command_str, this, _1), prompt, usage_string, exit_handler);
+      return m_console_handler.run(std::bind(&console_handlers_binder::process_command_str, this, std::placeholders::_1), prompt, usage_string, exit_handler);
     }
 
     void print_prompt()
diff --git a/contrib/epee/include/net/abstract_tcp_server2.inl b/contrib/epee/include/net/abstract_tcp_server2.inl
index a16b47f..171a16b 100644
--- a/contrib/epee/include/net/abstract_tcp_server2.inl
+++ b/contrib/epee/include/net/abstract_tcp_server2.inl
@@ -32,7 +32,6 @@
 
 
 
-#include <boost/bind.hpp>
 #include <boost/foreach.hpp>
 #include <boost/uuid/random_generator.hpp>
 #include <boost/chrono.hpp>
@@ -195,9 +194,9 @@ PRAGMA_WARNING_DISABLE_VS(4355)
 		// first read on the raw socket to detect SSL for the server
 		buffer_ssl_init_fill = 0;
 		if (is_income && m_ssl_support != epee::net_utils::ssl_support_t::e_ssl_support_disabled)
-			socket().async_receive(boost::asio::buffer(buffer_), boost::asio::socket_base::message_peek, strand_.wrap(boost::bind(&connection<t_protocol_handler>::handle_receive, self, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred)));
+			socket().async_receive(boost::asio::buffer(buffer_), boost::asio::socket_base::message_peek, strand_.wrap(std::bind(&connection<t_protocol_handler>::handle_receive, self, std::placeholders::_1, std::placeholders::_2)));
 		else
-			async_read_some(boost::asio::buffer(buffer_), strand_.wrap(boost::bind(&connection<t_protocol_handler>::handle_read, self, boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred)));
+			async_read_some(boost::asio::buffer(buffer_), strand_.wrap(std::bind(&connection<t_protocol_handler>::handle_read, self, std::placeholders::_1, std::placeholders::_2)));
 #if !defined(_WIN32) || !defined(__i686)
 		// not supported before Windows7, too lazy for runtime check
 		// Just exclude for 32bit windows builds
@@ -226,7 +225,7 @@ PRAGMA_WARNING_DISABLE_VS(4355)
 		if(!self)
 			return false;
 
-		strand_.post(boost::bind(&connection<t_protocol_handler>::call_back_starter, self));
+		strand_.post(std::bind(&connection<t_protocol_handler>::call_back_starter, self));
 		CATCH_ENTRY_L0("connection<t_protocol_handler>::request_callback()", false);
 		return true;
 	}
@@ -369,7 +368,7 @@ PRAGMA_WARNING_DISABLE_VS(4355)
 			} else
 			{
 				reset_timer(get_timeout_from_bytes_read(bytes_transferred), false);
-				async_read_some(boost::asio::buffer(buffer_), strand_.wrap(boost::bind(&connection<t_protocol_handler>::handle_read, connection<t_protocol_handler>::shared_from_this(), boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred)));
+				async_read_some(boost::asio::buffer(buffer_), strand_.wrap(std::bind(&connection<t_protocol_handler>::handle_read, connection<t_protocol_handler>::shared_from_this(), std::placeholders::_1, std::placeholders::_2)));
 				//_info("[sock " << socket().native_handle() << "]Async read requested.");
 			}
 		} else
@@ -411,7 +410,7 @@ PRAGMA_WARNING_DISABLE_VS(4355)
 		buffer_ssl_init_fill += bytes_transferred;
 		if(buffer_ssl_init_fill <= get_ssl_magic_size())
 		{
-			socket().async_receive(boost::asio::buffer(buffer_.data() + buffer_ssl_init_fill, buffer_.size() - buffer_ssl_init_fill), boost::asio::socket_base::message_peek, strand_.wrap(boost::bind(&connection<t_protocol_handler>::handle_receive, connection<t_protocol_handler>::shared_from_this(), boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred)));
+			socket().async_receive(boost::asio::buffer(buffer_.data() + buffer_ssl_init_fill, buffer_.size() - buffer_ssl_init_fill), boost::asio::socket_base::message_peek, strand_.wrap(std::bind(&connection<t_protocol_handler>::handle_receive, connection<t_protocol_handler>::shared_from_this(), std::placeholders::_1, std::placeholders::_2)));
 			return;
 		}
 
@@ -448,7 +447,7 @@ PRAGMA_WARNING_DISABLE_VS(4355)
 			}
 		}
 
-		async_read_some(boost::asio::buffer(buffer_), strand_.wrap(boost::bind(&connection<t_protocol_handler>::handle_read, connection<t_protocol_handler>::shared_from_this(), boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred)));
+		async_read_some(boost::asio::buffer(buffer_), strand_.wrap(std::bind(&connection<t_protocol_handler>::handle_read, connection<t_protocol_handler>::shared_from_this(), std::placeholders::_1, std::placeholders::_2)));
 
 		// If an error occurs then no new asynchronous operations are started. This
 		// means that all shared_ptr references to the connection object will
@@ -650,7 +649,7 @@ PRAGMA_WARNING_DISABLE_VS(4355)
 
 				CHECK_AND_ASSERT_MES(size_now == m_send_que.front().size(), false, "Unexpected queue size");
 				reset_timer(get_default_timeout(), false);
-				async_write(boost::asio::buffer(m_send_que.front().data(), size_now), strand_.wrap(boost::bind(&connection<t_protocol_handler>::handle_write, self, _1, _2)));
+				async_write(boost::asio::buffer(m_send_que.front().data(), size_now), strand_.wrap(std::bind(&connection<t_protocol_handler>::handle_write, self, std::placeholders::_1, std::placeholders::_2)));
 				//_dbg3("(chunk): " << size_now);
 				//logger_handle_net_write(size_now);
 				//_info("[sock " << socket().native_handle() << "] Async send requested " << m_send_que.front().size());
@@ -836,7 +835,7 @@ PRAGMA_WARNING_DISABLE_VS(4355)
 		if(rpc_speed_limit_is_enabled())
 			do_send_handler_write_from_queue(e, m_send_que.front().size(), m_send_que.size()); // (((H)))
 		CHECK_AND_ASSERT_MES(size_now == m_send_que.front().size(), void(), "Unexpected queue size");
-		async_write(boost::asio::buffer(m_send_que.front().data(), size_now), strand_.wrap(boost::bind(&connection<t_protocol_handler>::handle_write, connection<t_protocol_handler>::shared_from_this(), _1, _2)));
+		async_write(boost::asio::buffer(m_send_que.front().data(), size_now), strand_.wrap(std::bind(&connection<t_protocol_handler>::handle_write, connection<t_protocol_handler>::shared_from_this(), std::placeholders::_1, std::placeholders::_2)));
 			//_dbg3("(normal)" << size_now);
 		}
 		CRITICAL_REGION_END();
@@ -950,7 +949,7 @@ PRAGMA_WARNING_DISABLE_VS(4355)
 		m_port = binded_endpoint.port();
 		MDEBUG("start accept");
 		new_connection_.reset(new connection<t_protocol_handler>(io_service_, m_state, m_connection_type, m_state->ssl_options().support));
-		acceptor_.async_accept(new_connection_->socket(), boost::bind(&boosted_tcp_server<t_protocol_handler>::handle_accept, this, boost::asio::placeholders::error));
+		acceptor_.async_accept(new_connection_->socket(), std::bind(&boosted_tcp_server<t_protocol_handler>::handle_accept, this, std::placeholders::_1));
 
 		return true;
 		}
@@ -1042,7 +1041,7 @@ POP_WARNINGS
 			CRITICAL_REGION_BEGIN(m_threads_lock);
 			for(std::size_t i = 0; i < threads_count; ++i)
 			{
-				boost::shared_ptr<boost::thread> thread(new boost::thread(attrs, boost::bind(&boosted_tcp_server<t_protocol_handler>::worker_thread, this)));
+				boost::shared_ptr<boost::thread> thread(new boost::thread(attrs, std::bind(&boosted_tcp_server<t_protocol_handler>::worker_thread, this)));
 				_note("Run server thread name: " << m_thread_name_prefix);
 				m_threads.push_back(thread);
 			}
@@ -1157,7 +1156,7 @@ POP_WARNINGS
 			}
 			connection_ptr conn(std::move(new_connection_));
 			new_connection_.reset(new connection<t_protocol_handler>(io_service_, m_state, m_connection_type, conn->get_ssl_support()));
-			acceptor_.async_accept(new_connection_->socket(), boost::bind(&boosted_tcp_server<t_protocol_handler>::handle_accept, this, boost::asio::placeholders::error));
+			acceptor_.async_accept(new_connection_->socket(), std::bind(&boosted_tcp_server<t_protocol_handler>::handle_accept, this, std::placeholders::_1));
 
 			boost::asio::socket_base::keep_alive opt(true);
 			conn->socket().set_option(opt);
@@ -1190,7 +1189,7 @@ POP_WARNINGS
 		_erro("Some problems at accept: " << e.message() << ", connections_count = " << m_state->sock_count);
 		misc_utils::sleep_no_w(100);
 		new_connection_.reset(new connection<t_protocol_handler>(io_service_, m_state, m_connection_type, new_connection_->get_ssl_support()));
-		acceptor_.async_accept(new_connection_->socket(), boost::bind(&boosted_tcp_server<t_protocol_handler>::handle_accept, this, boost::asio::placeholders::error));
+		acceptor_.async_accept(new_connection_->socket(), std::bind(&boosted_tcp_server<t_protocol_handler>::handle_accept, this, std::placeholders::_1));
 	}
 	//---------------------------------------------------------------------------------
 	template<class t_protocol_handler>
@@ -1255,7 +1254,7 @@ POP_WARNINGS
 			shared_context->connect_mut.lock(); shared_context->ec = ec_; shared_context->cond.notify_one(); shared_context->connect_mut.unlock();
 		};
 
-		sock_.async_connect(remote_endpoint, boost::bind<void>(connect_callback, _1, local_shared_context));
+		sock_.async_connect(remote_endpoint, std::bind<void>(connect_callback, std::placeholders::_1, local_shared_context));
 		while(local_shared_context->ec == boost::asio::error::would_block)
 		{
 			bool r = local_shared_context->cond.timed_wait(lock, boost::get_system_time() + boost::posix_time::milliseconds(conn_timeout));
@@ -1473,4 +1472,4 @@ POP_WARNINGS
 
 } // namespace
 } // namespace
-PRAGMA_WARNING_POP
\ No newline at end of file
+PRAGMA_WARNING_POP
diff --git a/contrib/epee/include/net/http_server_impl_base.h b/contrib/epee/include/net/http_server_impl_base.h
index 7a62309..0a0ec99 100644
--- a/contrib/epee/include/net/http_server_impl_base.h
+++ b/contrib/epee/include/net/http_server_impl_base.h
@@ -31,7 +31,7 @@
 
 
 #include <boost/thread.hpp>
-#include <boost/bind.hpp>
+#include <boost/bind/bind.hpp>
 
 #include "net/abstract_tcp_server2.h"
 #include "http_protocol_handler.h"
diff --git a/contrib/epee/include/storages/levin_abstract_invoke2.h b/contrib/epee/include/storages/levin_abstract_invoke2.h
index 5dd0eb7..7ae51ac 100644
--- a/contrib/epee/include/storages/levin_abstract_invoke2.h
+++ b/contrib/epee/include/storages/levin_abstract_invoke2.h
@@ -28,6 +28,7 @@
 
 #include "portable_storage_template_helper.h"
 #include <boost/utility/value_init.hpp>
+#include <functional>
 #include "span.h"
 #include "net/levin_base.h"
 
@@ -257,20 +258,20 @@ namespace epee
 
 #define HANDLE_INVOKE2(command_id, func, type_name_in, typename_out) \
   if(!is_notify && command_id == command) \
-  {handled=true;return epee::net_utils::buff_to_t_adapter<internal_owner_type_name, type_name_in, typename_out>(this, command, in_buff, buff_out, boost::bind(func, this, _1, _2, _3, _4), context);}
+  {handled=true;return epee::net_utils::buff_to_t_adapter<internal_owner_type_name, type_name_in, typename_out>(this, command, in_buff, buff_out, std::bind(func, this, std::placeholders::_1, std::placeholders::_2, std::placeholders::_3, std::placeholders::_4), context);}
 
 #define HANDLE_INVOKE_T2(COMMAND, func) \
   if(!is_notify && COMMAND::ID == command) \
-  {handled=true;return epee::net_utils::buff_to_t_adapter<internal_owner_type_name, typename COMMAND::request, typename COMMAND::response>(command, in_buff, buff_out, boost::bind(func, this, _1, _2, _3, _4), context);}
+  {handled=true;return epee::net_utils::buff_to_t_adapter<internal_owner_type_name, typename COMMAND::request, typename COMMAND::response>(command, in_buff, buff_out, std::bind(func, this, std::placeholders::_1, std::placeholders::_2, std::placeholders::_3, std::placeholders::_4), context);}
 
 
 #define HANDLE_NOTIFY2(command_id, func, type_name_in) \
   if(is_notify && command_id == command) \
-  {handled=true;return epee::net_utils::buff_to_t_adapter<internal_owner_type_name, type_name_in>(this, command, in_buff, boost::bind(func, this, _1, _2, _3), context);}
+  {handled=true;return epee::net_utils::buff_to_t_adapter<internal_owner_type_name, type_name_in>(this, command, in_buff, std::bind(func, this, std::placeholders::_1, std::placeholders::_2, std::placeholders::_3), context);}
 
 #define HANDLE_NOTIFY_T2(NOTIFY, func) \
   if(is_notify && NOTIFY::ID == command) \
-  {handled=true;return epee::net_utils::buff_to_t_adapter<internal_owner_type_name, typename NOTIFY::request>(this, command, in_buff, boost::bind(func, this, _1, _2, _3), context);}
+  {handled=true;return epee::net_utils::buff_to_t_adapter<internal_owner_type_name, typename NOTIFY::request>(this, command, in_buff, std::bind(func, this, std::placeholders::_1, std::placeholders::_2, std::placeholders::_3), context);}
 
 
 #define CHAIN_INVOKE_MAP2(func) \
diff --git a/contrib/epee/src/http_auth.cpp b/contrib/epee/src/http_auth.cpp
index 5d55c5b..2a0ae14 100644
--- a/contrib/epee/src/http_auth.cpp
+++ b/contrib/epee/src/http_auth.cpp
@@ -214,7 +214,7 @@ namespace
   >;
 
   template<typename T>
-  quoted_result<T> quoted(const T& arg)
+  quoted_result<T> add_quotes(const T& arg)
   {
     return boost::range::join(boost::range::join(ceref(u8"\""), arg), ceref(u8"\""));
   }
@@ -242,13 +242,13 @@ namespace
   {
     str.append(u8"Digest ");
     add_first_field(str, u8"algorithm", algorithm);
-    add_field(str, u8"nonce", quoted(user.server.nonce));
-    add_field(str, u8"realm", quoted(user.server.realm));
-    add_field(str, u8"response", quoted(response));
-    add_field(str, u8"uri", quoted(uri));
-    add_field(str, u8"username", quoted(user.credentials.username));
+    add_field(str, u8"nonce", add_quotes(user.server.nonce));
+    add_field(str, u8"realm", add_quotes(user.server.realm));
+    add_field(str, u8"response", add_quotes(response));
+    add_field(str, u8"uri", add_quotes(uri));
+    add_field(str, u8"username", add_quotes(user.credentials.username));
     if (!user.server.opaque.empty())
-      add_field(str, u8"opaque", quoted(user.server.opaque));
+      add_field(str, u8"opaque", add_quotes(user.server.opaque));
   }
 
   //! Implements superseded algorithm specified in RFC 2069
@@ -674,8 +674,8 @@ namespace
           Digest::name, (i == 0 ? boost::string_ref{} : sess_algo)
         );
         add_field(out, u8"algorithm", algorithm);
-        add_field(out, u8"realm", quoted(auth_realm));
-        add_field(out, u8"nonce", quoted(nonce));
+        add_field(out, u8"realm", add_quotes(auth_realm));
+        add_field(out, u8"nonce", add_quotes(nonce));
         add_field(out, u8"stale", is_stale ? ceref("true") : ceref("false"));
 
         fields.push_back(std::make_pair(std::string(server_auth_field), std::move(out)));
diff --git a/external/ios-headers/IOKit/IOKit.h b/external/ios-headers/IOKit/IOKit.h
deleted file mode 100755
index 4d9c38e..0000000
--- a/external/ios-headers/IOKit/IOKit.h
+++ /dev/null
@@ -1 +0,0 @@
-IOKitLib.h
\ No newline at end of file
diff --git a/external/ios-headers/IOKit/IOKitKeys.h b/external/ios-headers/IOKit/IOKitKeys.h
deleted file mode 100755
index 62395d5..0000000
--- a/external/ios-headers/IOKit/IOKitKeys.h
+++ /dev/null
@@ -1,164 +0,0 @@
-/*
- * Copyright (c) 1998-2000 Apple Computer, Inc. All rights reserved.
- *
- * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
- * 
- * This file contains Original Code and/or Modifications of Original Code
- * as defined in and that are subject to the Apple Public Source License
- * Version 2.0 (the 'License'). You may not use this file except in
- * compliance with the License. The rights granted to you under the License
- * may not be used to create, or enable the creation or redistribution of,
- * unlawful or unlicensed copies of an Apple operating system, or to
- * circumvent, violate, or enable the circumvention or violation of, any
- * terms of an Apple operating system software license agreement.
- * 
- * Please obtain a copy of the License at
- * http://www.opensource.apple.com/apsl/ and read it before using this file.
- * 
- * The Original Code and all software distributed under the License are
- * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
- * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
- * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
- * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
- * Please see the License for the specific language governing rights and
- * limitations under the License.
- * 
- * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
- */
-/*
- * Copyright (c) 1999 Apple Computer, Inc.  All rights reserved. 
- *
- * Common symbol definitions for IOKit. 
- *
- * HISTORY
- *
- */
-
-
-#ifndef _IOKIT_IOKITKEYS_H
-#define _IOKIT_IOKITKEYS_H
-
-// properties found in the registry root
-#define kIOKitBuildVersionKey		"IOKitBuildVersion"
-#define kIOKitDiagnosticsKey		"IOKitDiagnostics"
-	// a dictionary keyed by plane name
-#define kIORegistryPlanesKey		"IORegistryPlanes"
-#define kIOCatalogueKey			"IOCatalogue"
-
-// registry plane names
-#define kIOServicePlane			"IOService"
-#define kIOPowerPlane			"IOPower"
-#define kIODeviceTreePlane		"IODeviceTree"
-#define kIOAudioPlane			"IOAudio"
-#define kIOFireWirePlane		"IOFireWire"
-#define kIOUSBPlane			"IOUSB"
-
-// registry ID number
-#define kIORegistryEntryIDKey		"IORegistryEntryID"
-
-// IOService class name
-#define kIOServiceClass			"IOService"
-
-// IOResources class name
-#define kIOResourcesClass		"IOResources"
-
-// IOService driver probing property names
-#define kIOClassKey			"IOClass"
-#define kIOProbeScoreKey		"IOProbeScore"
-#define kIOKitDebugKey			"IOKitDebug"
-
-// IOService matching property names
-#define kIOProviderClassKey		"IOProviderClass"
-#define kIONameMatchKey			"IONameMatch"
-#define kIOPropertyMatchKey		"IOPropertyMatch"
-#define kIOPathMatchKey			"IOPathMatch"
-#define kIOLocationMatchKey		"IOLocationMatch"
-#define kIOParentMatchKey		"IOParentMatch"
-#define kIOResourceMatchKey		"IOResourceMatch"
-#define kIOMatchedServiceCountKey	"IOMatchedServiceCountMatch"
-
-#define kIONameMatchedKey		"IONameMatched"
-
-#define kIOMatchCategoryKey		"IOMatchCategory"
-#define kIODefaultMatchCategoryKey	"IODefaultMatchCategory"
-
-// IOService default user client class, for loadable user clients
-#define kIOUserClientClassKey		"IOUserClientClass"
-
-// key to find IOMappers
-#define kIOMapperIDKey				"IOMapperID"
-
-#define kIOUserClientCrossEndianKey		"IOUserClientCrossEndian"
-#define kIOUserClientCrossEndianCompatibleKey	"IOUserClientCrossEndianCompatible"
-#define kIOUserClientSharedInstanceKey		"IOUserClientSharedInstance"
-// diagnostic string describing the creating task
-#define kIOUserClientCreatorKey		"IOUserClientCreator"
-
-// IOService notification types
-#define kIOPublishNotification		"IOServicePublish"
-#define kIOFirstPublishNotification	"IOServiceFirstPublish"
-#define kIOMatchedNotification		"IOServiceMatched"
-#define kIOFirstMatchNotification	"IOServiceFirstMatch"
-#define kIOTerminatedNotification	"IOServiceTerminate"
-
-// IOService interest notification types
-#define kIOGeneralInterest		"IOGeneralInterest"
-#define kIOBusyInterest			"IOBusyInterest"
-#define kIOAppPowerStateInterest	"IOAppPowerStateInterest"
-#define kIOPriorityPowerStateInterest	"IOPriorityPowerStateInterest"
-
-#define kIOPlatformDeviceMessageKey     "IOPlatformDeviceMessage"
-
-// IOService interest notification types
-#define kIOCFPlugInTypesKey		"IOCFPlugInTypes"
-
-// properties found in services that implement command pooling
-#define kIOCommandPoolSizeKey	       "IOCommandPoolSize"          // (OSNumber)
-
-// properties found in services that have transfer constraints
-#define kIOMaximumBlockCountReadKey             "IOMaximumBlockCountRead"             // (OSNumber)
-#define kIOMaximumBlockCountWriteKey            "IOMaximumBlockCountWrite"            // (OSNumber)
-#define kIOMaximumByteCountReadKey              "IOMaximumByteCountRead"              // (OSNumber)
-#define kIOMaximumByteCountWriteKey             "IOMaximumByteCountWrite"             // (OSNumber)
-#define kIOMaximumSegmentCountReadKey           "IOMaximumSegmentCountRead"           // (OSNumber)
-#define kIOMaximumSegmentCountWriteKey          "IOMaximumSegmentCountWrite"          // (OSNumber)
-#define kIOMaximumSegmentByteCountReadKey       "IOMaximumSegmentByteCountRead"       // (OSNumber)
-#define kIOMaximumSegmentByteCountWriteKey      "IOMaximumSegmentByteCountWrite"      // (OSNumber)
-#define kIOMinimumSegmentAlignmentByteCountKey  "IOMinimumSegmentAlignmentByteCount"  // (OSNumber)
-#define kIOMaximumSegmentAddressableBitCountKey "IOMaximumSegmentAddressableBitCount" // (OSNumber)
-
-// properties found in services that wish to describe an icon
-//
-// IOIcon = 
-// {
-//     CFBundleIdentifier   = "com.example.driver.example";
-//     IOBundleResourceFile = "example.icns";
-// };
-//
-// where IOBundleResourceFile is the filename of the resource
-
-#define kIOIconKey               "IOIcon"               // (OSDictionary)
-#define kIOBundleResourceFileKey "IOBundleResourceFile" // (OSString)
-
-#define kIOBusBadgeKey           "IOBusBadge"           // (OSDictionary)
-#define kIODeviceIconKey         "IODeviceIcon"         // (OSDictionary)
-
-// property of root that describes the machine's serial number as a string
-#define kIOPlatformSerialNumberKey	"IOPlatformSerialNumber"	// (OSString)
-
-// property of root that describes the machine's UUID as a string
-#define kIOPlatformUUIDKey	"IOPlatformUUID"	// (OSString)
-
-// IODTNVRAM property keys
-#define kIONVRAMDeletePropertyKey	"IONVRAM-DELETE-PROPERTY"
-#define kIODTNVRAMPanicInfoKey		"aapl,panic-info"
-
-// keys for complex boot information
-#define kIOBootDeviceKey          "IOBootDevice"		// dict | array of dicts
-#define kIOBootDevicePathKey      "IOBootDevicePath"	// arch-neutral OSString
-#define kIOBootDeviceSizeKey      "IOBootDeviceSize"	// OSNumber of bytes
-
-// keys for OS Version information
-#define kOSBuildVersionKey		"OS Build Version"
-
-#endif /* ! _IOKIT_IOKITKEYS_H */
diff --git a/external/ios-headers/IOKit/IOKitLib.h b/external/ios-headers/IOKit/IOKitLib.h
deleted file mode 100755
index 6503923..0000000
--- a/external/ios-headers/IOKit/IOKitLib.h
+++ /dev/null
@@ -1,1424 +0,0 @@
-/*
- * Copyright (c) 1998-2000 Apple Computer, Inc. All rights reserved.
- *
- * @APPLE_LICENSE_HEADER_START@
- * 
- * The contents of this file constitute Original Code as defined in and
- * are subject to the Apple Public Source License Version 1.1 (the
- * "License").  You may not use this file except in compliance with the
- * License.  Please obtain a copy of the License at
- * http://www.apple.com/publicsource and read it before using this file.
- * 
- * This Original Code and all software distributed under the License are
- * distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY KIND, EITHER
- * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
- * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
- * FITNESS FOR A PARTICULAR PURPOSE OR NON-INFRINGEMENT.  Please see the
- * License for the specific language governing rights and limitations
- * under the License.
- * 
- * @APPLE_LICENSE_HEADER_END@
- */
-/*
- * HISTORY
- *
- */
-
-/*
- * IOKit user library
- */
-
-#ifndef _IOKIT_IOKITLIB_H
-#define _IOKIT_IOKITLIB_H
-
-#ifdef KERNEL
-#error This file is not for kernel use
-#endif
-
-#include <sys/cdefs.h>
-#include <sys/types.h>
-
-#include <mach/mach_types.h>
-#include <mach/mach_init.h>
-
-#include <CoreFoundation/CFBase.h>
-#include <CoreFoundation/CFDictionary.h>
-#include <CoreFoundation/CFRunLoop.h>
-
-#include "IOTypes.h"
-#include "IOKitKeys.h"
-
-#include "OSMessageNotification.h"
-
-#include <AvailabilityMacros.h>
-
-__BEGIN_DECLS
-
-/*! @header IOKitLib
-IOKitLib implements non-kernel task access to common IOKit object types - IORegistryEntry, IOService, IOIterator etc. These functions are generic - families may provide API that is more specific.<br>
-IOKitLib represents IOKit objects outside the kernel with the types io_object_t, io_registry_entry_t, io_service_t, & io_connect_t. Function names usually begin with the type of object they are compatible with - eg. IOObjectRelease can be used with any io_object_t. Inside the kernel, the c++ class hierarchy allows the subclasses of each object type to receive the same requests from user level clients, for example in the kernel, IOService is a subclass of IORegistryEntry, which means any of the IORegistryEntryXXX functions in IOKitLib may be used with io_service_t's as well as io_registry_t's. There are functions available to introspect the class of the kernel object which any io_object_t et al. represents.
-IOKit objects returned by all functions should be released with IOObjectRelease.
-*/
-/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
-
-typedef struct IONotificationPort * IONotificationPortRef;
-
-
-/*! @typedef IOServiceMatchingCallback
-    @abstract Callback function to be notified of IOService publication.
-    @param refcon The refcon passed when the notification was installed.
-    @param iterator The notification iterator which now has new objects.
-*/
-typedef void
-(*IOServiceMatchingCallback)(
-	void *			refcon,
-	io_iterator_t		iterator );
-
-/*! @typedef IOServiceInterestCallback
-    @abstract Callback function to be notified of changes in state of an IOService.
-    @param refcon The refcon passed when the notification was installed.
-    @param service The IOService whose state has changed.
-    @param messageType A messageType enum, defined by IOKit/IOMessage.h or by the IOService's family.
-    @param messageArgument An argument for the message, dependent on the messageType.
-*/
-
-typedef void
-(*IOServiceInterestCallback)(
-	void *			refcon,
-	io_service_t		service,
-	uint32_t		messageType,
-	void *			messageArgument );
-
-/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
-
-/*! @const kIOMasterPortDefault
-    @abstract The default mach port used to initiate communication with IOKit.
-    @discussion When specifying a master port to IOKit functions, the NULL argument indicates "use the default". This is a synonym for NULL, if you'd rather use a named constant.
-*/
-
-extern
-const mach_port_t kIOMasterPortDefault;
-
-/*! @function IOMasterPort
-    @abstract Returns the mach port used to initiate communication with IOKit.
-    @discussion Functions that don't specify an existing object require the IOKit master port to be passed. This function obtains that port.
-    @param bootstrapPort Pass MACH_PORT_NULL for the default.
-    @param masterPort The master port is returned.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IOMasterPort( mach_port_t	bootstrapPort,
-	      mach_port_t *	masterPort );
-
-
-/*! @function IONotificationPortCreate
-    @abstract Creates and returns a notification object for receiving IOKit notifications of new devices or state changes.
-    @discussion Creates the notification object to receive notifications from IOKit of new device arrivals or state changes. The notification object can be supply a CFRunLoopSource, or mach_port_t to be used to listen for events.
-    @param masterPort The master port obtained from IOMasterPort(). Pass kIOMasterPortDefault to look up the default master port.
-    @result A reference to the notification object. */
-
-IONotificationPortRef
-IONotificationPortCreate(
-	mach_port_t		masterPort );
-
-/*! @function IONotificationPortDestroy
-    @abstract Destroys a notification object created with IONotificationPortCreate.
-    @param notify A reference to the notification object. */
-
-void
-IONotificationPortDestroy(
-	IONotificationPortRef	notify );
-
-/*! @function IONotificationPortGetRunLoopSource
-    @abstract Returns a CFRunLoopSource to be used to listen for notifications.
-    @discussion A notification object may deliver notifications to a CFRunLoop client by adding the run loop source returned by this function to the run loop.
-    @param notify The notification object.
-    @result A CFRunLoopSourceRef for the notification object. */
-
-CFRunLoopSourceRef
-IONotificationPortGetRunLoopSource(
-	IONotificationPortRef	notify );
-
-/*! @function IONotificationPortGetMachPort
-    @abstract Returns a mach_port to be used to listen for notifications.
-    @discussion A notification object may deliver notifications to a mach messaging client if they listen for messages on the port obtained from this function. Callbacks associated with the notifications may be delivered by calling IODispatchCalloutFromMessage with messages received 
-    @param notify The notification object.
-    @result A mach_port for the notification object. */
-
-mach_port_t
-IONotificationPortGetMachPort(
-	IONotificationPortRef	notify );
-
-/*! @function IODispatchCalloutFromMessage
-    @abstract Dispatches callback notifications from a mach message.
-    @discussion A notification object may deliver notifications to a mach messaging client, which should call this function to generate the callbacks associated with the notifications arriving on the port.
-    @param unused Not used, set to zero.
-    @param msg A pointer to the message received.
-    @param reference Pass the IONotificationPortRef for the object. */
-
-void
-IODispatchCalloutFromMessage(
-        void 			*unused,
-        mach_msg_header_t	*msg,
-        void			*reference );
-
-/*! @function IOCreateReceivePort
-    @abstract Creates and returns a mach port suitable for receiving IOKit messages of the specified type.
-    @discussion In the future IOKit may use specialized messages and ports
-    instead of the standard ports created by mach_port_allocate(). Use this
-    function instead of mach_port_allocate() to ensure compatibility with future
-    revisions of IOKit.
-    @param msgType Type of message to be sent to this port
-    (kOSNotificationMessageID or kOSAsyncCompleteMessageID)
-    @param recvPort The created port is returned.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IOCreateReceivePort( uint32_t msgType, mach_port_t * recvPort );
-
-/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
-
-/*
- * IOObject
- */
-
-/*! @function IOObjectRelease
-    @abstract Releases an object handle previously returned by IOKitLib.
-    @discussion All objects returned by IOKitLib should be released with this function when access to them is no longer needed. Using the object after it has been released may or may not return an error, depending on how many references the task has to the same object in the kernel.
-    @param object The IOKit object to release.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IOObjectRelease(
-	io_object_t	object );
-
-/*! @function IOObjectRetain
-    @abstract Retains an object handle previously returned by IOKitLib.
-    @discussion Gives the caller an additional reference to an existing object handle previously returned by IOKitLib.
-    @param object The IOKit object to retain.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IOObjectRetain(
-	io_object_t	object );
-
-/*! @function IOObjectGetClass
-    @abstract Return the class name of an IOKit object.
-    @discussion This function uses the OSMetaClass system in the kernel to derive the name of the class the object is an instance of.
-    @param object The IOKit object.
-    @param className Caller allocated buffer to receive the name string.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IOObjectGetClass(
-	io_object_t	object,
-	io_name_t	className );
-	
-/*! @function CFStringRef IOObjectCopyClass
-    @abstract Return the class name of an IOKit object.
-	@discussion This function does the same thing as IOObjectGetClass, but returns the result as a CFStringRef.
-	@param object The IOKit object.
-	@result The resulting CFStringRef. This should be released by the caller. If a valid object is not passed in, then NULL is returned.*/
-	
-CFStringRef 
-IOObjectCopyClass(io_object_t object)
-AVAILABLE_MAC_OS_X_VERSION_10_4_AND_LATER;
-
-/*! @function CFStringRef IOObjectCopySuperclassForClass
-    @abstract Return the superclass name of the given class.
-    @discussion This function uses the OSMetaClass system in the kernel to derive the name of the superclass of the class.
-	@param classname The name of the class as a CFString.
-	@result The resulting CFStringRef. This should be released by the caller. If there is no superclass, or a valid class name is not passed in, then NULL is returned.*/
-
-CFStringRef 
-IOObjectCopySuperclassForClass(CFStringRef classname)
-AVAILABLE_MAC_OS_X_VERSION_10_4_AND_LATER;
-
-/*! @function CFStringRef IOObjectCopyBundleIdentifierForClass
-    @abstract Return the bundle identifier of the given class.
-	@discussion This function uses the OSMetaClass system in the kernel to derive the name of the kmod, which is the same as the bundle identifier.
-	@param classname The name of the class as a CFString.
-	@result The resulting CFStringRef. This should be released by the caller. If a valid class name is not passed in, then NULL is returned.*/
-
-CFStringRef 
-IOObjectCopyBundleIdentifierForClass(CFStringRef classname)
-AVAILABLE_MAC_OS_X_VERSION_10_4_AND_LATER;
-
-/*! @function IOObjectConformsTo
-    @abstract Performs an OSDynamicCast operation on an IOKit object.
-    @discussion This function uses the OSMetaClass system in the kernel to determine if the object will dynamic cast to a class, specified as a C-string. In other words, if the object is of that class or a subclass.
-    @param object An IOKit object.
-    @param className The name of the class, as a C-string.
-    @result If the object handle is valid, and represents an object in the kernel that dynamic casts to the class true is returned, otherwise false. */
-
-boolean_t
-IOObjectConformsTo(
-	io_object_t	object,
-	const io_name_t	className );
-
-/*! @function IOObjectIsEqualTo
-    @abstract Checks two object handles to see if they represent the same kernel object.
-    @discussion If two object handles are returned by IOKitLib functions, this function will compare them to see if they represent the same kernel object.
-    @param object An IOKit object.
-    @param anObject Another IOKit object.
-    @result If both object handles are valid, and represent the same object in the kernel true is returned, otherwise false. */
-
-boolean_t
-IOObjectIsEqualTo(
-	io_object_t	object,
-	io_object_t	anObject );
-
-/*! @function IOObjectGetRetainCount
-    @abstract Returns kernel retain count of an IOKit object.
-    @discussion This function may be used in diagnostics to determine the current retain count of the kernel object.
-    @param object An IOKit object.
-    @result If the object handle is valid, the kernel objects retain count is returned, otherwise zero is returned. */
-
-uint32_t
-IOObjectGetRetainCount(
-	io_object_t	object );
-
-/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
-
-/*
- * IOIterator, subclass of IOObject
- */
-
-/*! @function IOIteratorNext
-    @abstract Returns the next object in an iteration.
-    @discussion This function returns the next object in an iteration, or zero if no more remain or the iterator is invalid.
-    @param iterator An IOKit iterator handle.
-    @result If the iterator handle is valid, the next element in the iteration is returned, otherwise zero is returned. The element should be released by the caller when it is finished. */
-
-io_object_t
-IOIteratorNext(
-	io_iterator_t	iterator );
-
-/*! @function IOIteratorReset
-    @abstract Resets an iteration back to the beginning.
-    @discussion If an iterator is invalid, or if the caller wants to start over, IOIteratorReset will set the iteration back to the beginning.
-    @param iterator An IOKit iterator handle. */
-
-void
-IOIteratorReset(
-	io_iterator_t	iterator );
-
-/*! @function IOIteratorIsValid
-    @abstract Checks an iterator is still valid.
-    @discussion Some iterators will be made invalid if changes are made to the structure they are iterating over. This function checks the iterator is still valid and should be called when IOIteratorNext returns zero. An invalid iterator can be reset and the iteration restarted.
-    @param iterator An IOKit iterator handle.
-    @result True if the iterator handle is valid, otherwise false is returned. */
-
-boolean_t
-IOIteratorIsValid(
-	io_iterator_t	iterator );
-
-/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
-
-/*
- * IOService, subclass of IORegistryEntry
- */
-
-/*!
-    @function IOServiceGetMatchingService
-    @abstract Look up a registered IOService object that matches a matching dictionary.
-    @discussion This is the preferred method of finding IOService objects currently registered by IOKit (that is, objects that have had their registerService() methods invoked). To find IOService objects that aren't yet registered, use an iterator as created by IORegistryEntryCreateIterator(). IOServiceAddMatchingNotification can also supply this information and install a notification of new IOServices. The matching information used in the matching dictionary may vary depending on the class of service being looked up.
-    @param masterPort The master port obtained from IOMasterPort(). Pass kIOMasterPortDefault to look up the default master port.
-    @param matching A CF dictionary containing matching information, of which one reference is always consumed by this function (Note prior to the Tiger release there was a small chance that the dictionary might not be released if there was an error attempting to serialize the dictionary). IOKitLib can construct matching dictionaries for common criteria with helper functions such as IOServiceMatching, IOServiceNameMatching, IOBSDNameMatching, IOOpenFirmwarePathMatching.
-    @result The first service matched is returned on success. The service must be released by the caller.
-  */
-
-io_service_t
-IOServiceGetMatchingService(
-	mach_port_t	masterPort,
-	CFDictionaryRef	matching );
-
-/*! @function IOServiceGetMatchingServices
-    @abstract Look up registered IOService objects that match a matching dictionary.
-    @discussion This is the preferred method of finding IOService objects currently registered by IOKit (that is, objects that have had their registerService() methods invoked). To find IOService objects that aren't yet registered, use an iterator as created by IORegistryEntryCreateIterator(). IOServiceAddMatchingNotification can also supply this information and install a notification of new IOServices. The matching information used in the matching dictionary may vary depending on the class of service being looked up.
-    @param masterPort The master port obtained from IOMasterPort(). Pass kIOMasterPortDefault to look up the default master port.
-    @param matching A CF dictionary containing matching information, of which one reference is always consumed by this function (Note prior to the Tiger release there was a small chance that the dictionary might not be released if there was an error attempting to serialize the dictionary). IOKitLib can construct matching dictionaries for common criteria with helper functions such as IOServiceMatching, IOServiceNameMatching, IOBSDNameMatching, IOOpenFirmwarePathMatching.
-    @param existing An iterator handle is returned on success, and should be released by the caller when the iteration is finished.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IOServiceGetMatchingServices(
-	mach_port_t	masterPort,
-	CFDictionaryRef	matching,
-	io_iterator_t * existing );
-
-
-kern_return_t
-IOServiceAddNotification(
-	mach_port_t	masterPort,
-	const io_name_t	notificationType,
-	CFDictionaryRef	matching,
-	mach_port_t	wakePort,
-	uintptr_t	reference,
-	io_iterator_t *	notification )  DEPRECATED_ATTRIBUTE;
-
-/*! @function IOServiceAddMatchingNotification
-    @abstract Look up registered IOService objects that match a matching dictionary, and install a notification request of new IOServices that match.
-    @discussion This is the preferred method of finding IOService objects that may arrive at any time. The type of notification specifies the state change the caller is interested in, on IOService's that match the match dictionary. Notification types are identified by name, and are defined in IOKitKeys.h. The matching information used in the matching dictionary may vary depending on the class of service being looked up.
-    @param notifyPort A IONotificationPortRef object that controls how messages will be sent when the armed notification is fired. When the notification is delivered, the io_iterator_t representing the notification should be iterated through to pick up all outstanding objects. When the iteration is finished the notification is rearmed. See IONotificationPortCreate.
-    @param notificationType A notification type from IOKitKeys.h
-<br>	kIOPublishNotification Delivered when an IOService is registered.
-<br>	kIOFirstPublishNotification Delivered when an IOService is registered, but only once per IOService instance. Some IOService's may be reregistered when their state is changed.
-<br>	kIOMatchedNotification Delivered when an IOService has had all matching drivers in the kernel probed and started.
-<br>	kIOFirstMatchNotification Delivered when an IOService has had all matching drivers in the kernel probed and started, but only once per IOService instance. Some IOService's may be reregistered when their state is changed.
-<br>	kIOTerminatedNotification Delivered after an IOService has been terminated.
-    @param matching A CF dictionary containing matching information, of which one reference is always consumed by this function (Note prior to the Tiger release there was a small chance that the dictionary might not be released if there was an error attempting to serialize the dictionary). IOKitLib can construct matching dictionaries for common criteria with helper functions such as IOServiceMatching, IOServiceNameMatching, IOBSDNameMatching, IOOpenFirmwarePathMatching.
-    @param callback A callback function called when the notification fires.
-    @param refCon A reference constant for the callbacks use.
-    @param notification An iterator handle is returned on success, and should be released by the caller when the notification is to be destroyed. The notification is armed when the iterator is emptied by calls to IOIteratorNext - when no more objects are returned, the notification is armed. Note the notification is not armed when first created.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IOServiceAddMatchingNotification(
-	IONotificationPortRef	notifyPort,
-	const io_name_t		notificationType,
-	CFDictionaryRef		matching,
-        IOServiceMatchingCallback callback,
-        void *			refCon,
-	io_iterator_t * 	notification );
-
-/*! @function IOServiceAddInterestNotification
-    @abstract Register for notification of state changes in an IOService.
-    @discussion IOService objects deliver notifications of their state changes to their clients via the IOService::message API, and to other interested parties including callers of this function. Message type s are defined IOKit/IOMessage.h.
-    @param notifyPort A IONotificationPortRef object that controls how messages will be sent when the notification is fired. See IONotificationPortCreate.
-    @param interestType A notification type from IOKitKeys.h
-<br>	kIOGeneralInterest General state changes delivered via the IOService::message API.
-<br>	kIOBusyInterest Delivered when the IOService changes its busy state to or from zero. The message argument contains the new busy state causing the notification.
-    @param callback A callback function called when the notification fires, with messageType and messageArgument for the state change.
-    @param refCon A reference constant for the callbacks use.
-    @param notification An object handle is returned on success, and should be released by the caller when the notification is to be destroyed.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IOServiceAddInterestNotification(
-	IONotificationPortRef	notifyPort,
-        io_service_t		service,
-	const io_name_t 	interestType,
-        IOServiceInterestCallback callback,
-        void *			refCon,
-        io_object_t *		notification );
-
-/*! @function IOServiceMatchPropertyTable
-    @abstract Match an IOService objects with matching dictionary.
-    @discussion This function calls the matching method of an IOService object and returns the boolean result.
-    @param service The IOService object to match.
-    @param matching A CF dictionary containing matching information. IOKitLib can construct matching dictionaries for common criteria with helper functions such as IOServiceMatching, IOServiceNameMatching, IOBSDNameMatching, IOOpenFirmwarePathMatching.
-    @param matches The boolean result is returned.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IOServiceMatchPropertyTable(
-        io_service_t	service,
-        CFDictionaryRef matching,
-        boolean_t *	matches );
-
-/*! @function IOServiceGetBusyState
-    @abstract Returns the busyState of an IOService.
-    @discussion Many activities in IOService are asynchronous. When registration, matching, or termination is in progress on an IOService, its busyState is increased by one. Change in busyState to or from zero also changes the IOService's provider's busyState by one, which means that an IOService is marked busy when any of the above activities is ocurring on it or any of its clients.
-    @param service The IOService whose busyState to return.
-    @param busyState The busyState count is returned.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IOServiceGetBusyState(
-	io_service_t    service,
-	uint32_t *	busyState );
-
-/*! @function IOServiceWaitQuiet
-    @abstract Wait for an IOService's busyState to be zero.
-    @discussion Blocks the caller until an IOService is non busy, see IOServiceGetBusyState.
-    @param service The IOService wait on.
-    @param waitTime Specifies a maximum time to wait.
-    @result Returns an error code if mach synchronization primitives fail, kIOReturnTimeout, or kIOReturnSuccess. */
-
-kern_return_t
-IOServiceWaitQuiet(
-	io_service_t      service,
-	mach_timespec_t * waitTime );
-
-/*! @function IOKitGetBusyState
-    @abstract Returns the busyState of all IOServices.
-    @discussion Many activities in IOService are asynchronous. When registration, matching, or termination is in progress on an IOService, its busyState is increased by one. Change in busyState to or from zero also changes the IOService's provider's busyState by one, which means that an IOService is marked busy when any of the above activities is ocurring on it or any of its clients. IOKitGetBusyState returns the busy state of the root of the service plane which reflects the busy state of all IOServices.
-    @param masterPort The master port obtained from IOMasterPort(). Pass kIOMasterPortDefault to look up the default master port.
-    @param busyState The busyState count is returned.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IOKitGetBusyState(
-	mach_port_t	masterPort,
-	uint32_t *	busyState );
-
-/*! @function IOKitWaitQuiet
-    @abstract Wait for a all IOServices' busyState to be zero.
-    @discussion Blocks the caller until all IOServices are non busy, see IOKitGetBusyState.
-    @param masterPort The master port obtained from IOMasterPort(). Pass kIOMasterPortDefault to look up the default master port.
-    @param waitTime Specifies a maximum time to wait.
-    @result Returns an error code if mach synchronization primitives fail, kIOReturnTimeout, or kIOReturnSuccess. */
-
-kern_return_t
-IOKitWaitQuiet(
-	mach_port_t	  masterPort,
-	mach_timespec_t * waitTime );
-
-/*! @function IOServiceOpen
-    @abstract A request to create a connection to an IOService.
-    @discussion A non kernel client may request a connection be opened via the IOServiceOpen() library function, which will call IOService::newUserClient in the kernel. The rules & capabilities of user level clients are family dependent, the default IOService implementation returns kIOReturnUnsupported.
-    @param service The IOService object to open a connection to, usually obtained via the IOServiceGetMatchingServices or IOServiceAddNotification APIs.
-    @param owningTask The mach task requesting the connection.
-    @param type A constant specifying the type of connection to be created,  interpreted only by the IOService's family.
-    @param connect An io_connect_t handle is returned on success, to be used with the IOConnectXXX APIs. It should be destroyed with IOServiceClose().
-    @result A return code generated by IOService::newUserClient. */
-
-kern_return_t
-IOServiceOpen(
-	io_service_t    service,
-	task_port_t	owningTask,
-	uint32_t	type,
-	io_connect_t  *	connect );
-
-/*! @function IOServiceRequestProbe
-    @abstract A request to rescan a bus for device changes.
-    @discussion A non kernel client may request a bus or controller rescan for added or removed devices, if the bus family does automatically notice such changes. For example, SCSI bus controllers do not notice device changes. The implementation of this routine is family dependent, and the default IOService implementation returns kIOReturnUnsupported.
-    @param service The IOService object to request a rescan, usually obtained via the IOServiceGetMatchingServices or IOServiceAddNotification APIs.
-    @param options An options mask, interpreted only by the IOService's family.
-    @result A return code generated by IOService::requestProbe. */
-
-kern_return_t
-IOServiceRequestProbe(
-	io_service_t    service,
-	uint32_t	options );
-
-/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
-
-/*
- * IOService connection
- */
-
-/*! @function IOServiceClose
-    @abstract Close a connection to an IOService and destroy the connect handle.
-    @discussion A connection created with the IOServiceOpen should be closed when the connection is no longer to be used with IOServiceClose.
-    @param connect The connect handle created by IOServiceOpen. It will be destroyed by this function, and should not be released with IOObjectRelease.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IOServiceClose(
-	io_connect_t	connect );
-
-/*! @function IOConnectAddRef
-    @abstract Adds a reference to the connect handle.
-    @discussion Adds a reference to the connect handle.
-    @param connect The connect handle created by IOServiceOpen.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IOConnectAddRef(
-	io_connect_t	connect );
-
-/*! @function IOConnectRelease
-    @abstract Remove a reference to the connect handle.
-    @discussion Removes a reference to the connect handle.  If the last reference is removed an implicit IOServiceClose is performed.
-    @param connect The connect handle created by IOServiceOpen.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IOConnectRelease(
-	io_connect_t	connect );
-
-/*! @function IOConnectGetService
-    @abstract Returns the IOService a connect handle was opened on.
-    @discussion Finds the service object a connection was opened on.
-    @param connect The connect handle created by IOServiceOpen.
-    @param service On succes, the service handle the connection was opened on, which should be released with IOObjectRelease.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IOConnectGetService(
-	io_connect_t	connect,
-	io_service_t  *	service );
-
-/*! @function IOConnectSetNotificationPort
-    @abstract Set a port to receive family specific notifications.
-    @discussion This is a generic method to pass a mach port send right to be be used by family specific notifications. 
-    @param connect The connect handle created by IOServiceOpen.
-    @param type The type of notification requested, not interpreted by IOKit and family defined.
-    @param port The port to which to send notifications.
-    @param reference Some families may support passing a reference parameter for the callers use with the notification.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IOConnectSetNotificationPort(
-	io_connect_t	connect,
-	uint32_t	type,
-	mach_port_t	port,
-	uintptr_t	reference );
-
-/*! @function IOConnectMapMemory
-    @abstract Map hardware or shared memory into the caller's task.
-    @discussion This is a generic method to create a mapping in the callers task. The family will interpret the type parameter to determine what sort of mapping is being requested. Cache modes and placed mappings may be requested by the caller.
-    @param connect The connect handle created by IOServiceOpen.
-    @param memoryType What is being requested to be mapped, not interpreted by IOKit and family defined. The family may support physical hardware or shared memory mappings.
-    @param intoTask The task port for the task in which to create the mapping. This may be different to the task which the opened the connection.
-    @param atAddress An in/out parameter - if the kIOMapAnywhere option is not set, the caller should pass the address where it requests the mapping be created, otherwise nothing need to set on input. The address of the mapping created is passed back on sucess.
-    @param ofSize The size of the mapping created is passed back on success.
-    @result A kern_return_t error code. */
-
-#if !__LP64__
-kern_return_t
-IOConnectMapMemory(
-	io_connect_t	connect,
-	uint32_t	memoryType,
-	task_port_t	intoTask,
-	vm_address_t	*atAddress,
-	vm_size_t	*ofSize,
-	IOOptionBits	 options );
-
-kern_return_t IOConnectMapMemory64
-#else
-kern_return_t IOConnectMapMemory
-#endif
-	(io_connect_t		connect,
-	 uint32_t		memoryType,
-	 task_port_t		intoTask,
-	 mach_vm_address_t	*atAddress,
-	 mach_vm_size_t		*ofSize,
-	 IOOptionBits		 options );
-
-/*! @function IOConnectUnmapMemory
-    @abstract Remove a mapping made with IOConnectMapMemory.
-    @discussion This is a generic method to remove a mapping in the callers task.
-    @param connect The connect handle created by IOServiceOpen.
-    @param memoryType The memory type originally requested in IOConnectMapMemory.
-    @param intoTask The task port for the task in which to remove the mapping. This may be different to the task which the opened the connection.
-    @param atAddress The address of the mapping to be removed.
-    @result A kern_return_t error code. */
-
-#if !__LP64__
-kern_return_t
-IOConnectUnmapMemory(
-	io_connect_t	connect,
-	uint32_t	memoryType,
-	task_port_t	fromTask,
-	vm_address_t	atAddress );
-
-kern_return_t IOConnectUnmapMemory64
-#else
-kern_return_t IOConnectUnmapMemory
-#endif
-	(io_connect_t		connect,
-	 uint32_t		memoryType,
-	 task_port_t		fromTask,
-	 mach_vm_address_t	atAddress );
-
-/*! @function IOConnectSetCFProperties
-    @abstract Set CF container based properties on a connection.
-    @discussion This is a generic method to pass a CF container of properties to the connection. The properties are interpreted by the family and commonly represent configuration settings, but may be interpreted as anything.
-    @param connect The connect handle created by IOServiceOpen.
-    @param properties A CF container - commonly a CFDictionary but this is not enforced. The container should consist of objects which are understood by IOKit - these are currently : CFDictionary, CFArray, CFSet, CFString, CFData, CFNumber, CFBoolean, and are passed in the kernel as the corresponding OSDictionary etc. objects.
-    @result A kern_return_t error code returned by the family. */
-
-kern_return_t
-IOConnectSetCFProperties(
-	io_connect_t	connect,
-	CFTypeRef	properties );
-
-/*! @function IOConnectSetCFProperty
-    @abstract Set a CF container based property on a connection.
-    @discussion This is a generic method to pass a CF property to the connection. The property is interpreted by the family and commonly represent configuration settings, but may be interpreted as anything.
-    @param connect The connect handle created by IOServiceOpen.
-    @param propertyName The name of the property as a CFString.
-    @param property A CF container - should consist of objects which are understood by IOKit - these are currently : CFDictionary, CFArray, CFSet, CFString, CFData, CFNumber, CFBoolean, and are passed in the kernel as the corresponding OSDictionary etc. objects.
-    @result A kern_return_t error code returned by the object. */
-
-kern_return_t
-IOConnectSetCFProperty(
-	io_connect_t	connect,
-        CFStringRef	propertyName,
-	CFTypeRef	property );
-
-/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
-
-// Combined LP64 & ILP32 Extended IOUserClient::externalMethod
-
-kern_return_t
-IOConnectCallMethod(
-	mach_port_t	 connection,		// In
-	uint32_t	 selector,		// In
-	const uint64_t	*input,			// In
-	uint32_t	 inputCnt,		// In
-	const void      *inputStruct,		// In
-	size_t		 inputStructCnt,	// In
-	uint64_t	*output,		// Out
-	uint32_t	*outputCnt,		// In/Out
-	void		*outputStruct,		// Out
-	size_t		*outputStructCnt)	// In/Out
-AVAILABLE_MAC_OS_X_VERSION_10_5_AND_LATER;
-
-kern_return_t
-IOConnectCallAsyncMethod(
-	mach_port_t	 connection,		// In
-	uint32_t	 selector,		// In
-	mach_port_t	 wake_port,		// In
-	uint64_t	*reference,		// In
-	uint32_t	 referenceCnt,		// In
-	const uint64_t	*input,			// In
-	uint32_t	 inputCnt,		// In
-	const void	*inputStruct,		// In
-	size_t		 inputStructCnt,	// In
-	uint64_t	*output,		// Out
-	uint32_t	*outputCnt,		// In/Out
-	void		*outputStruct,		// Out
-	size_t		*outputStructCnt)	// In/Out
-AVAILABLE_MAC_OS_X_VERSION_10_5_AND_LATER;
-
-kern_return_t
-IOConnectCallStructMethod(
-	mach_port_t	 connection,		// In
-	uint32_t	 selector,		// In
-	const void	*inputStruct,		// In
-	size_t		 inputStructCnt,	// In
-	void		*outputStruct,		// Out
-	size_t		*outputStructCnt)	// In/Out
-AVAILABLE_MAC_OS_X_VERSION_10_5_AND_LATER;
-
-kern_return_t
-IOConnectCallAsyncStructMethod(
-	mach_port_t	 connection,		// In
-	uint32_t	 selector,		// In
-	mach_port_t	 wake_port,		// In
-	uint64_t	*reference,		// In
-	uint32_t	 referenceCnt,		// In
-	const void	*inputStruct,		// In
-	size_t		 inputStructCnt,	// In
-	void		*outputStruct,		// Out
-	size_t		*outputStructCnt)	// In/Out
-AVAILABLE_MAC_OS_X_VERSION_10_5_AND_LATER;
-
-kern_return_t
-IOConnectCallScalarMethod(
-	mach_port_t	 connection,		// In
-	uint32_t	 selector,		// In
-	const uint64_t	*input,			// In
-	uint32_t	 inputCnt,		// In
-	uint64_t	*output,		// Out
-	uint32_t	*outputCnt)		// In/Out
-AVAILABLE_MAC_OS_X_VERSION_10_5_AND_LATER;
-
-kern_return_t
-IOConnectCallAsyncScalarMethod(
-	mach_port_t	 connection,		// In
-	uint32_t	 selector,		// In
-	mach_port_t	 wake_port,		// In
-	uint64_t	*reference,		// In
-	uint32_t	 referenceCnt,		// In
-	const uint64_t	*input,			// In
-	uint32_t	 inputCnt,		// In
-	uint64_t	*output,		// Out
-	uint32_t	*outputCnt)		// In/Out
-AVAILABLE_MAC_OS_X_VERSION_10_5_AND_LATER;
-
-/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
-
-kern_return_t
-IOConnectTrap0(io_connect_t	connect,
-	       uint32_t		index );
-
-kern_return_t
-IOConnectTrap1(io_connect_t	connect,
-	       uint32_t		index,
-	       uintptr_t	p1 );
-
-kern_return_t
-IOConnectTrap2(io_connect_t	connect,
-	       uint32_t		index,
-	       uintptr_t	p1,
-	       uintptr_t	p2);
-
-kern_return_t
-IOConnectTrap3(io_connect_t	connect,
-	       uint32_t		index,
-	       uintptr_t	p1,
-	       uintptr_t	p2,
-	       uintptr_t	p3);
-
-kern_return_t
-IOConnectTrap4(io_connect_t	connect,
-	       uint32_t		index,
-	       uintptr_t	p1,
-	       uintptr_t	p2,
-	       uintptr_t	p3,
-	       uintptr_t	p4);
-
-kern_return_t
-IOConnectTrap5(io_connect_t	connect,
-	       uint32_t		index,
-	       uintptr_t	p1,
-	       uintptr_t	p2,
-	       uintptr_t	p3,
-	       uintptr_t	p4,
-	       uintptr_t	p5);
-
-kern_return_t
-IOConnectTrap6(io_connect_t	connect,
-	       uint32_t		index,
-	       uintptr_t	p1,
-	       uintptr_t	p2,
-	       uintptr_t	p3,
-	       uintptr_t	p4,
-	       uintptr_t	p5,
-	       uintptr_t	p6);
-
-/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
-
-/*! @function IOConnectAddClient
-    @abstract Inform a connection of a second connection.
-    @discussion This is a generic method to inform a family connection of a second connection, and is rarely used.
-    @param connect The connect handle created by IOServiceOpen.
-    @param client Another connect handle created by IOServiceOpen.
-    @result A kern_return_t error code returned by the family. */
-
-kern_return_t
-IOConnectAddClient(
-	io_connect_t	connect,
-	io_connect_t	client );
-
-/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
-
-/*
- * IORegistry accessors
- */
-
-/*! @function IORegistryGetRootEntry
-    @abstract Return a handle to the registry root.
-    @discussion This method provides an accessor to the root of the registry for the machine. The root may be passed to a registry iterator when iterating a plane, and contains properties that describe the available planes, and diagnostic information for IOKit.
-    @param masterPort The master port obtained from IOMasterPort(). Pass kIOMasterPortDefault to look up the default master port.
-    @result A handle to the IORegistryEntry root instance, to be released with IOObjectRelease by the caller, or MACH_PORT_NULL on failure. */
-
-io_registry_entry_t
-IORegistryGetRootEntry(
-	mach_port_t	masterPort );
-
-/*! @function IORegistryEntryFromPath
-    @abstract Looks up a registry entry by path.
-    @discussion This function parses paths to lookup registry entries. The path should begin with '<plane name>:' If there are characters remaining unparsed after an entry has been looked up, this is considered an invalid lookup. Paths are further documented in IORegistryEntry.h
-    @param masterPort The master port obtained from IOMasterPort(). Pass kIOMasterPortDefault to look up the default master port.
-    @param path A C-string path.
-    @result A handle to the IORegistryEntry witch was found with the path, to be released with IOObjectRelease by the caller, or MACH_PORT_NULL on failure. */
-
-io_registry_entry_t
-IORegistryEntryFromPath(
-	mach_port_t		masterPort,
-	const io_string_t	path );
-
-// options for IORegistryCreateIterator(), IORegistryEntryCreateIterator, IORegistryEntrySearchCFProperty()
-enum {
-    kIORegistryIterateRecursively	= 0x00000001,
-    kIORegistryIterateParents		= 0x00000002
-};
-
-/*! @function IORegistryCreateIterator
-    @abstract Create an iterator rooted at the registry root.
-    @discussion This method creates an IORegistryIterator in the kernel that is set up with options to iterate children of the registry root entry, and to recurse automatically into entries as they are returned, or only when instructed with calls to IORegistryIteratorEnterEntry. The iterator object keeps track of entries that have been recursed into previously to avoid loops.
-    @param masterPort The master port obtained from IOMasterPort(). Pass kIOMasterPortDefault to look up the default master port.
-    @param plane The name of an existing registry plane. Plane names are defined in IOKitKeys.h, eg. kIOServicePlane.
-    @param options kIORegistryIterateRecursively may be set to recurse automatically into each entry as it is returned from IOIteratorNext calls on the registry iterator. 
-    @param iterator A created iterator handle, to be released by the caller when it has finished with it.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IORegistryCreateIterator(
-	mach_port_t	masterPort,
-	const io_name_t	plane,
-	IOOptionBits	options,
-	io_iterator_t * iterator );
-
-/*! @function IORegistryEntryCreateIterator
-    @abstract Create an iterator rooted at a given registry entry.
-    @discussion This method creates an IORegistryIterator in the kernel that is set up with options to iterate children or parents of a root entry, and to recurse automatically into entries as they are returned, or only when instructed with calls to IORegistryIteratorEnterEntry. The iterator object keeps track of entries that have been recursed into previously to avoid loops.
-    @param entry The root entry to begin the iteration at.
-    @param plane The name of an existing registry plane. Plane names are defined in IOKitKeys.h, eg. kIOServicePlane.
-    @param options kIORegistryIterateRecursively may be set to recurse automatically into each entry as it is returned from IOIteratorNext calls on the registry iterator. kIORegistryIterateParents may be set to iterate the parents of each entry, by default the children are iterated.
-    @param iterator A created iterator handle, to be released by the caller when it has finished with it.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IORegistryEntryCreateIterator(
-	io_registry_entry_t	entry,
-	const io_name_t		plane,
-	IOOptionBits		options,
-	io_iterator_t 	      * iterator );
-
-/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
-
-/*
- * IORegistryIterator, subclass of IOIterator
- */
-
-/*! @function IORegistryIteratorEnterEntry
-    @abstract Recurse into the current entry in the registry iteration.
-    @discussion This method makes the current entry, ie. the last entry returned by IOIteratorNext, the root in a new level of recursion.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IORegistryIteratorEnterEntry(
-	io_iterator_t	iterator );
-
-/*! @function IORegistryIteratorExitEntry
-    @abstract Exits a level of recursion, restoring the current entry.
-    @discussion This method undoes an IORegistryIteratorEnterEntry, restoring the current entry. If there are no more levels of recursion to exit false is returned, otherwise true is returned.
-    @result kIOReturnSuccess if a level of recursion was undone, kIOReturnNoDevice if no recursive levels are left in the iteration. */
-
-kern_return_t
-IORegistryIteratorExitEntry(
-	io_iterator_t	iterator );
-
-/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
-
-/*
- * IORegistryEntry, subclass of IOObject
- */
-
-/*! @function IORegistryEntryGetName
-    @abstract Returns a C-string name assigned to a registry entry.
-    @discussion Registry entries can be named in a particular plane, or globally. This function returns the entry's global name. The global name defaults to the entry's meta class name if it has not been named.
-    @param entry The registry entry handle whose name to look up.
-    @param name The caller's buffer to receive the name.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IORegistryEntryGetName(
-	io_registry_entry_t	entry,
-	io_name_t 	        name );
-
-/*! @function IORegistryEntryGetNameInPlane
-    @abstract Returns a C-string name assigned to a registry entry, in a specified plane.
-    @discussion Registry entries can be named in a particular plane, or globally. This function returns the entry's name in the specified plane or global name if it has not been named in that plane. The global name defaults to the entry's meta class name if it has not been named.
-    @param entry The registry entry handle whose name to look up.
-    @param plane The name of an existing registry plane. Plane names are defined in IOKitKeys.h, eg. kIOServicePlane.
-    @param name The caller's buffer to receive the name.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IORegistryEntryGetNameInPlane(
-	io_registry_entry_t	entry,
-	const io_name_t 	plane,
-	io_name_t 	        name );
-
-/*! @function IORegistryEntryGetLocationInPlane
-    @abstract Returns a C-string location assigned to a registry entry, in a specified plane.
-    @discussion Registry entries can given a location string in a particular plane, or globally. If the entry has had a location set in the specified plane that location string will be returned, otherwise the global location string is returned. If no global location string has been set, an error is returned.
-    @param entry The registry entry handle whose name to look up.
-    @param plane The name of an existing registry plane. Plane names are defined in IOKitKeys.h, eg. kIOServicePlane.
-    @param location The caller's buffer to receive the location string.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IORegistryEntryGetLocationInPlane(
-	io_registry_entry_t	entry,
-	const io_name_t 	plane,
-	io_name_t 	        location );
-
-/*! @function IORegistryEntryGetPath
-    @abstract Create a path for a registry entry.
-    @discussion The path for a registry entry is copied to the caller's buffer. The path describes the entry's attachment in a particular plane, which must be specified. The path begins with the plane name followed by a colon, and then followed by '/' separated path components for each of the entries between the root and the registry entry. An alias may also exist for the entry, and will be returned if available.
-    @param entry The registry entry handle whose path to look up.
-    @param plane The name of an existing registry plane. Plane names are defined in IOKitKeys.h, eg. kIOServicePlane.
-    @param path A char buffer allocated by the caller.
-    @result IORegistryEntryGetPath will fail if the entry is not attached in the plane, or if the buffer is not large enough to contain the path. */
-
-kern_return_t
-IORegistryEntryGetPath(
-	io_registry_entry_t	entry,
-	const io_name_t         plane,
-	io_string_t		path );
-
-/*! @function IORegistryEntryCreateCFProperties
-    @abstract Create a CF dictionary representation of a registry entry's property table.
-    @discussion This function creates an instantaneous snapshot of a registry entry's property table, creating a CFDictionary analogue in the caller's task. Not every object available in the kernel is represented as a CF container; currently OSDictionary, OSArray, OSSet, OSSymbol, OSString, OSData, OSNumber, OSBoolean are created as their CF counterparts. 
-    @param entry The registry entry handle whose property table to copy.
-    @param properties A CFDictionary is created and returned the caller on success. The caller should release with CFRelease.
-    @param allocator The CF allocator to use when creating the CF containers.
-    @param options No options are currently defined.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IORegistryEntryCreateCFProperties(
-	io_registry_entry_t	entry,
-	CFMutableDictionaryRef * properties,
-        CFAllocatorRef		allocator,
-	IOOptionBits		options );
-
-/*! @function IORegistryEntryCreateCFProperty
-    @abstract Create a CF representation of a registry entry's property.
-    @discussion This function creates an instantaneous snapshot of a registry entry property, creating a CF container analogue in the caller's task. Not every object available in the kernel is represented as a CF container; currently OSDictionary, OSArray, OSSet, OSSymbol, OSString, OSData, OSNumber, OSBoolean are created as their CF counterparts. 
-    @param entry The registry entry handle whose property to copy.
-    @param key A CFString specifying the property name.
-    @param allocator The CF allocator to use when creating the CF container.
-    @param options No options are currently defined.
-    @result A CF container is created and returned the caller on success. The caller should release with CFRelease. */
-
-CFTypeRef
-IORegistryEntryCreateCFProperty(
-	io_registry_entry_t	entry,
-	CFStringRef		key,
-        CFAllocatorRef		allocator,
-	IOOptionBits		options );
-
-/*! @function IORegistryEntrySearchCFProperty
-    @abstract Create a CF representation of a registry entry's property.
-    @discussion This function creates an instantaneous snapshot of a registry entry property, creating a CF container analogue in the caller's task. Not every object available in the kernel is represented as a CF container; currently OSDictionary, OSArray, OSSet, OSSymbol, OSString, OSData, OSNumber, OSBoolean are created as their CF counterparts. 
-This function will search for a property, starting first with specified registry entry's property table, then iterating recusively through either the parent registry entries or the child registry entries of this entry. Once the first occurrence is found, it will lookup and return the value of the property, using the same semantics as IORegistryEntryCreateCFProperty. The iteration keeps track of entries that have been recursed into previously to avoid loops.
-    @param entry The registry entry at which to start the search.
-    @param plane The name of an existing registry plane. Plane names are defined in IOKitKeys.h, eg. kIOServicePlane.
-    @param key A CFString specifying the property name.
-    @param allocator The CF allocator to use when creating the CF container.
-    @param options kIORegistryIterateRecursively may be set to recurse automatically into the registry hierarchy. Without this option, this method degenerates into the standard IORegistryEntryCreateCFProperty() call. kIORegistryIterateParents may be set to iterate the parents of the entry, in place of the children.
-    @result A CF container is created and returned the caller on success. The caller should release with CFRelease. */
-
-CFTypeRef
-IORegistryEntrySearchCFProperty(
-	io_registry_entry_t	entry,
-	const io_name_t		plane,
-	CFStringRef		key,
-        CFAllocatorRef		allocator,
-	IOOptionBits		options );
-
-/*  @function IORegistryEntryGetProperty - deprecated,
-    use IORegistryEntryCreateCFProperty */
-
-kern_return_t
-IORegistryEntryGetProperty(
-	io_registry_entry_t	entry,
-	const io_name_t		propertyName,
-	io_struct_inband_t	buffer,
-	uint32_t	      * size );
-
-/*! @function IORegistryEntrySetCFProperties
-    @abstract Set CF container based properties in a registry entry.
-    @discussion This is a generic method to pass a CF container of properties to an object in the registry. Setting properties in a registry entry is not generally supported, it is more common to support IOConnectSetCFProperties for connection based property setting. The properties are interpreted by the object.
-    @param entry The registry entry whose properties to set.
-    @param properties A CF container - commonly a CFDictionary but this is not enforced. The container should consist of objects which are understood by IOKit - these are currently : CFDictionary, CFArray, CFSet, CFString, CFData, CFNumber, CFBoolean, and are passed in the kernel as the corresponding OSDictionary etc. objects.
-    @result A kern_return_t error code returned by the object. */
-
-kern_return_t
-IORegistryEntrySetCFProperties(
-	io_registry_entry_t	entry,
-	CFTypeRef	 	properties );
-
-/*! @function IORegistryEntrySetCFProperty
-    @abstract Set a CF container based property in a registry entry.
-    @discussion This is a generic method to pass a CF container as a property to an object in the registry. Setting properties in a registry entry is not generally supported, it is more common to support IOConnectSetCFProperty for connection based property setting. The property is interpreted by the object.
-    @param entry The registry entry whose property to set.
-    @param propertyName The name of the property as a CFString.
-    @param property A CF container - should consist of objects which are understood by IOKit - these are currently : CFDictionary, CFArray, CFSet, CFString, CFData, CFNumber, CFBoolean, and are passed in the kernel as the corresponding OSDictionary etc. objects.
-    @result A kern_return_t error code returned by the object. */
-
-kern_return_t
-IORegistryEntrySetCFProperty(
-	io_registry_entry_t	entry,
-        CFStringRef		propertyName,
-	CFTypeRef	 	property );
-
-/*! @function IORegistryEntryGetChildIterator
-    @abstract Returns an iterator over an registry entry's child entries in a plane.
-    @discussion This method creates an iterator which will return each of a registry entry's child entries in a specified plane.
-    @param entry The registry entry whose children to iterate over.
-    @param plane The name of an existing registry plane. Plane names are defined in IOKitKeys.h, eg. kIOServicePlane.
-    @param iterator The created iterator over the children of the entry, on success. The iterator must be released when the iteration is finished.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IORegistryEntryGetChildIterator(
-	io_registry_entry_t	entry,
-	const io_name_t		plane,
-	io_iterator_t	      * iterator );
-
-/*! @function IORegistryEntryGetChildEntry
-    @abstract Returns the first child of a registry entry in a plane.
-    @discussion This function will return the child which first attached to a registry entry in a plane.
-    @param entry The registry entry whose child to look up.
-    @param plane The name of an existing registry plane. Plane names are defined in IOKitKeys.h, eg. kIOServicePlane.
-    @param child The first child of the registry entry, on success. The child must be released by the caller.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IORegistryEntryGetChildEntry(
-	io_registry_entry_t	entry,
-	const io_name_t		plane,
-	io_registry_entry_t   * child );
-
-/*! @function IORegistryEntryGetParentIterator
-    @abstract Returns an iterator over an registry entry's parent entries in a plane.
-    @discussion This method creates an iterator which will return each of a registry entry's parent entries in a specified plane.
-    @param entry The registry entry whose parents to iterate over.
-    @param plane The name of an existing registry plane. Plane names are defined in IOKitKeys.h, eg. kIOServicePlane.
-    @param iterator The created iterator over the parents of the entry, on success. The iterator must be released when the iteration is finished.
-    @result A kern_return_t error. */
-
-kern_return_t
-IORegistryEntryGetParentIterator(
-	io_registry_entry_t	entry,
-	const io_name_t		plane,
-	io_iterator_t	      * iterator );
-
-/*! @function IORegistryEntryGetParentEntry
-    @abstract Returns the first parent of a registry entry in a plane.
-    @discussion This function will return the parent to which the registry entry was first attached in a plane.
-    @param entry The registry entry whose parent to look up.
-    @param plane The name of an existing registry plane. Plane names are defined in IOKitKeys.h, eg. kIOServicePlane.
-    @param child The first parent of the registry entry, on success. The parent must be released by the caller.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IORegistryEntryGetParentEntry(
-	io_registry_entry_t	entry,
-	const io_name_t		plane,
-	io_registry_entry_t   * parent );
-
-/*! @function IORegistryEntryInPlane
-    @abstract Determines if the registry entry is attached in a plane.
-    @discussion This method determines if the entry is attached in a plane to any other entry.
-    @param entry The registry entry.
-    @param plane The name of an existing registry plane. Plane names are defined in IOKitKeys.h, eg. kIOServicePlane.
-    @result If the entry has a parent in the plane, true is returned, otherwise false is returned. */
-
-boolean_t
-IORegistryEntryInPlane(
-	io_registry_entry_t	entry,
-	const io_name_t		plane );
-
-/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
-
-/*
- * Matching dictionary creation helpers
- */
-
-/*! @function IOServiceMatching
-    @abstract Create a matching dictionary that specifies an IOService class match.
-    @discussion A very common matching criteria for IOService is based on its class. IOServiceMatching will create a matching dictionary that specifies any IOService of a class, or its subclasses. The class is specified by C-string name.
-    @param name The class name, as a const C-string. Class matching is successful on IOService's of this class or any subclass.
-    @result The matching dictionary created, is returned on success, or zero on failure. The dictionary is commonly passed to IOServiceGetMatchingServices or IOServiceAddNotification which will consume a reference, otherwise it should be released with CFRelease by the caller. */
-
-CFMutableDictionaryRef
-IOServiceMatching(
-	const char *	name );
-
-/*! @function IOServiceNameMatching
-    @abstract Create a matching dictionary that specifies an IOService name match.
-    @discussion A common matching criteria for IOService is based on its name. IOServiceNameMatching will create a matching dictionary that specifies an IOService with a given name. Some IOServices created from the OpenFirmware device tree will perform name matching on the standard OF compatible, name, model properties.
-    @param name The IOService name, as a const C-string.
-    @result The matching dictionary created, is returned on success, or zero on failure. The dictionary is commonly passed to IOServiceGetMatchingServices or IOServiceAddNotification which will consume a reference, otherwise it should be released with CFRelease by the caller. */
-
-CFMutableDictionaryRef
-IOServiceNameMatching(
-	const char *	name );
-
-/*! @function IOBSDNameMatching
-    @abstract Create a matching dictionary that specifies an IOService match based on BSD device name.
-    @discussion IOServices that represent BSD devices have an associated BSD name. This function creates a matching dictionary that will match IOService's with a given BSD name.
-    @param masterPort The master port obtained from IOMasterPort(). Pass kIOMasterPortDefault to look up the default master port.
-    @param options No options are currently defined.
-    @param bsdName The BSD name, as a const char *.
-    @result The matching dictionary created, is returned on success, or zero on failure. The dictionary is commonly passed to IOServiceGetMatchingServices or IOServiceAddNotification which will consume a reference, otherwise it should be released with CFRelease by the caller. */
-
-CFMutableDictionaryRef
-IOBSDNameMatching(
-	mach_port_t	masterPort,
-	uint32_t	options,
-	const char *	bsdName );
-
-/*! @function IOOpenFirmwarePathMatching
-    @abstract Create a matching dictionary that specifies an IOService match based on  an OpenFirmware device path.
-    @discussion Certain IOServices (currently, block and ethernet boot devices) may be looked up by a path that specifies their location in the OpenFirmware device tree, represented in the registry by the kIODeviceTreePlane plane. This function creates a matching dictionary that will match IOService's found with a given OpenFirmware device path.
-    @param masterPort The master port obtained from IOMasterPort(). Pass kIOMasterPortDefault to look up the default master port.
-    @param options No options are currently defined.
-    @param path The OpenFirmware device path, as a const char *.
-    @result The matching dictionary created, is returned on success, or zero on failure. The dictionary is commonly passed to IOServiceGetMatchingServices or IOServiceAddNotification which will consume a reference, otherwise it should be released with CFRelease by the caller. */
-
-CFMutableDictionaryRef
-IOOpenFirmwarePathMatching(
-	mach_port_t	masterPort,
-	uint32_t	options,
-	const char *	path );
-
-/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
-
-/*! @function IOServiceOFPathToBSDName
-    @abstract Utility to look up an IOService from its OpenFirmware device path, and return its BSD device name if available.
-    @discussion Certain IOServices (currently, block and ethernet boot devices) may be looked up by a path that specifies their location in the OpenFirmware device tree, represented in the registry by the kIODeviceTreePlane plane. This function looks up an IOService object with a given OpenFirmware device path, and returns its associated BSD device name.
-    @param masterPort The master port obtained from IOMasterPort(). Pass kIOMasterPortDefault to look up the default master port.
-    @param openFirmwarePath The OpenFirmware device path, as a const char *.
-    @param bsdName The BSD name, as a const char *, is copied to the callers buffer.
-    @result A kern_return_t error code. */
-
-kern_return_t
-IOServiceOFPathToBSDName(mach_port_t		masterPort,
-                         const io_name_t	openFirmwarePath,
-                         io_name_t		bsdName);
-						 
-/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
-
-/*! @typedef IOAsyncCallback0
-    @abstract standard callback function for asynchronous I/O requests with
-    no extra arguments beyond a refcon and result code.
-    @param refcon The refcon passed into the original I/O request
-    @param result The result of the I/O operation
-*/
-typedef void (*IOAsyncCallback0)(void *refcon, IOReturn result);
-
-/*! @typedef IOAsyncCallback1
-    @abstract standard callback function for asynchronous I/O requests with
-    one extra argument beyond a refcon and result code.
-    This is often a count of the number of bytes transferred
-    @param refcon The refcon passed into the original I/O request
-    @param result The result of the I/O operation
-    @param arg0	Extra argument
-*/
-typedef void (*IOAsyncCallback1)(void *refcon, IOReturn result, void *arg0);
-
-/*! @typedef IOAsyncCallback2
-    @abstract standard callback function for asynchronous I/O requests with
-    two extra arguments beyond a refcon and result code.
-    @param refcon The refcon passed into the original I/O request
-    @param result The result of the I/O operation
-    @param arg0	Extra argument
-    @param arg1	Extra argument
-*/
-typedef void (*IOAsyncCallback2)(void *refcon, IOReturn result, void *arg0, void *arg1);
-
-/*! @typedef IOAsyncCallback
-    @abstract standard callback function for asynchronous I/O requests with
-    lots of extra arguments beyond a refcon and result code.
-    @param refcon The refcon passed into the original I/O request
-    @param result The result of the I/O operation
-    @param args	Array of extra arguments
-    @param numArgs Number of extra arguments
-*/
-typedef void (*IOAsyncCallback)(void *refcon, IOReturn result, void **args,
-                                uint32_t numArgs);
-
-
-/* Internal use */
-
-kern_return_t
-OSGetNotificationFromMessage(
-	mach_msg_header_t     * msg,
-	uint32_t	  	index,
-        uint32_t    	      * type,
-        uintptr_t	      * reference,
-	void		     ** content,
-        vm_size_t	      * size );
-
-/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
-
-/* Internal use */
-
-kern_return_t
-IOCatalogueSendData(
-        mach_port_t             masterPort,
-        uint32_t                flag,
-        const char             *buffer,
-        uint32_t                size );
-
-kern_return_t
-IOCatalogueTerminate(
-        mach_port_t		masterPort,
-        uint32_t                flag,
-	io_name_t		description );
-
-kern_return_t
-IOCatalogueGetData(
-        mach_port_t             masterPort,
-        uint32_t                flag,
-        char                  **buffer,
-        uint32_t               *size );
-
-kern_return_t
-IOCatalogueModuleLoaded(
-        mach_port_t             masterPort,
-        io_name_t               name );
-
-kern_return_t
-IOCatalogueReset(
-        mach_port_t             masterPort,
-        uint32_t                flag );
-
-/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
-
-// obsolete API
-
-#if !defined(__LP64__)
-
-// for Power Mgt
-
-typedef struct IOObject IOObject;
-
-// for MacOS.app
-
-kern_return_t
-IORegistryDisposeEnumerator(
-	io_enumerator_t	enumerator ) DEPRECATED_ATTRIBUTE;
-
-kern_return_t
-IOMapMemory(
-	io_connect_t	connect,
-	uint32_t	memoryType,
-	task_port_t	intoTask,
-	vm_address_t *	atAddress,
-	vm_size_t    *	ofSize,
-	uint32_t	flags ) DEPRECATED_ATTRIBUTE;
-
-// for CGS
-
-kern_return_t
-IOCompatibiltyNumber(
-	mach_port_t	connect,
-	uint32_t *	objectNumber ) DEPRECATED_ATTRIBUTE;
-
-// Traditional IOUserClient transport routines
-kern_return_t
-IOConnectMethodScalarIScalarO( 
-	io_connect_t	connect,
-        uint32_t	index,
-        IOItemCount	scalarInputCount,
-        IOItemCount	scalarOutputCount,
-        ... ) AVAILABLE_MAC_OS_X_VERSION_10_0_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_5;
-
-kern_return_t
-IOConnectMethodScalarIStructureO(
-	io_connect_t	connect,
-        uint32_t	index,
-        IOItemCount	scalarInputCount,
-        IOByteCount *	structureSize,
-        ... ) AVAILABLE_MAC_OS_X_VERSION_10_0_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_5;
-
-kern_return_t
-IOConnectMethodScalarIStructureI(
-	io_connect_t	connect,
-        uint32_t	index,
-        IOItemCount	scalarInputCount,
-        IOByteCount	structureSize,
-        ... ) AVAILABLE_MAC_OS_X_VERSION_10_0_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_5;
-
-kern_return_t
-IOConnectMethodStructureIStructureO(
-	io_connect_t	connect,
-        uint32_t	index,
-        IOItemCount	structureInputSize,
-        IOByteCount *	structureOutputSize,
-        void *		inputStructure,
-        void *		ouputStructure ) AVAILABLE_MAC_OS_X_VERSION_10_0_AND_LATER_BUT_DEPRECATED_IN_MAC_OS_X_VERSION_10_5;
-
-// Compatability with earlier Mig interface routines
-#if IOCONNECT_NO_32B_METHODS
-
-kern_return_t
-io_connect_map_memory(
-	io_connect_t		connect,
-	uint32_t		memoryType,
-	task_port_t		intoTask,
-	vm_address_t		*atAddress,
-	vm_size_t		*ofSize,
-	IOOptionBits		options) DEPRECATED_ATTRIBUTE;
-
-kern_return_t
-io_connect_unmap_memory(
-	io_connect_t		connect,
-	uint32_t		memoryType,
-	task_port_t		fromTask,
-	vm_address_t		atAddress) DEPRECATED_ATTRIBUTE;
-
-kern_return_t
-io_connect_method_scalarI_scalarO(
-	mach_port_t connection,
-	int selector,
-	io_scalar_inband_t input,
-	mach_msg_type_number_t inputCnt,
-	io_scalar_inband_t output,
-	mach_msg_type_number_t *outputCnt) DEPRECATED_ATTRIBUTE;
-
-kern_return_t
-io_connect_method_scalarI_structureO(
-	mach_port_t connection,
-	int selector,
-	io_scalar_inband_t input,
-	mach_msg_type_number_t inputCnt,
-	io_struct_inband_t output,
-	mach_msg_type_number_t *outputCnt) DEPRECATED_ATTRIBUTE;
-
-kern_return_t
-io_connect_method_scalarI_structureI(
-	mach_port_t connection,
-	int selector,
-	io_scalar_inband_t input,
-	mach_msg_type_number_t inputCnt,
-	io_struct_inband_t inputStruct,
-	mach_msg_type_number_t inputStructCnt) DEPRECATED_ATTRIBUTE;
-
-kern_return_t
-io_connect_method_structureI_structureO(
-	mach_port_t connection,
-	int selector,
-	io_struct_inband_t input,
-	mach_msg_type_number_t inputCnt,
-	io_struct_inband_t output,
-	mach_msg_type_number_t *outputCnt) DEPRECATED_ATTRIBUTE;
-
-kern_return_t
-io_async_method_scalarI_scalarO(
-	mach_port_t connection,
-	mach_port_t wake_port,
-	io_async_ref_t reference,
-	mach_msg_type_number_t referenceCnt,
-	int selector,
-	io_scalar_inband_t input,
-	mach_msg_type_number_t inputCnt,
-	io_scalar_inband_t output,
-	mach_msg_type_number_t *outputCnt) DEPRECATED_ATTRIBUTE;
-
-kern_return_t
-io_async_method_scalarI_structureO(
-	mach_port_t connection,
-	mach_port_t wake_port,
-	io_async_ref_t reference,
-	mach_msg_type_number_t referenceCnt,
-	int selector,
-	io_scalar_inband_t input,
-	mach_msg_type_number_t inputCnt,
-	io_struct_inband_t output,
-	mach_msg_type_number_t *outputCnt) DEPRECATED_ATTRIBUTE;
-
-kern_return_t
-io_async_method_scalarI_structureI(
-	mach_port_t connection,
-	mach_port_t wake_port,
-	io_async_ref_t reference,
-	mach_msg_type_number_t referenceCnt,
-	int selector,
-	io_scalar_inband_t input,
-	mach_msg_type_number_t inputCnt,
-	io_struct_inband_t inputStruct,
-	mach_msg_type_number_t inputStructCnt) DEPRECATED_ATTRIBUTE;
-
-kern_return_t
-io_async_method_structureI_structureO(
-	mach_port_t connection,
-	mach_port_t wake_port,
-	io_async_ref_t reference,
-	mach_msg_type_number_t referenceCnt,
-	int selector,
-	io_struct_inband_t input,
-	mach_msg_type_number_t inputCnt,
-	io_struct_inband_t output,
-	mach_msg_type_number_t *outputCnt) DEPRECATED_ATTRIBUTE;
-#endif // IOCONNECT_NO_32B_METHODS
-
-#endif /* defined(__LP64__) */
-
-__END_DECLS
-
-#endif /* ! _IOKIT_IOKITLIB_H */
diff --git a/external/ios-headers/IOKit/IOMessage.h b/external/ios-headers/IOKit/IOMessage.h
deleted file mode 100755
index 4a571b9..0000000
--- a/external/ios-headers/IOKit/IOMessage.h
+++ /dev/null
@@ -1,220 +0,0 @@
-/*
- * Copyright (c) 1998-2000 Apple Computer, Inc. All rights reserved.
- *
- * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
- * 
- * This file contains Original Code and/or Modifications of Original Code
- * as defined in and that are subject to the Apple Public Source License
- * Version 2.0 (the 'License'). You may not use this file except in
- * compliance with the License. The rights granted to you under the License
- * may notificationused to create, or enable the creation or redistribution of,
- * unlawful or unlicensed copies of an Apple operating system, or to
- * circumvent, violate, or enable the circumvention or violation of, any
- * terms of an Apple operating system software license agreement.
- * 
- * Please obtain a copy of the License at
- * http://www.opensource.apple.com/apsl/ and read it before using this file.
- * 
- * The Original Code and all software distributed under the License are
- * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
- * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
- * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
- * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
- * Please see the License for the specific language governing rights and
- * limitations under the License.
- * 
- * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
- */
-
-#ifndef __IOKIT_IOMESSAGE_H
-#define __IOKIT_IOMESSAGE_H
-
-#include <IOKit/IOReturn.h>
-#include <IOKit/IOTypes.h>
-
-/*!
- * @header IOMessage.h
- *
- * Defines message type constants for several IOKit messaging API's.
- *
- */
-
-typedef UInt32 IOMessage;
-
-#define iokit_common_msg(message)          (UInt32)(sys_iokit|sub_iokit_common|message)
-#define iokit_family_msg(sub,message)      (UInt32)(sys_iokit|sub|message)
-
-/*! 
- * @defined         iokit_vendor_specific_msg
- * @discussion      iokit_vendor_specific_msg passes messages in the sub_iokit_vendor_specific
- *                  subsystem. It can be used to generate messages that are used for private 
- *                  communication between vendor specific code with the IOService::message() etc. APIs.
- */
-#define iokit_vendor_specific_msg(message) (UInt32)(sys_iokit|sub_iokit_vendor_specific|message)
-
-#define kIOMessageServiceIsTerminated      iokit_common_msg(0x010)
-#define kIOMessageServiceIsSuspended       iokit_common_msg(0x020)
-#define kIOMessageServiceIsResumed         iokit_common_msg(0x030)
-
-#define kIOMessageServiceIsRequestingClose iokit_common_msg(0x100)
-#define kIOMessageServiceIsAttemptingOpen  iokit_common_msg(0x101)
-#define kIOMessageServiceWasClosed         iokit_common_msg(0x110)
-
-#define kIOMessageServiceBusyStateChange   iokit_common_msg(0x120)
-
-#define kIOMessageConsoleSecurityChange    iokit_common_msg(0x128)
-
-#define kIOMessageServicePropertyChange    iokit_common_msg(0x130)
-
-#define kIOMessageCopyClientID             iokit_common_msg(0x330)
-
-#define kIOMessageSystemCapabilityChange   iokit_common_msg(0x340)
-#define kIOMessageDeviceSignaledWakeup     iokit_common_msg(0x350)
-
-
-/*!
- * @defined         kIOMessageDeviceWillPowerOff
- * @discussion      Indicates the device is about to move to a lower power state.
- *                  Sent to IOKit interest notification clients of type <code>kIOAppPowerStateInterest</code>
- *                  and <code>kIOGeneralInterest</code>.
- */
-#define kIOMessageDeviceWillPowerOff       iokit_common_msg(0x210)
-
-/*!
- * @defined         kIOMessageDeviceHasPoweredOn
- * @discussion      Indicates the device has just moved to a higher power state.
- *                  Sent to IOKit interest notification clients of type <code>kIOAppPowerStateInterest</code>
- *                  and <code>kIOGeneralInterest</code>.
- */
-#define kIOMessageDeviceHasPoweredOn       iokit_common_msg(0x230)
-
-/*! @group          In-kernel system shutdown and restart notifications
- */
-
-/*!
- * @defined         kIOMessageSystemWillPowerOff
- * @discussion      Indicates an imminent system shutdown. Recipients have a limited 
- *                  amount of time to respond, otherwise the system will timeout and 
- *                  shutdown even without a response.
- *                  Delivered to in-kernel IOKit drivers via <code>IOService::systemWillShutdown()</code>, 
- *                  and to clients of <code>registerPrioritySleepWakeInterest()</code>.
- *                  Never delivered to user space notification clients.
- */
-#define kIOMessageSystemWillPowerOff       iokit_common_msg(0x250)
-
-/*!
- * @defined         kIOMessageSystemWillRestart
- * @discussion      Indicates an imminent system restart. Recipients have a limited 
- *                  amount of time to respond, otherwise the system will timeout and 
- *                  restart even without a response.
- *                  Delivered to in-kernel IOKit drivers via <code>IOService::systemWillShutdown()</code>, 
- *                  and to clients of <code>registerPrioritySleepWakeInterest()</code>.
- *                  Never delivered to user space notification clients.
- */
-#define kIOMessageSystemWillRestart        iokit_common_msg(0x310)
-
-/*!
- * @defined         kIOMessageSystemPagingOff
- * @discussion      Indicates an imminent system shutdown, paging device now unavailable.
- *					Recipients have a limited amount of time to respond, otherwise the
- *					system will timeout and shutdown even without a response.
- *                  Delivered to clients of <code>registerPrioritySleepWakeInterest()</code>.
- *                  Never delivered to user space notification clients.
- */
-#define kIOMessageSystemPagingOff       iokit_common_msg(0x255)
-
-
-/*! @group          System sleep and wake notifications
- */
-
-/*!
- * @defined         kIOMessageCanSystemSleep
- * @discussion      Announces/Requests permission to proceed to system sleep.
- *                  Delivered to in-kernel IOKit drivers via <code>kIOGeneralInterest</code>
- *                  and <code>kIOPriorityPowerStateInterest</code>.
- *                  Delivered to user clients of <code>IORegisterForSystemPower</code>.
- */
-#define kIOMessageCanSystemSleep           iokit_common_msg(0x270)
-
-/*!
- * @defined         kIOMessageSystemWillNotSleep
- * @discussion      Announces that the system has retracted a previous attempt to sleep; 
- *                  it follows <code>kIOMessageCanSystemSleep</code>.
- *                  Delivered to in-kernel IOKit drivers via <code>kIOGeneralInterest</code>
- *                  and <code>kIOPriorityPowerStateInterest</code>.
- *                  Delivered to user clients of <code>IORegisterForSystemPower</code>.
- */
-#define kIOMessageSystemWillNotSleep       iokit_common_msg(0x290)
-
-/*!
- * @defined         kIOMessageSystemWillSleep
- * @discussion      Announces that sleep is beginning.
- *                  Delivered to in-kernel IOKit drivers via <code>kIOGeneralInterest</code>
- *                  and <code>kIOPriorityPowerStateInterest</code>.
- *                  Delivered to user clients of <code>IORegisterForSystemPower</code>.
- */
-#define kIOMessageSystemWillSleep          iokit_common_msg(0x280)
-
-/*!
- * @defined         kIOMessageSystemWillPowerOn
- * @discussion      Announces that the system is beginning to power the device tree; most 
- *                  devices are unavailable at this point..
- *                  Delivered to in-kernel IOKit drivers via <code>kIOGeneralInterest</code>
- *                  and <code>kIOPriorityPowerStateInterest</code>.
- *                  Delivered to user clients of <code>IORegisterForSystemPower</code>.
- */
-#define kIOMessageSystemWillPowerOn        iokit_common_msg(0x320)
-
-/*!
- * @defined         kIOMessageSystemHasPoweredOn
- * @discussion      Announces that the system and its devices have woken up.
- *                  Delivered to in-kernel IOKit drivers via <code>kIOGeneralInterest</code>
- *                  and <code>kIOPriorityPowerStateInterest</code>.
- *                  Delivered to user clients of <code>IORegisterForSystemPower</code>.
- */
-#define kIOMessageSystemHasPoweredOn       iokit_common_msg(0x300)
-
-/*! @group          Unused and deprecated notifications
- */
-
-/*! 
- * @defined         kIOMessageCanDevicePowerOff
- * @discussion      Delivered to <code>kIOAppPowerStateInterest</code> clients of 
- *                  devices that implement their own idle timeouts.
- *                  This message type is almost never used.
- */
-#define kIOMessageCanDevicePowerOff        iokit_common_msg(0x200)
-
-/*! 
- * @defined         kIOMessageDeviceWillNotPowerOff
- * @discussion      This IOKit interest notification is largely unused; 
- *                  it's not very interesting.
- */
-#define kIOMessageDeviceWillNotPowerOff    iokit_common_msg(0x220)
-
-/*! 
- * @defined         kIOMessageSystemWillNotPowerOff
- * @deprecated      This IOKit message is unused.
- */
-#define kIOMessageSystemWillNotPowerOff    iokit_common_msg(0x260)
-
-/*!
- * @defined         kIOMessageCanSystemPowerOff
- * @deprecated      This IOKit message is unused.
- */
-#define kIOMessageCanSystemPowerOff        iokit_common_msg(0x240)
-
-/*!
- * @defined         kIOMessageDeviceWillPowerOn
- * @discussion      IOService power mgt does not send kIOMessageDeviceWillPowerOn.
- */
-#define kIOMessageDeviceWillPowerOn        iokit_common_msg(0x215)
-
-/*!
- * @defined         kIOMessageDeviceHasPoweredOff
- * @discussion      IOService power mgt does not send kIOMessageDeviceHasPoweredOff.
- */
-#define kIOMessageDeviceHasPoweredOff      iokit_common_msg(0x225)
-
-
-#endif /* ! __IOKIT_IOMESSAGE_H */
diff --git a/external/ios-headers/IOKit/IOReturn.h b/external/ios-headers/IOKit/IOReturn.h
deleted file mode 100755
index 38811b6..0000000
--- a/external/ios-headers/IOKit/IOReturn.h
+++ /dev/null
@@ -1,137 +0,0 @@
-/*
- * Copyright (c) 1998-2002 Apple Computer, Inc. All rights reserved.
- *
- * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
- * 
- * This file contains Original Code and/or Modifications of Original Code
- * as defined in and that are subject to the Apple Public Source License
- * Version 2.0 (the 'License'). You may not use this file except in
- * compliance with the License. The rights granted to you under the License
- * may not be used to create, or enable the creation or redistribution of,
- * unlawful or unlicensed copies of an Apple operating system, or to
- * circumvent, violate, or enable the circumvention or violation of, any
- * terms of an Apple operating system software license agreement.
- * 
- * Please obtain a copy of the License at
- * http://www.opensource.apple.com/apsl/ and read it before using this file.
- * 
- * The Original Code and all software distributed under the License are
- * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
- * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
- * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
- * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
- * Please see the License for the specific language governing rights and
- * limitations under the License.
- * 
- * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
- */
-/*
- * HISTORY
- */
- 
-/*
- * Core IOReturn values. Others may be family defined.
- */
-
-#ifndef __IOKIT_IORETURN_H
-#define __IOKIT_IORETURN_H
-
-#ifdef __cplusplus
-extern "C" {
-#endif
-
-#include <mach/error.h>
-
-typedef	kern_return_t		IOReturn;
-
-#ifndef sys_iokit
-#define sys_iokit                         err_system(0x38)
-#endif /* sys_iokit */
-#define sub_iokit_common                  err_sub(0)
-#define sub_iokit_usb                     err_sub(1)
-#define sub_iokit_firewire                err_sub(2)
-#define sub_iokit_block_storage           err_sub(4)
-#define sub_iokit_graphics                err_sub(5)
-#define sub_iokit_networking		  err_sub(6)
-#define sub_iokit_bluetooth               err_sub(8)
-#define sub_iokit_pmu                     err_sub(9)
-#define sub_iokit_acpi                    err_sub(10)
-#define sub_iokit_smbus                   err_sub(11)
-#define sub_iokit_ahci                    err_sub(12)
-#define sub_iokit_powermanagement         err_sub(13)
-//#define sub_iokit_hidsystem             err_sub(14)
-#define sub_iokit_scsi                    err_sub(16)
-//#define sub_iokit_pccard                err_sub(21)
-
-#define sub_iokit_vendor_specific         err_sub(-2)
-#define sub_iokit_reserved                err_sub(-1)
-
-#define	iokit_common_err(return)          (sys_iokit|sub_iokit_common|return)
-#define	iokit_family_err(sub,return)      (sys_iokit|sub|return)
-#define iokit_vendor_specific_err(return) (sys_iokit|sub_iokit_vendor_specific|return)
-
-#define kIOReturnSuccess         KERN_SUCCESS            // OK
-#define kIOReturnError           iokit_common_err(0x2bc) // general error 	
-#define kIOReturnNoMemory        iokit_common_err(0x2bd) // can't allocate memory 
-#define kIOReturnNoResources     iokit_common_err(0x2be) // resource shortage 
-#define kIOReturnIPCError        iokit_common_err(0x2bf) // error during IPC 
-#define kIOReturnNoDevice        iokit_common_err(0x2c0) // no such device 
-#define kIOReturnNotPrivileged   iokit_common_err(0x2c1) // privilege violation 
-#define kIOReturnBadArgument     iokit_common_err(0x2c2) // invalid argument 
-#define kIOReturnLockedRead      iokit_common_err(0x2c3) // device read locked 
-#define kIOReturnLockedWrite     iokit_common_err(0x2c4) // device write locked 
-#define kIOReturnExclusiveAccess iokit_common_err(0x2c5) // exclusive access and
-                                                         //   device already open 
-#define kIOReturnBadMessageID    iokit_common_err(0x2c6) // sent/received messages
-                                                         //   had different msg_id
-#define kIOReturnUnsupported     iokit_common_err(0x2c7) // unsupported function 
-#define kIOReturnVMError         iokit_common_err(0x2c8) // misc. VM failure 
-#define kIOReturnInternalError   iokit_common_err(0x2c9) // internal error 
-#define kIOReturnIOError         iokit_common_err(0x2ca) // General I/O error 
-//#define kIOReturn???Error      iokit_common_err(0x2cb) // ??? 
-#define kIOReturnCannotLock      iokit_common_err(0x2cc) // can't acquire lock
-#define kIOReturnNotOpen         iokit_common_err(0x2cd) // device not open 
-#define kIOReturnNotReadable     iokit_common_err(0x2ce) // read not supported 
-#define kIOReturnNotWritable     iokit_common_err(0x2cf) // write not supported 
-#define kIOReturnNotAligned      iokit_common_err(0x2d0) // alignment error 
-#define kIOReturnBadMedia        iokit_common_err(0x2d1) // Media Error 
-#define kIOReturnStillOpen       iokit_common_err(0x2d2) // device(s) still open 
-#define kIOReturnRLDError        iokit_common_err(0x2d3) // rld failure 
-#define kIOReturnDMAError        iokit_common_err(0x2d4) // DMA failure 
-#define kIOReturnBusy            iokit_common_err(0x2d5) // Device Busy 
-#define kIOReturnTimeout         iokit_common_err(0x2d6) // I/O Timeout 
-#define kIOReturnOffline         iokit_common_err(0x2d7) // device offline 
-#define kIOReturnNotReady        iokit_common_err(0x2d8) // not ready 
-#define kIOReturnNotAttached     iokit_common_err(0x2d9) // device not attached 
-#define kIOReturnNoChannels      iokit_common_err(0x2da) // no DMA channels left
-#define kIOReturnNoSpace         iokit_common_err(0x2db) // no space for data 
-//#define kIOReturn???Error      iokit_common_err(0x2dc) // ??? 
-#define kIOReturnPortExists      iokit_common_err(0x2dd) // port already exists
-#define kIOReturnCannotWire      iokit_common_err(0x2de) // can't wire down 
-                                                         //   physical memory
-#define kIOReturnNoInterrupt     iokit_common_err(0x2df) // no interrupt attached
-#define kIOReturnNoFrames        iokit_common_err(0x2e0) // no DMA frames enqueued
-#define kIOReturnMessageTooLarge iokit_common_err(0x2e1) // oversized msg received
-                                                         //   on interrupt port
-#define kIOReturnNotPermitted    iokit_common_err(0x2e2) // not permitted
-#define kIOReturnNoPower         iokit_common_err(0x2e3) // no power to device
-#define kIOReturnNoMedia         iokit_common_err(0x2e4) // media not present
-#define kIOReturnUnformattedMedia iokit_common_err(0x2e5)// media not formatted
-#define kIOReturnUnsupportedMode iokit_common_err(0x2e6) // no such mode
-#define kIOReturnUnderrun        iokit_common_err(0x2e7) // data underrun
-#define kIOReturnOverrun         iokit_common_err(0x2e8) // data overrun
-#define kIOReturnDeviceError	 iokit_common_err(0x2e9) // the device is not working properly!
-#define kIOReturnNoCompletion	 iokit_common_err(0x2ea) // a completion routine is required
-#define kIOReturnAborted	 iokit_common_err(0x2eb) // operation aborted
-#define kIOReturnNoBandwidth	 iokit_common_err(0x2ec) // bus bandwidth would be exceeded
-#define kIOReturnNotResponding	 iokit_common_err(0x2ed) // device not responding
-#define kIOReturnIsoTooOld	 iokit_common_err(0x2ee) // isochronous I/O request for distant past!
-#define kIOReturnIsoTooNew	 iokit_common_err(0x2ef) // isochronous I/O request for distant future
-#define kIOReturnNotFound        iokit_common_err(0x2f0) // data was not found
-#define kIOReturnInvalid         iokit_common_err(0x1)   // should never be seen
-
-#ifdef __cplusplus
-}
-#endif
-
-#endif /* ! __IOKIT_IORETURN_H */
diff --git a/external/ios-headers/IOKit/IOTypes.h b/external/ios-headers/IOKit/IOTypes.h
deleted file mode 100755
index 473797a..0000000
--- a/external/ios-headers/IOKit/IOTypes.h
+++ /dev/null
@@ -1,250 +0,0 @@
-/*
- * Copyright (c) 1998-2006 Apple Computer, Inc. All rights reserved.
- *
- * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
- * 
- * This file contains Original Code and/or Modifications of Original Code
- * as defined in and that are subject to the Apple Public Source License
- * Version 2.0 (the 'License'). You may not use this file except in
- * compliance with the License. The rights granted to you under the License
- * may not be used to create, or enable the creation or redistribution of,
- * unlawful or unlicensed copies of an Apple operating system, or to
- * circumvent, violate, or enable the circumvention or violation of, any
- * terms of an Apple operating system software license agreement.
- * 
- * Please obtain a copy of the License at
- * http://www.opensource.apple.com/apsl/ and read it before using this file.
- * 
- * The Original Code and all software distributed under the License are
- * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
- * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
- * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
- * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
- * Please see the License for the specific language governing rights and
- * limitations under the License.
- * 
- * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
- */
-#ifndef	__IOKIT_IOTYPES_H
-#define __IOKIT_IOTYPES_H
-
-#ifndef IOKIT
-#define IOKIT 1
-#endif /* !IOKIT */
-
-#if KERNEL
-#include <IOKit/system.h>
-#else
-#include <mach/message.h>
-#include <mach/vm_types.h>
-#endif
-
-#include "IOReturn.h"
-
-#ifdef __cplusplus
-extern "C" {
-#endif
-
-#ifndef	NULL
-#if defined (__cplusplus)
-#define	NULL	0
-#else
-#define NULL ((void *)0)
-#endif
-#endif
-	
-/*
- * Simple data types.
- */
-#ifndef __MACTYPES__	/* CF MacTypes.h */
-#ifndef __TYPES__	/* guess... Mac Types.h */
-
-#include <stdbool.h>
-#include <libkern/OSTypes.h>
-
-#endif /* __TYPES__ */
-#endif /* __MACTYPES__ */
-
-#if KERNEL
-#include <libkern/OSBase.h>
-#endif
-
-typedef UInt32		IOOptionBits;
-typedef SInt32		IOFixed;
-typedef UInt32		IOVersion;
-typedef UInt32		IOItemCount;
-typedef UInt32  	IOCacheMode;
-
-typedef UInt32	 	IOByteCount32;
-typedef UInt64	 	IOByteCount64;
-
-typedef UInt32	IOPhysicalAddress32;
-typedef UInt64	IOPhysicalAddress64;
-typedef UInt32	IOPhysicalLength32;
-typedef UInt64	IOPhysicalLength64;
-
-#ifdef __LP64__
-typedef mach_vm_address_t	IOVirtualAddress;
-#else
-typedef vm_address_t		IOVirtualAddress;
-#endif
-
-#if defined(__LP64__) && defined(KERNEL)
-typedef IOByteCount64		IOByteCount;
-#else
-typedef IOByteCount32	 	IOByteCount;
-#endif
-
-typedef IOVirtualAddress    IOLogicalAddress;
-
-#if defined(__LP64__) && defined(KERNEL)
-
-typedef IOPhysicalAddress64	 IOPhysicalAddress;
-typedef IOPhysicalLength64	 IOPhysicalLength;
-#define IOPhysical32( hi, lo )		((UInt64) lo + ((UInt64)(hi) << 32))
-#define IOPhysSize	64
-
-#else
-
-typedef IOPhysicalAddress32	 IOPhysicalAddress;
-typedef IOPhysicalLength32	 IOPhysicalLength;
-#define IOPhysical32( hi, lo )		(lo)
-#define IOPhysSize	32
-
-#endif
-
-
-typedef struct
-{
-    IOPhysicalAddress	address;
-    IOByteCount		length;
-} IOPhysicalRange;
-
-typedef struct 
-{
-    IOVirtualAddress	address;
-    IOByteCount		length;
-} IOVirtualRange;
-
-#ifdef __LP64__
-typedef IOVirtualRange	IOAddressRange;
-#else /* !__LP64__ */
-typedef struct 
-{
-    mach_vm_address_t	address;
-    mach_vm_size_t	length;
-} IOAddressRange;
-#endif /* !__LP64__ */
-
-/*
- * Map between #defined or enum'd constants and text description.
- */
-typedef struct {
-	int value;
-	const char *name;
-} IONamedValue;
-
-
-/*
- * Memory alignment -- specified as a power of two.
- */
-typedef unsigned int	IOAlignment;
-
-#define IO_NULL_VM_TASK		((vm_task_t)0)
-
-
-/*
- * Pull in machine specific stuff.
- */
-
-//#include <IOKit/machine/IOTypes.h>
-
-#ifndef MACH_KERNEL
-
-#ifndef __IOKIT_PORTS_DEFINED__
-#define __IOKIT_PORTS_DEFINED__
-#ifdef KERNEL
-typedef struct OSObject * io_object_t;
-#else /* KERNEL */
-typedef mach_port_t	io_object_t;
-#endif /* KERNEL */
-#endif /* __IOKIT_PORTS_DEFINED__ */
-
-#include <device/device_types.h>
-
-typedef io_object_t	io_connect_t;
-typedef io_object_t	io_enumerator_t;
-typedef io_object_t	io_iterator_t;
-typedef io_object_t	io_registry_entry_t;
-typedef io_object_t	io_service_t;
-
-#define	IO_OBJECT_NULL	((io_object_t) 0)
-
-#endif /* MACH_KERNEL */
-
-// IOConnectMapMemory memoryTypes
-enum {
-    kIODefaultMemoryType	= 0
-};
-
-enum {
-    kIODefaultCache		= 0,
-    kIOInhibitCache		= 1,
-    kIOWriteThruCache		= 2,
-    kIOCopybackCache		= 3,
-    kIOWriteCombineCache	= 4
-};
-
-// IOMemory mapping options
-enum {
-    kIOMapAnywhere		= 0x00000001,
-
-    kIOMapCacheMask		= 0x00000700,
-    kIOMapCacheShift		= 8,
-    kIOMapDefaultCache		= kIODefaultCache      << kIOMapCacheShift,
-    kIOMapInhibitCache		= kIOInhibitCache      << kIOMapCacheShift,
-    kIOMapWriteThruCache	= kIOWriteThruCache    << kIOMapCacheShift,
-    kIOMapCopybackCache		= kIOCopybackCache     << kIOMapCacheShift,
-    kIOMapWriteCombineCache	= kIOWriteCombineCache << kIOMapCacheShift,
-
-    kIOMapUserOptionsMask	= 0x00000fff,
-
-    kIOMapReadOnly		= 0x00001000,
-
-    kIOMapStatic		= 0x01000000,
-    kIOMapReference		= 0x02000000,
-    kIOMapUnique		= 0x04000000
-#ifdef XNU_KERNEL_PRIVATE
-    , kIOMap64Bit		= 0x08000000
-#endif
-};
-
-/*! @enum Scale Factors
-    @discussion Used when a scale_factor parameter is required to define a unit of time.
-    @constant kNanosecondScale Scale factor for nanosecond based times.
-    @constant kMicrosecondScale Scale factor for microsecond based times.
-    @constant kMillisecondScale Scale factor for millisecond based times.
-    @constant kTickScale Scale factor for the standard (100Hz) tick.
-    @constant kSecondScale Scale factor for second based times. */
-
-enum {
-    kNanosecondScale  = 1,
-    kMicrosecondScale = 1000,
-    kMillisecondScale = 1000 * 1000,
-    kSecondScale      = 1000 * 1000 * 1000,
-    kTickScale        = (kSecondScale / 100)
-};
-
-/* compatibility types */
-
-#ifndef KERNEL
-
-typedef unsigned int IODeviceNumber;
-
-#endif
-
-#ifdef __cplusplus
-}
-#endif
-
-#endif /* ! __IOKIT_IOTYPES_H */
diff --git a/external/ios-headers/IOKit/OSKext.h b/external/ios-headers/IOKit/OSKext.h
deleted file mode 100755
index 2da9b41..0000000
--- a/external/ios-headers/IOKit/OSKext.h
+++ /dev/null
@@ -1,2752 +0,0 @@
-/*
- * Copyright (c) 2008 Apple Inc. All rights reserved.
- *
- * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
- * 
- * This file contains Original Code and/or Modifications of Original Code
- * as defined in and that are subject to the Apple Public Source License
- * Version 2.0 (the 'License'). You may not use this file except in
- * compliance with the License. The rights granted to you under the License
- * may not be used to create, or enable the creation or redistribution of,
- * unlawful or unlicensed copies of an Apple operating system, or to
- * circumvent, violate, or enable the circumvention or violation of, any
- * terms of an Apple operating system software license agreement.
- * 
- * Please obtain a copy of the License at
- * http://www.opensource.apple.com/apsl/ and read it before using this file.
- * 
- * The Original Code and all software distributed under the License are
- * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
- * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
- * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
- * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
- * Please see the License for the specific language governing rights and
- * limitations under the License.
- * 
- * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
- */
-#ifndef __OSKEXT_H__
-#define __OSKEXT_H__
-
-#include <sys/cdefs.h>
-
-__BEGIN_DECLS
-
-#include <CoreFoundation/CoreFoundation.h>
-//#include <System/libkern/OSReturn.h>
-//#include <System/libkern/OSKextLib.h>
-//#include <System/libkern/OSKextLibPrivate.h>
-#include <mach/mach.h>
-#include <mach-o/arch.h>
-
-// xxx - should I use "Clear" everywhere I use "Flush"
-
-/*!
- * @header
- * @ignore CF_EXPORT
- * @ignore 
- *
- * The OSKext library provides a comprehensive interface for creating,
- * examining, and loading kernel extensions (kexts).
- *
- * <b>NOTICE:</b> This library is neither thread-safe nor garbage-collection
- * safe. You must use your own locking with threads sharing access to OSKext.
- * You can not use this library in an application with garbage collection.
- */
- 
-#pragma mark Types and Constants
-/*******************************************************************************
-* Types and Constants
-*******************************************************************************/
-
-/*!
- * @typedef  OSKextRef
- * @abstract A reference to a kernel extension object.
- *
- * @discussion
- * The OSKextRef type refers to a KXKext object, which represents a kernel
- * extension bundle on disk, from an archive, or loaded into the kernel.
- * OSKext is an opaque type that defines the characteristics and behavior of
- * OSKext objects.
- *
- * The kernel counterpart of OSKext is the OSKext libkern C++ class.
- */
-typedef struct __OSKext * OSKextRef
-                ;
-
-#define kOSKextBundleExtension  "kext"
-#define kOSKextMkextExtension   "mkext"
-
-/*!
- * @typedef OSKextDiagnosticsFlags
- * @constant kOSKextDiagnosticsFlagAll
- * @constant kOSKextDiagnosticsFlagValidation
- * @constant kOSKextDiagnosticsFlagAuthentication
- * @constant kOSKextDiagnosticsFlagDependencies
- * @constant kOSKextDiagnosticsFlagWarnings
- */
-enum {
-    kOSKextDiagnosticsFlagNone           = (UInt32)       0x0U,
-
-    kOSKextDiagnosticsFlagValidation     = (UInt32)       0x1U,
-    kOSKextDiagnosticsFlagAuthentication = (UInt32)       0x2U,
-    kOSKextDiagnosticsFlagDependencies   = (UInt32)       0x4U,
-    kOSKextDiagnosticsFlagWarnings       = (UInt32)       0x8U,
-
-    kOSKextDiagnosticsFlagAll            = (UInt32)0xFFFFFFFFU,
-};
-typedef UInt32 OSKextDiagnosticsFlags;
-typedef UInt64 OSKextLogFlags;
-typedef SInt64 OSKextVersion;
-typedef kern_return_t OSReturn;
-
-typedef uint8_t OSKextExcludeLevel;
-#define kOSKextExcludeNone  (0)
-#define kOSKextExcludeKext  (1)
-#define kOSKextExcludeAll   (2)
-
-/* Top-level keys for diagnostics dicts. See @link OSKextCopyDiagnostics@/link.
- */
-// xxx - not sure we need to include these, but it's convenient
-const CFStringRef kOSKextDiagnosticsValidationKey;
-const CFStringRef kOSKextDiagnosticsAuthenticationKey;
-const CFStringRef kOSKextDiagnosticsLinkLoadKey;
-const CFStringRef kOSKextDiagnosticsDependenciesKey;
-const CFStringRef kOSKextDiagnosticsWarningsKey;
-
-#pragma mark Basic CF Functions
-/*********************************************************************
-* Basic CF Functions
-*********************************************************************/
-
-/*!
- * @function OSKextGetTypeID
- * @abstract Returns the type identifier for the OSKext opaque type.
- *
- * @result   The type identifier for the OSKext opaque type.
- */
-CF_EXPORT CFTypeID
-OSKextGetTypeID(void)
-                ;
-
-#pragma mark Module Configuration
-/*********************************************************************
-* Module Configuration
-*********************************************************************/
-
-/*!
- * @function OSKextSetArchitecture
- * @abstract Sets the architecture used for operations on kexts.
- *
- * @param    anArch
- * An <code>NXArchInfo</code> pointer with cputype/subtype or name set.
- * Ownership remains with the caller.
- * Pass <code>NULL</code> to set the architecture to taht of the running kernel.
- *  
- * @result
- * <code>true</code> if the architecture was set as desired,
- * <code>false</code> if <code>anArch</code> was not found;
- * if <code>false</code>, the architecture will now be that
- * of the running kernel.
- * xxx - should it just be left unchanged instead?
- *
- * @discussion
- * The kext library uses this architecture for any architecture-specific
- * operation, such as property lookups
- * (see @link OSKextGetValueForInfoDictionaryKey@/link),
- * dependency resolution, executable access during validation and linking.
- * The kext architecture is initially that of the running kernel (not of
- * the user-space process).
- *
- * This function looks up the system <code>NXArchInfo</code> struct
- * for the struct passed in, first using the cputype/subtype, and if that fails,
- * the name. You can therefore use this function to set the architecture
- * from an architecture name alone by passing an <code>NXArchInfo</code> struct
- * with the desired name,
- * but the cputype/subtype set to CPU_TYPE_ANY and CPU_SUBTYPE_ANY.
- *
- * Changing the kext architecture causes all kexts to flush their load info
- * and dependencies with @link OSKextFlushLoadInfo@/link.
- */
-// xxx - should this also have a flushDependenciesFlag?
-CF_EXPORT Boolean
-OSKextSetArchitecture(const NXArchInfo * archInfo)
-                ;
-
-/*!
- * @function OSKextGetArchitecture
- * @abstract Gets the architecutre used for operations on kexts.
- *
- * @result
- * The architecture used for operations on kexts.
- * The caller does not own the returned pointer and should not free it.
- *
- * @discussion
- * The kext library uses this architecture for any architecture-specific
- * operation, such as property lookups
- * (see @link OSKextGetValueForInfoDictionaryKey@/link),
- * dependency resolution, executable access during validation and linking.
- * The kext architecture is initially that of the running kernel (not of
- * the user-space process).
- */
-CF_EXPORT const NXArchInfo *
-OSKextGetArchitecture(void)
-                ;
-
-/*!
- * @function OSKextGetRunningKernelArchitecture
- * @abstract Returns the architecture of the running kernel.
- *
- * @result
- * The architecture of the running kernel.
- * The caller does not own the returned pointer and should not free it.
- *
- * @discussion
- * This function consults the kernel task and returns a pointer to the
- * <code>NXArchInfo</code> struct representing its architecture.
- * The running kernel's architecture does not necessarily match that
- * of user space tasks (for example, a 32-bit user space task could be
- * running with a 64-bit kernel, or vice-versa).
- */
-CF_EXPORT const NXArchInfo *
-OSKextGetRunningKernelArchitecture(void)
-                ;
-
-/*! @function OSKextGetLogFlags 
- @param kext The kext to get the log flags. Pass NULL to get the global flag. */
-CF_EXPORT OSKextLogFlags OSKextGetLogFlags(OSKextRef kext);
-/*! @function OSKextSetLogFlags */
-CF_EXPORT void OSKextSetLogFlags(OSKextRef kext, OSKextLogFlags logFlags);
-
-/*!
- * @typedef OSKextLogFunction
- * @abstract
- * Prototype of a callback function used to log messages from the library.
- *
- * @param    format      A printf(3) style format string.
- *
- * @discussion
- * The default log function simply prints to <code>stderr</code
- * if <code>msgLogSpec</code> has any bits set.
- * If you set the log function to <code>NULL</code>,
- * no log messages will be printed.
- *
- * Log messages have no trailing newline, to accommodate system log facilities.
- */
-/* xxx - no CF_EXPORT, compiler dies */
-typedef void (*OSKextLogFunction)(
-    OSKextLogFlags   flags,
-    const char     * format,
-    ...)
-                ;
-
-/*!
- * @function OSKextSetLogFunction
- * @abstract Sets the function called to log messages.
- *
- * @param    funct  The log function to set.
- *
- * @discussion
- * The default log function simply prints to stderr. If you set the
- * log function to <code>NULL</code>, no log messages will be printed.
- *
- * Log messages have no trailing newline, to accommodate system log facilities.
- */
-CF_EXPORT void
-OSKextSetLogFunction(OSKextLogFunction func)
-                ;
-
-/*!
- * @function OSKextSetSimulatedSafeBoot
- * @abstract Sets whether safe boot mode is simulated in the library.
- *
- * @param    flag  <code>true</code> to simulate safe boot mode,
- *                 <code>false</code> to not simulate.
- *
- * @discussion
- * Kexts without a valid OSBundleRequired property are not allowed to load
- * by the kernel when the system has started in safe boot mode.
- * If you turn on simulated safe boot, the kext library can
- * catch non-loadable kexts and present appropriate diagnostics.
- */
-CF_EXPORT void
-OSKextSetSimulatedSafeBoot(Boolean flag)
-                ;
-
-/*!
- * @function OSKextGetSimulatedSafeBoot
- * @abstract Returns whether safe boot mode is simulated in the library.
- *
- * @result
- * <code>true</code> if safe boot mode is being simulated,
- * <code>false</code> if not.
- *
- * @discussion
- * Kexts without a valid OSBundleRequired property are not allowed to load
- * by the kernel when the system has started in safe boot mode.
- * When simulated safe boot is on, the kext library can
- * catch non-loadable kexts and present appropriate diagnostics.
- */
-CF_EXPORT Boolean
-OSKextGetSimulatedSafeBoot(void)
-                ;
-
-/*!
- * @function OSKextGetActualSafeBoot
- * @abstract Returns whether safe boot mode is active.
- *
- * @result
- * <code>true</code> if safe boot mode is active,
- * <code>false</code> if not.
- *
- * @discussion
- * Kexts without a valid OSBundleRequired property are not allowed to load
- * by the kernel when the system has started in safe boot mode.
- * The kext library ignores actual safe boot mode, leaving decisions
- * regarding safe boot to the kernel.
- * If you want to analyze kexts in safe boot mode using the library,
- * call @link OSKextSetSimulatedSafeBoot@/link.
- */
-// xxx - we used to disallow kexts w/debug-log flags in safe boot, too
-CF_EXPORT Boolean
-OSKextGetActualSafeBoot(void)
-                ;
-
-/*!
- * @function OSKextGetSystemExtensionsFolderURLs
- * @abstract Returns the standard system extension folder URLs.
- *
- * @result
- * An array containing the standard system extension folder URLs.
- * Ownership follows the
- * @link //apple_ref/doc/uid/20001148-SW1 Get Rule@/link.
- *
- * @discussion
- * To open all the kexts normally considered for loading by the system,
- * pass the return value of this function to
- * @link OSKextCreateKextsFromURLs@/link.
- */
-CF_EXPORT CFArrayRef
-OSKextGetSystemExtensionsFolderURLs(void)
-                ;
-
-/*!
- * @function OSKextSetRecordsDiagnostics
- * @abstract Sets whether kexts record diagnostic information.
- *
- * @param   flags    Indicates which diagnostics to record.
- *
- * @discussion
- * The kext library can record diagnostic information for kexts as
- * problems are encountered. These diagnostics can consume a fair
- * amount of memory, and should be generated only when desired.
- * Recording of diagnostics is set to
- * @link kOSKextDiagnosticsFlagNone@/link by default.
- * Use this function to turn diagnostics recording off (or back on)
- * for particular diagnostic types.
- *
- * Turning on diagnostics does not calculate or recalculate
- * diagnostics. Call the various functions that operate on kexts
- * to begin accumulating diagnostics.
- *
- * Turning diagnostics off does not clear any existing diagnostics.
- * Use @link OSKextFlushDiagnostics@/link explicitly to clear
- * any diagnostics currently stored.
- *
- * See also @link OSKextCopyDiagnostics@/link,
- * @link OSKextValidate@/link,
- * @link OSKextAuthenticate@/link, and
- * @link OSKextResolveDependencies@/link.
- */
-// Could list a pile of see also's here....
-CF_EXPORT void
-OSKextSetRecordsDiagnostics(OSKextDiagnosticsFlags flags)
-                ;
-
-/*!
- * @function OSKextGetRecordsDiagnostics
- * @abstract
- * Returns what kinds of diagnostic information kexts record.
- *
- * @result
- * Flags indicating which types of diagnostics are currently
- * being recorded. You can bitwise-OR or -AND these with other flags
- * to add or remove diagnostics being recorded with
- * @link OSKextSetRecordsDiagnostics@/link.
- */
-CF_EXPORT OSKextDiagnosticsFlags
-OSKextGetRecordsDiagnostics(void)
-                ;
-
-
-/*!
- * @function OSKextSetUsesCaches
- * @abstract Sets whether the kext library uses cache files.
- *
- * @param   flag
- *          <code>true</code> to use caches,
- *          <code>false</code> to not use caches.
- *
- * @discussion
- * The kext library normally uses caches to speed up reading kexts from
- * the system extensions folders.
- * Use this function to turn off use of caches; this will cause reading
- * of kexts to be dramatically slower.
- *
- * See also @link OSKextGetUsesCaches@/link.
- */
-CF_EXPORT void
-OSKextSetUsesCaches(Boolean flag)
-                ;
-
-/*!
- * @function OSKextGetUsesCaches
- * @abstract
- * Returns whether the OSKext library uses cache files.
- *
- * @result
- * <code>true</code> if the library uses caches to speed up reading of kexts,
- * <code>false</code> if it doesn't.
- *
- * @discussion
- * The kext library normally uses caches to speed up reading kexts from
- * the system extensions folders.
- * Use this function to check whether the library is using caches.
- *
- * See also @link OSKextGetUsesCaches@/link.
- */
-CF_EXPORT Boolean
-OSKextGetUsesCaches(void)
-                ;
-
-#pragma mark Instance Management
-/*********************************************************************
-* Instance Management
-*********************************************************************/
-
-/*!
- * @function OSKextCreate
- * @abstract Read a single kext from an on-disk bundle, without plugins.
- *
- * @param    allocator
- *           The allocator to use to allocate memory for the new object.
- *           Pass <code>NULL</code> or <code>kCFAllocatorDefault</code>
- *           to use the current default allocator.
- * @param    anURL
- *           The location of the bundle for which to create an OSKext object.
- * @result
- * An OSKext object created from the bundle at anURL.
- * Ownership follows the
- * @link //apple_ref/doc/uid/20001148-103029 Create Rule@/link.
- *
- * Returns <code>NULL</code> if there was a memory allocation problem or
- * if the bundle doesn't exist at anURL (see Discussion).
- * May return an existing OSKext object with the reference count incremented.
- *
- * @discussion
- * Once a kext has been created, it is cached in memory; the kext bundle cache
- * is flushed only periodically. OSKextCreate does not check that a cached kext
- * bundle still exists in the filesystem. If a kext bundle is deleted
- * from the filesystem, it is therefore possible for OSKextCreate
- * to return a cached bundle that has actually been deleted.
- *
- * OSKext uses a CFBundle briefly during initialization, but in order
- * to save memory and allow re-reading of kext bundle contents
- * from disk, does not retain it. Applications can save further memory
- * by flushing info dictionaries so that they are read from disk again
- * when needed; see @link OSKextFlushInfoDictionary@/link.
- */
-CF_EXPORT OSKextRef
-OSKextCreate(
-    CFAllocatorRef allocator,
-    CFURLRef       anURL)
-                ;
-
-/*!
- * @function OSKextCreateKextsFromURL
- * @abstract Reads all kexts at an on-disk URL along with their plugins.
- *
- * @param    allocator
- *           The allocator to use to allocate memory for the new objects.
- *           Pass <code>NULL</code> or <code>kCFAllocatorDefault</code>
- *           to use the current default allocator.
- * @param    anURL       The URL to scan for kernel extensions.
- * @result
- * Returns an array containing the kext objects created,
- * or <code>NULL</code> on failure.
- *
- * @discussion
- * This function scans <code>anURL</code> for kexts.
- * If <code>anURL</code> represents a kext,
- * this function reads that kext and its plugins.
- * If <code>anURL</code> represents a non-kext directory,
- * this functions scans the directory's immediate contents for kext bundles
- * and their plugins. It does not scan recursively; only plugins one level
- * deep are read.
- *
- * If given an URL for a kext that is a plugin of another kext, this
- * function does not scan for further plugins.
- *
- * This function does not scan for or read mkext files. Use
- * @link OSKextCreateKextsFromMkextFile@/link to read an mkext file.
- *
- * See @link OSKextCreate OSKextCreate @/link for information
- * about kext object caching.
- */
-CFArrayRef OSKextCreateKextsFromURL(
-    CFAllocatorRef allocator,
-    CFURLRef anURL)
-                ;
-
-/*!
- * @function OSKextCreateKextsFromURLs
- * @abstract Reads all kexts at an array on-disk URLs along with their plugins.
- *
- * @param    allocator
- *           The allocator to use to allocate memory for the new objects.
- *           Pass <code>NULL</code> or <code>kCFAllocatorDefault</code>
- *           to use the current default allocator.
- * @param    arrayOfURLs The URLs to scan for kernel extensions.
- * @result
- * Returns an array containing the kext objects created,
- * or <code>NULL</code> on failure.
- *
- * @discussion
- * This function scans each URL in <code>arrayOfURLs</code> for kexts.
- * If a given URL represents a kext,
- * this function reads that kext and its plugins.
- * If the URL represents a non-kext directory, this functions scans the
- * directory's immediate contents for kext bundles and their plugins.
- * It does not scan recursively; only plugins one level deep are read.
- *
- * If given an URL for a kext that is a plugin of another kext, this
- * function does not scan for further plugins.
- *
- * This function does not scan for or read mkext files. Use
- * @link OSKextCreateKextsFromMkextFile@/link to read an mkext file.
- *
- * See @link OSKextCreate@/link for discussion about kext object caching.
- */
-CF_EXPORT CFArrayRef
-OSKextCreateKextsFromURLs(
-    CFAllocatorRef allocator,
-    CFArrayRef arrayOfURLs)
-                ;
-
-/*!
- * @function OSKextGetAllKexts
- * @abstract
- * Returns an array containing all of the kexts currently open in the application.
- *
- * @result
- * A CFArray object containing OSKext objects for each open kext
- * in the application. Ownership follows the
- * @link //apple_ref/doc/uid/20001148-SW1 Get Rule@/link.
- *
- * @discussion
- * This function is potentially expensive, so use with care.
- */
-CF_EXPORT CFArrayRef
-OSKextGetAllKexts(void)
-                ;
-
-/*! @function OSKextCopyKextsWithIdentifier */
-CF_EXPORT CFArrayRef OSKextCopyKextsWithIdentifier(CFStringRef bundleID);
-/*! @function OSKextGetKextsWithIdentifiers 
- @discussion Follows Create Rule.
- */
-CF_EXPORT CFArrayRef OSKextGetKextsWithIdentifiers(CFArrayRef bundleIDs);
-
-/*!
- * @function OSKextGetKextWithIdentifierAndVersion
- * @abstract
- * Locate a kext given its program-defined identifier and version.
- *
- * @param    aBundleID
- *           The identifier of the kext to locate.
- *           Note that identifier names are case-sensitive.
- * @param    aVersion
- *           The version of the kext to locate.
- * @result
- * An OSKext object, or <code>NULL</code> if the kext was not found.
- * Ownership follows the
- * @link //apple_ref/doc/uid/20001148-SW1 Get Rule@/link.
- *
- * @discussion
- * For a kext to be located using its identifier and version,
- * the kext object must have already been created.
- * See @link OSKextGetKextWithIdentifierAndVersion@/link for more.
- */
-// xxx - check on same-version ordering with folks
-CF_EXPORT OSKextRef
-OSKextGetKextWithIdentifierAndVersion(
-    CFStringRef aBundleID, OSKextVersion aVersion)
-                ;
-
-/*!
- * @function OSKextGetKextsWithIdentifier
- * @abstract Locate all kexts with a given program-defined identifier.
- *
- * @param    aBundleID
- *           The identifier of the kext to locate.
- *           Note that identifier names are case-sensitive.
- * @result
- * An CFArray of kext objects with the given identifier,
- * or <code>NULL</code> on error.
- * Ownership follows the
- * @link //apple_ref/doc/uid/20001148-103029 Create Rule@/link.
- *
- * @discussion
- * This function is useful for locating duplicates of a given kext.
- *
- * See @link OSKextGetKextWithIdentifier@/link for general information
- * on looking up kexts by identifier.
- */
-CF_EXPORT CFArrayRef
-OSKextCopyKextsWithIdentifier(
-    CFStringRef aBundleID)
-                ;
-
-/*!
- * @function OSKextGetLoadedKextWithIdentifier
- * @abstract
- * Locate the loaded kext with a given program-defined identifier.
- *
- * @param    aBundleID
- *           The identifier of the kext to locate.
- *           Note that identifier names are case-sensitive.
- * @result
- * An OSKext object, or <code>NULL</code> if the kext was not found.
- * Ownership follows the
- * @link //apple_ref/doc/uid/20001148-SW1 Get Rule@/link.
- *
- * @discussion
- * You must call @link OSKextReadLoadedKextInfo@/link before calling this
- * function for it to find anything.
- *
- * See @link OSKextGetKextWithIdentifier@/link for general information
- * on looking up kexts by identifier.
- */
-CF_EXPORT OSKextRef
-OSKextGetLoadedKextWithIdentifier(
-    CFStringRef aBundleID)
-                ;
-
-/*!
- * @function OSKextGetCompatibleKextWithIdentifier
- * @abstract
- * Locate the kext with a given program-defined identifier
- * that is compatible with a requested version.
- *
- * @param    aBundleID
- *           The identifier of the kext to locate.
- *           Note that identifier names are case-sensitive.
- * @param    requestedVersion
- *           The version that the kext must be compatible with.
- * @result
- * An OSKext object, or <code>NULL</code> if the kext was not found.
- * Ownership follows the
- * @link //apple_ref/doc/uid/20001148-SW1 Get Rule@/link.
- *
- * @discussion
- * A kext is compatible with a version if that version lies between
- * its CFBundleVersion and its OSBundleCompatibleVersion (inclusive).
- *
- * See @link OSKextGetKextWithIdentifier@/link for general information
- * on looking up kexts by identifier.
- */
-CF_EXPORT OSKextRef
-OSKextGetCompatibleKextWithIdentifier(
-    CFStringRef  aBundleID,
-    OSKextVersion requestedVersion)
-                ;
-
-#pragma mark Basic Accessors
-/*********************************************************************
-* Basic Accessors
-*********************************************************************/
-
-/*!
- * @function OSKextGetURL
- * @abstract Returns the CFURL of a kext bundle.
- *
- * @param    aKext  The kext to get the URL for.
- * @result   A CFURL object. Ownership follows the
- * @link //apple_ref/doc/uid/20001148-SW1 Get Rule@/link.
- *
- * @discussion
- * This function returns the CFURL that <code>aKext</code>
- * was originally created with.
- * It should be resolved to its base for comparison with other kext
- * URLs.
- */
-CF_EXPORT CFURLRef
-OSKextGetURL(OSKextRef aKext)
-                ; // always absolute
-
-/*!
- * @function OSKextGetIdentifier
- * @abstract Returns the bundle identifier from a kext's information property list.
- *
- * @param    aKext  The kext to get the identifier for.
- * @result
- * A CFString object containing the kext bundle's identifier,
- * or <code>NULL</code> if none was specified in the information property list.
- * Ownership follows the
- * @link //apple_ref/doc/uid/20001148-SW1 Get Rule@/link.
- */
-CF_EXPORT CFStringRef
-OSKextGetIdentifier(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextGetValueForInfoDictionaryKey
- * @abstract
- * Returns a (possibly architecture-specific) value
- * in a kext's information dictionary.
- *
- * @param    aKext  The kext to get the property for.
- * @param    key    The base key identifying the property.
- * @result
- * A value corresponding to <code>key</code> in <code>aKext</code>'s
- * information dictionary.
- * If available, an architecture-specific value is returned,
- * otherwise the global value is returned. Ownership follows the
- * @link //apple_ref/doc/uid/20001148-SW1 Get Rule@/link.
- *
- * @discussion
- * This function first looks for a property value specific to the current kext
- * architecture, as set with @link OSKextSetArchitecture@/link,
- * by appending an underscore plus the architecture name to the base key.
- * If such a value is not found, it looks for the property using the base key.
- * For example, if the currently set architecture is i386, and
- * IOKitPersonalities is requested, this function looks up the key 
- * IOKitPersonalities_i386; if that doesn't exist, then it uses
- * IOKitPersonalities.
- *
- * Some properties are not allowed to be made architecture-specific;
- * if such keys are defined, they are ignored by this function:
- *
- * * CFBundleIdentifier
- * * CFBundleVersion
- * * CFBundleExecutable
- * * OSBundleIsInterface
- * * OSKernelResource
- *
- * This function looks up architecture-specific values for generic bundle
- * properties, such as CFBundlePackageType, but such values are of course
- * ignored by CFBundle.
- *
- * If you want to look up a property with a raw key, get the information
- * dictionary directly using  @link OSKextCopyInfoDictionary@/link or
- * by opening a CFBundle for the kext's URL.
- *
- * This function reads the info dictionary from disk if necessary.
- * See @link OSKextFlushInfoDictionary@/link.
- */
-CF_EXPORT CFTypeRef
-OSKextGetValueForInfoDictionaryKey(
-    OSKextRef   aKext,
-    CFStringRef key)
-                ;
-
-/*!
- * @function OSKextCopyInfoDictionary
- * @abstract Returns a copy of a kext's information dictionary.
- *
- * @param    aKext  The kext to get the information dictionary for.
- * @result
- * A CFDictionary object containing the data stored in the kext's
- * information property list.
- * OSKext may add extra keys to this dictionary for its own use.
- * Ownership follows the
- * @link //apple_ref/doc/uid/20001148-103029 Create Rule@/link.
- *
- * @discussion
- * This function uses @link IOCFUnserialize@/link to parse the XML
- * of the info dictionary, in order to match the parsing used in the kernel.
- */
-CF_EXPORT CFMutableDictionaryRef
-OSKextCopyInfoDictionary(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextFlushInfoDictionary
- * @abstract Releases a kext's info dictionary.
- *
- * @param    aKext  The kext that should release its info dictionary.
- *                  If <code>NULL</code>, all open kexts' info dictionaries
- *                  are flushed.
- *
- * @discussion
- * OSKexts accumulate a fair amount of information as they are created
- * and used; when many kext objects are created the total memory
- * consumption can be significant. If an application won't be using
- * kexts for long periods of time, it can flush this information
- * to save memory; the information will later be re-read from disk
- * or recreated as necessary.
- *
- * Flushing info dictionaries also allows kext objects to synchronize
- * with updates on disk; they will automatically re-sort in the
- * internal lookup tables to reflect changed versions, for example.
- * (xxx - well they will! that's not fully implemented yet)
- *
- * See also @link OSKextFlushDependencies@/link,
- * @link OSKextFlushLoadInfo@/link,
- * and @link OSKextFlushDiagnostics@/link.
- *
- * Kext objects created from an mkext cannot flush their info
- * dictionaries.
- */
-CF_EXPORT void
-OSKextFlushInfoDictionary(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextGetVersion
- * @abstract Returns the version of a kext.
- *
- * @param    aKext  The kext to get the version for.
- * @result   The version of the kext as a 64-bit integer.
- *
- * @discussion
- * xxx - needs more info on version format
- * xxx - need to fix definition of OSKextVersion.
- */
-CF_EXPORT OSKextVersion
-OSKextGetVersion(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextGetCompatibleVersion
- * @abstract Returns the compatible version of a kext
- *
- * @param    aKext  The kext to get the compatible version for.
- * @result   The compatible version of the kext as a 64-bit integer.
- *
- * @discussion
- * This function returns the value of a kext's OSBundleCompatibleVersion
- * property, parsed into a 64-bit integer that can be compared using
- * standard integer comparison operators.
- *
- * xxx - needs more info on version format, ref to tn: http://developer.apple.com/technotes/tn/tn1132.html
- */
-CF_EXPORT OSKextVersion
-OSKextGetCompatibleVersion(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextCopyUUIDForArchitecture
- * @abstract
- * Returns the compiler-generated UUID of a kext for a given architecture.
- *
- * @param    aKext   The kext to get the UUID for.
- * @param    anArch  The architecture desired.
- *                   Pass <code>NULL</code> to get the UUID for the
- *                   current architecture.
- * @result
- * A CFData object containing the UUID of the kext's executable
- * for <code>anArch</code>, or the currently set architecture if
- * <code>anArch</code> is <code>NULL</code>.
- *
- * @discussion
- * UUIDs are used in addition to bundle versions to check the identify of
- * kexts loaded in the kernel.
- */
-CF_EXPORT CFDataRef
-OSKextCopyUUIDForArchitecture(OSKextRef aKext,
-    const NXArchInfo * anArch)
-                ;
-
-/*!
- * @function OSKextIsKernelComponent
- * @abstract Returns whether a kext represents a kerne programming interface.
- *
- * @param    aKext  The kext to examine.
- * @result
- * <code>true</code> if <code>aKext</code> represents
- * a kerne programming interface, <code>false</code> otherwise.
- *
- * @discussion
- * A small set of kexts represent interfaces built into the kernel that can
- * be linked against individually. These are commonly known as
- * kernel programming interfaces (KPIs),
- * and the kexts containing them as "pseudokexts".
- *
- * If a kext is a kernel component, then it is also always an interface
- * (see @link OSKextIsInterface@/link).
- */
-CF_EXPORT Boolean
-OSKextIsKernelComponent(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextIsInterface
- * @abstract
- * Returns whether a kext acts as a linkage subset for another kext,
- * also known as a symbol set.
- *
- * @param    aKext  The kext to examine.
- * @result
- * <code>true</code> if <code>aKext</code> is an interface kext,
- * <code>false</code> otherwise.
- *
- * @discussion
- * An interface kext has no actual code in its executable, but merely
- * re-exports a set of symbols (typically a subset)
- * from those of its dependencies.
- *
- * Currently the only interface kexts are the kernel component kexts
- * the define the kernel programming interfaces for Mac OS X.
- */
-CF_EXPORT Boolean
-OSKextIsInterface(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextIsLibrary
- * @abstract Returns whether a kext can be declared as a library.
- *
- * @param    aKext  The kext to examine.
- * @result
- * <code>true</code> if <code>aKext</code> is a library kext, <code>false</code>
- * otherwise.
- *
- * @discussion
- * A kext is a library kext if it has a valid OSBundleCompatibleVersion
- * property. Another kext can link against a library kext by listing
- * the library's identifier and required version in its OSBundleLibraries
- * property.
- */
-CF_EXPORT Boolean
-OSKextIsLibrary(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextDeclaresExecutable
- * @abstract Returns whether a kext declares a CFBundleExecutable property.
- *
- * @param    aKext  The kext to examine.
- * @result
- * <code>true</code> if <code>aKext</code> has a nonempty CFBundleExecutable
- * property, <code>false</code> otherwise.
- *
- * @discussion
- * A kext with an executable is either a loadable kext with actual executable
- * code, or an interface kext whose executable serves to restrict linkage
- * to a subset of the symbols of another kext. See @link OSKextIsInterface@/link
- * for more on the latter type.
- */
-CF_EXPORT Boolean
-OSKextDeclaresExecutable(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextHasLogOrDebugFlags
- * @abstract
- * Returns whether a kext has OSBundleEnableKextLogging set to a true value or
- * any of its IOKitPersonalities has a nonzero IOKitDebug property.
- *
- * @param    aKext  The kext to examine.
- * @result
- * <code>true</code> if <code>aKext</code> has a true OSBundleEnableKextLogging
- * property or if any personality for the currently set architecture has a
- * nonzero IOKitDebug property, <code>false</code> otherwise.
- *
- * @discussion
- * Kexts built for distribution should not have any logging or debug flags set.
- */
-CF_EXPORT Boolean
-OSKextHasLogOrDebugFlags(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextIsLoadableInSafeBoot
- * @abstract Returns whether the kernel will load a kext during safe boot.
- *
- * @param    aKext  The kext to examine.
- * @result
- * <code>true</code> if the kernel will allow <code>aKext</code> during
- * safe boot, <code>false</code> otherwise.
- *
- * @discussion
- * A kext is loadable during safe boot if it has an OSBundleRequired
- * property for the kernel's architecture with a value of
- * "Root", "Local-Root", "Network-Root", "Console", or "Safe Boot".
- *
- * This function does not generally cover the issue of loadability due
- * to problems with validation, authentication, or dependency resolution.
- * To determine whether a kext can actually be loaded, use
- * @link OSKextIsLoadable@/link.
- */
-CF_EXPORT Boolean
-OSKextIsLoadableInSafeBoot(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextCopyArchitectures
- * @abstract
- * Returns a list of <code>NXArchInfo</code> structs for the architectures
- * found in a kext's executable.
- *
- * @param    aKext  The kext to examine.
- * @result
- * A <code>NULL</code>-terminated list of <code>NXArchInfo</code>
- * struct pointers describing
- * the architectures supported by <code>aKext</code>,
- * or <code>NULL</code> if <code>aKext</code> has no executable.
- * The caller is responsible for freeing the list, but not the individual
- * <code>NXArchInfo</code> pointers.
- */
-CF_EXPORT const NXArchInfo **
-OSKextCopyArchitectures(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextSupportsArchitecture
- * @abstract Returns whether a kext has an executable for a given architecture.
- *
- * @param    aKext     The kext to examine.
- * @param    anArch    The <code>NXArchInfo</code> description to check.
- *                     If <code>NULL</code>, uses the currently set architecture.
- * @result
- * <code>true</code> if <code>aKext</code>'s executable contains code for
- * <code>anArch</code>.
- *
- * @discussion
- */
-// null for current (NOT host) arch
-Boolean    OSKextSupportsArchitecture(OSKextRef aKext,
-    const NXArchInfo * anArch)
-;  // if NULL, uses current default
-
-/*!
- * @function OSKextCopyPlugins
- * @abstract Retrieve the plugins of a kext.
- *
- * @param    aKext  The kext to get plugins for.
- * @result
- * An array containing the kexts that are plugins of <code>aKext</code>.
- *
- * @discussion
- * This function scans the plugins folder of <code>aKext</code>
- * and returns an array of the kexts found.
- * This may result in the creation of new kext objects.
- *
- * If <code>aKext</code> is a plugin of another kext 
- * see @link OSKextIsPlugin@/link),
- * this function returns an empty array.
- */
-CF_EXPORT CFArrayRef
-OSKextCopyPlugins(OSKextRef aKext)
-                ;
-                
-/*!
- * @function OSKextIsPlugin
- * @abstract Returns whether a kext is a plugin of some other kext.
- *
- * @param    aKext     The kext to examine.
- * @result
- * <code>true</code> if <code>aKext</code> is a plugin of another kext,
- * <code>false</code> otherwise.
- *
- * @discussion
- * This function uses a simple algorithm that just checks for the substring
- * ".kext/" in the absolute path leading up to the kext's bundle name.
- */
-CF_EXPORT Boolean
-OSKextIsPlugin(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextCopyContainerForPluginKext
- * @abstract Returns the kext that is the container for a plugin kext.
- *
- * @param    aKext     The kext to find a parent for.
- * @result
- * The kext that contains <code>aKext</code> in its PlugIns folder,
- * or <code>NULL</code> if <code>aKext</code> is not a plugin.
- * Ownership follows the
- * @link //apple_ref/doc/uid/20001148-103029 Create Rule@/link.
- *
- * @discussion
- * This function creates a kext object for the longest portion of the
- * path leading to <code>aKext</code>, then checks to see whether
- * <code>aKext</code> is a plugin of that kext by <code>CFBundle</code>'s
- * semantics. If so, that kext is returned.
- * This may result in the creation of a new kext.
- */
-CF_EXPORT OSKextRef
-OSKextCopyContainerForPluginKext(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextCopyPersonalitiesArray
- * @abstract Returns the personalities of a kext for the current kext architecture.
- *
- * @param    aKext  The kext to retrieve personalities for.
- * @result   An array of IOKit personality dictionaries.
- *
- * @discussion
- * IOKitPersonalities in kexts require some processing before being sent
- * to the kernel, and the functions that send personalities expect an array
- * rather than a dictionary. This function facilitates such use.
- *
- * Use @link OSKextGetValueForInfoDictionaryKey@/link to retrieve the raw
- * personalities dictionary for the current architecture.
- */
-CF_EXPORT CFArrayRef
-OSKextCopyPersonalitiesArray(OSKextRef aKext)
-                ;
-
-// xxx - would it be awful to have a function that takes a CFTypeRef that's
-// xxx - a single kext, an array of kexts, or NULL for all open kexts?
-
-/*!
- * @function OSKextCopyPersonalitiesOfKexts
- * @abstract
- * Returns the personalities of multiple kexts for the current kext architecture.
- *
- * @param    kextArray  The kexts to retrieve personalities for.
- *           Pass <code>NULL</code> to retrieve personalities for all open kexts.
- * @result   An array of IOKit personality dictionaries.
- *
- * @discussion
- * IOKitPersonalities in kexts require some processing before being sent
- * to the kernel, and the functions that send personalities expect an array
- * rather than a dictionary. This function facilitates such use.
- */
-CF_EXPORT CFArrayRef
-OSKextCopyPersonalitiesOfKexts(CFArrayRef kextArray)
-                ;
-
-/*!
- * @function OSKextCopyExecutableForArchitecture
- * @abstract
- * Returns a kext's Mach-O executable, thinned to a single architecture
- * if desired.
- *
- * @param    aKext   The kext to retrieve the executable from.
- * @param    anArch  The architecture desired.
- *                   Pass <code>NULL</code> to get the whole, unthinned exectuable.
- * @result
- * A <code>CFData</code> object containing the code
- * for the specified architecture, or <code>NULL</code> if it can't be found.
- *
- * @discussion
- * Note that this function does not use the default kext architecture set by
- * @link OSKextSetArchitecture@/link when given no architecture.
- */
-CF_EXPORT CFDataRef
-OSKextCopyExecutableForArchitecture(OSKextRef aKext,
-    const NXArchInfo * anArch)
-                ;
-
-/*!
- * @function OSKextCopyResource
- * @abstract Returns a named resource from a kext's bundle.
- *
- * @param    aKext         The kext to get a resource from.
- * @param    resourceName  The name of the requested resource.
- * @param    resourceType  The abstract type of the requested resource.
- *                         The type is expressed as a filename extension,
- *                         such as <code>jpg</code>.
- *                         Pass <code>NULL</code> if you don’t need
- *                         to search by type.
- * 
- * @result
- * A <code>CFData</code> object containing the resource file's contents,
- * or <code>NULL</code> if the resource can't be found.
- *
- * @discussion
- * For a kext created from an on-disk URL, this function uses CFBundle
- * semantics to locate the resource file. Note that localized resources
- * and resource subdirectories are not available to kexts calling
- * @link //apple_ref/c/func/OSKextRequestResource OSKextRequestResource@/link
- * from within the kernel (because the process providing them runs as root).
- * You can store such resources in a kext bundle and use them in applications,
- * but they will not be available to the kext loaded in kernel.
- */
-CF_EXPORT CFDataRef
-OSKextCopyResource(
-    OSKextRef   aKext,
-    CFStringRef resourceName,
-    CFStringRef resourceType)
-                ;
-
-#pragma mark Dependency Resolution
-/*********************************************************************
-* Dependency Resolution
-*********************************************************************/
-
-/*!
- * @function OSKextResolveDependencies
- * @abstract Calculate the dependency graph for a kext.
- *
- * @param    aKext   The kext to resolve dependencies for.
- * @result
- * <code>true</code> if all dependencies are successfully resolved,
- * <code>false</code> otherwise.
- *
- * @discussion
- * This function examines the OSBundleLibraries property of <code>aKext</code>
- * and looks for compatible open kexts. Priority is given to kexts marked as
- * loaded (see @link OSKextReadLoadedKextInfo@/link and
- * @link OSKextFlushLoadInfo@/link). Otherwise the most recent
- * compatible version is used; if multiple kexts with the same identifier and
- * version exist, the last one created is used.
- *
- * Any problems resolving dependencies are stored in a diagnostics dictionary,
- * which you can retrieve using @link OSKextCopyDiagnostics@/link.
- *
- * If a kext's dependencies have already been resolved, this function does
- * no work and returns <code>true</code>.
- * If you want to recalculate a kext's dependencies, call
- * @link OSKextFlushDependencies@/link first.
- */
-// xxx - check on same-version ordering with folks
-CF_EXPORT Boolean
-OSKextResolveDependencies(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextFlushDependencies
- * @abstract Clears the dependency graph of a kext.
- *
- * @param    aKext   The kext to flush dependencies for.
- *                   Pass <code>NULL</code> to flush dependencies for all kexts.
- *
- * @discussion
- * OSKexts accumulate a fair amount of information as they are created
- * and used; when many kext objects are created the total memory
- * consumption can be significant. If an application won't be using
- * kexts for long periods of time, it can flush this information
- * to save memory; the information will later be re-read from disk
- * or recreated as necessary.
- *
- * Flushing dependencies is also useful when readling loaded kext
- * information from the kernel with @link OSKextReadLoadedKextInfo@/link
- * (in fact, that function takes a flag to do it as part of its work).
- * Dependency resolution gives priority to kexts marked as loaded,
- * so it's wise to call flush dependencies before reading load info
- * and before doing any operation that resolves dependencies.
- * Conversely, if you want to resolve dependencies without consideration
- * for which kexts are loaded, call @link OSKextFlushLoadInfo@/link
- * beforehand (with or without the flag to flush dependencies).
- *
- * This function also clears any dependency resolution diagnostics.
- * See also @link OSKextFlushInfoDictionary@/link,
- * @link OSKextFlushLoadInfo@/link,
- * and @link OSKextFlushDiagnostics@/link.
- */
-CF_EXPORT void
-OSKextFlushDependencies(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextCopyDeclaredDependencies
- * @abstract Returns the kexts identified in a kext's OSBundleLibraries property.
- *
- * @param    aKext         The kext to get dependencies for.
- * @param    needAllFlag   If <code>true</code>, the function returns
- *                         <code>NULL</code> if any dependency isn't found.
- * @result
- * A <code>CFArray</code> containing the kexts found.
- * If <code>needAllFlag</code> is <code>false</code>, the array may be missing
- * some kexts. If <code>needAllFlag</code> is <code>true</code> and not all
- * dependencies are found, this function returns <code>NULL</code>.
- *
- * @discussion
- * This function calls @link OSKextResolveDependencies@/link to find
- * dependencies.
- */
-CF_EXPORT CFArrayRef
-OSKextCopyDeclaredDependencies(
-    OSKextRef aKext,
-    Boolean   needAllFlag)
-                ;
-    
-
-/*!
- * @function OSKextCopyLinkDependencies
- * @abstract Returns the kexts that a kext links directly against.
- *
- * @param    aKext         The kext to get dependencies for.
- * @param    needAllFlag   If <code>true</code>, the function returns
- *                         <code>NULL</code> if any dependency isn't found.
- * @result
- * A <code>CFArray</code> containing the kexts found.
- * If <code>needAllFlag</code> is <code>false</code>, the array may be missing
- * some kexts. If <code>needAllFlag</code> is <code>true</code> and not all
- * dependencies are found, this function returns <code>NULL</code>.
- *
- * @discussion
- * Link dependencies are how loaded kext relationships are tracked
- * in the kernel (as shown by the <code>kextstat(8)</code> program).
- * Some library kexts contain no executable, merely collecting sets of
- * other libraries for convenience or compatiblity purposes.
- * This function follows through such indirect libraries to find kexts
- * with executables that <code>aKext</code> will actually link against.
- *
- * This function calls @link OSKextResolveDependencies@/link to find
- * dependencies.
- */
- // xxx - need to insert a manpage link on kextstat
-CF_EXPORT CFArrayRef
-OSKextCopyLinkDependencies(
-    OSKextRef aKext,
-    Boolean   needAllFlag)
-                ;
-
-/*!
- * @function OSKextCopyLoadList
- * @abstract
- * Returns the entire list of kexts in the load graph of a kext
- * (including that kext).
- *
- * @param    aKext         The kext to get the load list for.
- * @param    needAllFlag   If <code>true</code>, the function returns
- *                         <code>NULL</code> if any dependency isn't found.
- * @result
- * A <code>CFArray</code> containing the kexts found.
- * If <code>needAllFlag</code> is <code>false</code>, the array may be missing
- * some kexts. If <code>needAllFlag</code> is <code>true</code> and not all
- * dependencies are found, this function returns <code>NULL</code>.
- *
- * @discussion
- * The fully-resolved load list represents all the kexts needed to load
- * <code>aKext</code> into the kernel, in an order guaranteed to work for
- * sequential starting and matching with IOKit personalities.
- *
- * This function calls @link OSKextResolveDependencies@/link to find
- * dependencies.
- */
-CF_EXPORT CFMutableArrayRef
-OSKextCopyLoadList(
-    OSKextRef aKext,
-    Boolean   needAllFlag)
-                ;
-
-/*!
- * @function OSKextCopyLoadListForKexts
- * @abstract
- * Returns the entire list of kexts in load order of the merged load graph 
- * of the provided list of kexts (including those kexts).
- *
- * @param       kexts       The kexts to get the load list for.
- * @param       needAllFlag If <code>true</code>, the function returns 
- *                          <code>NULL</code> if any dependency isn't found.
- *
- * @result
- * A <code>CFArray</code> containing the kexts found.
- * If <code>needAllFlag</code> is <code>false</code>, the array may be missing
- * some kexts. If <code>needAllFlag</code> is <code>true</code> and not all
- * dependencies are found, this function returns <code>NULL</code>.
- *
- * @discussion
- * The fully-resolved load list represents all of the kexts needed to load
- * every kext in <code>kexts</code> into the kernel, in an order guaranteed to
- * work for sequential starting and matching with IOKit personalities.
- * 
- * This function calls @link OSKextResolveDependencies@/link to find
- * dependencies.
- */
-CF_EXPORT CFMutableArrayRef 
-OSKextCopyLoadListForKexts(
-    CFArrayRef  kexts, 
-    Boolean     needAllFlag)
-                ;
-
-
-/*!
- * @function OSKextCopyAllDependencies
- * @abstract
- * Returns all kexts that a given kexts depends on, directly or indirectly.
- *
- * @param    aKext         The kext to get dependencies for.
- * @param    needAllFlag   If <code>true</code>, the function returns
- *                         <code>NULL</code> if any dependency isn't found.
- * @result
- * A <code>CFArray</code> containing the kexts found.
- * If <code>needAllFlag</code> is <code>false</code>, the array may be missing
- * some kexts. If <code>needAllFlag</code> is <code>true</code> and not all
- * dependencies are found, this function returns <code>NULL</code>.
- *
- * @discussion
- * This function calls @link OSKextResolveDependencies@/link to find
- * dependencies.
- */
-CF_EXPORT CFMutableArrayRef
-OSKextCopyAllDependencies(
-    OSKextRef aKext,
-    Boolean   needAllFlag)
-                ;
-
-/*!
- * @function OSKextCopyIndirectDependencies
- * @abstract
- * Returns all kexts that a given kexts depends on indirectly.
- *
- * @param    aKext         The kext to get dependencies for.
- * @param    needAllFlag   If <code>true</code>, the function returns
- *                         <code>NULL</code> if any dependency isn't found.
- * @result
- * A <code>CFArray</code> containing the kexts found.
- * If <code>needAllFlag</code> is <code>false</code>, the array may be missing
- * some kexts. If <code>needAllFlag</code> is <code>true</code> and not all
- * dependencies are found, this function returns <code>NULL</code>.
- *
- * @discussion
- * Note that the list of indirect dependencies includes all kexts declared
- * as dependencies by the direct dependencies of <code>aKext</code> -
- * it may therefore include a direct dependency as well if some other
- * kext in the load graph declares it.
- *
- * This function calls @link OSKextResolveDependencies@/link to find
- * dependencies.
- */
-// xxx - This one isn't really useful, is it?
-CFMutableArrayRef OSKextCopyIndirectDependencies(
-    OSKextRef aKext,
-    Boolean   needAllFlag)
-;
-
-/*!
- * @function OSKextDependsOnKext
- * @abstract
- * Returns whether a kext depends on a given library kext,
- * directly or indirectly.
- * 
- * @param    aKext         The kext to examine.
- * @param    libraryKext   The possible library kext.
- * @param    directFlag
- *           If <code>true</code>, only checks for a direct declared dependency;
- *           if <code>false</code> check for direct or indirect dependencies.
- * @result
- * <code>true</code> if <code>aKext</code> depends on <code>libraryKext</code>,
- * either directly or indirectly per <code>directFlag</code>.
- * Returns <code>false</code> otherwise.
- *
- * @discussion
- * This function calls @link OSKextResolveDependencies@/link to find
- * dependencies.
- *
- * This function works with actual dependency resolution, not potential.
- * If there are multiple kexts with the same bundle identifier,
- * <code>aKext</code> may not be the one chosen during resolution
- * and so it might appear that no kexts depend on it, even though they could.
- */
-CF_EXPORT Boolean
-OSKextDependsOnKext(
-    OSKextRef aKext,
-    OSKextRef libraryKext,
-    Boolean   directFlag)
-                ;
-
-/*!
- * @function OSKextCopyDependents
- * @abstract
- * Return all kexts that depend on a given kext, directly or indirectly.
- *
- * @param    aKext         The kext to get dependents for.
- * @param    directFlag
- *           <code>true</code> to get only kexts that declare a direct
- *           dependency on <code>aKext</code>,
- *           <code>false</code> to get all dependents, direct or indirect.
- * @result
- * An array of all kexts that ultimately depend on <code>aKext</code>,
- * directly or indirectly according to <code>directFlag</code>.
- *
- * @discussion
- * This function calls @link OSKextResolveDependencies@/link on all open
- * kexts to find dependencies. This can be somewhat expensive.
- *
- * This function works with actual dependency resolution, not potential.
- * If there are multiple kexts with the same bundle identifier,
- * <code>aKext</code> may not be the one chosen during resolution
- * and so it might appear that no kexts depend on it, even though they could.
- */
-CF_EXPORT CFMutableArrayRef
-OSKextCopyDependents(OSKextRef aKext,
-    Boolean directFlag)
-                ;
-
-/*!
- * @function OSKextIsCompatibleWithVersion
- * @abstract Returns whether a library kext is compatible with a given version.
- *
- * @param    aKext      The kext to examine.
- * @param    aVersion   The kext version to check compatibility with
- *
- * @result
- * <code>truer</code> if <code>aKext</code> has a compatible version and
- * if <code>aVersion</code> is between the version and compatible version of
- * <code>aKext</code> (inclusive), <code>false</code> otherwise.
- *
- * @discussion
- */
-CF_EXPORT Boolean
-OSKextIsCompatibleWithVersion(
-    OSKextRef    aKext,
-    OSKextVersion aVersion)
-                ;
-
-/*!
- * @function OSKextLogDependencyGraph
- * @abstract Prints the resolved dependency graph of a kext.
- *
- * @param    aKext         The kext to log the dependency graph of.
- * @param    bundleIDFlag  <code>true</code> to log kexts by bundle ID,
- *                         <code>false</code> to log them by URL. 
- * @param    linkFlag      <code>true</code> to log the link graph only,
- *                         <code>false</code> to log the full dependency graph.
- *
- * @discussion
- * <code>linkFlag</code> allows you to display the dependencies as they will
- * be recorded in the kernel when the kext is loaded.
- * If it is <code>true</code>, then only kexts with executables are included
- * in the logged dependency graph. If it is <code>false</code>, all kexts
- * needed to load </code>aKext</code> are included.
- *
- * This function calls @link OSKextResolveDependencies@/link to find
- * dependencies.
- */
-CF_EXPORT void
-OSKextLogDependencyGraph(OSKextRef aKext,
-    Boolean bundleIDFlag,
-    Boolean linkFlag)
-                ;
-
-/*!
- * @function OSKextFindLinkDependencies
- * @abstract Finds kexts that define symbols a kext needs resolved.
- *
- * @param    aKext              The kext to examine.
- * @param    nonKPIFlag
- *           <code>false</code> to look in com.apple.kpi.* kernel component
- *           for kernel symbols;
- *           <code>true</code> to look in com.apple.kernel.* kernel components
- *           instead (not recommended for later versions of Mac OS X).
- * @param    allowUnsupportedFlag
- *           <code>false</code> to skip unsupported libraries in the search;
- *           <code>true</code> to include them.
- * @param    onedefSymbolsOut
- *           A dictionary containing symbols that were found once;
- *           keys are the symbols, values are the kexts defining the key symbol.
- *           Ownership follows the Create Rule. 
- *           Pass <code>NULL</code> to not retrieve.
- * @param    undefinedSymbolsOut
- *           A dictionary containing symbols that weren't found;
- *           keys are the symbols, values are undefined.
- *           Ownership follows the Create Rule. 
- *           Pass <code>NULL</code> to not retrieve.
- * @param    multiplyDefinedSymbolsOut
- *           A dictionary containing symbols found in multiple library kexts;
- *           keys are the symbols, values are the kexts defining the key symbol.
- *           Ownership follows the Create Rule. 
- *           Pass <code>NULL</code> to not retrieve.
- * @param    multipleDefinitionLibraries
- *           A array of all library kexts in which multiply defined symbols
- *           were found; sorted by CFBundleIdentifier.
-
- *           Ownership follows the Create Rule. 
- *           Pass <code>NULL</code> to not retrieve.
- * @result
- * An array of kexts that export symbols referenced by <code>aKext</code>,
- * sorted by CFBundleIdentifier.
- *
- * @discussion
- * This function searches in all open kexts for symbols referenced by
- * <code>aKext</code>, ignoring the OSBundleLibraries property.
- * You can use this function to find out what you should list
- * in a kext's OSBundleLibraries property.
- *
- * If <code>undefinedSymbolsOut</code> has a nonzero count,
- * the symbols named by its keys could not be found in any open kext.
- *
- * If <code>multiplyDefinedSymbolsOut</code> has a nonzero count,
- * some of the result kexts define the same symbol,
- * and if those duplicates are listed
- * in OSBundleLibraries a link failure will occur.
- * You can inspect the contents of <code>multiplyDefinedSymbolsOut</code>
- * and <code>multipleDefinitionLibraries</code>
- * by hand to sort out which libraries you should actually declare.
- *
- * This function is fairly expensive, as it has to search through all open
- * kexts' information dictionaries, and all library kexts' executables.
- */
-CFArrayRef OSKextFindLinkDependencies(
-    OSKextRef         aKext,
-    Boolean           nonKPIFlag,
-    Boolean           allowUnsupportedFlag,
-    CFDictionaryRef * undefinedSymbolsOut,
-    CFDictionaryRef * onedefSymbolsOut,
-    CFDictionaryRef * multiplyDefinedSymbolsOut,
-    CFArrayRef      * multipleDefinitionLibrariesOut)
-                ;
-
-#pragma mark Linking and Loading; Other Kernel Operations
-/*********************************************************************
-* Linking and Loading; Other Kernel Operations
-*********************************************************************/
-
-/*!
- * @function OSKextLoad
- * @abstract Loads a kext and its dependencies into the kernel.
- *
- * @param    aKext   The kext to load.
- * @result
- * kOSReturnSuccess if <code>aKext</code> is successfully loaded
- * into the kernel, or was already loaded, or an error result if not.
- *
- * @discussion
- * The calling process must have an effective user ID of 0 (root)
- * to load kexts into the kernel.
- *
- * A kext and all its dependencies must pass all validation and authentication
- * tests to be loadable. See @link OSKextIsLoadable@/link for more information.
- *
- * All kexts loaded into the kernel are started, but IOKit personalities
- * are not sent to the IOCatalogue.
- * See @link OSKextSendPersonalitiesToKernel@/link.
- *
- * This function calls @link OSKextFlushLoadInfo@/link and clears dependencies
- * for all open kexts. It then calls @link OSKextCopyLoadList@/link
- * to find dependencies and @link OSKextReadLoadedKextInfo@/link on the
- * resulting load list.
- */
-// xxx - need to list errors that may be returned
-CF_EXPORT OSReturn
-OSKextLoad(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextLoadWithOptions
- * @abstract Loads a kext and its dependencies into the kernel.
- *
- * @param    aKext                       The kext to load.
- * @param    startExclusion
- *           <code>kOSKextExcludeAll</code> to omit starting <code>aKext</code>
- *           and any of its dependencies not already started,
- *           <code>kOSKextExcludeKext</code> to start the dependencies of
- *           <code>aKext</code> but not <code>aKext</code> itself,
- *           or <code>kOSKextExcludeNone</code> to start all loaded kexts.
- * @param    addPersonalitiesExclusion
- *           <code>kOSKextExcludeAll</code> to omit sending
- *           IOKitPersonalities to the IOCatalogue for <code>aKext</code>
- *           and any of its dependencies
- *           (though they may already be in the IOCatalogue),
- *           <code>kOSKextExcludeKext</code> to send personalities for the
- *           dependencies of <code>aKext</code> but not <code>aKext</code> itself,
- *           or <code>kOSKextExcludeNone</code> to send all personalities.
- * @param    personalityNames
- *           The names of IOKitPersonalities in <code>aKext</code> to send,
- *           <code>addPersonalitiesExclusion</code> allowing.
- *           If <code>NULL</code> all personalities are sent.
- *           This parameter only affects <code>aKext</code>; if dependency
- *           personalities are sent, they are all sent.
- * @param   delayAutounloadFlag
- *           <code>true</code> to cause the kernel's automatic kext unloader
- *           to skip <code>aKext</code> for one cycle, giving extra time
- *           to set up a debug session. <code>false</code> for normal behavior.
- *
- * @result
- * Returns <code>kOSReturnSuccess</code> on success, other values on failure.
- *
- * @discussion
- * This function allows a kext to be loaded but not started or matched
- * (for IOKit kexts), which is useful in some debug scenarios.
- * After calling this function, you may need to call @link OSKextStart@/link
- * to start <code>aKext</code> (along with its dependencies).
- * You may also need to call @link OSKextSendPersonalitiesToKernel@/link
- * for any kexts excluded from matching via
- * <code>addPersonalitiesExclusion</code>.
- * 
- * The calling process must have an effective user ID of 0 (root)
- * to load kexts into the kernel.
- *
- * A kext and all its dependencies must pass all validation and authentication
- * tests to be loadable. See @link OSKextIsLoadable@/link for more information.
- *
- * This function calls @link OSKextFlushLoadInfo@/link and clears dependencies
- * for all open kexts. It then calls @link OSKextCopyLoadList@/link
- * to find dependencies and @link OSKextReadLoadedKextInfo@/link on the
- * resulting load list.
- */
-// xxx - need to list errors that may be returned
-CF_EXPORT OSReturn
-OSKextLoadWithOptions(
-    OSKextRef           aKext,
-    OSKextExcludeLevel  startExclusion,
-    OSKextExcludeLevel  addPersonalitiesExclusion,
-    CFArrayRef          personalityNames,
-    Boolean             delayAutounloadFlag)
-                ;
-  
-/*!
- * @function OSKextGenerateDebugSymbols
- * @abstract Generate debug symbols for a kext and its dependencies.
- *
- * @param aKext
- *        The kext to generate debug symbols for.
- * @param kernelImage
- *        The kernel Mach-O or symbol file to use for linking.
- *        If <code>NULL</code>, the running kernel is used.
- *
- * @result
- * A dictionary whose keys are the bundle IDs of the kexts for which symbols
- * have been generated with ".sym" appended, and whose values are CFData
- * objects containing the symbol files. Returns <code>NULL</code> on error.
- *
- * @discussion
- * The result includes only non-interface kexts that have an executable
- * and a load address set.
- * Load addresses are set by @link OSKextReadLoadedKextInfo@/link or by
- * @link OSKextSetLoadAddress@/link.
- *
- * If using the running kernel for load addresses, the current architecture
- * set with @link OSKextSetArchitecture@/link must match that of the running
- * kernel or this function returns <code>NULL</code>.
- *
- * This function calls @link OSKextResolveDependencies@/link to find
- * dependencies.
- */
-CF_EXPORT CFDictionaryRef
-OSKextGenerateDebugSymbols(
-    OSKextRef aKext,
-    CFDataRef kernelImage)
-                ;
-
-/*!
- * @function OSKextNeedsLoadAddressForDebugSymbols
- * @abstract
- * Returns whether a kext needs a load address set to generate debug symbols.
- *
- * @param    aKext    The kext to examine.
- * @result
- * <code>true</code> if <code>aKext</code> needs a load address set
- * in order to generate debug symbols with
- * @link OSKextGenerateDebugSymbols@/link, <code>false</code> otherwise.
- */
-CF_EXPORT Boolean
-OSKextNeedsLoadAddressForDebugSymbols(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextUnload
- * @abstract Unloads a kext from the kernel if possible.
- *
- * @param    aKext   The kext to unload.
- * @param    terminateServiceAndRemovePersonalities
- * If <code>true</code>, and the kext to unload has no kexts loaded
- * against it, all IOService objects defined by that kext will be
- * asked to terminate so that the unload can proceed, and the personalities
- * for the kext will be removed from the IOCatalogue.
- *
- * @result
- * <code>kOSReturnSuccess</code> on success, an error code
- * (typically <code>kOSKextReturnInUse</code>) on failure.
- *
- * @discussion
- * The calling process must have an effective user ID of 0 (root)
- * to unload kexts from the kernel.
- * A kext cannot be unloaded if it has any loaed dependents.
- *
- * See also the @link IOCatalogueTerminate@/link function.
- */
-// xxx - need to list errors that may be returned
-CF_EXPORT OSReturn
-OSKextUnload(OSKextRef aKext,
-    Boolean terminateServiceAndRemovePersonalities)
-                ;
-
-/*!
- * OSKextUnload
- * @abstract Unloads a kext from the kernel if possible, based on its
- *           CFBundleIdentifier.
- *
- * @param    kextIdentifier   The CFBundleIDentifier of the kext to unload.
- * @param    terminateServiceAndRemovePersonalities
- * If <code>true</code>, and the kext to unload has no kexts loaded
- * against it, all IOService objects defined by that kext will be
- * asked to terminate so that the unload can proceed, and the personalities
- * for the kext will be removed from the IOCatalogue.
- *
- * @result
- * <code>kOSReturnSuccess</code> on success, an error code
- * (typically <code>kOSKextReturnInUse</code>) on failure.
- *
- * @discussion
- * The calling process must have an effective user ID of 0 (root)
- * to unload kexts from the kernel.
- * A kext cannot be unloaded if it has any loaed dependents.
- *
- * See also the @link IOCatalogueTerminate@/link function.
- */
-// xxx - need to list errors that may be returned
-CF_EXPORT OSReturn
-OSKextUnloadKextWithIdentifier(CFStringRef kextIdentifier,
-    Boolean terminateServiceAndRemovePersonalities)
-                ;
-
-/*!
- * @function OSKextIsStarted
- * @abstract Returns whether a kext loaded in the kernel is started.
- *
- * @param    aKext   The kext to examine.
- * @result
- * <code>true</code> if <code>aKext</code> is active and running in the kernel,
- * <code>false</code> if not loaded or loaded and not started.
- *
- * @discussion
- * This function returns the state recorded the last time
- * @link OSKextReadLoadedKextInfo@/link was called.
- */
-CF_EXPORT Boolean
-OSKextIsStarted(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextStart
- * @abstract Starts a kext loaded in the kernel if possible.
- *
- * @param    aKext   The kext to start.
- * @result
- * <code>kOSReturnSuccess</code> on success, an error code on failure.
- *
- * @discussion
- * This function allows an application to start a kext that is loaded
- * in the kernel (typically via @link OSKextLoadWithOptions@/link),
- * and any of its dependencies that aren't also started.
- * If the kext is already started, this does nothing.
- *
- * To start a kext means to call its start function, which is distinct from
- * the start method of an IOService object.
- * 
- * The calling process must have an effective user ID of 0 (root)
- * to start kexts in the kernel.
-// xxx - need to list errors that may be returned
- */
-CF_EXPORT OSReturn
-OSKextStart(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextStop
- * @abstract Stops a kext loaded in the kernel if possible.
- *
- * @param    aKext   The kext to stop.
- * @result
- * <code>kOSReturnSuccess</code> on success, an error code on failure.
- *
- * @discussion
- * This function allows an application to stop a kext that is loaded
- * in the kernel without unloading it. This may be useful in certain
- * debugging scenarios.
- *
- * A kext cannot be stopped via this function if it has any dependents
- * that reference it, any client references within the kernel,
- * or any instances of libkern/IOKit C++ classes.
- *
- * To stop a kext means to call its stop function, which is distinct from
- * the stop method of an IOService object.
- * 
- * The calling process must have an effective user ID of 0 (root)
- * to stop kexts in the kernel.
- */
-// xxx - should it be allowed to stop a kext with dependents that are
-// xxx - themselves not started?
-// xxx - need to list errors that may be returned
-CF_EXPORT OSReturn
-OSKextStop(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextSendPersonalitiesToKernel
- * @abstract Sends an array of IOKit personalities to the kernel.
- *
- * @param    personalities   The personalities to send.
- * @result
- * <code>kOSReturnSuccess</code> on success, an error code on failure.
- *
- * @discussion
- * This function simply sends an anonymous array of personalities to the
- * I/O Kit's IOCatalogue object in the kernel.
- * You can get personalities from kexts using
- * @link OSKextCopyPersonalitiesArray@/link or
- * @link OSKextCopyPersonalitiesOfKexts@/link.
- * 
- * The calling process must have an effective user ID of 0 (root)
- * to send personalities to the kernel.
- */
-// xxx - need to list errors that may be returned
-CF_EXPORT OSReturn
-OSKextSendPersonalitiesToKernel(CFArrayRef personalities)
-                ;
-
-/*!
- * @function OSKextSendKextPersonalitiesToKernel
- * @abstract
- * Sends the personalities of a single kext to the kernel, optionally
- * filtered by name.
- *
- * @param    aKext              The kext whose personalities to send.
- * @param    personalityNames
- *           An array of names. Only personalities from <code>aKext</code>
- *           with these names are sent to the kernel.
- * @result
- * <code>kOSReturnSuccess</code> on success, an error code on failure.
- *
- * @discussion
- * If any names in <code>personalityNames</code> are not found,
- * they are simply skipped rather than causing an error.
- *
- * This function may be useful in certain debugging scenarios,
- * where a particular personality is causing problems.
- * 
- * The calling process must have an effective user ID of 0 (root)
- * to send personalities to the kernel.
- */
-// xxx - should names not found cause an error?
-// xxx - need to list errors that may be returned
-CF_EXPORT OSReturn
-OSKextSendKextPersonalitiesToKernel(
-    OSKextRef  aKext,
-    CFArrayRef personalityNames)
-                ;
-
-/*!
- * @function OSKextSendPersonalitiesOfKextsToKernel
- * Sends the personalities of multiple kext to the kernel in a single
- * operation.
- *
- * @param    kextArray     The kexts whose personalities to send.
- * @result
- * <code>kOSReturnSuccess</code> on success, an error code on failure.
- *
- * @discussion
- * This function performs one data transfer to the kernel, collecting
- * all the personalities of the kexts in <code>kextArray</code>.
- * 
- * The calling process must have an effective user ID of 0 (root)
- * to send personalities to the kernel.
- */
-// xxx - need to list errors that may be returned
-CF_EXPORT OSReturn
-OSKextSendPersonalitiesOfKextsToKernel(CFArrayRef kextArray)
-                ;
-
-/*!
- * @function OSKextRemoveKextPersonalitiesFromKernel
- * Removes all personalities for a kext's bundle identifier from the kernel.
- *
- * @param    aKext     The kext whose personalities to remove.
- * @result
- * <code>kOSReturnSuccess</code> on success, an error code on failure.
- *
- * @discussion
- * This function removes from the kernel's IOCatalogue all personalities
- * whose CFBundleIdentifiers match that of <code>aKext</code> so that no
- * further load requests for <code>aKext</code> will be made. This is
- * typically done when it is discovered that <code>aKext</code> cannot
- * be loaded from user space (if it fails to load in the kernel, matching
- * personalities are automatically removed).
- *
- * Note that kexts other than <code>aKext</code> might have published
- * personalities in the IOCatalogue under <code>aKext</code>'s identifier.
- * Such personalities will also be removed, since they trigger load requests
- * for a kext that cannot be loaded. The OSKext library adds an
- * IOPersonalityPublisher property to such personalities, that gives the
- * bundle identifier of the originating kext.
- *
- * This function differs from
- * @link OSKextRemovePersonalitiesForIdentifierFromKernel@/link
- * by having a kext object to check for logging or other purposes.
- * 
- * The calling process must have an effective user ID of 0 (root)
- * to remove personalities from the kernel.
- */
-// xxx - need to list errors that may be returned
-// xxx - this is a not-so-thin shim over IOCatalogueSendData (kIOCatalogueRemoveDrivers)
-// xxx - might we just want the function to take a bundle ID?
-// xxx - does IOCatalogueSendData really require root access?
-CF_EXPORT OSReturn
-OSKextRemoveKextPersonalitiesFromKernel(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextRemovePersonalitiesForIdentifierFromKernel
- * Removes all personalities for a given bundle identifier from the kernel.
- *
- * @param    aBundleID     The bundle identifier for which to remove personalities.
- * @result
- * <code>kOSReturnSuccess</code> on success, an error code on failure.
- *
- * @discussion
- * This function removes from the kernel's IOCatalogue all personalities
- * whose CFBundleIdentifiers are <code>aBundleID</code> so that no
- * further load requests for the kext with that identifier will be made.
- * This is typically done when it is discovered no kext can be found for
- * <code>aBundleID</code>.
- *
- * This function differs from
- * @link OSKextRemoveKextPersonalitiesFromKernel@/link
- * by not having a kext object to check for logging or other purposes.
- * 
- * The calling process must have an effective user ID of 0 (root)
- * to remove personalities from the kernel.
- */
-// xxx - need to list errors that may be returned
-// xxx - this is a not-so-thin shim over IOCatalogueSendData (kIOCatalogueRemoveDrivers)
-// xxx - I want 2 separate functions for logging; a kext can have flags in it
-// xxx - does IOCatalogueSendData really require root access?
-CF_EXPORT OSReturn
-OSKextRemovePersonalitiesForIdentifierFromKernel(CFStringRef aBundleID)
-                ;
-
-/*!
- * @function OSKextCreateLoadedKextInfo
- * @abstract Returns information about loaded kexts in a dictionary.
- *
- * @param    kextIdentifiers   An array of kext identifiers to read from the kernel.
- *                             Pass <code>NULL</code> to read info for all loaded kexts.
- * @result
- * An array of dictionaries containing information about loaded kexts.
- *
- * @discussion
- * This function gets information from the kernel without affecting any
- * kext objects. If you want to update open kext objects to reflect
- * whether they are loaded in the kernel, use @link OSKextReadLoadedKextInfo@/link.
- */
-// xxx - need to document the keys from OSKextLib.h.
-CF_EXPORT CFArrayRef
-OSKextCreateLoadedKextInfo(
-    CFArrayRef kextIdentifiers)
-                ;
-
-/*!
- * @function OSKextReadLoadedKextInfo
- * @abstract Updates kext objects with load info from the kernel.
- *
- * @param kextIdentifiers   An array of kext identifiers to read
- *                          from the kernel;
- *                          all matching kexts have their load info updated.
- *                          Pass <code>NULL</code> to update load info for all kexts.
- * @param flushDependenciesFlag
- *        <code>true</code> to clear dependency information from kexts,
- *        <code>false</code> to leave it in place.
- *
- * @result
- * <code>kOSReturnSuccess</code> if all information is successfully updated,
- * an error code otherwise. Specifically, if the current architecture set
- * by @link OSKextSetArchitecture@/link is not that of the running kernel,
- * this function returns <code>kOSKextReturnExecutableArchNotFound</code>.
- *
- * @discussion
- * The load status of kexts primarily affects dependency resolution in the
- * kext library, in that kexts marked as loaded are given priority over
- * all other kexts of the same identifier.
- * See @link OSKextResolveDependencies@/link for more.
- *
- * This function calls @link OSKextFlushLoadInfo@/link on the kexts,
- * which clears any previous load info for them
- * (or for all kexts if <code>kextIdentifiers</code> is <code>NULL</code>).
- * If <code>flushDependenciesFlag</code> is <code>true</code>,
- * resolved dependencies (which may not match the loaded kexts
- * in the kernel) are also flushed.
- * Load addresses are then set from the kernel,
- * but dependencies are resolved as needed.
- *
- * If <code>flushDependenciesFlag</code> is <code>false</code>,
- * existing dependency graphs are maintained, allowing you to
- * check whether the dependencies, as resolved before reading
- * load information, reflect loaded kexts (by getting the load list
- * via @link OSKextCopyLoadList@/link and checking the kexts in it
- * with @link OSKextIsLoaded@/link).
- */
-// xxx - need to list errors that may be returned
-CF_EXPORT OSReturn
-OSKextReadLoadedKextInfo(
-    CFArrayRef kexts,
-    Boolean    flushDependenciesFlag)
-                ;
-
-/*!
- * @function OSKextIsLoaded
- * @abstract Returns whether a kext is loaded in the kernel.
- *
- * @param    aKext   The kext to examine.
- * @result
- * <code>true</code> if a kext with the same identifier, version, and UUID
- * as <code>aKext</code> is loaded in the kernel, <code>false</code> otherwise.
- *
- * @discussion
- * You must call @link OSKextReadLoadedKextInfo@/link for this flag to be meaningful,
- * which in turn requires the current library architecture to match that
- * of the running kernel.
- * Use @link OSKextOtherVersionIsLoaded@/link to check whether
- * a different version of <code>aKext</code> is loaded.
- */
-CF_EXPORT Boolean
-OSKextIsLoaded(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextGetLoadAddress
- * @abstract Returns the actual or simulated kernel load address of a kext.
- *
- * @param    aKext   The kext to examine.
- * @result
- * The load address of <code>aKext</code>, whether read from the kernel using
- * @link OSKextReadLoadedKextInfo@/link or set for symbol generation using
- * @link OSKextSetLoadAddress@/link.
- *
- * @discussion
- * Load addresses are accessed as 64-bit numbers even for 32-bit architectures;
- * cast or truncate the value as necessary.
- *
- * You must call @link OSKextReadLoadedKextInfo@/link or
- * @link OSKextSetLoadAddress@/link for the load address to be nonzero.
- */
-CF_EXPORT uint64_t
-OSKextGetLoadAddress(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextSetLoadAddress
- * @abstract
- * Sets the simulated kernel load address of a kext for symbol generation.
- *
- * @param    aKext   The kext to set a load address for.
- * @result
- * <code>true</code> if the address was set, <code>false</code> if not
- * (because it's too large for the current architecture).
- *
- * @discussion
- * Load addresses are accessed as 64-bit numbers even for 32-bit architectures.
- * If you attempt to set a load address that is too large for a 32-bit link,
- * this function returns <code>false</code>.
- * See @link OSKextSetArchitecture@/link.
- *
- * Setting a load address manually is useful for generating debug symbols
- * with @link OSKextGenerateDebugSymbols@/link.
- */
-CF_EXPORT Boolean
-OSKextSetLoadAddress(OSKextRef aKext, uint64_t anAddress)
-                ;
-
-/*!
- * @function OSKextGetLoadTag
- * @abstract
- * Returns the load tag of a kext if it's loaded in the kernel.
- *
- * @param    aKext   The kext to examine.
- * @result
- * The load tag (also known as the index or kmod id) of <code>aKext</code>,
- * if it's loaded in the kernel (use @link OSKextIsLoaded@/link to check that).
- * Returns 0 if <code>aKext</code> is not loaded or if it can't be determined
- * whether it is loaded.
- *
- * @discussion
- * You must call @link OSKextReadLoadedKextInfo@/link for the load tag
- * to be meaningful, which in turn requires the current library architecture
- * to match that of the running kernel.
- * Use @link OSKextIsLoaded@/link to check whether <code>aKext</code>
- * is loaded.
- */
-CF_EXPORT uint32_t
-OSKextGetLoadTag(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextFlushLoadInfo
- * @abstract Clears all load and dependency information from a kext.
- *
- * @param aKext
- *        The kext to clear. If <code>NULL</code>, all open
- *        kexts have their load info flushed.
- * @param flushDependenciesFlag
- *        <code>true</code> to clear dependency information from kexts,
- *        <code>false</code> to leave it in place.
- *
- * @discussion
- * Flushing load information releases the internal load information
- * structs of a kext, including load flags, the bundle executable,
- * link/load diagnostics, and if <code>flushDependenciesFlag</code> is true,
- * the dependencies.
- *
- * OSKexts accumulate a fair amount of information as they are created
- * and used; when many kext objects are created the total memory
- * consumption can be significant. If an application won't be using
- * kexts for long periods of time, it can flush this information
- * to save memory; the information will later be re-read from disk
- * or recreated as necessary.
- *
- * Flushing load info is also useful after readling loaded kext
- * information from the kernel with @link OSKextReadLoadedKextInfo@/link
- * or after working with executables. Executables in particular
- * consume a lot of application memory, often unnecessarily, since
- * the code is loaded and running in the kernel.
- *
- * See also @link OSKextFlushInfoDictionaries@/link,
- * @link OSKextFlushDependencies@/link,
- * and @link OSKextFlushDiagnostics@/link.
- */
-CF_EXPORT void
-OSKextFlushLoadInfo(
-    OSKextRef aKext,
-    Boolean flushDependenciesFlag)
-                ;
-
-/*!
- * @function OSKextCopyAllRequestedIdentifiers
- * @abstract
- * Copies the list of all unique bundle identifiers of kext load requests
- * that the kernel has received since power-on.
- *
- * @result
- * A CFArray object, or <code>NULL</code> if the copy failed.
- * Ownership follows the 
- * @link //apple_ref/doc/uid/20001148-103029 Create Rule@/link.
- *
- */
-CF_EXPORT CFArrayRef 
-OSKextCopyAllRequestedIdentifiers(void)
-                ;
-
-#pragma mark Sanity Checking and Diagnostics
-/*********************************************************************
-* Sanity Checking and Diagnostics
-*********************************************************************/
-
-/*!
- * @function OSKextParseVersionCFString
- * @abstract
- * Parses a kext version from a CFString.
- *
- * @param    versionString  The kext version string to parse.
- * @result
- * The numeric rendering of <code>versionString</code>, which can
- * compared arithmetically with other valid version numbers.
- * Returns -1 if the version couldn't be parsed.
- */
-CF_EXPORT OSKextVersion
-OSKextParseVersionCFString(CFStringRef versionString)
-                ;
-
-/*! @function OSKextParseVersionString */
-CF_EXPORT OSKextVersion OSKextParseVersionString(const char* versionString);
-CF_EXPORT void OSKextVersionGetString(OSKextVersion version, char* buffer, size_t bufferLength);
-
-
-/*!
- * @function OSKextValidate
- * @abstract
- * Sanity checks a kext's info dictionary and executable for the currently
- * set architecture.
- *
- * @param    aKext  The kext to validate.
- * @result
- * <code>true</code> if <code>aKext</code> passes all validation tests,
- * <code>false</code> otherwise.
- *
- * @discussion
- * This function forces full validation of a kext, collecting all
- * errors found in the validation diagnostics if recording is turned on
- * (with @link OSKextSetRecordsDiagnostics@/link). You can get the diagnostics
- * using @link OSKextCopyDiagnostics@/link.
- *
- * If safe boot is currently simulated (see
- * @link OSKextSetSimulatedSafeBoot@/link),
- * any kext not loadable during safe boot will fail validation.
- */
-// compare with CFBundlePreflightExecutable()
-CF_EXPORT Boolean
-OSKextValidate(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextIsValid
- * @abstract
- * Returns whether a kext is valid or not.
- *
- * @param    aKext  The kext to examine.
- * @result
- * <code>true</code> if <code>aKext</code> passes all validation tests,
- * <code>false</code> otherwise.
- *
- * @discussion
- * This function avoids doing full validation if any problems have been
- * discovered with the kext during other operations. To perform a full
- * validation of all possible problems, use @link OSKextValidate@/link.
- */
-CF_EXPORT Boolean
-OSKextIsValid(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextValidateDependencies
- * @abstract Validates all dependencies of a kext.
- *
- * @param    aKext  The kexts whose dependencies to validate.
- * @result
- * <code>true</code> if all dependencies of <code>aKext</code> are valid,
- * <code>false</code> if any of them are not.
- *
- * @discussion
- * This function calls @link OSKextValidate@/link on <code>aKext</code> and
- * all the current dependencies of <code>aKext</code>.
- * Use @link OSKextCopyDiagnostics@/link
- * with a flag of @link kOSKextDiagnosticsFlagDependencies@/link
- * to get the dependency-resolution failures caused by invalid dependencies.
- *
- * If safe boot is currently simulated (see
- * @link OSKextSetSimulatedSafeBoot@/link),
- * any kext not loadable during safe boot will fail validation.
- *
- * This function calls @link OSKextResolveDependencies@/link to find
- * dependencies.
- */
-CF_EXPORT Boolean
-OSKextValidateDependencies(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextAuthenticate
- * @abstract Authenticates file ownership and permissions of a kext.
- *
- * @param    aKext   The kext to examine.
- * @result
- * <code>true</code> if all directories and files in <code>aKext</code>'s
- * bundle or mkext source have secure ownership and permissions,
- * <code>false</code> if they do not, or if authentication could not be done.
- *
- * @discussion
- * This function forces full authentication of a kext, collecting all
- * errors found in the authentication diagnostics, collecting all
- * errors found in the validation diagnostics if recording is turned on
- * (with @link OSKextSetRecordsDiagnostics@/link). You can get the diagnostics
- * using @link OSKextCopyDiagnostics@/link.
- *
- * For a kext to be loadable into the kernel, it must be owned by
- * user root, group wheel, and its constituent files and directories
- * must be nonwritable by group and other.
- * A kext created from an mkext file uses that mkext file for authentication
- * (see @link OSKextCreateKextsFromMkextFile@/link.
- */
-CF_EXPORT Boolean
-OSKextAuthenticate(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextIsAuthentic
- * @abstract
- * Returns whether a kext is authentic or not.
- *
- * @param    aKext  The kext to examine.
- * @result
- * <code>true</code> if <code>aKext</code> passes all authentication tests,
- * <code>false</code> otherwise.
- *
- * @discussion
- * This function avoids doing full authentication if any problems have been
- * discovered with the kext during other operations. To perform a full
- * validation of all possible problems, use @link OSKextValidate@/link.
- */
-CF_EXPORT Boolean
-OSKextIsAuthentic(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextAuthenticateDependencies
- * @abstract Authenticates all dependencies of a kext.
- *
- * @param    aKext  The kexts whose dependencies to authenticate.
- * @result
- * <code>true</code> if all dependencies of <code>aKext</code> are authentic,
- * <code>false</code> if any of them are not.
- *
- * @discussion
- * This function calls @link OSKextAuthenticate@/link on <code>aKext</code>
- * and all the current dependencies of <code>aKext</code>.
- * Use @link OSKextCopyDiagnostics@/link
- * with a flag of @link kOSKextDiagnosticsFlagDependencies@/link
- * to get the dependency-resolution failures caused by inauthentic dependencies.
- *
- * This function calls @link OSKextResolveDependencies@/link to find
- * dependencies.
- */
-CF_EXPORT Boolean
-OSKextAuthenticateDependencies(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextIsLoadable
- * @abstract
- * Returns whether a kext appears loadable for the current architecture.
- *
- * @param    aKext   The kext to examine.
- * @result
- * <code>true</code> if <code>aKext</code> has no problems with validation,
- * authentication, or dependency resolution for the current architecture,
- * and if it's eligible for the current safe boot mode.
- * Returns <code>false</code> otherwise.
- *
- * @discussion
- * This function resolves dependencies for <code>aKext</code>,
- * validates and authenticsates <code>aKext</code> and its dependencies,
- * and if safe boot is simulated also checks the OSBundleRequired property
- * of <code>aKext</code> and its dependencies. If all these tests pass,
- * the kext is considered loadable for the current architecture
- * (which need not match that of the running kernel).
- *
- * See @link OSKextSetArchitecture@/link and
- * @link OSKextSetSimulatedSafeBoot@/link.
- *
- * This function calls @link OSKextResolveDependencies@/link to find
- * dependencies.
- */
-CF_EXPORT Boolean
-OSKextIsLoadable(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextCopyDiagnostics
- * @abstract Returns diagnostics information for a kext.
- *
- * @param    aKext      The kext to get diagnostics for.
- * @param    typeFlags  Flags indicating which diagnostics to retrieve.
- * @result
- * A dictionary containing diagnostics for <cod>aKext</code>, suitable
- * for display in an outline view or printout.
- *
- * @discussion
- * You can use this function after validating, authenticating, resolving
- * dependencies, or generating debug symbols to get all the problems encountered
- * with those operations.
- *
- * The exact keys and values used for diagnostics are for informational purposes
- * only, are not formally defined, and may change without warning.
- *
- * You can use @link OSKextLogDiagnostics@/link to print nicely-formatted
- * reports of any problems found with kexts.
- */
-// xxx - need to tie in with the kernel & linker to get link failures
-CFDictionaryRef OSKextCopyDiagnostics(OSKextRef aKext,
-        OSKextDiagnosticsFlags typeFlags)
-;
-
-/*!
- * @function OSKextLogDiagnostics
- * @abstract Logs specified diagnostics for a kext.
- *
- * @param    aKext      The kext to log diagnostics for.
- * @param    typeFlags  Flags indicating which diagnostics to log.
- *
- * @discussion
- * You can use this function after validating, authenticating, resolving
- * dependencies, or generating debug symbols to display all the problems
- * encountered with those operations.
- */
-CF_EXPORT void
-OSKextLogDiagnostics(
-    OSKextRef              aKext,
-    OSKextDiagnosticsFlags typeFlags)
-                ;
-
-/*!
- * @function OSKextFlushDiagnostics
- * @abstract Clears all diagnostics information from a kext.
- *
- * @param   aKext
- *          The kext to clear diagnostics from.
- *          Pass <code>NULL</code> to flush diagnostics from all open kexts.
- * @param   typeFlags  Flags indicating which diagnostics to flush.
- *
- * @discussion
- * OSKexts accumulate a fair amount of information as they are created
- * and used; when many kext objects are created the total memory
- * consumption can be significant. If an application won't be using
- * kexts for long periods of time, it can flush this information
- * to save memory; the information will later be re-read from disk
- * or recreated as necessary.
- *
- * See also @link OSKextFlushInfoDictionaries@/link,
- * @link OSKextFlushDependencies@/link,
- * and @link OSKextFlushLoadInfo@/link.
- */
-CF_EXPORT void
-OSKextFlushDiagnostics(OSKextRef aKext, OSKextDiagnosticsFlags typeFlags)
-                ;
-
-#pragma mark Mkext and Prelinked Kernel Files
-/*********************************************************************
-* Mkext and Prelinked Kernel Files
-*********************************************************************/
-// xxx - Use "Flag" or "Mask"?
-typedef uint32_t OSKextRequiredFlags
-;
-#define kOSKextOSBundleRequiredNone              0x0
-#define kOSKextOSBundleRequiredRootFlag          0x1ULL
-#define kOSKextOSBundleRequiredLocalRootFlag     0x1ULL << 1
-#define kOSKextOSBundleRequiredNetworkRootFlag   0x1ULL << 2
-#define kOSKextOSBundleRequiredSafeBootFlag      0x1ULL << 3
-#define kOSKextOSBundleRequiredConsoleFlag       0x1ULL << 4
-
-/*!
- * @function OSKextIsFromMkext
- * @abstract Returns whether a kext was created from an mkext archive.
- *
- * @param    aKext  The kext to examine.
- * @result
- * <code>true</code> if <code>aKext</code> was created from an mkext archive,
- * <code>false</code> if it was created from an on-disk bundle.
- *
- * @discussion
- * A kext created from an mkext will have only its info dictionary, executable,
- * and any resources listed in its the OSBundleStartupResources property.
- */
-CF_EXPORT Boolean
-OSKextIsFromMkext(OSKextRef aKext)
-                ;
-
-/*!
- * @function OSKextMatchesRequiredFlags
- * @abstract
- * Returns whether a kext matches a given set of flags for inclusion in an
- * mkext archive.
- *
- * @param    aKext          The kext to examine.
- * @param    requiredFlags
- *           Flags indicating which values of OSBundleRequired
- *           are needed.
- * @result
- * <code>true</code> if <code>aKext</code>'s OSBundleRequired property
- * matches one of the specified flags, <code>false</code> otherwise.
- *
- * @discussion
- * This function is used to select kexts for inclusion in an mkext archive.
- * See @link OSKextFilterRequiredKexts@/link and
- * @link OSKextCreateMkext@/link.
- */
-CF_EXPORT Boolean
-OSKextMatchesRequiredFlags(OSKextRef aKext,
-    OSKextRequiredFlags requiredFlags)
-                ;
-
-/*!
- * @function OSKextFilterRequiredKexts
- * @abstract
- * Filters an array of kexts based on a set of flags
- * for inclusion in an mkext archive.
- *
- * @param    kextArray
- *           The kexts to filter.
- *           Pass <code>NULL</code> to filter all open kexts.
- * @param    requiredFlags
- *           Flags indicating which values of OSBundleRequired
- *           are needed.
- * @result
- * An array of kexts matching <code>requiredFlags</code>.
- *
- * @discussion
- * This function is used to select kexts for inclusion in an mkext archive.
- * See @link OSKextCreateMkext@/link.
- * 
- */
-CF_EXPORT CFArrayRef
-OSKextFilterRequiredKexts(CFArrayRef kextArray,
-    OSKextRequiredFlags requiredFlags)
-                ;
-
-/*!
- * @function OSKextCreateMkext
- * @abstract Create an mkext file from an array of kexts and set of flags.
- *
- * @param    allocator
- *           The allocator to use to allocate memory for the new object.
- *           Pass <code>NULL</code> or <code>kCFAllocatorDefault</code>
- *           to use the current default allocator.
- * @param    kextArray
- *           The kexts to include in the mkext.
- *           Pass <code>NULL</code> to use all open kexts.
- * @param    volumeRootURL
- *           If non-<code>NULL</code>, kexts with this URL as a prefix
- *           strip it when saving their paths in the mkext.
- *           This allows creation of mkexts for volumes
- *           other than the current startup volume.
- * @param    requiredFlags
- *           A set of flags that filters <code>kextArray</code> to a subset
- *           of kexts required for specific startup scenarios
- *           (typically local disk vs. network).
- * @param    compressFlag
- *           <code>true</code> to compress data in the mkext,
- *           <code>false</code> to include them at full size.
- *           COMPRESSED MKEXTS ARE NOT SUPPORTED IN THE KERNEL YET.
- * @result
- * A <code>CFData</code> object containing the mkext file data on success,
- * <code>NULL</code> on failure.
- *
- * @discussion
- * This function creates a single-architecture mkext file for the currently
- * set library architecture (see @link OSKextSetArchitecture@/link). Kexts
- * with executables lacking code for that architecture are not included.
- *
- * If you want to create a multi-architecture mkext, create a set of single
- * architecture mkext files and use lipo(1) or combine them programmatically.
- *
- * This function generates mkext files in a new format that only works on
- * Mac OS X 10.6 or later.
- */
-// xxx - add a version param and generate old-format mkexts?
-// xxx - add flag to take only most recent version of a given bundle ID?
-CF_EXPORT CFDataRef
-OSKextCreateMkext(
-    CFAllocatorRef      allocator,
-    CFArrayRef          kextArray,
-    CFURLRef            volumeRootURL,
-    OSKextRequiredFlags requiredFlags,
-    Boolean             compressFlag)
-                ;
-    
-/*!
- * @function OSKextCreateKextsFromMkextFile
- * @abstract Reads all kexts from an mkext file on disk. 
- *
- * @param    alocator
- *           The allocator to use to allocate memory for the new objects.
- *           Pass <code>NULL</code> or <code>kCFAllocatorDefault</code>
- *           to use the current default allocator.
- * @param    mkextURL
- *           The mkext file URL from which to create kexts.
- * @result
- * Returns an array containing the kext objects created,
- * or <code>NULL</code> on failure.
- *
- * @discussion
- * This function creates kext objects from an mkext file rather than from
- * bundles on disk. Kexts created with this function are authenticated using
- * the mkext file at <code>mkextURL</code>.
- *
- * A kext created from an mkext has only its info dictionary, executable,
- * and any resources listed in its the OSBundleStartupResources property.
- *
- * Kexts created from an mkext are not uniqued using filesystem URLs,
- * which belong to bundles actually in the filesystem;
- * @link OSKextCreate@/link will never return a kext extracted from an mkext
- * that originally had the URL given (even though the new mkext format
- * stores that original URL).
- * This also means that if you open the same mkext file multiple times,
- * you will create distinct, identical copies of the kexts in that mkext file.
- */
-CF_EXPORT CFArrayRef
-OSKextCreateKextsFromMkextFile(CFAllocatorRef allocator,
-    CFURLRef mkextURL)
-                ;
-
-/*!
- * @function OSKextCreateKextsFromMkextData
- * @abstract Reads all kexts from an mkext file in memory. 
- *
- * @param    alocator
- *           The allocator to use to allocate memory for the new objects.
- *           Pass <code>NULL</code> or <code>kCFAllocatorDefault</code>
- *           to use the current default allocator.
- * @param    mkextData
- *           The mkext file data from which to create kexts.
- * @result
- * Returns an array containing the kext objects created,
- * or <code>NULL</code> on failure.
- *
- * @discussion
- * This function creates kext objects from an mkext file in memory
- * rather than from bundles on disk. Lacking any file in the filesystem,
- * kexts created with this function can not be authenticated.
- *
- * A kext created from an mkext has only its info dictionary, executable,
- * and any resources listed in its the OSBundleStartupResources property.
- *
- * Kexts created from an mkext are not uniqued using filesystem URLs,
- * which belong to bundles actually in the filesystem;
- * @link OSKextCreate@/link will never return a kext extracted from an mkext
- * that originally had the URL given (even though the new mkext format
- * stores that original URL).
- * This also means that if you open the same mkext file multiple times,
- * you will create distinct, identical copies of the kexts in that mkext file.
- */
-CF_EXPORT CFArrayRef
-OSKextCreateKextsFromMkextData(CFAllocatorRef allocator,
-    CFDataRef mkextData)
-                ;
-
-/*!
- * @function OSKextCreatePrelinkedKernel
- * @abstract Creates a prelinked kernel from a kernel file and all open kexts.
- *
- * @param    kernelImage     The kernel image to use.
- * @param    kextArray
- *           The kexts to include in the prelinked kernel.
- *           Pass <code>NULL</code> to consult the running kernel
- *           for kexts to include from those open;
- *           the current architecture must match the runninng kernel's.
- * @param    volumeRootURL
- *           If non-<code>NULL</code>, kexts with this URL as a prefix
- *           strip it when saving their paths in the prelinked kernel.
- *           This allows creation of prelinked kernels from folders
- *           other than /System/Library/Extensions.
- * @param    needAllFlag
- *           If <code>true</code> and any kext fails to link,
- *           the skipAuthenticationFlag returns <code>NULL</code>.
- * @param    skipAuthenticationFlag
- *           If <code>true</code>, kexts are not authenticated for inclusion
- *           in the prelinked kernel.
- * @param    printDiagnosticsFlag
- *           If <code>true</code>, problems with the kexts that prevent
- *           inclusion of a kext in the prelinked kernel are logged via
- *           @link OSKextLogDiagnostics OSKextLogDiagnostics@/link.
- * @param    symbolsOut
- *           If non-<code>NULL</code> debug symbols for <code>kernelImage</code>
- *           and all kexts included in the result are returned by reference.
- *
- * @result
- * A <code>CFData</code> object containing the prelinked kernel image based
- * on the running kernel.
- * Returns <code>NULL</code> if <code>needAllFlag</code> is <code>true</code>
- * and any kext fails to link.
- */
-CF_EXPORT CFDataRef
-OSKextCreatePrelinkedKernel(
-    CFDataRef         kernelImage,
-    CFArrayRef        kextArray,
-    CFURLRef          volumeRootURL,
-    Boolean           needAllFlag,
-    Boolean           skipAuthenticationFlag,
-    Boolean           printDiagnosticsFlag,
-    CFDictionaryRef * symbolsOut)
-                ;
-
-/*!
- * @function OSKextotherCFBundleVersionIsLoaded 
- * @abstract
- * Returns whether another version of a given kext is loaded in the kernel.
- *
- * @param    aKext   The kext to examine.
- * @result
- * <code>true</code> if a kext with the same identifier,
- * but a different version or UUID
- * from <code>aKext</code>, is loaded in the kernel.
- * Returns <code>false</code> if <code>aKext</code> is loaded or if
- * no kext with the same identifier is loaded.
- *
- * @discussion
- * You must call @link OSKextReadLoadedKextInfo@/link for this flag to be meaningful,
- * which in turn requires the current library architecture to match that
- * of the running kernel.
- * Use @link OSKextIsLoaded@/link to check whether <code>aKext</code>
- * itself is loaded. 
- */
-CF_EXPORT Boolean OSKextotherCFBundleVersionIsLoaded(OSKextRef kext, Boolean* uuidFlag);
-
-__END_DECLS
-
-#endif /* __OSKEXT_H__ */
diff --git a/external/ios-headers/IOKit/OSMessageNotification.h b/external/ios-headers/IOKit/OSMessageNotification.h
deleted file mode 100755
index e044c2a..0000000
--- a/external/ios-headers/IOKit/OSMessageNotification.h
+++ /dev/null
@@ -1,158 +0,0 @@
-/*
- * Copyright (c) 1998-2000 Apple Computer, Inc. All rights reserved.
- *
- * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
- * 
- * This file contains Original Code and/or Modifications of Original Code
- * as defined in and that are subject to the Apple Public Source License
- * Version 2.0 (the 'License'). You may not use this file except in
- * compliance with the License. The rights granted to you under the License
- * may not be used to create, or enable the creation or redistribution of,
- * unlawful or unlicensed copies of an Apple operating system, or to
- * circumvent, violate, or enable the circumvention or violation of, any
- * terms of an Apple operating system software license agreement.
- * 
- * Please obtain a copy of the License at
- * http://www.opensource.apple.com/apsl/ and read it before using this file.
- * 
- * The Original Code and all software distributed under the License are
- * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
- * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
- * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
- * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
- * Please see the License for the specific language governing rights and
- * limitations under the License.
- * 
- * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
- */
-/*
- * Copyright (c) 1999 Apple Computer, Inc.  All rights reserved. 
- *
- * HISTORY
- *
- */
-
-#ifndef	__OS_OSMESSAGENOTIFICATION_H
-#define __OS_OSMESSAGENOTIFICATION_H
-
-#ifdef __cplusplus
-extern "C" {
-#endif
-
-#include <mach/mach_types.h>
-#include <device/device_types.h>
-#include "IOReturn.h"
-
-enum {
-    kFirstIOKitNotificationType 		= 100,
-    kIOServicePublishNotificationType 		= 100,
-    kIOServiceMatchedNotificationType		= 101,
-    kIOServiceTerminatedNotificationType	= 102,
-    kIOAsyncCompletionNotificationType		= 150,
-    kIOServiceMessageNotificationType		= 160,
-    kLastIOKitNotificationType 			= 199
-};
-
-enum {
-    kOSNotificationMessageID		= 53,
-    kOSAsyncCompleteMessageID		= 57,
-    kMaxAsyncArgs			= 16
-};
-
-enum {
-    kIOAsyncReservedIndex 	= 0,
-    kIOAsyncReservedCount,
-
-    kIOAsyncCalloutFuncIndex 	= kIOAsyncReservedCount,
-    kIOAsyncCalloutRefconIndex,
-    kIOAsyncCalloutCount,
-
-    kIOMatchingCalloutFuncIndex	= kIOAsyncReservedCount,
-    kIOMatchingCalloutRefconIndex,
-    kIOMatchingCalloutCount,
-    
-    kIOInterestCalloutFuncIndex	= kIOAsyncReservedCount,
-    kIOInterestCalloutRefconIndex,
-    kIOInterestCalloutServiceIndex,
-    kIOInterestCalloutCount
-};
-
-
-
-// --------------
-enum {
-    kOSAsyncRef64Count	= 8,
-    kOSAsyncRef64Size 	= kOSAsyncRef64Count * ((int) sizeof(io_user_reference_t))
-};
-typedef io_user_reference_t OSAsyncReference64[kOSAsyncRef64Count];
-
-struct OSNotificationHeader64 {
-    mach_msg_size_t	size;		/* content size */
-    natural_t		type;
-    OSAsyncReference64	reference;
-
-#if defined(__STDC_VERSION__) && (__STDC_VERSION__ >= 199901L)
-    unsigned char	content[];
-#else
-    unsigned char	content[0];
-#endif
-};
-
-#pragma pack(4)
-struct IOServiceInterestContent64 {
-    natural_t		messageType;
-    io_user_reference_t	messageArgument[1];
-};
-#pragma pack()
-// --------------
-
-#if !KERNEL_USER32
-
-enum {
-    kOSAsyncRefCount	= 8,
-    kOSAsyncRefSize 	= 32
-};
-typedef natural_t OSAsyncReference[kOSAsyncRefCount];
-
-struct OSNotificationHeader {
-    mach_msg_size_t	size;		/* content size */
-    natural_t		type;
-    OSAsyncReference	reference;
-
-#if defined(__STDC_VERSION__) && (__STDC_VERSION__ >= 199901L)
-    unsigned char	content[];
-#else
-    unsigned char	content[0];
-#endif
-};
-
-#pragma pack(4)
-struct IOServiceInterestContent {
-    natural_t	messageType;
-    void *	messageArgument[1];
-};
-#pragma pack()
-
-#endif /* KERNEL_USER32  */
-
-struct IOAsyncCompletionContent {
-    IOReturn result;
-#if defined(__STDC_VERSION__) && (__STDC_VERSION__ >= 199901L)
-    void * args[] __attribute__ ((packed));
-#else
-    void * args[0] __attribute__ ((packed));
-#endif
-};
-
-#ifndef __cplusplus
-typedef struct OSNotificationHeader OSNotificationHeader;
-typedef struct IOServiceInterestContent IOServiceInterestContent;
-typedef struct IOAsyncCompletionContent IOAsyncCompletionContent;
-#endif
-
-#ifdef __cplusplus
-}
-#endif
-
-#endif /*  __OS_OSMESSAGENOTIFICATION_H */
-
diff --git a/external/ios-headers/IOKit/hid/IOHIDDisplay.h b/external/ios-headers/IOKit/hid/IOHIDDisplay.h
deleted file mode 100755
index e71efed..0000000
--- a/external/ios-headers/IOKit/hid/IOHIDDisplay.h
+++ /dev/null
@@ -1,131 +0,0 @@
-/*
- 
-IOHIDDisplay.h ... I/O Kit HID Display
-
-Copyright (c) 2009  KennyTM~ <kennytm@gmail.com>
-All rights reserved.
-
-Redistribution and use in source and binary forms, with or without modification,
-are permitted provided that the following conditions are met:
-
-* Redistributions of source code must retain the above copyright notice, this
-  list of conditions and the following disclaimer.
-* Redistributions in binary form must reproduce the above copyright notice, 
-  this list of conditions and the following disclaimer in the documentation
-  and/or other materials provided with the distribution.
-* Neither the name of the KennyTM~ nor the names of its contributors may be
-  used to endorse or promote products derived from this software without
-  specific prior written permission.
-
-THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
-ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
-WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
-DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
-ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
-(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
-LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
-ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
-SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-
-*/
-
-#ifndef IOHID_DISPLAY_H
-#define IOHID_DISPLAY_H
-
-#include <CoreFoundation/CoreFoundation.h>
-#include <IOKit/IOKitLib.h>
-#include "IOHIDNotification.h"
-
-#if __cplusplus
-extern "C" {
-#endif
-		
-	typedef struct __IOHIDDisplay
-#if 0
-	{
-		CFRuntimeBase _base;	// 0, 4
-		void* client;	// 8
-		io_service_t service;	// c
-		CFRunLoopRef runloop;	// 10
-		CFStringRef mode;	// 14, *not retained*
-		IONotificationPortRef port;	// 18
-		io_object_t notification;	// 1c
-		CFMutableSetRef removalNotifications;	// 20, set of IOHIDNotification's
-		CFMutableDictionaryRef properties;	// 24
-		int logLevel;	// 28
-		float brightness;	// 34
-		float brightnessMin;	// 38
-		float brightnessMax;	// 3c
-		float brightnessFactor;	// 40;
-		float x44;	// 44
-		float ambient;	// 4c
-		float brightnessAutoWeightMin;	// 54
-		float brightnessAutoWeightMax;	// 58
-		float x60;	// 60
-		float x64;	// 64
-		float x68;	// 68
-		float x70;	// 70
-		float x74;	// 74
-		int x78;	// 78
-		int x80;	// 80
-		CFTimeInterval fadePeriod;	// 84
-	}
-#endif
-	* IOHIDDisplayRef;
-	
-#pragma mark -
-#pragma mark Creators
-		
-	CFTypeID IOHIDDisplayGetTypeID(void);
-	IOHIDDisplayRef _IOHIDDisplayCreate(CFAllocatorRef allocator, io_service_t service);
-	
-#pragma mark -
-#pragma mark Accessors
-	
-	float _IOHIDDisplayGetAmbient(IOHIDDisplayRef display);
-	void _IOHIDDisplaySetAmbient(IOHIDDisplayRef display, float ambient);
-	
-	float _IOHIDDisplayGetBrightness(IOHIDDisplayRef display);
-	void _IOHIDDisplaySetBrightness(IOHIDDisplayRef display, float brightness);
-	void _IOHIDDisplaySetBrightnessMax(IOHIDDisplayRef display, float brightnessMax);
-	
-	void _IOHIDDisplaySetBrightnessFactor(IOHIDDisplayRef display, float factor);
-	float _IOHIDDisplayGetBrightnessFactor(IOHIDDisplayRef display);
-		
-	void IOHIDDisplaySetProperty(IOHIDDisplayRef display, CFStringRef property, CFTypeRef value);
-	CFTypeRef IOHIDDisplayGetProperty(IOHIDDisplayRef display, CFStringRef property);
-	
-	CFTypeRef _IOHIDDisplayGetClient(IOHIDDisplayRef display);
-	
-#pragma mark -
-#pragma mark Actions
-	
-	void _IOHIDDisplayUnscheduleWithRunLoop(IOHIDDisplayRef display, CFRunLoopRef runloop, CFStringRef mode);
-	void _IOHIDDisplayScheduleWithRunLoop(IOHIDDisplayRef display, CFRunLoopRef runloop, CFStringRef mode);
-	
-	IOHIDNotificationRef IOHIDDisplayCreateRemovalNotification(IOHIDDisplayRef display, IOHIDNotificationCallback callback, void* target, void* refcon);
-	
-	Boolean _IOHIDDisplayOpen(IOHIDDisplayRef display, CFTypeRef client);
-	void _IOHIDDisplayClose(IOHIDDisplayRef display, CFTypeRef client);
-	
-#pragma mark -
-#pragma mark Constants
-	
-	static const CFStringRef kIOHIDDisplayPropertyBrightness = CFSTR("DisplayBrightness");	// float
-	static const CFStringRef kIOHIDDisplayPropertyBrightnessAuto = CFSTR("DisplayBrightnessAuto");	// boolean
-	static const CFStringRef kIOHIDDisplayPropertyBrightnessMin = CFSTR("DisplayBrightnessMin");	// float
-	static const CFStringRef kIOHIDDisplayPropertyBrightnessMax = CFSTR("DisplayBrightnessMax");	// float
-	static const CFStringRef kIOHIDDisplayPropertyBrightnessAutoWeightMax = CFSTR("DisplayBrightnessAutoWeightMax");	// float
-	static const CFStringRef kIOHIDDisplayPropertyBrightnessAutoWeightMin = CFSTR("DisplayBrightnessAutoWeightMin");	// float
-	static const CFStringRef kIOHIDDisplayPropertyBrightnessFactor = CFSTR("DisplayBrightnessFactor");	// float
-	static const CFStringRef kIOHIDDisplayPropertyBrightnessFactorWithFade = CFSTR("DisplayBrightnessFactorWithFade");	// float
-	static const CFStringRef kIOHIDDisplayPropertyBrightnessFadePeriod = CFSTR("DisplayBrightnessFadePeriod");	// float
-	static const CFStringRef kIOHIDDisplayPropertyLogLevel = CFSTR("LogLevel");	// int	
-	
-#if __cplusplus
-}
-#endif
-
-#endif
-
diff --git a/external/ios-headers/IOKit/hid/IOHIDEvent.h b/external/ios-headers/IOKit/hid/IOHIDEvent.h
deleted file mode 100755
index 1ea306c..0000000
--- a/external/ios-headers/IOKit/hid/IOHIDEvent.h
+++ /dev/null
@@ -1,220 +0,0 @@
-/*
- 
-IOHIDEvent.h ... Header for IOHIDEvent*** functions.
-
-Copyright (c) 2009  KennyTM~ <kennytm@gmail.com>
-All rights reserved.
-
-Redistribution and use in source and binary forms, with or without modification,
-are permitted provided that the following conditions are met:
-
-* Redistributions of source code must retain the above copyright notice, this
-  list of conditions and the following disclaimer.
-* Redistributions in binary form must reproduce the above copyright notice, 
-  this list of conditions and the following disclaimer in the documentation
-  and/or other materials provided with the distribution.
-* Neither the name of the KennyTM~ nor the names of its contributors may be
-  used to endorse or promote products derived from this software without
-  specific prior written permission.
-
-THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
-ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
-WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
-DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
-ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
-(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
-LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
-ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
-SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-
-*/
-
-// With reference to http://www.opensource.apple.com/source/IOHIDFamily/IOHIDFamily-308/IOHIDFamily/IOHIDEvent.h .
-
-#ifndef IOKIT_HID_IOHIDEVENT_H
-#define IOKIT_HID_IOHIDEVENT_H 1
-
-//#include <libkern/OSTypes.h>
-#include <IOKit/IOTypes.h>
-#include <IOKit/hid/IOHIDEventTypes.h>
-#include <IOKit/hid/IOHIDEventData.h>
-#include <CoreFoundation/CoreFoundation.h>
-
-#if __cplusplus
-extern "C" {
-#endif
-	
-	typedef struct __IOHIDEvent
-#if 0
-	{
-		CFRuntimeBase base;	// 0, 4
-		AbsoluteTime _timeStamp;	// 8, c
-		int x10;	// 10
-		int x14;	// 14
-		IOOptionBits _options;	// 18
-		unsigned _typeMask;	// 1c
-		CFMutableArrayRef _children;	// 20
-		struct __IOHIDEvent* _parent;	// 24
-		
-		size_t recordSize;	// 28
-		void record[];		
-	}
-#endif
-	* IOHIDEventRef;
-	
-#pragma mark -
-#pragma mark GetTypeID
-	
-	/*! @function IOHIDEventGetTypeID */
-	CFTypeID IOHIDEventGetTypeID(void);
-	
-#pragma mark -
-#pragma mark Generic creation functions
-	
-	IOHIDEventRef IOHIDEventCreateCopy(CFAllocatorRef allocator, IOHIDEventRef event);
-	/*! @function IOHIDEventCreate
-	 @abstract Create an IOHIDEvent.
-	 @discussion All event-specific parameters are zeroed. */
-	IOHIDEventRef IOHIDEventCreate(CFAllocatorRef allocator, IOHIDEventType type, AbsoluteTime timeStamp, IOOptionBits options);
-	
-	CFMutableDataRef IOHIDEventCreateData(CFAllocatorRef allocator, IOHIDEventRef event);
-	IOHIDEventRef IOHIDEventCreateWithData(CFAllocatorRef allocator, CFDataRef data);
-	
-#pragma mark -
-#pragma mark Predefined creation functions
-	
-	IOHIDEventRef IOHIDEventCreateProgressEvent(CFAllocatorRef allocator, AbsoluteTime timeStamp,
-												uint32_t eventType, IOHIDFloat level, IOOptionBits options);
-	IOHIDEventRef IOHIDEventCreateVendorDefinedEvent(CFAllocatorRef allocator, AbsoluteTime timeStamp,
-													 uint16_t usagePage, uint16_t usage, uint32_t version, const uint8_t* data, uint32_t length, IOOptionBits options);
-	IOHIDEventRef IOHIDEventCreateSwipeEvent(CFAllocatorRef allocator, AbsoluteTime timeStamp, IOHIDSwipeMask swipeMask, IOOptionBits options);
-	
-	/*! @function IOHIDEventCreateDigitizerEvent
-	 @abstract Create a digitizer event. You should use the more specialized methods instead. */
-	IOHIDEventRef IOHIDEventCreateDigitizerEvent(CFAllocatorRef allocator, AbsoluteTime timeStamp, IOHIDDigitizerTransducerType type,
-												 uint32_t index, uint32_t identity, uint32_t eventMask, uint32_t buttonMask,
-												 IOHIDFloat x, IOHIDFloat y, IOHIDFloat z, IOHIDFloat tipPressure, IOHIDFloat barrelPressure,
-												 Boolean range, Boolean touch, IOOptionBits options);
-	IOHIDEventRef IOHIDEventCreateDigitizerFingerEventWithQuality(CFAllocatorRef allocator, AbsoluteTime timeStamp,
-																  uint32_t index, uint32_t identity, uint32_t eventMask,
-																  IOHIDFloat x, IOHIDFloat y, IOHIDFloat z, IOHIDFloat tipPressure, IOHIDFloat twist,
-																  IOHIDFloat minorRadius, IOHIDFloat majorRadius, IOHIDFloat quality, IOHIDFloat density, IOHIDFloat irregularity,
-																  Boolean range, Boolean touch, IOOptionBits options);
-	/*! @function IOHIDEventCreateDigitizerFingerEvent
-	 @abstract Create a finger digitizer event with default qualities.
-	 @discussion The default qualities are:
-	  - minorRadius = 5 mm,
-	  - majorRadius = 5 mm,
-	  - quality = 1,
-	  - density = 1,
-	  - irregularity = 1. */
-	IOHIDEventRef IOHIDEventCreateDigitizerFingerEvent(CFAllocatorRef allocator, AbsoluteTime timeStamp,
-													   uint32_t index, uint32_t identity, uint32_t eventMask,
-													   IOHIDFloat x, IOHIDFloat y, IOHIDFloat z, IOHIDFloat tipPressure, IOHIDFloat twist,
-													   Boolean range, Boolean touch, IOOptionBits options);
-	IOHIDEventRef IOHIDEventCreateDigitizerStylusEventWithPolarOrientation(CFAllocatorRef allocator, AbsoluteTime timeStamp,
-																		   uint32_t index, uint32_t identity, uint32_t eventMask, uint32_t buttonMask,
-																		   IOHIDFloat x, IOHIDFloat y, IOHIDFloat z, IOHIDFloat tipPressure, IOHIDFloat barrelPressure,
-																		   IOHIDFloat twist, IOHIDFloat altitude, IOHIDFloat azimuth, 
-																		   Boolean range, Boolean invert, IOOptionBits options);
-	/*! @function IOHIDEventCreateDigitizerStylusEvent
-	 @discussion Same as IOHIDEventCreateDigitizerStylusEventWithPolarOrientation? */
-	IOHIDEventRef IOHIDEventCreateDigitizerStylusEvent(CFAllocatorRef allocator, AbsoluteTime timeStamp,
-													   uint32_t index, uint32_t identity, uint32_t eventMask, uint32_t buttonMask,
-													   IOHIDFloat x, IOHIDFloat y, IOHIDFloat z, IOHIDFloat tipPressure, IOHIDFloat barrelPressure,
-													   IOHIDFloat twist, IOHIDFloat altitude, IOHIDFloat azimuth, 
-													   Boolean range, Boolean invert, IOOptionBits options);
-
-	IOHIDEventRef IOHIDEventCreateProximtyEvent(CFAllocatorRef allocator, AbsoluteTime timeStamp, IOHIDProximityDetectionMask detectionMask, IOOptionBits options);
-#define IOHIDEventCreateProximityEvent IOHIDEventCreateProximtyEvent
-	IOHIDEventRef IOHIDEventCreateAmbientLightSensorEvent(CFAllocatorRef allocator, AbsoluteTime timeStamp, IOHIDFloat level, IOOptionBits options);
-	
-	/*! @function IOHIDEventCreateMouseEvent
-	 @abstract Create an mouse event, with pressure of 1.0. */
-	IOHIDEventRef IOHIDEventCreateMouseEvent(CFAllocatorRef allocator, AbsoluteTime timeStamp,
-											 IOHIDFloat x, IOHIDFloat y, IOHIDFloat z, uint32_t buttonMask, IOOptionBits options);
-	/*! @function IOHIDEventCreateMouseEventWithPressure
-	 @abstract Create an mouse event with pressure.
-	 @discussion The mouse is considered clicked when the pressure is > 0.15. */
-	IOHIDEventRef IOHIDEventCreateMouseEventWithPressure(CFAllocatorRef allocator, AbsoluteTime timeStamp,
-														 IOHIDFloat x, IOHIDFloat y, IOHIDFloat z, uint32_t buttonMask, IOHIDFloat pressure, IOOptionBits options);
-	/*! @function IOHIDEventCreateButtonEvent
-	 @abstract Create an button event, with pressure of 1.0. */
-	IOHIDEventRef IOHIDEventCreateButtonEvent(CFAllocatorRef allocator, AbsoluteTime timeStamp, uint32_t buttonMask, IOOptionBits options);
-	/*! @function IOHIDEventCreateButtonEventWithPressure
-	 @abstract Create an button event with pressure.
-	 @discussion The button is considered pressed when the pressure is > 0.15. */
-	IOHIDEventRef IOHIDEventCreateButtonEventWithPressure(CFAllocatorRef allocator, AbsoluteTime timeStamp, uint32_t buttonMask, IOHIDFloat pressure, IOOptionBits options);
-
-	IOHIDEventRef IOHIDEventCreateKeyboardEvent(CFAllocatorRef allocator, AbsoluteTime timeStamp, uint16_t usagePage, uint16_t usage, Boolean down, IOHIDEventOptionBits flags);
-	
-	IOHIDEventRef IOHIDEventCreateAccelerometerEvent(CFAllocatorRef allocator, AbsoluteTime timeStamp, IOHIDFloat x, IOHIDFloat y, IOHIDFloat z, IOOptionBits options);
-	IOHIDEventRef IOHIDEventCreatePolarOrientationEvent(CFAllocatorRef allocator, AbsoluteTime timeStamp, IOHIDFloat x, IOHIDFloat y, IOHIDFloat z, IOOptionBits options);
-	IOHIDEventRef IOHIDEventCreateOrientationEvent(CFAllocatorRef allocator, AbsoluteTime timeStamp, IOHIDFloat x, IOHIDFloat y, IOHIDFloat z, IOOptionBits options);
-	IOHIDEventRef IOHIDEventCreateVelocityEvent(CFAllocatorRef allocator, AbsoluteTime timeStamp, IOHIDFloat x, IOHIDFloat y, IOHIDFloat z, IOOptionBits options);
-	IOHIDEventRef IOHIDEventCreateScaleEvent(CFAllocatorRef allocator, AbsoluteTime timeStamp, IOHIDFloat x, IOHIDFloat y, IOHIDFloat z, IOOptionBits options);
-	IOHIDEventRef IOHIDEventCreateScrollEvent(CFAllocatorRef allocator, AbsoluteTime timeStamp, IOHIDFloat x, IOHIDFloat y, IOHIDFloat z, IOOptionBits options);
-	IOHIDEventRef IOHIDEventCreateRotationEvent(CFAllocatorRef allocator, AbsoluteTime timeStamp, IOHIDFloat x, IOHIDFloat y, IOHIDFloat z, IOOptionBits options);
-	IOHIDEventRef IOHIDEventCreateTranslationEvent(CFAllocatorRef allocator, AbsoluteTime timeStamp, IOHIDFloat x, IOHIDFloat y, IOHIDFloat z, IOOptionBits options);
-	
-#pragma mark -
-#pragma mark Accessors
-	
-	IOHIDEventType IOHIDEventGetType(IOHIDEventRef event);
-	
-	AbsoluteTime IOHIDEventGetTimeStamp(IOHIDEventRef event);
-	void IOHIDEventSetTimeStamp(IOHIDEventRef event, AbsoluteTime timeStamp);
-	
-	uint32_t IOHIDEventGetEventFlags(IOHIDEventRef event);
-	void IOHIDEventSetEventFlags(IOHIDEventRef event, uint32_t eventFlags);
-	Boolean IOHIDEventIsAbsolute(IOHIDEventRef event);
-	
-	IOHIDEventRef IOHIDEventGetParent(IOHIDEventRef event);
-	CFArrayRef IOHIDEventGetChildren(IOHIDEventRef event);
-	
-	void IOHIDEventGetVendorDefinedData(IOHIDEventRef event, uint32_t* length, uint8_t** data);
-
-#pragma mark -
-#pragma mark Subevents
-	
-	/*! @function IOHIDEventGetEventWithOptions
-	 @abstract Get the deepest event that bears the specified type and matches the options.
-	 @discussion If any of the top 4 bits of options is set (i.e. (options & 0xF0000000) != 0), the children of this event will not be checked. */
-	IOHIDEventRef IOHIDEventGetEventWithOptions(IOHIDEventRef event, IOHIDEventType type, IOOptionBits options);
-	/*! @function IOHIDEventGetEvent
-	 @abstract Get the event that bears the specified type. 
-	 @discussion Equivalent to IOHIDEventGetEventWithOptions(event, type, 0xF0000000); */
-	IOHIDEventRef IOHIDEventGetEvent(IOHIDEventRef event, IOHIDEventType type);
-	
-	void IOHIDEventSetFloatValueWithOptions(IOHIDEventRef event, IOHIDEventField field, IOHIDFloat value, IOOptionBits options);
-	void IOHIDEventSetFloatValue(IOHIDEventRef event, IOHIDEventField field, IOHIDFloat value);
-	void IOHIDEventSetIntegerValueWithOptions(IOHIDEventRef event, IOHIDEventField field, int value, IOOptionBits options);
-	void IOHIDEventSetIntegerValue(IOHIDEventRef event, IOHIDEventField field, int value);
-	void IOHIDEventSetPositionWithOptions(IOHIDEventRef event, IOHIDEventField field, IOHID3DPoint position, IOOptionBits options);
-	void IOHIDEventSetPosition(IOHIDEventRef event, IOHIDEventField field, IOHID3DPoint position);
-	
-	IOHIDFloat IOHIDEventGetFloatValueWithOptions(IOHIDEventRef event, IOHIDEventField field, IOOptionBits options);
-	IOHIDFloat IOHIDEventGetFloatValue(IOHIDEventRef event, IOHIDEventField field);
-	int IOHIDEventGetIntegerValueWithOptions(IOHIDEventRef event, IOHIDEventField field, IOOptionBits options);
-	int IOHIDEventGetIntegerValue(IOHIDEventRef event, IOHIDEventField field);
-	IOHID3DPoint IOHIDEventGetPositionWithOptions(IOHIDEventRef event, IOHIDEventField field, IOOptionBits options);
-	IOHID3DPoint IOHIDEventGetPosition(IOHIDEventRef event, IOHIDEventField field);
-	
-	/*! @function IOHIDEventConformsToWithOptions
-	 @abstract Returns if the event or any of its children bears the specified type and options.
-	 @discussion If any of the top 4 bits of options is set (i.e. (options & 0xF0000000) != 0), the children of this event will not be checked. */
-	Boolean IOHIDEventConformsToWithOptions(IOHIDEventRef event, IOHIDEventType type, IOOptionBits options);
-	/*! @function IOHIDEventConformsTo
-	 @abstract Returns if the event bears the specified type.
-	 @discussion Equivalent to IOHIDEventConformsToWithOptions(event, type, 0xF0000000); */
-	Boolean IOHIDEventConformsTo(IOHIDEventRef event, IOHIDEventType type);
-
-	void IOHIDEventRemoveEvent(IOHIDEventRef event, IOHIDEventRef childEvent);
-	void IOHIDEventAppendEvent(IOHIDEventRef event, IOHIDEventRef childEvent);
-
-#if __cplusplus
-}
-#endif
-
-#endif
diff --git a/external/ios-headers/IOKit/hid/IOHIDEventData.h b/external/ios-headers/IOKit/hid/IOHIDEventData.h
deleted file mode 100755
index e2f781f..0000000
--- a/external/ios-headers/IOKit/hid/IOHIDEventData.h
+++ /dev/null
@@ -1,1020 +0,0 @@
-/*
- *
- * @APPLE_LICENSE_HEADER_START@
- * 
- * Copyright (c) 1999-2003 Apple Computer, Inc.  All Rights Reserved.
- * 
- * This file contains Original Code and/or Modifications of Original Code
- * as defined in and that are subject to the Apple Public Source License
- * Version 2.0 (the 'License'). You may not use this file except in
- * compliance with the License. Please obtain a copy of the License at
- * http://www.opensource.apple.com/apsl/ and read it before using this
- * file.
- * 
- * The Original Code and all software distributed under the License are
- * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
- * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
- * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
- * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
- * Please see the License for the specific language governing rights and
- * limitations under the License.
- * 
- * @APPLE_LICENSE_HEADER_END@
- */
-
-#ifndef _IOKIT_HID_IOHIDEVENTDATA_H
-#define _IOKIT_HID_IOHIDEVENTDATA_H
-
-#include <IOKit/IOTypes.h>
-#include <IOKit/hid/IOHIDEventTypes.h>
-
-#ifdef KERNEL
-    #include <IOKit/IOLib.h>
-
-    #define IOHIDEventRef IOHIDEvent *
-#else
-    #include <IOKit/hid/IOHIDEvent.h>
-
-    typedef struct IOHIDEventData IOHIDEventData;
-#endif
-
-//==============================================================================
-// IOHIDEventData Declarations
-//==============================================================================
-
-#define IOHIDEVENT_BASE         \
-    uint32_t        size;       \
-    IOHIDEventType  type;       \
-    uint64_t        timestamp;  \
-    uint32_t        options;
-
-/*!
-    @typedef    IOHIDEventData
-    @abstract   
-    @discussion 
-    @field      size        Size, in bytes, of the memory detailing this
-                            particular event
-    @field      type        Type of this particular event
-    @field      options     Event specific options
-*/
-
-struct IOHIDEventData{
-    IOHIDEVENT_BASE;
-};
-
-typedef struct _IOHIDVendorDefinedEventData {
-    IOHIDEVENT_BASE;
-    uint16_t        usagePage;
-    uint16_t        usage;
-    uint32_t        version;
-    uint32_t        length;
-    uint8_t         data[0];
-} IOHIDVendorDefinedEventData;
-
-enum {
-    kIOHIDKeyboardIsRepeat      = 0x00010000
-};
-
-typedef struct _IOHIDKeyboardEventData {
-    IOHIDEVENT_BASE;                            // options = kHIDKeyboardRepeat
-    uint16_t        usagePage;
-    uint16_t        usage;
-    boolean_t       down;
-} IOHIDKeyboardEventData;
-
-enum {
-    kIOHIDEventOptionIgnore     = 0xf0000000
-};
-
-enum {
-    kIOHIDTransducerRange       = 0x00010000,
-    kIOHIDTransducerTouch       = 0x00020000,
-    kIOHIDTransducerInvert      = 0x00040000,
-};
-
-enum {
-    kIOHIDDigitizerOrientationTypeTilt = 0,
-    kIOHIDDigitizerOrientationTypePolar,
-    kIOHIDDigitizerOrientationTypeQuality
-};
-typedef uint8_t IOHIDDigitizerOrientationType;
-
-#define IOHIDAXISEVENT_BASE     \
-    struct {                    \
-        IOFixed x;              \
-        IOFixed y;              \
-        IOFixed z;              \
-    } position;
-
-typedef struct _IOHIDAxisEventData {
-    IOHIDEVENT_BASE;                            // options = kHIDAxisRelative
-    IOHIDAXISEVENT_BASE;
-} IOHIDAxisEventData, IOHIDTranslationData, IOHIDRotationEventData, IOHIDScrollEventData, IOHIDScaleEventData, IOHIDVelocityData, IOHIDOrientationEventData;
-
-typedef struct _IOHIDAccelerometerEventData {
-    IOHIDEVENT_BASE;                            // options = kHIDAxisRelative
-    IOHIDAXISEVENT_BASE;
-    uint32_t        acclType;
-} IOHIDAccelerometerEventData;
-
-typedef struct _IOHIDAmbientLightSensorEventData {
-    IOHIDEVENT_BASE;                            // options = kHIDAxisRelative
-    uint32_t        level;
-    uint32_t        ch0;
-    uint32_t        ch1;
-    Boolean         brightnessChanged;
-} IOHIDAmbientLightSensorEventData;
-
-typedef struct _IOHIDTemperatureEventData {
-    IOHIDEVENT_BASE;                            
-    IOFixed        level;
-} IOHIDTemperatureEventData;
-
-typedef struct _IOHIDProximityEventData {
-    IOHIDEVENT_BASE;                            
-    uint32_t        detectionMask;
-} IOHIDProximityEventData;
-
-typedef struct _IOHIDProgressEventData {
-    IOHIDEVENT_BASE;
-    uint32_t        eventType;
-    IOFixed         level;
-} IOHIDProgressEventData;
-
-
-#define IOHIDBUTTONEVENT_BASE           \
-    struct {                            \
-        uint32_t        buttonMask;     \
-        IOFixed         pressure;       \
-        uint8_t         buttonNumber;   \
-        uint8_t         clickState;     \
-    } button;
-
-typedef struct _IOHIDButtonEventData {
-    IOHIDEVENT_BASE;
-    IOHIDBUTTONEVENT_BASE;
-} IOHIDButtonEventData;
-
-typedef struct _IOHIDMouseEventData {
-    IOHIDEVENT_BASE;
-    IOHIDAXISEVENT_BASE;
-    IOHIDBUTTONEVENT_BASE;
-} IOHIDMouseEventData;
-
-
-typedef struct _IOHIDDigitizerEventData {
-    IOHIDEVENT_BASE;                            // options = kIOHIDTransducerRange, kHIDTransducerTouch, kHIDTransducerInvert
-    IOHIDAXISEVENT_BASE;						// 3c, 40, 44
-
-    uint32_t        transducerIndex;   
-    uint32_t        transducerType;				// could overload this to include that both the hand and finger id.
-    uint32_t        identity;                   // Specifies a unique ID of the current transducer action.
-    uint32_t        eventMask;                  // the type of event that has occurred: range, touch, position
-    uint32_t        childEventMask;             // CHILD: the type of event that has occurred: range, touch, position
-    
-    uint32_t        buttonMask;                 // Bit field representing the current button state
-                                                // Pressure field are assumed to be scaled from 0.0 to 1.0
-    IOFixed         tipPressure;                // Force exerted against the digitizer surface by the transducer.
-    IOFixed         barrelPressure;             // Force exerted directly by the user on a transducer sensor.
-    
-    IOFixed         twist;                      // Specifies the clockwise rotation of the cursor around its own major axis.  Unsure it the device should declare units via properties or event.  My first inclination is force degrees as the is the unit already expected by AppKit, Carbon and OpenGL.
-    uint32_t        orientationType;            // Specifies the orientation type used by the transducer.
-    union {
-        struct {                                // X Tilt and Y Tilt are used together to specify the tilt away from normal of a digitizer transducer. In its normal position, the values of X Tilt and Y Tilt for a transducer are both zero.
-            IOFixed     x;                      // This quantity is used in conjunction with Y Tilt to represent the tilt away from normal of a transducer, such as a stylus. The X Tilt value represents the plane angle between the Y-Z plane and the plane containing the transducer axis and the Y axis. A positive X Tilt is to the right. 
-            IOFixed     y;                      // This value represents the angle between the X-Z and transducer-X planes. A positive Y Tilt is toward the user.
-        } tilt;
-        struct {                                // X Tilt and Y Tilt are used together to specify the tilt away from normal of a digitizer transducer. In its normal position, the values of X Tilt and Y Tilt for a transducer are both zero.
-            IOFixed  altitude;                  //The angle with the X-Y plane though a signed, semicicular range.  Positive values specify an angle downward and toward the positive Z axis. 
-            IOFixed  azimuth;                   // Specifies the counter clockwise rotation of the cursor around the Z axis though a full circular range.
-        } polar;
-        struct {
-            IOFixed  quality;                    // If set, indicates that the transducer is sensed to be in a relatively noise-free region of digitizing.
-            IOFixed  density;
-            IOFixed  irregularity;
-            IOFixed  majorRadius;                // units in mm
-            IOFixed  minorRadius;                // units in mm
-        } quality;
-    }orientation;
-} IOHIDDigitizerEventData;
-
-typedef struct _IOHIDSwipeEventData {
-    IOHIDEVENT_BASE;                            
-    IOHIDSwipeMask swipeMask;
-} IOHIDSwipeEventData;
-
-
-/*!
-    @typedef    IOHIDSystemQueueElement
-    @abstract   Memory structure defining the layout of each event queue element
-    @discussion The IOHIDEventQueueElement represents a portion of mememory in the
-                new IOHIDEventQueue.  It is possible that a event queue element
-                can contain multiple interpretations of a given event.  The first
-                event is always considered the primary event.
-    @field      version     Version of the event queue element
-    @field      size        Size, in bytes, of this particular event queue element
-    @field      timeStamp   Time at which event was dispatched
-    @field      deviceID    ID of the sending device
-    @field      options     Options for further developement
-    @field      eventCount  The number of events contained in this transaction
-    @field      events      Begining offset of contiguous mememory that contains the
-                            pertinent event data
-*/
-typedef struct _IOHIDSystemQueueElement {
-    uint64_t        timeStamp;
-    uint64_t        deviceID;
-    uint32_t        options;
-    uint32_t        eventCount;
-    IOHIDEventData  events[];
-} IOHIDSystemQueueElement; 
-
-//******************************************************************************
-// MACROS
-//******************************************************************************
-
-#define IOHIDEventFieldEventType(field) ((field >> 16) & 0xffff)
-#define IOHIDEventFieldOffset(field) (field & 0xffff)
-#define IOHIDEventGetSize(type,size)    \
-{                                       \
-    switch ( type ) {                   \
-        case kIOHIDEventTypeNULL:       \
-            size = sizeof(IOHIDEventData);\
-            break;                      \
-        case kIOHIDEventTypeVendorDefined:\
-            size = sizeof(IOHIDVendorDefinedEventData);\
-            break;                      \
-        case kIOHIDEventTypeKeyboard:   \
-            size = sizeof(IOHIDKeyboardEventData);\
-            break;                      \
-        case kIOHIDEventTypeTranslation:\
-        case kIOHIDEventTypeRotation:   \
-        case kIOHIDEventTypeScroll:     \
-        case kIOHIDEventTypeScale:      \
-        case kIOHIDEventTypeVelocity:   \
-        case kIOHIDEventTypeOrientation:\
-            size = sizeof(IOHIDAxisEventData);\
-            break;                      \
-        case kIOHIDEventTypeAccelerometer:\
-            size = sizeof(IOHIDAccelerometerEventData);\
-            break;\
-        case kIOHIDEventTypeAmbientLightSensor:\
-            size = sizeof(IOHIDAmbientLightSensorEventData);\
-            break;                      \
-        case kIOHIDEventTypeProximity:  \
-            size = sizeof(IOHIDProximityEventData);\
-            break;                      \
-        case kIOHIDEventTypeButton:     \
-            size = sizeof(IOHIDButtonEventData);\
-            break;                      \
-        case kIOHIDEventTypeDigitizer:  \
-            size = sizeof(IOHIDDigitizerEventData);\
-            break;                      \
-        case kIOHIDEventTypeTemperature:\
-            size = sizeof(IOHIDTemperatureEventData);\
-            break;                      \
-        case kIOHIDEventTypeSwipe:\
-            size = sizeof(IOHIDSwipeEventData);\
-            break;                      \
-        case kIOHIDEventTypeMouse:\
-            size = sizeof(IOHIDMouseEventData);\
-            break;                      \
-        case kIOHIDEventTypeProgress:\
-            size = sizeof(IOHIDProgressEventData);\
-            break;                      \
-        default:                        \
-            size = 0;                   \
-            break;                      \
-    }                                   \
-}
-#define IOHIDEventGetQueueElementSize(type,size)\
-{                                               \
-    IOHIDEventGetSize(type,size);               \
-    size += sizeof(IOHIDSystemQueueElement);    \
-}
-
-#ifdef KERNEL
-    #ifdef HIDEVENTFIXED        
-        #define IOHIDEventValueFloat(value) (value)
-        #define IOHIDEventValueFixed(value) (value)
-    #else
-        #define IOHIDEventValueFloat(value) (value >> 16)
-        #define IOHIDEventValueFixed(value) (value << 16)
-    #endif
-    #define IOHIDEventGetEventWithOptions(event, type, options) event->getEvent(type, options)
-    #define GET_EVENTDATA(event) event->_data
-#else
-    #define IOHIDEventValueFloat(value) (value / 65536.0)
-    #define IOHIDEventValueFixed(value) (value * 65536)
-    #define GET_EVENTDATA(event) event->eventData
-#endif
-
-//==============================================================================
-// IOHIDEventGetValue MACRO
-//==============================================================================
-#define GET_EVENTDATA_VALUE(eventData, fieldEvType, fieldOffset, value)\
-{                                                       \
-    switch ( fieldEvType ) {                            \
-        case kIOHIDEventTypeNULL:                       \
-            switch ( fieldOffset ) {                    \
-                case IOHIDEventFieldOffset(kIOHIDEventFieldIsRelative): \
-                    value = (eventData->options & kIOHIDEventOptionIsAbsolute) == 0; \
-                    break;                              \
-                case IOHIDEventFieldOffset(kIOHIDEventFieldIsCollection): \
-                    value = (eventData->options & kIOHIDEventOptionIsCollection) != 0; \
-                    break;                              \
-            }; break;                                   \
-        case kIOHIDEventTypeVendorDefined:              \
-            {                                           \
-                IOHIDVendorDefinedEventData * sysDef = (IOHIDVendorDefinedEventData*)eventData; \
-                switch ( fieldOffset ) {                \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldVendorDefinedUsagePage): \
-                        value = sysDef->usagePage;      \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldVendorDefinedUsage): \
-                        value = sysDef->usage;          \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldVendorDefinedVersion): \
-                        value = sysDef->version;        \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldVendorDefinedDataLength): \
-                        value = sysDef->length;         \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldVendorDefinedData): \
-                        if (sysDef->data)               \
-                            value = *((typeof(value)*) sysDef->data); \
-                        break;                          \
-                };                                      \
-            }                                           \
-            break;                                      \
-        case kIOHIDEventTypeProgress:                     \
-            {                                           \
-                IOHIDProgressEventData * progress = (IOHIDProgressEventData*)eventData; \
-                switch ( fieldOffset ) {                \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldProgressEventType): \
-                        value = progress->eventType;    \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldProgressLevel): \
-                        value = IOHIDEventValueFloat(progress->level); \
-                        break;                          \
-                };                                      \
-            }                                           \
-            break;                                      \
-        case kIOHIDEventTypeButton:                     \
-            {                                           \
-                IOHIDButtonEventData * button = (IOHIDButtonEventData*)eventData; \
-                switch ( fieldOffset ) {                \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldButtonMask): \
-                        value = button->button.buttonMask;     \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldButtonNumber): \
-                        value = button->button.buttonNumber;   \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldButtonClickCount): \
-                        value = button->button.clickState;     \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldButtonPressure): \
-                        value = IOHIDEventValueFloat(button->button.pressure); \
-                        break;                          \
-                };                                      \
-            }                                           \
-            break;                                      \
-        case kIOHIDEventTypeAccelerometer:                     \
-            {                                           \
-                IOHIDAccelerometerEventData * accl = (IOHIDAccelerometerEventData*)eventData; \
-                switch ( fieldOffset ) {                \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldAccelerometerX): \
-                        value = IOHIDEventValueFloat(accl->position.x); \
-                        break;                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldAccelerometerY): \
-                        value = IOHIDEventValueFloat(accl->position.y); \
-                        break;                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldAccelerometerZ): \
-                        value = IOHIDEventValueFloat(accl->position.z); \
-                        break;                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldAccelerometerType): \
-                        value = accl->acclType;     \
-                        break;                          \
-                };                                      \
-            }                                           \
-            break;                                      \
-        case kIOHIDEventTypeMouse:                     \
-            {                                           \
-                IOHIDMouseEventData * mouse = (IOHIDMouseEventData*)eventData; \
-                switch ( fieldOffset ) {                \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldMouseX): \
-                        value = IOHIDEventValueFloat(mouse->position.x); \
-                        break;                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldMouseY): \
-                        value = IOHIDEventValueFloat(mouse->position.y); \
-                        break;                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldMouseZ): \
-                        value = IOHIDEventValueFloat(mouse->position.z); \
-                        break;                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldMouseButtonMask): \
-                        value = mouse->button.buttonMask;     \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldMouseNumber): \
-                        value = mouse->button.buttonNumber;   \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldMouseClickCount): \
-                        value = mouse->button.clickState;     \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldMousePressure): \
-                        value = IOHIDEventValueFloat(mouse->button.pressure); \
-                        break;                          \
-                };                                      \
-            }                                           \
-            break;                                      \
-        case kIOHIDEventTypeSwipe:                      \
-            {                                           \
-                IOHIDSwipeEventData * swipe = (IOHIDSwipeEventData *)eventData; \
-                switch ( fieldOffset ) {                \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldSwipeMask):       \
-                        value = swipe->swipeMask;       \
-                        break;                          \
-                };                                      \
-            }                                           \
-            break;                                      \
-        case kIOHIDEventTypeTemperature:                \
-            {                                           \
-                IOHIDTemperatureEventData * temp = (IOHIDTemperatureEventData *)eventData; \
-                switch ( fieldOffset ) {                    \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldTemperatureLevel):       \
-                        value = IOHIDEventValueFloat(temp->level);\
-                        break;                          \
-                };                                      \
-            }                                           \
-            break;                                      \
-        case kIOHIDEventTypeTranslation:                \
-        case kIOHIDEventTypeRotation:                   \
-        case kIOHIDEventTypeScroll:                     \
-        case kIOHIDEventTypeScale:                      \
-        case kIOHIDEventTypeVelocity:                   \
-        case kIOHIDEventTypeOrientation:                \
-            {                                           \
-                IOHIDAxisEventData * axis = (IOHIDAxisEventData *)eventData; \
-                switch ( fieldOffset ) {                    \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldTranslationX):       \
-                    /*                                                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldRotationX):          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldScrollX):            \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldScaleX):             \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldVelocityX):          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerX);         \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldOrientationRadius):  \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldAccelerometerX): \
-                    */                                                              \
-                        value = IOHIDEventValueFloat(axis->position.x); \
-                        break;                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldTranslationY):       \
-                    /*                                                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldRotationY):          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldScrollY):            \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldScaleY):             \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldVelocityY):          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerY);         \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldOrientationAzimuth): \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldAccelerometerY): \
-                    */                                                              \
-                        value = IOHIDEventValueFloat(axis->position.y); \
-                        break;                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldTranslationZ):       \
-                    /*                                                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldRotationZ):          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldScrollZ):            \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldScaleZ):             \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldVelocityZ):          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerZ);         \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldOrientationAltitude):\
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldAccelerometerZ): \
-                    */                                                              \
-                        value = IOHIDEventValueFloat(axis->position.z); \
-                        break;                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldScrollIsPixels):         \
-                        value = ((axis->options & kIOHIDEventOptionPixelUnits) != 0);\
-                        break;                              \
-                };                                          \
-            }                                           \
-            break;                                      \
-        case kIOHIDEventTypeAmbientLightSensor:         \
-            {                                           \
-                IOHIDAmbientLightSensorEventData * alsEvent = (IOHIDAmbientLightSensorEventData *)eventData;\
-                switch ( fieldOffset ) {                \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldAmbientLightSensorLevel): \
-                        value = alsEvent->level;        \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldAmbientLightSensorRawChannel0): \
-                        value = alsEvent->ch0;          \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldAmbientLightSensorRawChannel1): \
-                        value = alsEvent->ch1;          \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldAmbientLightDisplayBrightnessChanged): \
-                        value = alsEvent->brightnessChanged; \
-                        break;                          \
-                };                                      \
-            }                                           \
-            break;                                      \
-        case kIOHIDEventTypeProximity:                  \
-            {                                           \
-                IOHIDProximityEventData * proxEvent = (IOHIDProximityEventData *)eventData;\
-                switch ( fieldOffset ) {                \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldProximityDetectionMask): \
-                        value = proxEvent->detectionMask; \
-                        break;                          \
-                };                                      \
-            }                                           \
-            break;                                      \
-        case kIOHIDEventTypeKeyboard:                   \
-            {                                           \
-                IOHIDKeyboardEventData * keyEvent = (IOHIDKeyboardEventData *)eventData;\
-                switch ( fieldOffset ) {                \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldKeyboardUsagePage): \
-                        value = keyEvent->usagePage;    \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldKeyboardUsage):     \
-                        value = keyEvent->usage;        \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldKeyboardDown):    \
-                        value = keyEvent->down;         \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldKeyboardRepeat):  \
-                        value = (keyEvent->options & kIOHIDKeyboardIsRepeat);\
-                        break;                          \
-                };                                      \
-            }                                           \
-            break;                                      \
-        case kIOHIDEventTypeDigitizer:                  \
-            {                                           \
-                IOHIDDigitizerEventData * digEvent = (IOHIDDigitizerEventData *)eventData; \
-                switch ( fieldOffset ) {                \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerX): \
-                        value = IOHIDEventValueFloat(digEvent->position.x);   \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerY): \
-                        value = IOHIDEventValueFloat(digEvent->position.y);   \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerZ): \
-                        value = IOHIDEventValueFloat(digEvent->position.z);   \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerButtonMask): \
-                        value = digEvent->buttonMask;   \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerIndex): \
-                        value = digEvent->transducerIndex; \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerIdentity): \
-                        value = digEvent->identity;     \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerEventMask): \
-                        value = digEvent->eventMask;    \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerChildEventMask): \
-                        value = digEvent->childEventMask; \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerRange): \
-                        value = (digEvent->options & kIOHIDTransducerRange) != 0;\
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerTouch): \
-                        value = (digEvent->options & kIOHIDTransducerTouch) != 0;\
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerCollection): \
-                        value = (digEvent->options & kIOHIDEventOptionIsCollection) != 0;\
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerPressure): \
-                        value = IOHIDEventValueFloat(digEvent->tipPressure); \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerBarrelPressure): \
-                        value = IOHIDEventValueFloat(digEvent->barrelPressure);   \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerTwist): \
-                        value = IOHIDEventValueFloat(digEvent->twist);        \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerTiltX): \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerTiltY): \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerQuality): \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerDensity): \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerIrregularity): \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerMajorRadius): \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerMinorRadius): \
-                        switch ( digEvent->orientationType ) {\
-                            case kIOHIDDigitizerOrientationTypeTilt:\
-                                switch ( fieldOffset ) {\
-                                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerTiltX): \
-                                        value = IOHIDEventValueFloat(digEvent->orientation.tilt.x); \
-                                        break;          \
-                                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerTiltY): \
-                                        value = IOHIDEventValueFloat(digEvent->orientation.tilt.y); \
-                                        break;          \
-                                };                      \
-                                break;                  \
-                            case kIOHIDDigitizerOrientationTypePolar:\
-                                switch ( fieldOffset ) {\
-                                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerAltitude): \
-                                        value = IOHIDEventValueFloat(digEvent->orientation.polar.altitude); \
-                                        break;          \
-                                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerAzimuth): \
-                                        value = IOHIDEventValueFloat(digEvent->orientation.polar.azimuth); \
-                                        break;          \
-                                };                      \
-                                break;                  \
-                            case kIOHIDDigitizerOrientationTypeQuality:\
-                                switch ( fieldOffset ) {\
-                                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerQuality): \
-                                        value = IOHIDEventValueFloat(digEvent->orientation.quality.quality); \
-                                        break;          \
-                                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerDensity): \
-                                        value = IOHIDEventValueFloat(digEvent->orientation.quality.density); \
-                                        break;          \
-                                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerIrregularity): \
-                                        value = IOHIDEventValueFloat(digEvent->orientation.quality.irregularity); \
-                                        break;          \
-                                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerMajorRadius): \
-                                        value = IOHIDEventValueFloat(digEvent->orientation.quality.majorRadius); \
-                                        break;          \
-                                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerMinorRadius): \
-                                        value = IOHIDEventValueFloat(digEvent->orientation.quality.minorRadius); \
-                                        break;          \
-                                };                      \
-                                break;                  \
-                        };                              \
-                        break;                          \
-                };                                      \
-            }                                           \
-            break;                                      \
-    };                                                  \
-}
-
-#define GET_EVENT_VALUE(event, field, value, options) \
-{   IOHIDEventType  fieldEvType = IOHIDEventFieldEventType(field);  \
-    uint32_t        fieldOffset = IOHIDEventFieldOffset(field);     \
-    IOHIDEventRef   ev          = NULL;                             \
-    if ( (ev = IOHIDEventGetEventWithOptions(event, fieldEvType, options)) ) {\
-        GET_EVENTDATA_VALUE(GET_EVENTDATA(ev),fieldEvType,fieldOffset,value);\
-    }                                                               \
-}
-
-//==============================================================================
-// IOHIDEventSetValue MACRO
-//==============================================================================
-#define SET_EVENTDATA_VALUE(eventData, fieldEvType, fieldOffset, value) \
-{   switch ( fieldEvType ) {                            \
-        case kIOHIDEventTypeNULL:                       \
-            switch ( fieldOffset ) {                    \
-                case IOHIDEventFieldOffset(kIOHIDEventFieldIsRelative): \
-                    if ( value )                        \
-                        eventData->options &= ~kIOHIDEventOptionIsAbsolute; \
-                    else                                \
-                        eventData->options |= kIOHIDEventOptionIsAbsolute; \
-                    break;                              \
-                case IOHIDEventFieldOffset(kIOHIDEventFieldIsCollection): \
-                    if ( value )                        \
-                        eventData->options |= kIOHIDEventOptionIsCollection; \
-                    else                                \
-                        eventData->options &= ~kIOHIDEventOptionIsCollection; \
-                    break;                              \
-            }; break;                                   \
-        case kIOHIDEventTypeVendorDefined:              \
-            {                                           \
-                IOHIDVendorDefinedEventData * sysDef = (IOHIDVendorDefinedEventData*)eventData; \
-                switch ( fieldOffset ) {                \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldVendorDefinedUsagePage): \
-                        sysDef->usagePage = value;      \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldVendorDefinedUsage): \
-                        sysDef->usage = value;          \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldVendorDefinedVersion): \
-                        sysDef->version = value;        \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldVendorDefinedData): \
-                        if (sysDef->data)               \
-                            *((typeof(value)*) sysDef->data) = value; \
-                        break;                          \
-                };                                      \
-            }                                           \
-            break;                                      \
-        case kIOHIDEventTypeProgress:                     \
-            {                                           \
-                IOHIDProgressEventData * progress = (IOHIDProgressEventData*)eventData; \
-                switch ( fieldOffset ) {                \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldProgressEventType): \
-                        progress->eventType = value;    \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldProgressLevel): \
-                        progress->level = IOHIDEventValueFixed(value); \
-                        break;                          \
-                };                                      \
-            }                                           \
-            break;                                      \
-        case kIOHIDEventTypeButton:                     \
-            {                                           \
-                IOHIDButtonEventData * button = (IOHIDButtonEventData*)eventData; \
-                switch ( fieldOffset ) {                \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldButtonMask): \
-                        button->button.buttonMask = value;     \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldButtonNumber): \
-                        button->button.buttonNumber = value;   \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldButtonClickCount): \
-                        button->button.clickState = value;     \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldButtonPressure): \
-                        button->button.pressure = IOHIDEventValueFixed(value); \
-                        break;                          \
-                };                                      \
-            }                                           \
-            break;                                      \
-        case kIOHIDEventTypeAccelerometer:              \
-            {                                           \
-                IOHIDAccelerometerEventData * accl = (IOHIDAccelerometerEventData*)eventData; \
-                switch ( fieldOffset ) {                \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldAccelerometerX): \
-                        accl->position.x = IOHIDEventValueFixed(value); \
-                        break;                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldAccelerometerY): \
-                        accl->position.y = IOHIDEventValueFixed(value); \
-                        break;                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldAccelerometerZ): \
-                        accl->position.z = IOHIDEventValueFixed(value); \
-                        break;                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldAccelerometerType): \
-                        accl->acclType = value;     \
-                        break;                          \
-                };                                      \
-            }                                           \
-            break;                                      \
-        case kIOHIDEventTypeMouse:                     \
-            {                                           \
-                IOHIDMouseEventData * mouse = (IOHIDMouseEventData*)eventData; \
-                switch ( fieldOffset ) {                \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldMouseX): \
-                        mouse->position.x = IOHIDEventValueFixed(value); \
-                        break;                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldMouseY): \
-                        mouse->position.y = IOHIDEventValueFixed(value); \
-                        break;                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldMouseZ): \
-                        mouse->position.z = IOHIDEventValueFixed(value); \
-                        break;                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldMouseButtonMask): \
-                        mouse->button.buttonMask = value;     \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldMouseNumber): \
-                        mouse->button.buttonNumber = value;   \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldMouseClickCount): \
-                        mouse->button.clickState = value;     \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldMousePressure): \
-                        mouse->button.pressure = IOHIDEventValueFixed(value); \
-                        break;                          \
-                };                                      \
-            }                                           \
-            break;                                      \
-        case kIOHIDEventTypeSwipe:                      \
-            {                                           \
-                IOHIDSwipeEventData * swipe = (IOHIDSwipeEventData *)eventData; \
-                switch ( fieldOffset ) {                    \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldSwipeMask):       \
-                        swipe->swipeMask = value;\
-                        break;                          \
-                };                                      \
-            }                                           \
-            break;                                      \
-        case kIOHIDEventTypeTemperature:                \
-            {                                           \
-                IOHIDTemperatureEventData * temp = (IOHIDTemperatureEventData *)eventData; \
-                switch ( fieldOffset ) {                    \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldTemperatureLevel):       \
-                        temp->level = IOHIDEventValueFixed(value);\
-                        break;                          \
-                };                                      \
-            }                                           \
-            break;                                      \
-        case kIOHIDEventTypeTranslation:                \
-        case kIOHIDEventTypeRotation:                   \
-        case kIOHIDEventTypeScroll:                     \
-        case kIOHIDEventTypeScale:                      \
-        case kIOHIDEventTypeVelocity:                   \
-        case kIOHIDEventTypeOrientation:                \
-            {                                           \
-                IOHIDAxisEventData * axis = (IOHIDAxisEventData *)eventData;    \
-                switch ( fieldOffset ) {                    \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldTranslationX):       \
-                    /*                                                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldRotationX):          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldScrollX):            \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldScaleX):             \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldVelocityX):          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerX);         \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldOrientationRadius):  \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldAccelerometerX):     \
-                    */                                                              \
-                        axis->position.x = IOHIDEventValueFixed(value);             \
-                        break;                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldTranslationY):       \
-                    /*                                                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldRotationY):          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldScrollY):            \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldScaleY):             \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldVelocityY):          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerY);         \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldOrientationAzimuth): \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldAccelerometerY):     \
-                    */                                                              \
-                        axis->position.y = IOHIDEventValueFixed(value);             \
-                        break;                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldTranslationZ):       \
-                    /*                                                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldRotationZ):          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldScrollZ):            \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldScaleZ):             \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldVelocityZ):          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerZ);         \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldOrientationAltitude):\
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldAccelerometerZ):     \
-                    */                                                              \
-                        axis->position.z = IOHIDEventValueFixed(value);             \
-                        break;                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldScrollIsPixels):         \
-                        if ( value )                        \
-                            axis->options |= kIOHIDEventOptionPixelUnits;           \
-                        else                                \
-                            axis->options &= ~kIOHIDEventOptionPixelUnits;           \
-                        break;                              \
-                };                                          \
-            }                                               \
-            break;                                          \
-        case kIOHIDEventTypeAmbientLightSensor:             \
-            {                                               \
-                IOHIDAmbientLightSensorEventData * alsEvent = (IOHIDAmbientLightSensorEventData *)eventData;\
-                switch ( fieldOffset ) {                \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldAmbientLightSensorLevel): \
-                        alsEvent->level = value;        \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldAmbientLightSensorRawChannel0): \
-                        alsEvent->ch0 = value;          \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldAmbientLightSensorRawChannel1): \
-                        alsEvent->ch1 = value;          \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldAmbientLightDisplayBrightnessChanged): \
-                        alsEvent->brightnessChanged = value; \
-                        break;                          \
-                };                                      \
-            }                                           \
-            break;                                      \
-        case kIOHIDEventTypeProximity:                  \
-            {                                           \
-                IOHIDProximityEventData * proxEvent = (IOHIDProximityEventData *)eventData;\
-                switch ( fieldOffset ) {                \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldProximityDetectionMask): \
-                        proxEvent->detectionMask = value; \
-                        break;                          \
-                };                                      \
-            }                                           \
-            break;                                      \
-        case kIOHIDEventTypeKeyboard:                       \
-            {                                               \
-                IOHIDKeyboardEventData * keyEvent = (IOHIDKeyboardEventData *)eventData;\
-                switch ( fieldOffset ) {                \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldKeyboardUsagePage): \
-                        keyEvent->usagePage = value;    \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldKeyboardUsage):     \
-                        keyEvent->usage = value;        \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldKeyboardDown):    \
-                        keyEvent->down = value;         \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldKeyboardRepeat):  \
-                        if ( value )                        \
-                            keyEvent->options |= kIOHIDKeyboardIsRepeat;            \
-                        else                                \
-                            keyEvent->options &= ~kIOHIDKeyboardIsRepeat;           \
-                        break;                              \
-                };                                      \
-            }                                           \
-            break;                                      \
-        case kIOHIDEventTypeDigitizer:                  \
-            {                                           \
-                IOHIDDigitizerEventData * digEvent = (IOHIDDigitizerEventData *)eventData; \
-                switch ( fieldOffset ) {                \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerX): \
-                        digEvent->position.x = IOHIDEventValueFixed(value);   \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerY): \
-                        digEvent->position.y = IOHIDEventValueFixed(value);   \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerZ): \
-                        digEvent->position.z = IOHIDEventValueFixed(value);   \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerButtonMask): \
-                        digEvent->buttonMask = value;   \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerIndex): \
-                        digEvent->transducerIndex = value; \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerIdentity): \
-                        digEvent->identity = value;     \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerEventMask): \
-                        digEvent->eventMask = value;    \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerChildEventMask): \
-                        digEvent->childEventMask = value; \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerRange): \
-                        if ( value )                        \
-                            digEvent->options |= kIOHIDTransducerRange;         \
-                        else                                \
-                            digEvent->options &= ~kIOHIDTransducerRange;        \
-                        break;                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerTouch): \
-                        if ( value )                        \
-                            digEvent->options |= kIOHIDTransducerTouch;         \
-                        else                                \
-                            digEvent->options &= ~kIOHIDTransducerTouch;        \
-                        break;                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerCollection): \
-                        if ( value )                        \
-                            digEvent->options |= kIOHIDEventOptionIsCollection;         \
-                        else                                \
-                            digEvent->options &= ~kIOHIDEventOptionIsCollection;        \
-                        break;                              \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerPressure): \
-                        digEvent->tipPressure = IOHIDEventValueFixed(value);  \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerBarrelPressure): \
-                        digEvent->barrelPressure = IOHIDEventValueFixed(value);   \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerTwist): \
-                        digEvent->twist = IOHIDEventValueFixed(value);        \
-                        break;                          \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerTiltX): \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerTiltY): \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerQuality): \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerDensity): \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerIrregularity): \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerMajorRadius): \
-                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerMinorRadius): \
-                        switch ( digEvent->orientationType ) {\
-                            case kIOHIDDigitizerOrientationTypeTilt:\
-                                switch ( fieldOffset ) {\
-                                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerTiltX): \
-                                        digEvent->orientation.tilt.x = IOHIDEventValueFixed(value); \
-                                        break;          \
-                                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerTiltY): \
-                                        digEvent->orientation.tilt.y = IOHIDEventValueFixed(value); \
-                                        break;          \
-                                };                      \
-                                break;                  \
-                            case kIOHIDDigitizerOrientationTypePolar:\
-                                switch ( fieldOffset ) {\
-                                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerAltitude): \
-                                        digEvent->orientation.polar.altitude = IOHIDEventValueFixed(value); \
-                                        break;          \
-                                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerAzimuth): \
-                                        digEvent->orientation.polar.azimuth = IOHIDEventValueFixed(value); \
-                                        break;          \
-                                };                      \
-                                break;                  \
-                            case kIOHIDDigitizerOrientationTypeQuality:\
-                                switch ( fieldOffset ) {\
-                                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerQuality): \
-                                        digEvent->orientation.quality.quality = IOHIDEventValueFixed(value); \
-                                        break;          \
-                                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerDensity): \
-                                        digEvent->orientation.quality.density = IOHIDEventValueFixed(value); \
-                                        break;          \
-                                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerIrregularity): \
-                                        digEvent->orientation.quality.irregularity = IOHIDEventValueFixed(value); \
-                                        break;          \
-                                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerMajorRadius): \
-                                        digEvent->orientation.quality.majorRadius = IOHIDEventValueFixed(value); \
-                                        break;          \
-                                    case IOHIDEventFieldOffset(kIOHIDEventFieldDigitizerMinorRadius): \
-                                        digEvent->orientation.quality.minorRadius = IOHIDEventValueFixed(value); \
-                                        break;          \
-                                };                      \
-                                break;                  \
-                        };                              \
-                        break;                          \
-                };                                      \
-            }                                           \
-            break;                                      \
-    };                                                  \
-}
-
-#define SET_EVENT_VALUE(event, field, value, options)               \
-{   IOHIDEventType  fieldEvType = IOHIDEventFieldEventType(field);  \
-    uint32_t        fieldOffset = IOHIDEventFieldOffset(field);     \
-    IOHIDEventRef   ev          = NULL;                             \
-    if ( (ev = IOHIDEventGetEventWithOptions(event, fieldEvType, options)) ) {\
-        SET_EVENTDATA_VALUE(GET_EVENTDATA(ev),fieldEvType,fieldOffset,value);\
-    }                                                               \
-}
-
-#endif /* _IOKIT_HID_IOHIDEVENTDATA_H */
diff --git a/external/ios-headers/IOKit/hid/IOHIDEventQueue.h b/external/ios-headers/IOKit/hid/IOHIDEventQueue.h
deleted file mode 100755
index 84c9c63..0000000
--- a/external/ios-headers/IOKit/hid/IOHIDEventQueue.h
+++ /dev/null
@@ -1,82 +0,0 @@
-/*
- 
-IOHIDEventQueue.h ... Header for IOHIDEventQueue*** functions.
-
-Copyright (c) 2009  KennyTM~ <kennytm@gmail.com>
-All rights reserved.
-
-Redistribution and use in source and binary forms, with or without modification,
-are permitted provided that the following conditions are met:
-
-* Redistributions of source code must retain the above copyright notice, this
-  list of conditions and the following disclaimer.
-* Redistributions in binary form must reproduce the above copyright notice, 
-  this list of conditions and the following disclaimer in the documentation
-  and/or other materials provided with the distribution.
-* Neither the name of the KennyTM~ nor the names of its contributors may be
-  used to endorse or promote products derived from this software without
-  specific prior written permission.
-
-THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
-ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
-WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
-DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
-ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
-(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
-LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
-ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
-SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-
-*/
-
-#ifndef IOKIT_HID_IOHIDEVENTQUEUE_H
-#define IOKIT_HID_IOHIDEVENTQUEUE_H 1
-
-#include <CoreFoundation/CoreFoundation.h>
-#include "IOHIDEvent.h"
-
-#if __cplusplus
-extern "C" {
-#endif
-	
-	typedef struct __IOHIDEventQueue
-#if 0
-	{
-		CFRuntimeBase base;	// 0, 4
-		IODataQueueMemory* queue;	// 8
-		size_t queueSize;	// c
-		int notificationPortType;	// 10, 0 -> associate to hidSystem, 1 -> associate to data queue.
-		uint32_t token;	// 14
-		int topBitOfToken;	// 18, = token >> 31
-	}
-#endif
-	* IOHIDEventQueueRef;
-	
-#pragma mark -
-#pragma mark Creators
-	
-	CFTypeID IOHIDEventQueueGetTypeID(void);	
-	
-	// Token must be nonzero.
-	IOHIDEventQueueRef IOHIDEventQueueCreateWithToken(CFAllocatorRef allocator, uint32_t token);
-	IOHIDEventQueueRef IOHIDEventQueueCreate(CFAllocatorRef allocator, int notificationPortType, uint32_t token);
-
-#pragma mark -
-#pragma mark Accessors
-	
-	uint32_t IOHIDEventQueueGetToken(IOHIDEventQueueRef queue);
-	
-	void IOHIDEventQueueSetNotificationPort(IOHIDEventQueueRef queue, mach_port_t port);
-	
-#pragma mark -
-#pragma mark Actions
-	
-	IOHIDEventRef IOHIDEventQueueDequeueCopy(IOHIDEventQueueRef queue);
-	void IOHIDEventQueueEnqueue(IOHIDEventQueueRef queue, IOHIDEventRef event);	// will send a message to the "tickle port" as well.
-	
-#if __cplusplus
-}
-#endif
-
-#endif
diff --git a/external/ios-headers/IOKit/hid/IOHIDEventSystem.h b/external/ios-headers/IOKit/hid/IOHIDEventSystem.h
deleted file mode 100755
index 5b90e24..0000000
--- a/external/ios-headers/IOKit/hid/IOHIDEventSystem.h
+++ /dev/null
@@ -1,104 +0,0 @@
-/*
- 
-IOHIDEventSystem.h ... I/O Kit HID Event System
-
-Copyright (c) 2010  KennyTM~ <kennytm@gmail.com>
-All rights reserved.
-
-Redistribution and use in source and binary forms, with or without modification,
-are permitted provided that the following conditions are met:
-
-* Redistributions of source code must retain the above copyright notice, this
-  list of conditions and the following disclaimer.
-* Redistributions in binary form must reproduce the above copyright notice, 
-  this list of conditions and the following disclaimer in the documentation
-  and/or other materials provided with the distribution.
-* Neither the name of the KennyTM~ nor the names of its contributors may be
-  used to endorse or promote products derived from this software without
-  specific prior written permission.
-
-THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
-ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
-WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
-DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
-ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
-(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
-LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
-ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
-SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-
-*/
-
-// With reference to http://www.opensource.apple.com/source/IOHIDFamily/IOHIDFamily-258.1/IOHIDLib/IOHIDEventServiceClass.h
-
-#ifndef IOHID_EVENT_SYSTEM_H
-#define IOHID_EVENT_SYSTEM_H
-
-#include <CoreFoundation/CoreFoundation.h>
-#include "IOHIDNotification.h"
-#include "IOHIDService.h"
-#include "IOHIDEvent.h"
-#include "IOHIDEventQueue.h"
-
-#if __cplusplus
-extern "C" {
-#endif
-			
-	typedef struct ___IOHIDEventSystem
-#if 0
-	{
-		CFRuntimeBase _base;	// 0, 4
-		CFMutableSetRef services;	// 8
-		CFMutableSetRef x0c;	// c
-		CFMutableSetRef x10;	// 10
-		CFMutableSetRef matchNotifications;	// 14
-		IONotificationPortRef serviceMatchPort;	// 18
-		IONotificationPortRef x1c;	// 1c
-		void* x20;	// 20
-		IOHIDEventSystemCallback callback;	// 24
-		IOHIDSessionRef session;	// 28
-		pthread_mutex_t mutex;	// 2c
-		CFRunLoopSourceRef migMachSource;	// 58
-		CFMutableSetRef queues;	// 5c
-	}
-#endif
-	* IOHIDEventSystemRef;
-	
-	typedef void(*IOHIDEventSystemCallback)(void* target, void* refcon, IOHIDServiceRef service, IOHIDEventRef event);
-	
-	CFTypeID IOHIDEventSystemGetTypeID(void);
-	IOHIDEventSystemRef IOHIDEventSystemCreate(CFAllocatorRef allocator);
-	
-	CFArrayRef IOHIDEventSystemCopyMatchingServices(IOHIDEventSystemRef system, CFDictionaryRef propertyTable,
-													IOHIDNotificationCallback matchCallback, void* matchTarget, void* matchRefcon, IOHIDNotificationRef* matchNotif);
-	void IOHIDEventSystemRegisterQueue(IOHIDEventSystemRef system, IOHIDEventQueueRef queue);
-	void IOHIDEventSystemUnregisterQueue(IOHIDEventSystemRef system, IOHIDEventQueueRef queue);
-	
-	IOHIDEventRef IOHIDEventSystemCopyEvent(IOHIDEventSystemRef system, IOHIDEventType type, IOHIDEventRef event, IOOptionBits options);
-	
-	CFTypeRef IOHIDEventSystemGetProperty(IOHIDEventSystemRef system, CFStringRef property);
-	Boolean IOHIDEventSystemSetProperty(IOHIDEventSystemRef system, CFStringRef property, CFTypeRef value);
-	
-	Boolean IOHIDEventSystemOpen(IOHIDEventSystemRef system, IOHIDEventSystemCallback callback, void* target, void* refcon, void* unused);
-	void IOHIDEventSystemClose(IOHIDEventSystemRef system, void* unused);
-	
-#if 0
-	dlfun("IOHIDEventSystemGetTypeID", "I");
-	dlfun("IOHIDEventSystemCreate", "@@");
-	dlfun("IOHIDEventSystemCopyMatchingServices", "@@^v^v^v^@");
-	dlfun("IOHIDEventSystemRegisterQueue", "v@@");
-	dlfun("IOHIDEventSystemUnregisterQueue", "v@@");
-	dlfun("IOHIDEventSystemCopyEvent", "@@I@I");
-	dlfun("IOHIDEventSystemGetProperty", "@@@");
-	dlfun("IOHIDEventSystemSetProperty", "c@@@");
-	dlfun("IOHIDEventSystemOpen", "c@^v^v^v^v");
-	dlfun("IOHIDEventSystemClose", "v@^v");
-#endif
-	
-#if __cplusplus
-}
-#endif
-
-#endif
-
diff --git a/external/ios-headers/IOKit/hid/IOHIDEventSystemClient.h b/external/ios-headers/IOKit/hid/IOHIDEventSystemClient.h
deleted file mode 100755
index 76a0bac..0000000
--- a/external/ios-headers/IOKit/hid/IOHIDEventSystemClient.h
+++ /dev/null
@@ -1,84 +0,0 @@
-/*
- 
-IOHIDEventSystemClient.h ... I/O Kit HID Event System Client
-
-Copyright (c) 2010  KennyTM~ <kennytm@gmail.com>
-All rights reserved.
-
-Redistribution and use in source and binary forms, with or without modification,
-are permitted provided that the following conditions are met:
-
-* Redistributions of source code must retain the above copyright notice, this
-  list of conditions and the following disclaimer.
-* Redistributions in binary form must reproduce the above copyright notice, 
-  this list of conditions and the following disclaimer in the documentation
-  and/or other materials provided with the distribution.
-* Neither the name of the KennyTM~ nor the names of its contributors may be
-  used to endorse or promote products derived from this software without
-  specific prior written permission.
-
-THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
-ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
-WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
-DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
-ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
-(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
-LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
-ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
-SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-
-*/
-
-// With reference to http://www.opensource.apple.com/source/IOHIDFamily/IOHIDFamily-258.1/IOHIDLib/IOHIDEventServiceClass.h
-
-#ifndef IOHID_EVENT_SYSTEM_CLIENT_H
-#define IOHID_EVENT_SYSTEM_CLIENT_H
-
-#include <CoreFoundation/CoreFoundation.h>
-#include "IOHIDEventQueue.h"
-#include "IOHIDEvent.h"
-
-#if __cplusplus
-extern "C" {
-#endif
-			
-	typedef struct __IOHIDEventSystemClient
-#if 0
-	{
-		void* x00;
-		CFMachPortRef serverPort;	// 4
-		CFRunLoopSourceRef serverSource;	// 8
-		IOHIDEventSystemClientEventCallback callback;	// c
-		void* target;	// 10
-		void* refcon;	// 14
-		CFMachPortRef queuePort;	// 18
-		CFRunLoopSourceRef queueSource;	// 1c
-		CFRunLoopSourceRef source2;	// 24
-		CFRunLoopTimerRef timer;	// 28
-		IOHIDEventQueueRef queue;	// 2c
-		CFRunLoopRef runloop;	// 34
-		CFStringRef mode;	// 38
-	}
-#endif
-	* IOHIDEventSystemClientRef;
-	
-	typedef void(*IOHIDEventSystemClientEventCallback)(void* target, void* refcon, IOHIDEventQueueRef queue, IOHIDEventRef event);
-	
-	void IOHIDEventSystemClientRegisterEventCallback(IOHIDEventSystemClientRef client, IOHIDEventSystemClientEventCallback callback, void* target, void* refcon);
-	void IOHIDEventSystemClientUnregisterEventCallback(IOHIDEventSystemClientRef client);
-	
-	void IOHIDEventSystemClientUnscheduleWithRunLoop(IOHIDEventSystemClientRef client, CFRunLoopRef runloop, CFStringRef mode);
-	void IOHIDEventSystemClientScheduleWithRunLoop(IOHIDEventSystemClientRef client, CFRunLoopRef runloop, CFStringRef mode);
-	
-	CFPropertyListRef IOHIDEventSystemClientCopyProperty(IOHIDEventSystemClientRef client, CFStringRef property);
-	Boolean IOHIDEventSystemClientSetProperty(IOHIDEventSystemClientRef client, CFStringRef property, CFPropertyListRef value);
-	
-	IOHIDEventSystemClientRef IOHIDEventSystemClient(void);
-	
-#if __cplusplus
-}
-#endif
-
-#endif
-
diff --git a/external/ios-headers/IOKit/hid/IOHIDEventTypes.h b/external/ios-headers/IOKit/hid/IOHIDEventTypes.h
deleted file mode 100755
index 7999057..0000000
--- a/external/ios-headers/IOKit/hid/IOHIDEventTypes.h
+++ /dev/null
@@ -1,368 +0,0 @@
-/*
- *
- * @APPLE_LICENSE_HEADER_START@
- * 
- * Copyright (c) 1999-2003 Apple Computer, Inc.  All Rights Reserved.
- * 
- * This file contains Original Code and/or Modifications of Original Code
- * as defined in and that are subject to the Apple Public Source License
- * Version 2.0 (the 'License'). You may not use this file except in
- * compliance with the License. Please obtain a copy of the License at
- * http://www.opensource.apple.com/apsl/ and read it before using this
- * file.
- * 
- * The Original Code and all software distributed under the License are
- * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
- * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
- * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
- * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
- * Please see the License for the specific language governing rights and
- * limitations under the License.
- * 
- * @APPLE_LICENSE_HEADER_END@
- */
-
-#ifndef _IOKIT_HID_IOHIDEVENTTYPES_H
-#define _IOKIT_HID_IOHIDEVENTTYPES_H
-
-#include <IOKit/IOTypes.h>
-
-#define IOHIDEventTypeMask(type) (1<<type)
-#define IOHIDEventFieldBase(type) (type << 16)
-/*!
-    @typedef IOHIDEventType
-    @abstract The type of event represented by an IOHIDEventRef.
-    @discussion It is possible that a single IOHIDEventRef can conform to
-    multiple event types through the use of sub events.  For futher information
-    as to how to determinte the type of event please reference IOHIDEventGetType 
-    and IOHIDEventConformsTo.
-    @constant kIOHIDEventTypeNULL
-    @constant kIOHIDEventTypeVendorDefined
-    @constant kIOHIDEventTypeButton
-    @constant kIOHIDEventTypeTranslation
-    @constant kIOHIDEventTypeRotation
-    @constant kIOHIDEventTypeScroll
-    @constant kIOHIDEventTypeScale
-    @constant kIOHIDEventTypeVelocity
-    @constant kIOHIDEventTypeOrientation
-    @constant kIOHIDEventTypeKeyboard 
-    @constant kIOHIDEventTypeDigitizer
-    @constant kIOHIDEventTypeAmbientLightSensor
-    @constant kIOHIDEventTypeAccelerometer
-    @constant kIOHIDEventTypeProximity
-    @constant kIOHIDEventTypeTemperature
-    @constant kIOHIDEventTypeMouse
-    @constant kIOHIDEventTypeProgress
-    @constant kIOHIDEventTypeSwipe
-*/
-enum {
-    kIOHIDEventTypeNULL,
-    kIOHIDEventTypeVendorDefined,
-    kIOHIDEventTypeButton,
-    kIOHIDEventTypeKeyboard, 
-    kIOHIDEventTypeTranslation,
-    kIOHIDEventTypeRotation,
-    kIOHIDEventTypeScroll,
-    kIOHIDEventTypeScale,
-    kIOHIDEventTypeZoom,
-    kIOHIDEventTypeVelocity,
-    kIOHIDEventTypeOrientation,
-    kIOHIDEventTypeDigitizer,
-    kIOHIDEventTypeAmbientLightSensor,
-    kIOHIDEventTypeAccelerometer,
-    kIOHIDEventTypeProximity,
-    kIOHIDEventTypeTemperature,
-    kIOHIDEventTypeSwipe,
-    kIOHIDEventTypeMouse,
-    kIOHIDEventTypeProgress,
-    kIOHIDEventTypeCount
-};
-typedef uint32_t IOHIDEventType;
-
-/* 
-    @typedef IOHIDEventField
-    @abstract Keys used to set and get individual event fields.
-*/
-enum {
-    kIOHIDEventFieldIsRelative = IOHIDEventFieldBase(kIOHIDEventTypeNULL),
-    kIOHIDEventFieldIsCollection
-};
-
-enum {
-    kIOHIDEventFieldVendorDefinedUsagePage = IOHIDEventFieldBase(kIOHIDEventTypeVendorDefined),
-    kIOHIDEventFieldVendorDefinedUsage,
-    kIOHIDEventFieldVendorDefinedVersion,
-    kIOHIDEventFieldVendorDefinedDataLength,
-    kIOHIDEventFieldVendorDefinedData
-};
-
-enum  {
-    kIOHIDEventFieldButtonMask = IOHIDEventFieldBase(kIOHIDEventTypeButton),
-    kIOHIDEventFieldButtonNumber,
-    kIOHIDEventFieldButtonClickCount,
-    kIOHIDEventFieldButtonPressure
-};
-
-enum {
-    kIOHIDEventFieldTranslationX = IOHIDEventFieldBase(kIOHIDEventTypeTranslation),
-    kIOHIDEventFieldTranslationY,
-    kIOHIDEventFieldTranslationZ
-};
-
-enum {
-    kIOHIDEventFieldRotationX = IOHIDEventFieldBase(kIOHIDEventTypeRotation),
-    kIOHIDEventFieldRotationY,
-    kIOHIDEventFieldRotationZ
-};
-
-enum {
-    kIOHIDEventFieldScrollX = IOHIDEventFieldBase(kIOHIDEventTypeScroll),
-    kIOHIDEventFieldScrollY,
-    kIOHIDEventFieldScrollZ,
-    kIOHIDEventFieldScrollIsPixels
-};
-
-enum {
-    kIOHIDEventFieldScaleX = IOHIDEventFieldBase(kIOHIDEventTypeScale),
-    kIOHIDEventFieldScaleY,
-    kIOHIDEventFieldScaleZ
-};
-
-enum {
-    kIOHIDEventFieldVelocityX = IOHIDEventFieldBase(kIOHIDEventTypeVelocity),
-    kIOHIDEventFieldVelocityY,
-    kIOHIDEventFieldVelocityZ
-};
-
-/*!
-	@typedef IOHIDAccelerometerType
-	@abstract Type of accelerometer event triggered.
-    @discussion
-	@constant kIOHIDAccelerometerTypeNormal
-	@constant kIOHIDAccelerometerTypeShake
-*/
-enum {
-    kIOHIDAccelerometerTypeNormal   = 0,
-    kIOHIDAccelerometerTypeShake    = 1
-};
-typedef uint32_t IOHIDAccelerometerType;
-
-enum {
-    kIOHIDEventFieldAccelerometerX = IOHIDEventFieldBase(kIOHIDEventTypeAccelerometer),
-    kIOHIDEventFieldAccelerometerY,
-    kIOHIDEventFieldAccelerometerZ,
-    kIOHIDEventFieldAccelerometerType
-};
-
-enum {
-    kIOHIDEventFieldMouseX = IOHIDEventFieldBase(kIOHIDEventTypeMouse),
-    kIOHIDEventFieldMouseY,
-    kIOHIDEventFieldMouseZ,
-    kIOHIDEventFieldMouseButtonMask,
-    kIOHIDEventFieldMouseNumber,
-    kIOHIDEventFieldMouseClickCount,
-    kIOHIDEventFieldMousePressure
-};
-
-enum {
-    kIOHIDEventFieldAmbientLightSensorLevel = IOHIDEventFieldBase(kIOHIDEventTypeAmbientLightSensor),
-    kIOHIDEventFieldAmbientLightSensorRawChannel0,
-    kIOHIDEventFieldAmbientLightSensorRawChannel1,
-    kIOHIDEventFieldAmbientLightDisplayBrightnessChanged
-};
-
-enum {
-    kIOHIDEventFieldTemperatureLevel = IOHIDEventFieldBase(kIOHIDEventTypeTemperature)
-};
-
-enum {
-    kIOHIDEventFieldProximityDetectionMask = IOHIDEventFieldBase(kIOHIDEventTypeProximity)
-};
-
-
-enum {
-    kIOHIDEventFieldOrientationRadius   = IOHIDEventFieldBase(kIOHIDEventTypeOrientation),
-    kIOHIDEventFieldOrientationAzimuth,
-    kIOHIDEventFieldOrientationAltitude
-};
-
-enum {
-    kIOHIDEventFieldKeyboardUsagePage = IOHIDEventFieldBase(kIOHIDEventTypeKeyboard),
-    kIOHIDEventFieldKeyboardUsage,
-    kIOHIDEventFieldKeyboardDown,
-    kIOHIDEventFieldKeyboardRepeat
-};
-
-enum {
-    kIOHIDEventFieldDigitizerX = IOHIDEventFieldBase(kIOHIDEventTypeDigitizer),
-    kIOHIDEventFieldDigitizerY,
-    kIOHIDEventFieldDigitizerZ,
-    kIOHIDEventFieldDigitizerButtonMask,
-    kIOHIDEventFieldDigitizerType,
-    kIOHIDEventFieldDigitizerIndex,
-    kIOHIDEventFieldDigitizerIdentity,
-    kIOHIDEventFieldDigitizerEventMask,
-    kIOHIDEventFieldDigitizerRange,   
-    kIOHIDEventFieldDigitizerTouch,
-    kIOHIDEventFieldDigitizerPressure,
-    kIOHIDEventFieldDigitizerBarrelPressure,
-    kIOHIDEventFieldDigitizerTwist,
-    kIOHIDEventFieldDigitizerTiltX,
-    kIOHIDEventFieldDigitizerTiltY,
-    kIOHIDEventFieldDigitizerAltitude,
-    kIOHIDEventFieldDigitizerAzimuth,
-    kIOHIDEventFieldDigitizerQuality,
-    kIOHIDEventFieldDigitizerDensity,
-    kIOHIDEventFieldDigitizerIrregularity,
-    kIOHIDEventFieldDigitizerMajorRadius,
-    kIOHIDEventFieldDigitizerMinorRadius,
-    kIOHIDEventFieldDigitizerCollection,
-    kIOHIDEventFieldDigitizerCollectionChord,
-    kIOHIDEventFieldDigitizerChildEventMask
-};
-
-enum {
-    kIOHIDEventFieldSwipeMask = IOHIDEventFieldBase(kIOHIDEventTypeSwipe)
-};
-
-enum {
-    kIOHIDEventFieldProgressEventType = IOHIDEventFieldBase(kIOHIDEventTypeProgress),
-    kIOHIDEventFieldProgressLevel
-};
-
-typedef uint32_t IOHIDEventField;
-
-/*!
-	@typedef IOHIDSwipeMask
-	@abstract Mask detailing the type of swipe detected.
-    @discussion
-	@constant kIOHIDProximityDetectionLargeBodyContact
-	@constant kIOHIDProximityDetectionLargeBodyFarField
-	@constant kIOHIDProximityDetectionIrregularObjects
-	@constant kIOHIDProximityDetectionEdgeStraddling
-	@constant kIOHIDProximityDetectionFlatFingerClasp
-	@constant kIOHIDProximityDetectionFingerTouch
-	@constant kIOHIDProximityDetectionReceiver
-	@constant kIOHIDProximityDetectionSmallObjectsHovering
-    @constant kIOHIDProximityDetectionReceiverCrude
-*/
-enum {
-    kIOHIDSwipeUp                             = 0x00000001,
-    kIOHIDSwipeDown                           = 0x00000002,
-    kIOHIDSwipeLeft                           = 0x00000004,
-    kIOHIDSwipeRight                          = 0x00000008,
-};
-typedef uint32_t IOHIDSwipeMask;
-
-
-/*!
-	@typedef IOHIDProximityDetectionMask
-	@abstract Proximity mask detailing the inputs that were detected.
-    @discussion
-	@constant kIOHIDProximityDetectionLargeBodyContact
-	@constant kIOHIDProximityDetectionLargeBodyFarField
-	@constant kIOHIDProximityDetectionIrregularObjects
-	@constant kIOHIDProximityDetectionEdgeStraddling
-	@constant kIOHIDProximityDetectionFlatFingerClasp
-	@constant kIOHIDProximityDetectionFingerTouch
-	@constant kIOHIDProximityDetectionReceiver
-	@constant kIOHIDProximityDetectionSmallObjectsHovering
-    @constant kIOHIDProximityDetectionReceiverCrude
-*/
-enum {
-    kIOHIDProximityDetectionLargeBodyContact                = 0x0001,
-    kIOHIDProximityDetectionLargeBodyFarField               = 0x0002,
-    kIOHIDProximityDetectionIrregularObjects                = 0x0004,
-    kIOHIDProximityDetectionEdgeStraddling                  = 0x0008,
-    kIOHIDProximityDetectionFlatFingerClasp                 = 0x0010,
-    kIOHIDProximityDetectionFingerTouch                     = 0x0020,
-    kIOHIDProximityDetectionReceiver                        = 0x0040,
-    kIOHIDProximityDetectionSmallObjectsHovering            = 0x0080,
-    kIOHIDProximityDetectionReceiverCrude                   = 0x0100
-};
-typedef uint32_t IOHIDProximityDetectionMask;
-
-/*!
-	@typedef IOHIDDigitizerType
-	@abstract The type of digitizer path initiating an event.
-    @discussion The IOHIDDigitizerType usually corresponds to the Logical Collection usage defined in Digitizer Usage Page (0x0d) of the USB HID Usage Tables.
-	@constant kIOHIDDigitizerTypeStylus
-    @constant kIOHIDDigitizerTypePuck
-    @constant kIOHIDDigitizerTypeFinger
-*/
-enum {   
-    kIOHIDDigitizerTransducerTypeStylus  = 0x20,
-    kIOHIDDigitizerTransducerTypePuck,
-    kIOHIDDigitizerTransducerTypeFinger,
-    kIOHIDDigitizerTransducerTypeHand
-};
-typedef uint32_t IOHIDDigitizerTransducerType;
-
-/*!
-	@typedef IOHIDDigitizerEventMask
-	@abstract Event mask detailing the events being dispatched by a digitizer.
-    @discussion It is possible for digitizer events to contain child digitizer events, effectively, behaving as collections.  
-    In the collection case, the child event mask field referrence by kIOHIDEventFieldDigitizerChildEventMask will detail the 
-    cumulative event state of the child digitizer events.
-    <br>
-    <b>Please Note:</b>
-    If you append a child digitizer event to a parent digitizer event, appropriate state will be transfered on to the parent.
-    @constant kIOHIDDigitizerEventRange Issued when the range state has changed.
-    @constant kIOHIDDigitizerEventTouch Issued when the touch state has changed.
-    @constant kIOHIDDigitizerEventPosition Issued when the position has changed.
-    @constant kIOHIDDigitizerEventStop Issued when motion has achieved a state of calculated non-movement.
-    @constant kIOHIDDigitizerEventPeak Issues when new maximum values have been detected.
-    @constant kIOHIDDigitizerEventIdentity Issued when the identity has changed.
-    @constant kIOHIDDigitizerEventAttribute Issued when an attribute has changed.
-    @constant kIOHIDDigitizerEventUpSwipe Issued when an up swipe has been detected.
-    @constant kIOHIDDigitizerEventDownSwipe Issued when an down swipe has been detected.
-    @constant kIOHIDDigitizerEventLeftSwipe Issued when an left swipe has been detected.
-    @constant kIOHIDDigitizerEventRightSwipe Issued when an right swipe has been detected.
-    @constant kIOHIDDigitizerEventSwipeMask Mask used to gather swipe events.
-*/
-enum {
-    kIOHIDDigitizerEventRange                               = 0x00000001,
-    kIOHIDDigitizerEventTouch                               = 0x00000002,
-    kIOHIDDigitizerEventPosition                            = 0x00000004,
-    kIOHIDDigitizerEventStop                                = 0x00000008,
-    kIOHIDDigitizerEventPeak                                = 0x00000010,
-    kIOHIDDigitizerEventIdentity                            = 0x00000020,
-    kIOHIDDigitizerEventAttribute                           = 0x00000040,
-    kIOHIDDigitizerEventCancel                              = 0x00000080,
-    kIOHIDDigitizerEventStart                               = 0x00000100,
-    kIOHIDDigitizerEventResting                             = 0x00000200,
-    kIOHIDDigitizerEventSwipeUp                             = 0x01000000,
-    kIOHIDDigitizerEventSwipeDown                           = 0x02000000,
-    kIOHIDDigitizerEventSwipeLeft                           = 0x04000000,
-    kIOHIDDigitizerEventSwipeRight                          = 0x08000000,
-    kIOHIDDigitizerEventSwipeMask                           = 0xFF000000,
-};
-typedef uint32_t IOHIDDigitizerEventMask;
-
-enum {
-    kIOHIDEventOptionIsAbsolute                             = 0x00000001,
-    kIOHIDEventOptionIsCollection                           = 0x00000002,
-    kIOHIDEventOptionPixelUnits                             = 0x00000004
-};
-typedef uint32_t IOHIDEventOptionBits;
-
-#ifndef KERNEL
-/*!
-	@typedef IOHIDFloat
-*/
-#ifdef __LP64__
-typedef double IOHIDFloat;
-#else
-typedef float IOHIDFloat;
-#endif
-/*!
-	@typedef IOHID3DPoint
-*/
-typedef struct _IOHID3DPoint {
-    IOHIDFloat  x;
-    IOHIDFloat  y;
-    IOHIDFloat  z;
-} IOHID3DPoint; 
-#endif
-
-#endif /* _IOKIT_HID_IOHIDEVENTTYPES_H */
\ No newline at end of file
diff --git a/external/ios-headers/IOKit/hid/IOHIDNotification.h b/external/ios-headers/IOKit/hid/IOHIDNotification.h
deleted file mode 100755
index 9b83204..0000000
--- a/external/ios-headers/IOKit/hid/IOHIDNotification.h
+++ /dev/null
@@ -1,82 +0,0 @@
-/*
- 
-IOHIDNotification ... I/O Kit HID Notifications
-
-Copyright (c) 2009  KennyTM~ <kennytm@gmail.com>
-All rights reserved.
-
-Redistribution and use in source and binary forms, with or without modification,
-are permitted provided that the following conditions are met:
-
-* Redistributions of source code must retain the above copyright notice, this
-  list of conditions and the following disclaimer.
-* Redistributions in binary form must reproduce the above copyright notice, 
-  this list of conditions and the following disclaimer in the documentation
-  and/or other materials provided with the distribution.
-* Neither the name of the KennyTM~ nor the names of its contributors may be
-  used to endorse or promote products derived from this software without
-  specific prior written permission.
-
-THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
-ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
-WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
-DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
-ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
-(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
-LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
-ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
-SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-
-*/
-
-#ifndef IOHID_NOTIFICATION_H
-#define IOHID_NOTIFICATION_H
-
-#include <CoreFoundation/CoreFoundation.h>
-
-#if __cplusplus
-extern "C" {
-#endif
-	
-	typedef void(*IOHIDNotificationCallback)(void* target, void* refcon);
-	
-	typedef struct __IOHIDNotification
-#if 0
-	{
-		CFRuntimeBase _base;	// 0, 4
-		IOHIDNotificationCallback clientCallback;	// 8
-		void* clientTarget;	// c
-		void* clientRefcon;	// 10
-		IOHIDNotificationCallback ownerCallback;	// 14
-		void* ownerTarget;	// 18
-		void* ownerRefcon;	// 1c
-	}
-#endif
-	* IOHIDNotificationRef;
-	
-#pragma mark -
-#pragma mark Creators
-	
-	CFTypeID IOHIDNotificationGetTypeID();
-	
-	IOHIDNotificationRef IOHIDNotificationCreate(CFAllocatorRef allocator,
-												 IOHIDNotificationCallback ownerCallback, void* ownerTarget, void* ownerRefcon,
-												 IOHIDNotificationCallback clientCallback, void* clientTarget, void* clientRefcon);
-	
-#pragma mark -
-#pragma mark Accessors
-	
-	IOHIDNotificationCallback IOHIDNotificationGetClientCallback(IOHIDNotificationRef notification);
-	void* IOHIDNotificationGetClientTarget(IOHIDNotificationRef notification);
-	void* IOHIDNotificationGetClientRefcon(IOHIDNotificationRef notification);
-	IOHIDNotificationCallback IOHIDNotificationGetOwnerCallback(IOHIDNotificationRef notification);
-	void* IOHIDNotificationGetOwnerTarget(IOHIDNotificationRef notification);
-	void* IOHIDNotificationGetOwnerRefcon(IOHIDNotificationRef notification);
-		
-#if __cplusplus
-}
-#endif
-
-#endif
-
diff --git a/external/ios-headers/IOKit/hid/IOHIDService.h b/external/ios-headers/IOKit/hid/IOHIDService.h
deleted file mode 100755
index 218943a..0000000
--- a/external/ios-headers/IOKit/hid/IOHIDService.h
+++ /dev/null
@@ -1,122 +0,0 @@
-/*
- 
-IOHIDService.h ... I/O Kit HID Service
-
-Copyright (c) 2009  KennyTM~ <kennytm@gmail.com>
-All rights reserved.
-
-Redistribution and use in source and binary forms, with or without modification,
-are permitted provided that the following conditions are met:
-
-* Redistributions of source code must retain the above copyright notice, this
-  list of conditions and the following disclaimer.
-* Redistributions in binary form must reproduce the above copyright notice, 
-  this list of conditions and the following disclaimer in the documentation
-  and/or other materials provided with the distribution.
-* Neither the name of the KennyTM~ nor the names of its contributors may be
-  used to endorse or promote products derived from this software without
-  specific prior written permission.
-
-THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
-ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
-WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
-DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
-ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
-(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
-LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
-ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
-SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-
-*/
-
-// With reference to http://www.opensource.apple.com/source/IOHIDFamily/IOHIDFamily-258.1/IOHIDLib/IOHIDEventServiceClass.h
-
-#ifndef IOHID_SERVICE_H
-#define IOHID_SERVICE_H
-
-#include <CoreFoundation/CoreFoundation.h>
-#include "IOKitLib.h"
-#include "IOHIDEvent.h"
-#include "IOHIDNotification.h"
-
-#if __cplusplus
-extern "C" {
-#endif
-			
-	typedef struct __IOHIDService
-#if 0
-	{
-		CFRuntimeBase _base;	// 0, 4
-		CFTypeRef client;	// 8
-		io_service_t service;	// c
-		void** pluginInterface1;	// 10; GUID = D12C833F-B15B-11DA-902D-0014519758EF
-		void** pluginInterface2;	// 14;
-		IOCFPlugInInterface** interface;	// 18
-		CFRunLoopRef runloop;	// 1c
-		CFStringRef mode;	// 20
-		IONotificationPortRef notify;	// 24	
-		CFMutableSetRef removalNotifications;	// 2c
-		void* eventTarget;	// 30
-		void* eventRefcon;	// 34
-		IOHIDServiceEventCallback eventCallback;	// 38
-		uint32_t previousButtonMask;	// 3c
-	}
-#endif
-	* IOHIDServiceRef;
-
-	typedef void(*IOHIDServiceEventCallback)(void* target, void* refcon, IOHIDServiceRef service, IOHIDEventRef event);
-	
-	/*
-	 metaObject->
-	 [0] = NULL
-	 [4] = IOHIDIUnknown::genericQueryInterface(void*, CFUUIDBytes, void**)
-	 [8] = IOHIDIUnknown::genericAddRef(void*)
-	 [0x0c] = IOHIDIUnknown::genericRelease(void*)
-	 [0x10] = IOHIDEventServiceClass::_open(void*, unsigned long)
-	 [0x14] = IOHIDEventServiceClass::_close(void*, unsigned long)
-	 [0x18] = IOHIDEventServiceClass::_getProperty(void*, __CFString const*)
-	 [0x1c] = IOHIDEventServiceClass::_setProperty(void*, __CFString const*, void const*)
-	 [0x20] = IOHIDEventServiceClass::_setEventCallback(void*, void (*)(void*, void*, void*, __IOHIDEvent*, unsigned long), void*, void*)
-	 [0x24] = IOHIDEventServiceClass::_scheduleWithRunLoop(void*, __CFRunLoop*, __CFString const*)
-	 [0x28] = IOHIDEventServiceClass::_unscheduleFromRunLoop(void*, __CFRunLoop*, __CFString const*)
-	 [0x2c] = IOHIDEventServiceClass::_copyEvent(void*, unsigned int, __IOHIDEvent*, unsigned long)
-	 */	
-	
-#pragma mark -
-#pragma mark Creators
-		
-	CFTypeID IOHIDServiceGetTypeID(void);
-	IOHIDServiceRef _IOHIDServiceCreate(CFAllocatorRef allocator, io_service_t service);
-	
-#pragma mark -
-#pragma mark Accessors
-			
-	CFTypeRef IOHIDServiceGetProperty(IOHIDServiceRef service, CFStringRef property);
-	Boolean IOHIDServiceSetProperty(IOHIDServiceRef service, CFStringRef property, CFTypeRef value);
-	
-	CFTypeRef _IOHIDServiceGetClient(IOHIDServiceRef service);
-	Boolean _IOHIDServiceMatchPropertyTable(IOHIDServiceRef service, CFDictionaryRef propertyTable);
-	
-	IOHIDEventRef IOHIDServiceCopyEvent(IOHIDServiceRef service, IOHIDEventType type, IOHIDEventRef event, IOOptionBits options);
-	
-	void _IOHIDServiceSetEventCallback(IOHIDServiceRef service, IOHIDServiceEventCallback eventCallback, void* target, void* refcon);
-	
-#pragma mark -
-#pragma mark Actions
-	
-	void _IOHIDServiceScheduleWithRunLoop(IOHIDServiceRef service, CFRunLoopRef runloop, CFStringRef mode);
-	void _IOHIDServiceUnscheduleWithRunLoop(IOHIDServiceRef service);
-	
-	IOHIDNotificationRef IOHIDServiceCreateRemovalNotification(IOHIDServiceRef display, IOHIDNotificationCallback callback, void* target, void* refcon);
-	
-	Boolean _IOHIDServiceOpen(IOHIDServiceRef service, CFTypeRef client, IOOptionBits options);
-	Boolean _IOHIDServiceClose(IOHIDServiceRef service, CFTypeRef client, IOOptionBits options);
-	
-	
-#if __cplusplus
-}
-#endif
-
-#endif
-
diff --git a/external/ios-headers/IOKit/hid/IOHIDSession.h b/external/ios-headers/IOKit/hid/IOHIDSession.h
deleted file mode 100755
index 441cf16..0000000
--- a/external/ios-headers/IOKit/hid/IOHIDSession.h
+++ /dev/null
@@ -1,152 +0,0 @@
-/*
- 
-IOHIDSession.h ... I/O Kit HID Session
-
-Copyright (c) 2010  KennyTM~ <kennytm@gmail.com>
-All rights reserved.
-
-Redistribution and use in source and binary forms, with or without modification,
-are permitted provided that the following conditions are met:
-
-* Redistributions of source code must retain the above copyright notice, this
-  list of conditions and the following disclaimer.
-* Redistributions in binary form must reproduce the above copyright notice, 
-  this list of conditions and the following disclaimer in the documentation
-  and/or other materials provided with the distribution.
-* Neither the name of the KennyTM~ nor the names of its contributors may be
-  used to endorse or promote products derived from this software without
-  specific prior written permission.
-
-THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
-ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
-WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
-DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
-ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
-(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
-LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
-ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
-SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-
-*/
-
-#ifndef IOHID_NOTIFICATION_H
-#define IOHID_NOTIFICATION_H
-
-#include <CoreFoundation/CoreFoundation.h>
-#include "IOHIDDisplay.h"
-#include "IOHIDService.h"
-#include "IOHIDEvent.h"
-
-#if __cplusplus
-extern "C" {
-#endif
-	
-	typedef struct IOHIDSessionWorkSpace {
-		uint64_t value;
-	} IOHIDSessionWorkSpace;	
-	
-	typedef struct __IOHIDSession
-#if 0
-	{
-		CFRuntimeBase _base;	// 0, 4
-		int isOpen;	// 8
-		CFTypeRef client;	// c
-		IOHIDSessionCallback callback;	// 10
-		void* refcon;	// 14
-		IOHIDSessionWorkSpace workSpace;	// 18, 1c
-		CFRunLoopRef runloop;	// 20
-		pthread_mutex_t lock;	// 24
-		pthread_cond_t cond;	// 50
-		pthread_mutexattr_t attr;	// 6c
-		CFMutableSetRef services;	// 78
-		CFMutableSetRef displays;	// 7c
-		CFMutableSetRef ALSStates;	// 80
-		CFMutableDictionaryRef properties;	// 84
-		Boolean     displayStatus;	// 88, initially = true
-		float       factor;	// brightnessFactor. 8c, initially = 1
-		float       deviceAmbient;	// 94, initially = 0.5
-		float       interval;	// displayInternval. 98, initially = 0.402
-		float       ALSIntPeriod;	// 9c, initially = 5.5
-		float       xa4;	// a4, initially = 0
-		float       xa8;	// a8, initially = 5.5
-		float       xac;	// ac, initially = -1
-		float       xb0;	// b0, initially = 1
-		float       backlight;	// b4, initially = 1
-		CFTypeRef   xe0;	// e0
-		int         displayOrientation;	// e8, initially = 1
-		Boolean     orientationEnabled;	// ec, initially = false
-		Boolean     ALSIntPeriodOrientationEnabled;	// ed, initially = false
-		float       ALSIntPeriodOrientationPortrait;	// f0, initially = 5.5
-		float       ALSIntPeriodOrientationPortraitInv;	// f4, initially = 0
-		float       ALSIntPeriodOrientationLandscape;	// f8, initially = 0
-		int         lockStateToken;	// fc. (for the "com.apple.springboard.lockstate" Darwin notification)
-		uint64_t    lockState;	// 100, 104
-		mach_port_t lockStateNotifyPort;	// 108 (leads to __IOHIDSessionLockCallback)
-		int         bootedCleanlyToken;	// 10c (for the "com.apple.springboard.bootedcleanly" Darwin notification)
-		mach_port_t bootedCleanlyNotifyPort;	// 118 (leads to __IOHIDSessionBootCallback)
-		int         displayStatusToken;	// 11c (for the "com.apple.iokit.hid.displayStatus" Darwin notification)
-		int         substantialTransitionToken;	// 12c (for the "com.apple.mobile.SubstantialTransition" Darwin notification)
-		mach_port_t substantialTransitionNotifyPort;	// 130 (leads to __IOHIDSessionTransitionCallback)
-		int         thermalNotificationToken;	// 134 (for the kOSThermalNotificationName Darwin notification)
-		mach_port_t thermalNotificationNotifyPort;	// 138 (leads to __IOHIDSessionThermalCallback)
-		int         thermalLevel;	// 13c, initially = OSThermalNotificationCurrentLevel()
-		int         logLevel;	// 144, initially = 6
-	}
-#endif
-	* IOHIDSessionRef;
-	
-	typedef void(*IOHIDSessionCallback)(CFTypeRef client, void* refcon, IOHIDServiceRef service, IOHIDEventRef event);
-	
-#pragma mark -
-#pragma mark Creators
-	
-	CFTypeID IOHIDSessionGetTypeID(void);
-	IOHIDSessionRef IOHIDSessionCreate(CFAllocatorRef allocator);
-		
-#pragma mark -
-#pragma mark Accessors
-	
-	CFTypeRef IOHIDSessionGetProperty(IOHIDSessionRef session, CFStringRef key);
-	Boolean IOHIDSessionSetProperty(IOHIDSessionRef session, CFStringRef key, CFTypeRef value);
-	
-	IOHIDSessionWorkSpace IOHIDSessionGetWorkSpace(IOHIDSessionRef session);
-	void IOHIDSessionSetWorkSpace(IOHIDSessionRef session, IOHIDSessionWorkSpace workSpace);
-	
-	Boolean IOHIDSessionGetLockState(IOHIDSessionRef session);
-	void IOHIDSessionSetLockState(IOHIDSessionRef session, Boolean lockState);
-	
-#pragma mark -
-#pragma mark Actions
-	
-	Boolean IOHIDSessionOpen(IOHIDSessionRef session, CFTypeRef client, IOHIDSessionCallback callback, void* refcon)
-	void IOHIDSessionClose(IOHIDSessionRef session, CFTypeRef client);
-	
-	void IOHIDSessionAddService(IOHIDSessionRef, IOHIDServiceRef service);
-	void IOHIDSessionRemoveService(IOHIDSessionRef, IOHIDServiceRef service);
-	
-	void IOHIDSessionAddDisplay(IOHIDSessionRef, IOHIDDisplayRef display);
-	void IOHIDSessionRemoveDisplay(IOHIDSessionRef session, IOHIDDisplayRef display);
-	
-	IOHIDEventRef IOHIDSessionCopyEvent(IOHIDSessionRef session, IOHIDEventType type, IOHIDEventRef event, IOOptionBits options);
-		
-#pragma mark -
-#pragma mark Constants
-	
-	static const CFStringRef kIOHIDSessionPropertyDisplayOrientation = CFSTR("DisplayOrientation");
-	static const CFStringRef kIOHIDSessionPropertyDisplayBrightnessFactor = CFSTR("DisplayBrightnessFactor");
-	static const CFStringRef kIOHIDSessionPropertyDisplayBrightnessFactorWithFade = CFSTR("DisplayBrightnessFactorWithFade");
-	static const CFStringRef kIOHIDSessionPropertyDisplayBrightnessFactorPending = CFSTR("DisplayBrightnessFactorPending");
-	static const CFStringRef kIOHIDSessionPropertyLogLevel = CFSTR("LogLevel");
-	static const CFStringRef kIOHIDSessionPropertyALSIntPeriodOrientationEnabled = CFSTR("ALSIntPeriodOrientationEnabled");
-	static const CFStringRef kIOHIDSessionPropertyALSIntPeriod = CFSTR("ALSIntPeriod");
-	static const CFStringRef kIOHIDSessionPropertyALSIntPeriodOrientationPortrait = CFSTR("ALSIntPeriodOrientationPortrait");
-	static const CFStringRef kIOHIDSessionPropertyALSIntPeriodOrientationPortraitInv = CFSTR("ALSIntPeriodOrientationPortraitInv");
-	static const CFStringRef kIOHIDSessionPropertyALSIntPeriodOrientationLandscape = CFSTR("ALSIntPeriodOrientationLandscape");
-	
-#if __cplusplus
-}
-#endif
-
-#endif
-
diff --git a/external/ios-headers/IOKit/hid/IOHIDUserDevice.h b/external/ios-headers/IOKit/hid/IOHIDUserDevice.h
deleted file mode 100755
index 3f6f8ca..0000000
--- a/external/ios-headers/IOKit/hid/IOHIDUserDevice.h
+++ /dev/null
@@ -1,69 +0,0 @@
-/*
- *
- * @APPLE_LICENSE_HEADER_START@
- * 
- * Copyright (c) 1999-2003 Apple Computer, Inc.  All Rights Reserved.
- * 
- * This file contains Original Code and/or Modifications of Original Code
- * as defined in and that are subject to the Apple Public Source License
- * Version 2.0 (the 'License'). You may not use this file except in
- * compliance with the License. Please obtain a copy of the License at
- * http://www.opensource.apple.com/apsl/ and read it before using this
- * file.
- * 
- * The Original Code and all software distributed under the License are
- * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
- * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
- * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
- * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
- * Please see the License for the specific language governing rights and
- * limitations under the License.
- * 
- * @APPLE_LICENSE_HEADER_END@
- */
-
-#ifndef _IOKIT_HID_IOHIDUSERDEVICE_USER_H
-#define _IOKIT_HID_IOHIDUSERDEVICE_USER_H
-
-#include <CoreFoundation/CoreFoundation.h>
-#include <IOKit/IOKitLib.h>
-
-__BEGIN_DECLS
-
-typedef struct __IOHIDUserDevice * IOHIDUserDeviceRef;
-
-/*!
-	@function   IOHIDUserDeviceGetTypeID
-	@abstract   Returns the type identifier of all IOHIDUserDevice instances.
-*/
-CF_EXPORT
-CFTypeID IOHIDUserDeviceGetTypeID(void);
-
-/*!
-	@function   IOHIDUserDeviceCreate
-	@abstract   Creates an virtual IOHIDDevice in the kernel.
-    @discussion The io_service_t passed in this method must reference an object 
-                in the kernel of type IOHIDUserDevice.
-    @param      allocator Allocator to be used during creation.
-    @param      properties CFDictionaryRef containing device properties index by keys defined in IOHIDKeys.h.
-    @result     Returns a new IOHIDUserDeviceRef.
-*/
-CF_EXPORT
-IOHIDUserDeviceRef IOHIDUserDeviceCreate(
-                                CFAllocatorRef                  allocator, 
-                                CFDictionaryRef                 properties);
-
-
-/*!
-	@function   IOHIDUserDeviceHandleReport
-	@abstract   Dispatch a report to the IOHIDUserDevice.
-*/
-CF_EXPORT
-IOReturn IOHIDUserDeviceHandleReport(
-                                IOHIDUserDeviceRef              device, 
-                                uint8_t *                       report, 
-                                CFIndex                         reportLength);
-
-__END_DECLS
-
-#endif /* _IOKIT_HID_IOHIDUSERDEVICE_USER_H */
diff --git a/external/ios-headers/IOKit/iokitmig.h b/external/ios-headers/IOKit/iokitmig.h
deleted file mode 100755
index 80fb46e..0000000
--- a/external/ios-headers/IOKit/iokitmig.h
+++ /dev/null
@@ -1,3781 +0,0 @@
-#if !defined(__LP64__)
-
-#ifndef	_iokit_user_
-#define	_iokit_user_
-
-/* Module iokit */
-
-#include <string.h>
-#include <mach/ndr.h>
-#include <mach/boolean.h>
-#include <mach/kern_return.h>
-#include <mach/notify.h>
-#include <mach/mach_types.h>
-#include <mach/message.h>
-#include <mach/mig_errors.h>
-#include <mach/port.h>
-
-#ifdef AUTOTEST
-#ifndef FUNCTION_PTR_T
-#define FUNCTION_PTR_T
-typedef void (*function_ptr_t)(mach_port_t, char *, mach_msg_type_number_t);
-typedef struct {
-        char            *name;
-        function_ptr_t  function;
-} function_table_entry;
-typedef function_table_entry   *function_table_t;
-#endif /* FUNCTION_PTR_T */
-#endif /* AUTOTEST */
-
-#ifndef	iokit_MSG_COUNT
-#define	iokit_MSG_COUNT	87
-#endif	/* iokit_MSG_COUNT */
-
-#include <mach/std_types.h>
-#include <mach/mig.h>
-#include <mach/mig.h>
-#include <mach/mach_types.h>
-#include <mach/mach_types.h>
-#include <device/device_types.h>
-
-#ifdef __BeforeMigUserHeader
-__BeforeMigUserHeader
-#endif /* __BeforeMigUserHeader */
-
-#include <sys/cdefs.h>
-__BEGIN_DECLS
-
-
-/* Routine io_object_get_class */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_object_get_class
-(
-	mach_port_t object,
-	io_name_t className
-);
-
-/* Routine io_object_conforms_to */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_object_conforms_to
-(
-	mach_port_t object,
-	io_name_t className,
-	boolean_t *conforms
-);
-
-/* Routine io_iterator_next */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_iterator_next
-(
-	mach_port_t iterator,
-	mach_port_t *object
-);
-
-/* Routine io_iterator_reset */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_iterator_reset
-(
-	mach_port_t iterator
-);
-
-/* Routine io_service_get_matching_services */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_service_get_matching_services
-(
-	mach_port_t master_port,
-	io_string_t matching,
-	mach_port_t *existing
-);
-
-/* Routine io_registry_entry_get_property */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_registry_entry_get_property
-(
-	mach_port_t registry_entry,
-	io_name_t property_name,
-	io_buf_ptr_t *properties,
-	mach_msg_type_number_t *propertiesCnt
-);
-
-/* Routine io_registry_create_iterator */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_registry_create_iterator
-(
-	mach_port_t master_port,
-	io_name_t plane,
-	uint32_t options,
-	mach_port_t *iterator
-);
-
-/* Routine io_registry_iterator_enter_entry */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_registry_iterator_enter_entry
-(
-	mach_port_t iterator
-);
-
-/* Routine io_registry_iterator_exit_entry */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_registry_iterator_exit_entry
-(
-	mach_port_t iterator
-);
-
-/* Routine io_registry_entry_from_path */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_registry_entry_from_path
-(
-	mach_port_t master_port,
-	io_string_t path,
-	mach_port_t *registry_entry
-);
-
-/* Routine io_registry_entry_get_name */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_registry_entry_get_name
-(
-	mach_port_t registry_entry,
-	io_name_t name
-);
-
-/* Routine io_registry_entry_get_properties */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_registry_entry_get_properties
-(
-	mach_port_t registry_entry,
-	io_buf_ptr_t *properties,
-	mach_msg_type_number_t *propertiesCnt
-);
-
-/* Routine io_registry_entry_get_property_bytes */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_registry_entry_get_property_bytes
-(
-	mach_port_t registry_entry,
-	io_name_t property_name,
-	io_struct_inband_t data,
-	mach_msg_type_number_t *dataCnt
-);
-
-/* Routine io_registry_entry_get_child_iterator */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_registry_entry_get_child_iterator
-(
-	mach_port_t registry_entry,
-	io_name_t plane,
-	mach_port_t *iterator
-);
-
-/* Routine io_registry_entry_get_parent_iterator */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_registry_entry_get_parent_iterator
-(
-	mach_port_t registry_entry,
-	io_name_t plane,
-	mach_port_t *iterator
-);
-
-/* Routine io_service_close */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_service_close
-(
-	mach_port_t connection
-);
-
-/* Routine io_connect_get_service */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_connect_get_service
-(
-	mach_port_t connection,
-	mach_port_t *service
-);
-
-/* Routine io_connect_set_notification_port */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_connect_set_notification_port
-(
-	mach_port_t connection,
-	uint32_t notification_type,
-	mach_port_t port,
-	uint32_t reference
-);
-
-/* Routine io_connect_map_memory */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_connect_map_memory
-(
-	mach_port_t connection,
-	uint32_t memory_type,
-	task_t into_task,
-	vm_address_t *address,
-	vm_size_t *size,
-	uint32_t flags
-);
-
-/* Routine io_connect_add_client */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_connect_add_client
-(
-	mach_port_t connection,
-	mach_port_t connect_to
-);
-
-/* Routine io_connect_set_properties */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_connect_set_properties
-(
-	mach_port_t connection,
-	io_buf_ptr_t properties,
-	mach_msg_type_number_t propertiesCnt,
-	kern_return_t *result
-);
-
-/* Routine io_connect_method_scalarI_scalarO */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_connect_method_scalarI_scalarO
-(
-	mach_port_t connection,
-	uint32_t selector,
-	io_scalar_inband_t input,
-	mach_msg_type_number_t inputCnt,
-	io_scalar_inband_t output,
-	mach_msg_type_number_t *outputCnt
-);
-
-/* Routine io_connect_method_scalarI_structureO */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_connect_method_scalarI_structureO
-(
-	mach_port_t connection,
-	uint32_t selector,
-	io_scalar_inband_t input,
-	mach_msg_type_number_t inputCnt,
-	io_struct_inband_t output,
-	mach_msg_type_number_t *outputCnt
-);
-
-/* Routine io_connect_method_scalarI_structureI */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_connect_method_scalarI_structureI
-(
-	mach_port_t connection,
-	uint32_t selector,
-	io_scalar_inband_t input,
-	mach_msg_type_number_t inputCnt,
-	io_struct_inband_t inputStruct,
-	mach_msg_type_number_t inputStructCnt
-);
-
-/* Routine io_connect_method_structureI_structureO */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_connect_method_structureI_structureO
-(
-	mach_port_t connection,
-	uint32_t selector,
-	io_struct_inband_t input,
-	mach_msg_type_number_t inputCnt,
-	io_struct_inband_t output,
-	mach_msg_type_number_t *outputCnt
-);
-
-/* Routine io_registry_entry_get_path */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_registry_entry_get_path
-(
-	mach_port_t registry_entry,
-	io_name_t plane,
-	io_string_t path
-);
-
-/* Routine io_registry_get_root_entry */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_registry_get_root_entry
-(
-	mach_port_t master_port,
-	mach_port_t *root
-);
-
-/* Routine io_registry_entry_set_properties */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_registry_entry_set_properties
-(
-	mach_port_t registry_entry,
-	io_buf_ptr_t properties,
-	mach_msg_type_number_t propertiesCnt,
-	kern_return_t *result
-);
-
-/* Routine io_registry_entry_in_plane */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_registry_entry_in_plane
-(
-	mach_port_t registry_entry,
-	io_name_t plane,
-	boolean_t *inPlane
-);
-
-/* Routine io_object_get_retain_count */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_object_get_retain_count
-(
-	mach_port_t object,
-	uint32_t *retainCount
-);
-
-/* Routine io_service_get_busy_state */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_service_get_busy_state
-(
-	mach_port_t service,
-	uint32_t *busyState
-);
-
-/* Routine io_service_wait_quiet */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_service_wait_quiet
-(
-	mach_port_t service,
-	mach_timespec_t wait_time
-);
-
-/* Routine io_registry_entry_create_iterator */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_registry_entry_create_iterator
-(
-	mach_port_t registry_entry,
-	io_name_t plane,
-	uint32_t options,
-	mach_port_t *iterator
-);
-
-/* Routine io_iterator_is_valid */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_iterator_is_valid
-(
-	mach_port_t iterator,
-	boolean_t *is_valid
-);
-
-/* Routine io_catalog_send_data */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_catalog_send_data
-(
-	mach_port_t master_port,
-	uint32_t flag,
-	io_buf_ptr_t inData,
-	mach_msg_type_number_t inDataCnt,
-	kern_return_t *result
-);
-
-/* Routine io_catalog_terminate */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_catalog_terminate
-(
-	mach_port_t master_port,
-	uint32_t flag,
-	io_name_t name
-);
-
-/* Routine io_catalog_get_data */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_catalog_get_data
-(
-	mach_port_t master_port,
-	uint32_t flag,
-	io_buf_ptr_t *outData,
-	mach_msg_type_number_t *outDataCnt
-);
-
-/* Routine io_catalog_get_gen_count */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_catalog_get_gen_count
-(
-	mach_port_t master_port,
-	uint32_t *genCount
-);
-
-/* Routine io_catalog_module_loaded */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_catalog_module_loaded
-(
-	mach_port_t master_port,
-	io_name_t name
-);
-
-/* Routine io_catalog_reset */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_catalog_reset
-(
-	mach_port_t master_port,
-	uint32_t flag
-);
-
-/* Routine io_service_request_probe */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_service_request_probe
-(
-	mach_port_t service,
-	uint32_t options
-);
-
-/* Routine io_registry_entry_get_name_in_plane */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_registry_entry_get_name_in_plane
-(
-	mach_port_t registry_entry,
-	io_name_t plane,
-	io_name_t name
-);
-
-/* Routine io_service_match_property_table */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_service_match_property_table
-(
-	mach_port_t service,
-	io_string_t matching,
-	boolean_t *matches
-);
-
-/* Routine io_async_method_scalarI_scalarO */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_async_method_scalarI_scalarO
-(
-	mach_port_t connection,
-	mach_port_t wake_port,
-	io_async_ref_t reference,
-	mach_msg_type_number_t referenceCnt,
-	uint32_t selector,
-	io_scalar_inband_t input,
-	mach_msg_type_number_t inputCnt,
-	io_scalar_inband_t output,
-	mach_msg_type_number_t *outputCnt
-);
-
-/* Routine io_async_method_scalarI_structureO */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_async_method_scalarI_structureO
-(
-	mach_port_t connection,
-	mach_port_t wake_port,
-	io_async_ref_t reference,
-	mach_msg_type_number_t referenceCnt,
-	uint32_t selector,
-	io_scalar_inband_t input,
-	mach_msg_type_number_t inputCnt,
-	io_struct_inband_t output,
-	mach_msg_type_number_t *outputCnt
-);
-
-/* Routine io_async_method_scalarI_structureI */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_async_method_scalarI_structureI
-(
-	mach_port_t connection,
-	mach_port_t wake_port,
-	io_async_ref_t reference,
-	mach_msg_type_number_t referenceCnt,
-	uint32_t selector,
-	io_scalar_inband_t input,
-	mach_msg_type_number_t inputCnt,
-	io_struct_inband_t inputStruct,
-	mach_msg_type_number_t inputStructCnt
-);
-
-/* Routine io_async_method_structureI_structureO */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_async_method_structureI_structureO
-(
-	mach_port_t connection,
-	mach_port_t wake_port,
-	io_async_ref_t reference,
-	mach_msg_type_number_t referenceCnt,
-	uint32_t selector,
-	io_struct_inband_t input,
-	mach_msg_type_number_t inputCnt,
-	io_struct_inband_t output,
-	mach_msg_type_number_t *outputCnt
-);
-
-/* Routine io_service_add_notification */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_service_add_notification
-(
-	mach_port_t master_port,
-	io_name_t notification_type,
-	io_string_t matching,
-	mach_port_t wake_port,
-	io_async_ref_t reference,
-	mach_msg_type_number_t referenceCnt,
-	mach_port_t *notification
-);
-
-/* Routine io_service_add_interest_notification */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_service_add_interest_notification
-(
-	mach_port_t service,
-	io_name_t type_of_interest,
-	mach_port_t wake_port,
-	io_async_ref_t reference,
-	mach_msg_type_number_t referenceCnt,
-	mach_port_t *notification
-);
-
-/* Routine io_service_acknowledge_notification */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_service_acknowledge_notification
-(
-	mach_port_t service,
-	natural_t notify_ref,
-	natural_t response
-);
-
-/* Routine io_connect_get_notification_semaphore */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_connect_get_notification_semaphore
-(
-	mach_port_t connection,
-	natural_t notification_type,
-	semaphore_t *semaphore
-);
-
-/* Routine io_connect_unmap_memory */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_connect_unmap_memory
-(
-	mach_port_t connection,
-	uint32_t memory_type,
-	task_t into_task,
-	vm_address_t address
-);
-
-/* Routine io_registry_entry_get_location_in_plane */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_registry_entry_get_location_in_plane
-(
-	mach_port_t registry_entry,
-	io_name_t plane,
-	io_name_t location
-);
-
-/* Routine io_registry_entry_get_property_recursively */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_registry_entry_get_property_recursively
-(
-	mach_port_t registry_entry,
-	io_name_t plane,
-	io_name_t property_name,
-	uint32_t options,
-	io_buf_ptr_t *properties,
-	mach_msg_type_number_t *propertiesCnt
-);
-
-/* Routine io_service_get_state */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_service_get_state
-(
-	mach_port_t service,
-	uint64_t *state,
-	uint32_t *busy_state,
-	uint64_t *accumulated_busy_time
-);
-
-/* Routine io_service_get_matching_services_ool */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_service_get_matching_services_ool
-(
-	mach_port_t master_port,
-	io_buf_ptr_t matching,
-	mach_msg_type_number_t matchingCnt,
-	kern_return_t *result,
-	mach_port_t *existing
-);
-
-/* Routine io_service_match_property_table_ool */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_service_match_property_table_ool
-(
-	mach_port_t service,
-	io_buf_ptr_t matching,
-	mach_msg_type_number_t matchingCnt,
-	kern_return_t *result,
-	boolean_t *matches
-);
-
-/* Routine io_service_add_notification_ool */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_service_add_notification_ool
-(
-	mach_port_t master_port,
-	io_name_t notification_type,
-	io_buf_ptr_t matching,
-	mach_msg_type_number_t matchingCnt,
-	mach_port_t wake_port,
-	io_async_ref_t reference,
-	mach_msg_type_number_t referenceCnt,
-	kern_return_t *result,
-	mach_port_t *notification
-);
-
-/* Routine io_object_get_superclass */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_object_get_superclass
-(
-	mach_port_t master_port,
-	io_name_t obj_name,
-	io_name_t class_name
-);
-
-/* Routine io_object_get_bundle_identifier */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_object_get_bundle_identifier
-(
-	mach_port_t master_port,
-	io_name_t obj_name,
-	io_name_t class_name
-);
-
-/* Routine io_service_open_extended */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_service_open_extended
-(
-	mach_port_t service,
-	task_t owningTask,
-	uint32_t connect_type,
-	NDR_record_t ndr,
-	io_buf_ptr_t properties,
-	mach_msg_type_number_t propertiesCnt,
-	kern_return_t *result,
-	mach_port_t *connection
-);
-
-/* Routine io_connect_map_memory_into_task */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_connect_map_memory_into_task
-(
-	mach_port_t connection,
-	uint32_t memory_type,
-	task_t into_task,
-	mach_vm_address_t *address,
-	mach_vm_size_t *size,
-	uint32_t flags
-);
-
-/* Routine io_connect_unmap_memory_from_task */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_connect_unmap_memory_from_task
-(
-	mach_port_t connection,
-	uint32_t memory_type,
-	task_t from_task,
-	mach_vm_address_t address
-);
-
-/* Routine io_connect_method */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_connect_method
-(
-	mach_port_t connection,
-	uint32_t selector,
-	io_scalar_inband64_t scalar_input,
-	mach_msg_type_number_t scalar_inputCnt,
-	io_struct_inband_t inband_input,
-	mach_msg_type_number_t inband_inputCnt,
-	mach_vm_address_t ool_input,
-	mach_vm_size_t ool_input_size,
-	io_struct_inband_t inband_output,
-	mach_msg_type_number_t *inband_outputCnt,
-	io_scalar_inband64_t scalar_output,
-	mach_msg_type_number_t *scalar_outputCnt,
-	mach_vm_address_t ool_output,
-	mach_vm_size_t *ool_output_size
-);
-
-/* Routine io_connect_async_method */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_connect_async_method
-(
-	mach_port_t connection,
-	mach_port_t wake_port,
-	io_async_ref64_t reference,
-	mach_msg_type_number_t referenceCnt,
-	uint32_t selector,
-	io_scalar_inband64_t scalar_input,
-	mach_msg_type_number_t scalar_inputCnt,
-	io_struct_inband_t inband_input,
-	mach_msg_type_number_t inband_inputCnt,
-	mach_vm_address_t ool_input,
-	mach_vm_size_t ool_input_size,
-	io_struct_inband_t inband_output,
-	mach_msg_type_number_t *inband_outputCnt,
-	io_scalar_inband64_t scalar_output,
-	mach_msg_type_number_t *scalar_outputCnt,
-	mach_vm_address_t ool_output,
-	mach_vm_size_t *ool_output_size
-);
-
-/* Routine io_registry_entry_get_registry_entry_id */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_registry_entry_get_registry_entry_id
-(
-	mach_port_t registry_entry,
-	uint64_t *entry_id
-);
-
-/* Routine io_connect_method_var_output */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_connect_method_var_output
-(
-	mach_port_t connection,
-	uint32_t selector,
-	io_scalar_inband64_t scalar_input,
-	mach_msg_type_number_t scalar_inputCnt,
-	io_struct_inband_t inband_input,
-	mach_msg_type_number_t inband_inputCnt,
-	mach_vm_address_t ool_input,
-	mach_vm_size_t ool_input_size,
-	io_struct_inband_t inband_output,
-	mach_msg_type_number_t *inband_outputCnt,
-	io_scalar_inband64_t scalar_output,
-	mach_msg_type_number_t *scalar_outputCnt,
-	io_buf_ptr_t *var_output,
-	mach_msg_type_number_t *var_outputCnt
-);
-
-/* Routine io_service_get_matching_service */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_service_get_matching_service
-(
-	mach_port_t master_port,
-	io_string_t matching,
-	mach_port_t *service
-);
-
-/* Routine io_service_get_matching_service_ool */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_service_get_matching_service_ool
-(
-	mach_port_t master_port,
-	io_buf_ptr_t matching,
-	mach_msg_type_number_t matchingCnt,
-	kern_return_t *result,
-	mach_port_t *service
-);
-
-/* Routine io_service_get_authorization_id */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_service_get_authorization_id
-(
-	mach_port_t service,
-	uint64_t *authorization_id
-);
-
-/* Routine io_service_set_authorization_id */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_service_set_authorization_id
-(
-	mach_port_t service,
-	uint64_t authorization_id
-);
-
-/* Routine io_server_version */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_server_version
-(
-	mach_port_t master_port,
-	uint64_t *version
-);
-
-/* Routine io_registry_entry_get_properties_bin */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_registry_entry_get_properties_bin
-(
-	mach_port_t registry_entry,
-	io_buf_ptr_t *properties,
-	mach_msg_type_number_t *propertiesCnt
-);
-
-/* Routine io_registry_entry_get_property_bin */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_registry_entry_get_property_bin
-(
-	mach_port_t registry_entry,
-	io_name_t plane,
-	io_name_t property_name,
-	uint32_t options,
-	io_buf_ptr_t *properties,
-	mach_msg_type_number_t *propertiesCnt
-);
-
-/* Routine io_service_get_matching_service_bin */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_service_get_matching_service_bin
-(
-	mach_port_t master_port,
-	io_struct_inband_t matching,
-	mach_msg_type_number_t matchingCnt,
-	mach_port_t *service
-);
-
-/* Routine io_service_get_matching_services_bin */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_service_get_matching_services_bin
-(
-	mach_port_t master_port,
-	io_struct_inband_t matching,
-	mach_msg_type_number_t matchingCnt,
-	mach_port_t *existing
-);
-
-/* Routine io_service_match_property_table_bin */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_service_match_property_table_bin
-(
-	mach_port_t service,
-	io_struct_inband_t matching,
-	mach_msg_type_number_t matchingCnt,
-	boolean_t *matches
-);
-
-/* Routine io_service_add_notification_bin */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_service_add_notification_bin
-(
-	mach_port_t master_port,
-	io_name_t notification_type,
-	io_struct_inband_t matching,
-	mach_msg_type_number_t matchingCnt,
-	mach_port_t wake_port,
-	io_async_ref_t reference,
-	mach_msg_type_number_t referenceCnt,
-	mach_port_t *notification
-);
-
-/* Routine io_registry_entry_get_path_ool */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_registry_entry_get_path_ool
-(
-	mach_port_t registry_entry,
-	io_name_t plane,
-	io_string_inband_t path,
-	io_buf_ptr_t *path_ool,
-	mach_msg_type_number_t *path_oolCnt
-);
-
-/* Routine io_registry_entry_from_path_ool */
-#ifdef	mig_external
-mig_external
-#else
-extern
-#endif	/* mig_external */
-kern_return_t io_registry_entry_from_path_ool
-(
-	mach_port_t master_port,
-	io_string_inband_t path,
-	io_buf_ptr_t path_ool,
-	mach_msg_type_number_t path_oolCnt,
-	kern_return_t *result,
-	mach_port_t *registry_entry
-);
-
-__END_DECLS
-
-/********************** Caution **************************/
-/* The following data types should be used to calculate  */
-/* maximum message sizes only. The actual message may be */
-/* smaller, and the position of the arguments within the */
-/* message layout may vary from what is presented here.  */
-/* For example, if any of the arguments are variable-    */
-/* sized, and less than the maximum is sent, the data    */
-/* will be packed tight in the actual message to reduce  */
-/* the presence of holes.                                */
-/********************** Caution **************************/
-
-/* typedefs for all requests */
-
-#ifndef __Request__iokit_subsystem__defined
-#define __Request__iokit_subsystem__defined
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__io_object_get_class_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_msg_type_number_t classNameOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t classNameCnt;
-		char className[128];
-	} __Request__io_object_conforms_to_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__io_iterator_next_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__io_iterator_reset_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_msg_type_number_t matchingOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t matchingCnt;
-		char matching[512];
-	} __Request__io_service_get_matching_services_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_msg_type_number_t property_nameOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t property_nameCnt;
-		char property_name[128];
-	} __Request__io_registry_entry_get_property_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_msg_type_number_t planeOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t planeCnt;
-		char plane[128];
-		uint32_t options;
-	} __Request__io_registry_create_iterator_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__io_registry_iterator_enter_entry_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__io_registry_iterator_exit_entry_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_msg_type_number_t pathOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t pathCnt;
-		char path[512];
-	} __Request__io_registry_entry_from_path_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__io_registry_entry_get_name_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__io_registry_entry_get_properties_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_msg_type_number_t property_nameOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t property_nameCnt;
-		char property_name[128];
-		mach_msg_type_number_t dataCnt;
-	} __Request__io_registry_entry_get_property_bytes_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_msg_type_number_t planeOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t planeCnt;
-		char plane[128];
-	} __Request__io_registry_entry_get_child_iterator_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_msg_type_number_t planeOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t planeCnt;
-		char plane[128];
-	} __Request__io_registry_entry_get_parent_iterator_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__io_service_close_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__io_connect_get_service_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t port;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		uint32_t notification_type;
-		uint32_t reference;
-	} __Request__io_connect_set_notification_port_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t into_task;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		uint32_t memory_type;
-		vm_address_t address;
-		vm_size_t size;
-		uint32_t flags;
-	} __Request__io_connect_map_memory_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t connect_to;
-		/* end of the kernel processed data */
-	} __Request__io_connect_add_client_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_ool_descriptor_t properties;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t propertiesCnt;
-	} __Request__io_connect_set_properties_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		uint32_t selector;
-		mach_msg_type_number_t inputCnt;
-		io_user_scalar_t input[16];
-		mach_msg_type_number_t outputCnt;
-	} __Request__io_connect_method_scalarI_scalarO_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		uint32_t selector;
-		mach_msg_type_number_t inputCnt;
-		io_user_scalar_t input[16];
-		mach_msg_type_number_t outputCnt;
-	} __Request__io_connect_method_scalarI_structureO_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		uint32_t selector;
-		mach_msg_type_number_t inputCnt;
-		io_user_scalar_t input[16];
-		mach_msg_type_number_t inputStructCnt;
-		char inputStruct[4096];
-	} __Request__io_connect_method_scalarI_structureI_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		uint32_t selector;
-		mach_msg_type_number_t inputCnt;
-		char input[4096];
-		mach_msg_type_number_t outputCnt;
-	} __Request__io_connect_method_structureI_structureO_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_msg_type_number_t planeOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t planeCnt;
-		char plane[128];
-	} __Request__io_registry_entry_get_path_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__io_registry_get_root_entry_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_ool_descriptor_t properties;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t propertiesCnt;
-	} __Request__io_registry_entry_set_properties_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_msg_type_number_t planeOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t planeCnt;
-		char plane[128];
-	} __Request__io_registry_entry_in_plane_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__io_object_get_retain_count_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__io_service_get_busy_state_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_timespec_t wait_time;
-	} __Request__io_service_wait_quiet_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_msg_type_number_t planeOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t planeCnt;
-		char plane[128];
-		uint32_t options;
-	} __Request__io_registry_entry_create_iterator_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__io_iterator_is_valid_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_ool_descriptor_t inData;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		uint32_t flag;
-		mach_msg_type_number_t inDataCnt;
-	} __Request__io_catalog_send_data_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		uint32_t flag;
-		mach_msg_type_number_t nameOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t nameCnt;
-		char name[128];
-	} __Request__io_catalog_terminate_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		uint32_t flag;
-	} __Request__io_catalog_get_data_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__io_catalog_get_gen_count_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_msg_type_number_t nameOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t nameCnt;
-		char name[128];
-	} __Request__io_catalog_module_loaded_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		uint32_t flag;
-	} __Request__io_catalog_reset_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		uint32_t options;
-	} __Request__io_service_request_probe_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_msg_type_number_t planeOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t planeCnt;
-		char plane[128];
-	} __Request__io_registry_entry_get_name_in_plane_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_msg_type_number_t matchingOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t matchingCnt;
-		char matching[512];
-	} __Request__io_service_match_property_table_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t wake_port;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t referenceCnt;
-		io_user_reference_t reference[8];
-		uint32_t selector;
-		mach_msg_type_number_t inputCnt;
-		io_user_scalar_t input[16];
-		mach_msg_type_number_t outputCnt;
-	} __Request__io_async_method_scalarI_scalarO_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t wake_port;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t referenceCnt;
-		io_user_reference_t reference[8];
-		uint32_t selector;
-		mach_msg_type_number_t inputCnt;
-		io_user_scalar_t input[16];
-		mach_msg_type_number_t outputCnt;
-	} __Request__io_async_method_scalarI_structureO_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t wake_port;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t referenceCnt;
-		io_user_reference_t reference[8];
-		uint32_t selector;
-		mach_msg_type_number_t inputCnt;
-		io_user_scalar_t input[16];
-		mach_msg_type_number_t inputStructCnt;
-		char inputStruct[4096];
-	} __Request__io_async_method_scalarI_structureI_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t wake_port;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t referenceCnt;
-		io_user_reference_t reference[8];
-		uint32_t selector;
-		mach_msg_type_number_t inputCnt;
-		char input[4096];
-		mach_msg_type_number_t outputCnt;
-	} __Request__io_async_method_structureI_structureO_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t wake_port;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t notification_typeOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t notification_typeCnt;
-		char notification_type[128];
-		mach_msg_type_number_t matchingOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t matchingCnt;
-		char matching[512];
-		mach_msg_type_number_t referenceCnt;
-		io_user_reference_t reference[8];
-	} __Request__io_service_add_notification_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t wake_port;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t type_of_interestOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t type_of_interestCnt;
-		char type_of_interest[128];
-		mach_msg_type_number_t referenceCnt;
-		io_user_reference_t reference[8];
-	} __Request__io_service_add_interest_notification_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		natural_t notify_ref;
-		natural_t response;
-	} __Request__io_service_acknowledge_notification_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		natural_t notification_type;
-	} __Request__io_connect_get_notification_semaphore_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t into_task;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		uint32_t memory_type;
-		vm_address_t address;
-	} __Request__io_connect_unmap_memory_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_msg_type_number_t planeOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t planeCnt;
-		char plane[128];
-	} __Request__io_registry_entry_get_location_in_plane_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_msg_type_number_t planeOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t planeCnt;
-		char plane[128];
-		mach_msg_type_number_t property_nameOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t property_nameCnt;
-		char property_name[128];
-		uint32_t options;
-	} __Request__io_registry_entry_get_property_recursively_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__io_service_get_state_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_ool_descriptor_t matching;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t matchingCnt;
-	} __Request__io_service_get_matching_services_ool_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_ool_descriptor_t matching;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t matchingCnt;
-	} __Request__io_service_match_property_table_ool_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_ool_descriptor_t matching;
-		mach_msg_port_descriptor_t wake_port;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t notification_typeOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t notification_typeCnt;
-		char notification_type[128];
-		mach_msg_type_number_t matchingCnt;
-		mach_msg_type_number_t referenceCnt;
-		io_user_reference_t reference[8];
-	} __Request__io_service_add_notification_ool_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_msg_type_number_t obj_nameOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t obj_nameCnt;
-		char obj_name[128];
-	} __Request__io_object_get_superclass_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_msg_type_number_t obj_nameOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t obj_nameCnt;
-		char obj_name[128];
-	} __Request__io_object_get_bundle_identifier_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t owningTask;
-		mach_msg_ool_descriptor_t properties;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		uint32_t connect_type;
-		NDR_record_t ndr;
-		mach_msg_type_number_t propertiesCnt;
-	} __Request__io_service_open_extended_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t into_task;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		uint32_t memory_type;
-		mach_vm_address_t address;
-		mach_vm_size_t size;
-		uint32_t flags;
-	} __Request__io_connect_map_memory_into_task_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t from_task;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		uint32_t memory_type;
-		mach_vm_address_t address;
-	} __Request__io_connect_unmap_memory_from_task_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		uint32_t selector;
-		mach_msg_type_number_t scalar_inputCnt;
-		uint64_t scalar_input[16];
-		mach_msg_type_number_t inband_inputCnt;
-		char inband_input[4096];
-		mach_vm_address_t ool_input;
-		mach_vm_size_t ool_input_size;
-		mach_msg_type_number_t inband_outputCnt;
-		mach_msg_type_number_t scalar_outputCnt;
-		mach_vm_address_t ool_output;
-		mach_vm_size_t ool_output_size;
-	} __Request__io_connect_method_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t wake_port;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t referenceCnt;
-		uint64_t reference[8];
-		uint32_t selector;
-		mach_msg_type_number_t scalar_inputCnt;
-		uint64_t scalar_input[16];
-		mach_msg_type_number_t inband_inputCnt;
-		char inband_input[4096];
-		mach_vm_address_t ool_input;
-		mach_vm_size_t ool_input_size;
-		mach_msg_type_number_t inband_outputCnt;
-		mach_msg_type_number_t scalar_outputCnt;
-		mach_vm_address_t ool_output;
-		mach_vm_size_t ool_output_size;
-	} __Request__io_connect_async_method_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__io_registry_entry_get_registry_entry_id_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		uint32_t selector;
-		mach_msg_type_number_t scalar_inputCnt;
-		uint64_t scalar_input[16];
-		mach_msg_type_number_t inband_inputCnt;
-		char inband_input[4096];
-		mach_vm_address_t ool_input;
-		mach_vm_size_t ool_input_size;
-		mach_msg_type_number_t inband_outputCnt;
-		mach_msg_type_number_t scalar_outputCnt;
-	} __Request__io_connect_method_var_output_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_msg_type_number_t matchingOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t matchingCnt;
-		char matching[512];
-	} __Request__io_service_get_matching_service_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_ool_descriptor_t matching;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t matchingCnt;
-	} __Request__io_service_get_matching_service_ool_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__io_service_get_authorization_id_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		uint64_t authorization_id;
-	} __Request__io_service_set_authorization_id_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__io_server_version_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-	} __Request__io_registry_entry_get_properties_bin_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_msg_type_number_t planeOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t planeCnt;
-		char plane[128];
-		mach_msg_type_number_t property_nameOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t property_nameCnt;
-		char property_name[128];
-		uint32_t options;
-	} __Request__io_registry_entry_get_property_bin_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_msg_type_number_t matchingCnt;
-		char matching[4096];
-	} __Request__io_service_get_matching_service_bin_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_msg_type_number_t matchingCnt;
-		char matching[4096];
-	} __Request__io_service_get_matching_services_bin_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_msg_type_number_t matchingCnt;
-		char matching[4096];
-	} __Request__io_service_match_property_table_bin_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t wake_port;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t notification_typeOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t notification_typeCnt;
-		char notification_type[128];
-		mach_msg_type_number_t matchingCnt;
-		char matching[4096];
-		mach_msg_type_number_t referenceCnt;
-		io_user_reference_t reference[8];
-	} __Request__io_service_add_notification_bin_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		mach_msg_type_number_t planeOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t planeCnt;
-		char plane[128];
-	} __Request__io_registry_entry_get_path_ool_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_ool_descriptor_t path_ool;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t pathOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t pathCnt;
-		char path[4096];
-		mach_msg_type_number_t path_oolCnt;
-	} __Request__io_registry_entry_from_path_ool_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-#endif /* !__Request__iokit_subsystem__defined */
-
-/* union of all requests */
-
-#ifndef __RequestUnion__iokit_subsystem__defined
-#define __RequestUnion__iokit_subsystem__defined
-union __RequestUnion__iokit_subsystem {
-	__Request__io_object_get_class_t Request_io_object_get_class;
-	__Request__io_object_conforms_to_t Request_io_object_conforms_to;
-	__Request__io_iterator_next_t Request_io_iterator_next;
-	__Request__io_iterator_reset_t Request_io_iterator_reset;
-	__Request__io_service_get_matching_services_t Request_io_service_get_matching_services;
-	__Request__io_registry_entry_get_property_t Request_io_registry_entry_get_property;
-	__Request__io_registry_create_iterator_t Request_io_registry_create_iterator;
-	__Request__io_registry_iterator_enter_entry_t Request_io_registry_iterator_enter_entry;
-	__Request__io_registry_iterator_exit_entry_t Request_io_registry_iterator_exit_entry;
-	__Request__io_registry_entry_from_path_t Request_io_registry_entry_from_path;
-	__Request__io_registry_entry_get_name_t Request_io_registry_entry_get_name;
-	__Request__io_registry_entry_get_properties_t Request_io_registry_entry_get_properties;
-	__Request__io_registry_entry_get_property_bytes_t Request_io_registry_entry_get_property_bytes;
-	__Request__io_registry_entry_get_child_iterator_t Request_io_registry_entry_get_child_iterator;
-	__Request__io_registry_entry_get_parent_iterator_t Request_io_registry_entry_get_parent_iterator;
-	__Request__io_service_close_t Request_io_service_close;
-	__Request__io_connect_get_service_t Request_io_connect_get_service;
-	__Request__io_connect_set_notification_port_t Request_io_connect_set_notification_port;
-	__Request__io_connect_map_memory_t Request_io_connect_map_memory;
-	__Request__io_connect_add_client_t Request_io_connect_add_client;
-	__Request__io_connect_set_properties_t Request_io_connect_set_properties;
-	__Request__io_connect_method_scalarI_scalarO_t Request_io_connect_method_scalarI_scalarO;
-	__Request__io_connect_method_scalarI_structureO_t Request_io_connect_method_scalarI_structureO;
-	__Request__io_connect_method_scalarI_structureI_t Request_io_connect_method_scalarI_structureI;
-	__Request__io_connect_method_structureI_structureO_t Request_io_connect_method_structureI_structureO;
-	__Request__io_registry_entry_get_path_t Request_io_registry_entry_get_path;
-	__Request__io_registry_get_root_entry_t Request_io_registry_get_root_entry;
-	__Request__io_registry_entry_set_properties_t Request_io_registry_entry_set_properties;
-	__Request__io_registry_entry_in_plane_t Request_io_registry_entry_in_plane;
-	__Request__io_object_get_retain_count_t Request_io_object_get_retain_count;
-	__Request__io_service_get_busy_state_t Request_io_service_get_busy_state;
-	__Request__io_service_wait_quiet_t Request_io_service_wait_quiet;
-	__Request__io_registry_entry_create_iterator_t Request_io_registry_entry_create_iterator;
-	__Request__io_iterator_is_valid_t Request_io_iterator_is_valid;
-	__Request__io_catalog_send_data_t Request_io_catalog_send_data;
-	__Request__io_catalog_terminate_t Request_io_catalog_terminate;
-	__Request__io_catalog_get_data_t Request_io_catalog_get_data;
-	__Request__io_catalog_get_gen_count_t Request_io_catalog_get_gen_count;
-	__Request__io_catalog_module_loaded_t Request_io_catalog_module_loaded;
-	__Request__io_catalog_reset_t Request_io_catalog_reset;
-	__Request__io_service_request_probe_t Request_io_service_request_probe;
-	__Request__io_registry_entry_get_name_in_plane_t Request_io_registry_entry_get_name_in_plane;
-	__Request__io_service_match_property_table_t Request_io_service_match_property_table;
-	__Request__io_async_method_scalarI_scalarO_t Request_io_async_method_scalarI_scalarO;
-	__Request__io_async_method_scalarI_structureO_t Request_io_async_method_scalarI_structureO;
-	__Request__io_async_method_scalarI_structureI_t Request_io_async_method_scalarI_structureI;
-	__Request__io_async_method_structureI_structureO_t Request_io_async_method_structureI_structureO;
-	__Request__io_service_add_notification_t Request_io_service_add_notification;
-	__Request__io_service_add_interest_notification_t Request_io_service_add_interest_notification;
-	__Request__io_service_acknowledge_notification_t Request_io_service_acknowledge_notification;
-	__Request__io_connect_get_notification_semaphore_t Request_io_connect_get_notification_semaphore;
-	__Request__io_connect_unmap_memory_t Request_io_connect_unmap_memory;
-	__Request__io_registry_entry_get_location_in_plane_t Request_io_registry_entry_get_location_in_plane;
-	__Request__io_registry_entry_get_property_recursively_t Request_io_registry_entry_get_property_recursively;
-	__Request__io_service_get_state_t Request_io_service_get_state;
-	__Request__io_service_get_matching_services_ool_t Request_io_service_get_matching_services_ool;
-	__Request__io_service_match_property_table_ool_t Request_io_service_match_property_table_ool;
-	__Request__io_service_add_notification_ool_t Request_io_service_add_notification_ool;
-	__Request__io_object_get_superclass_t Request_io_object_get_superclass;
-	__Request__io_object_get_bundle_identifier_t Request_io_object_get_bundle_identifier;
-	__Request__io_service_open_extended_t Request_io_service_open_extended;
-	__Request__io_connect_map_memory_into_task_t Request_io_connect_map_memory_into_task;
-	__Request__io_connect_unmap_memory_from_task_t Request_io_connect_unmap_memory_from_task;
-	__Request__io_connect_method_t Request_io_connect_method;
-	__Request__io_connect_async_method_t Request_io_connect_async_method;
-	__Request__io_registry_entry_get_registry_entry_id_t Request_io_registry_entry_get_registry_entry_id;
-	__Request__io_connect_method_var_output_t Request_io_connect_method_var_output;
-	__Request__io_service_get_matching_service_t Request_io_service_get_matching_service;
-	__Request__io_service_get_matching_service_ool_t Request_io_service_get_matching_service_ool;
-	__Request__io_service_get_authorization_id_t Request_io_service_get_authorization_id;
-	__Request__io_service_set_authorization_id_t Request_io_service_set_authorization_id;
-	__Request__io_server_version_t Request_io_server_version;
-	__Request__io_registry_entry_get_properties_bin_t Request_io_registry_entry_get_properties_bin;
-	__Request__io_registry_entry_get_property_bin_t Request_io_registry_entry_get_property_bin;
-	__Request__io_service_get_matching_service_bin_t Request_io_service_get_matching_service_bin;
-	__Request__io_service_get_matching_services_bin_t Request_io_service_get_matching_services_bin;
-	__Request__io_service_match_property_table_bin_t Request_io_service_match_property_table_bin;
-	__Request__io_service_add_notification_bin_t Request_io_service_add_notification_bin;
-	__Request__io_registry_entry_get_path_ool_t Request_io_registry_entry_get_path_ool;
-	__Request__io_registry_entry_from_path_ool_t Request_io_registry_entry_from_path_ool;
-};
-#endif /* !__RequestUnion__iokit_subsystem__defined */
-/* typedefs for all replies */
-
-#ifndef __Reply__iokit_subsystem__defined
-#define __Reply__iokit_subsystem__defined
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		mach_msg_type_number_t classNameOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t classNameCnt;
-		char className[128];
-	} __Reply__io_object_get_class_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		boolean_t conforms;
-	} __Reply__io_object_conforms_to_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t object;
-		/* end of the kernel processed data */
-	} __Reply__io_iterator_next_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__io_iterator_reset_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t existing;
-		/* end of the kernel processed data */
-	} __Reply__io_service_get_matching_services_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_ool_descriptor_t properties;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t propertiesCnt;
-	} __Reply__io_registry_entry_get_property_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t iterator;
-		/* end of the kernel processed data */
-	} __Reply__io_registry_create_iterator_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__io_registry_iterator_enter_entry_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__io_registry_iterator_exit_entry_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t registry_entry;
-		/* end of the kernel processed data */
-	} __Reply__io_registry_entry_from_path_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		mach_msg_type_number_t nameOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t nameCnt;
-		char name[128];
-	} __Reply__io_registry_entry_get_name_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_ool_descriptor_t properties;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t propertiesCnt;
-	} __Reply__io_registry_entry_get_properties_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		mach_msg_type_number_t dataCnt;
-		char data[4096];
-	} __Reply__io_registry_entry_get_property_bytes_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t iterator;
-		/* end of the kernel processed data */
-	} __Reply__io_registry_entry_get_child_iterator_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t iterator;
-		/* end of the kernel processed data */
-	} __Reply__io_registry_entry_get_parent_iterator_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__io_service_close_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t service;
-		/* end of the kernel processed data */
-	} __Reply__io_connect_get_service_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__io_connect_set_notification_port_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		vm_address_t address;
-		vm_size_t size;
-	} __Reply__io_connect_map_memory_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__io_connect_add_client_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		kern_return_t result;
-	} __Reply__io_connect_set_properties_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		mach_msg_type_number_t outputCnt;
-		io_user_scalar_t output[16];
-	} __Reply__io_connect_method_scalarI_scalarO_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		mach_msg_type_number_t outputCnt;
-		char output[4096];
-	} __Reply__io_connect_method_scalarI_structureO_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__io_connect_method_scalarI_structureI_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		mach_msg_type_number_t outputCnt;
-		char output[4096];
-	} __Reply__io_connect_method_structureI_structureO_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		mach_msg_type_number_t pathOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t pathCnt;
-		char path[512];
-	} __Reply__io_registry_entry_get_path_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t root;
-		/* end of the kernel processed data */
-	} __Reply__io_registry_get_root_entry_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		kern_return_t result;
-	} __Reply__io_registry_entry_set_properties_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		boolean_t inPlane;
-	} __Reply__io_registry_entry_in_plane_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		uint32_t retainCount;
-	} __Reply__io_object_get_retain_count_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		uint32_t busyState;
-	} __Reply__io_service_get_busy_state_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__io_service_wait_quiet_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t iterator;
-		/* end of the kernel processed data */
-	} __Reply__io_registry_entry_create_iterator_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		boolean_t is_valid;
-	} __Reply__io_iterator_is_valid_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		kern_return_t result;
-	} __Reply__io_catalog_send_data_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__io_catalog_terminate_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_ool_descriptor_t outData;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t outDataCnt;
-	} __Reply__io_catalog_get_data_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		uint32_t genCount;
-	} __Reply__io_catalog_get_gen_count_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__io_catalog_module_loaded_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__io_catalog_reset_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__io_service_request_probe_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		mach_msg_type_number_t nameOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t nameCnt;
-		char name[128];
-	} __Reply__io_registry_entry_get_name_in_plane_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		boolean_t matches;
-	} __Reply__io_service_match_property_table_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		mach_msg_type_number_t outputCnt;
-		io_user_scalar_t output[16];
-	} __Reply__io_async_method_scalarI_scalarO_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		mach_msg_type_number_t outputCnt;
-		char output[4096];
-	} __Reply__io_async_method_scalarI_structureO_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__io_async_method_scalarI_structureI_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		mach_msg_type_number_t outputCnt;
-		char output[4096];
-	} __Reply__io_async_method_structureI_structureO_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t notification;
-		/* end of the kernel processed data */
-	} __Reply__io_service_add_notification_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t notification;
-		/* end of the kernel processed data */
-	} __Reply__io_service_add_interest_notification_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__io_service_acknowledge_notification_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t semaphore;
-		/* end of the kernel processed data */
-	} __Reply__io_connect_get_notification_semaphore_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__io_connect_unmap_memory_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		mach_msg_type_number_t locationOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t locationCnt;
-		char location[128];
-	} __Reply__io_registry_entry_get_location_in_plane_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_ool_descriptor_t properties;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t propertiesCnt;
-	} __Reply__io_registry_entry_get_property_recursively_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		uint64_t state;
-		uint32_t busy_state;
-		uint64_t accumulated_busy_time;
-	} __Reply__io_service_get_state_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t existing;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		kern_return_t result;
-	} __Reply__io_service_get_matching_services_ool_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		kern_return_t result;
-		boolean_t matches;
-	} __Reply__io_service_match_property_table_ool_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t notification;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		kern_return_t result;
-	} __Reply__io_service_add_notification_ool_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		mach_msg_type_number_t class_nameOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t class_nameCnt;
-		char class_name[128];
-	} __Reply__io_object_get_superclass_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		mach_msg_type_number_t class_nameOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t class_nameCnt;
-		char class_name[128];
-	} __Reply__io_object_get_bundle_identifier_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t connection;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		kern_return_t result;
-	} __Reply__io_service_open_extended_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		mach_vm_address_t address;
-		mach_vm_size_t size;
-	} __Reply__io_connect_map_memory_into_task_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__io_connect_unmap_memory_from_task_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		mach_msg_type_number_t inband_outputCnt;
-		char inband_output[4096];
-		mach_msg_type_number_t scalar_outputCnt;
-		uint64_t scalar_output[16];
-		mach_vm_size_t ool_output_size;
-	} __Reply__io_connect_method_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		mach_msg_type_number_t inband_outputCnt;
-		char inband_output[4096];
-		mach_msg_type_number_t scalar_outputCnt;
-		uint64_t scalar_output[16];
-		mach_vm_size_t ool_output_size;
-	} __Reply__io_connect_async_method_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		uint64_t entry_id;
-	} __Reply__io_registry_entry_get_registry_entry_id_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_ool_descriptor_t var_output;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t inband_outputCnt;
-		char inband_output[4096];
-		mach_msg_type_number_t scalar_outputCnt;
-		uint64_t scalar_output[16];
-		mach_msg_type_number_t var_outputCnt;
-	} __Reply__io_connect_method_var_output_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t service;
-		/* end of the kernel processed data */
-	} __Reply__io_service_get_matching_service_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t service;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		kern_return_t result;
-	} __Reply__io_service_get_matching_service_ool_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		uint64_t authorization_id;
-	} __Reply__io_service_get_authorization_id_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-	} __Reply__io_service_set_authorization_id_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		uint64_t version;
-	} __Reply__io_server_version_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_ool_descriptor_t properties;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t propertiesCnt;
-	} __Reply__io_registry_entry_get_properties_bin_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_ool_descriptor_t properties;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t propertiesCnt;
-	} __Reply__io_registry_entry_get_property_bin_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t service;
-		/* end of the kernel processed data */
-	} __Reply__io_service_get_matching_service_bin_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t existing;
-		/* end of the kernel processed data */
-	} __Reply__io_service_get_matching_services_bin_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		NDR_record_t NDR;
-		kern_return_t RetCode;
-		boolean_t matches;
-	} __Reply__io_service_match_property_table_bin_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t notification;
-		/* end of the kernel processed data */
-	} __Reply__io_service_add_notification_bin_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_ool_descriptor_t path_ool;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		mach_msg_type_number_t pathOffset; /* MiG doesn't use it */
-		mach_msg_type_number_t pathCnt;
-		char path[4096];
-		mach_msg_type_number_t path_oolCnt;
-	} __Reply__io_registry_entry_get_path_ool_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-
-#ifdef  __MigPackStructs
-#pragma pack(4)
-#endif
-	typedef struct {
-		mach_msg_header_t Head;
-		/* start of the kernel processed data */
-		mach_msg_body_t msgh_body;
-		mach_msg_port_descriptor_t registry_entry;
-		/* end of the kernel processed data */
-		NDR_record_t NDR;
-		kern_return_t result;
-	} __Reply__io_registry_entry_from_path_ool_t __attribute__((unused));
-#ifdef  __MigPackStructs
-#pragma pack()
-#endif
-#endif /* !__Reply__iokit_subsystem__defined */
-
-/* union of all replies */
-
-#ifndef __ReplyUnion__iokit_subsystem__defined
-#define __ReplyUnion__iokit_subsystem__defined
-union __ReplyUnion__iokit_subsystem {
-	__Reply__io_object_get_class_t Reply_io_object_get_class;
-	__Reply__io_object_conforms_to_t Reply_io_object_conforms_to;
-	__Reply__io_iterator_next_t Reply_io_iterator_next;
-	__Reply__io_iterator_reset_t Reply_io_iterator_reset;
-	__Reply__io_service_get_matching_services_t Reply_io_service_get_matching_services;
-	__Reply__io_registry_entry_get_property_t Reply_io_registry_entry_get_property;
-	__Reply__io_registry_create_iterator_t Reply_io_registry_create_iterator;
-	__Reply__io_registry_iterator_enter_entry_t Reply_io_registry_iterator_enter_entry;
-	__Reply__io_registry_iterator_exit_entry_t Reply_io_registry_iterator_exit_entry;
-	__Reply__io_registry_entry_from_path_t Reply_io_registry_entry_from_path;
-	__Reply__io_registry_entry_get_name_t Reply_io_registry_entry_get_name;
-	__Reply__io_registry_entry_get_properties_t Reply_io_registry_entry_get_properties;
-	__Reply__io_registry_entry_get_property_bytes_t Reply_io_registry_entry_get_property_bytes;
-	__Reply__io_registry_entry_get_child_iterator_t Reply_io_registry_entry_get_child_iterator;
-	__Reply__io_registry_entry_get_parent_iterator_t Reply_io_registry_entry_get_parent_iterator;
-	__Reply__io_service_close_t Reply_io_service_close;
-	__Reply__io_connect_get_service_t Reply_io_connect_get_service;
-	__Reply__io_connect_set_notification_port_t Reply_io_connect_set_notification_port;
-	__Reply__io_connect_map_memory_t Reply_io_connect_map_memory;
-	__Reply__io_connect_add_client_t Reply_io_connect_add_client;
-	__Reply__io_connect_set_properties_t Reply_io_connect_set_properties;
-	__Reply__io_connect_method_scalarI_scalarO_t Reply_io_connect_method_scalarI_scalarO;
-	__Reply__io_connect_method_scalarI_structureO_t Reply_io_connect_method_scalarI_structureO;
-	__Reply__io_connect_method_scalarI_structureI_t Reply_io_connect_method_scalarI_structureI;
-	__Reply__io_connect_method_structureI_structureO_t Reply_io_connect_method_structureI_structureO;
-	__Reply__io_registry_entry_get_path_t Reply_io_registry_entry_get_path;
-	__Reply__io_registry_get_root_entry_t Reply_io_registry_get_root_entry;
-	__Reply__io_registry_entry_set_properties_t Reply_io_registry_entry_set_properties;
-	__Reply__io_registry_entry_in_plane_t Reply_io_registry_entry_in_plane;
-	__Reply__io_object_get_retain_count_t Reply_io_object_get_retain_count;
-	__Reply__io_service_get_busy_state_t Reply_io_service_get_busy_state;
-	__Reply__io_service_wait_quiet_t Reply_io_service_wait_quiet;
-	__Reply__io_registry_entry_create_iterator_t Reply_io_registry_entry_create_iterator;
-	__Reply__io_iterator_is_valid_t Reply_io_iterator_is_valid;
-	__Reply__io_catalog_send_data_t Reply_io_catalog_send_data;
-	__Reply__io_catalog_terminate_t Reply_io_catalog_terminate;
-	__Reply__io_catalog_get_data_t Reply_io_catalog_get_data;
-	__Reply__io_catalog_get_gen_count_t Reply_io_catalog_get_gen_count;
-	__Reply__io_catalog_module_loaded_t Reply_io_catalog_module_loaded;
-	__Reply__io_catalog_reset_t Reply_io_catalog_reset;
-	__Reply__io_service_request_probe_t Reply_io_service_request_probe;
-	__Reply__io_registry_entry_get_name_in_plane_t Reply_io_registry_entry_get_name_in_plane;
-	__Reply__io_service_match_property_table_t Reply_io_service_match_property_table;
-	__Reply__io_async_method_scalarI_scalarO_t Reply_io_async_method_scalarI_scalarO;
-	__Reply__io_async_method_scalarI_structureO_t Reply_io_async_method_scalarI_structureO;
-	__Reply__io_async_method_scalarI_structureI_t Reply_io_async_method_scalarI_structureI;
-	__Reply__io_async_method_structureI_structureO_t Reply_io_async_method_structureI_structureO;
-	__Reply__io_service_add_notification_t Reply_io_service_add_notification;
-	__Reply__io_service_add_interest_notification_t Reply_io_service_add_interest_notification;
-	__Reply__io_service_acknowledge_notification_t Reply_io_service_acknowledge_notification;
-	__Reply__io_connect_get_notification_semaphore_t Reply_io_connect_get_notification_semaphore;
-	__Reply__io_connect_unmap_memory_t Reply_io_connect_unmap_memory;
-	__Reply__io_registry_entry_get_location_in_plane_t Reply_io_registry_entry_get_location_in_plane;
-	__Reply__io_registry_entry_get_property_recursively_t Reply_io_registry_entry_get_property_recursively;
-	__Reply__io_service_get_state_t Reply_io_service_get_state;
-	__Reply__io_service_get_matching_services_ool_t Reply_io_service_get_matching_services_ool;
-	__Reply__io_service_match_property_table_ool_t Reply_io_service_match_property_table_ool;
-	__Reply__io_service_add_notification_ool_t Reply_io_service_add_notification_ool;
-	__Reply__io_object_get_superclass_t Reply_io_object_get_superclass;
-	__Reply__io_object_get_bundle_identifier_t Reply_io_object_get_bundle_identifier;
-	__Reply__io_service_open_extended_t Reply_io_service_open_extended;
-	__Reply__io_connect_map_memory_into_task_t Reply_io_connect_map_memory_into_task;
-	__Reply__io_connect_unmap_memory_from_task_t Reply_io_connect_unmap_memory_from_task;
-	__Reply__io_connect_method_t Reply_io_connect_method;
-	__Reply__io_connect_async_method_t Reply_io_connect_async_method;
-	__Reply__io_registry_entry_get_registry_entry_id_t Reply_io_registry_entry_get_registry_entry_id;
-	__Reply__io_connect_method_var_output_t Reply_io_connect_method_var_output;
-	__Reply__io_service_get_matching_service_t Reply_io_service_get_matching_service;
-	__Reply__io_service_get_matching_service_ool_t Reply_io_service_get_matching_service_ool;
-	__Reply__io_service_get_authorization_id_t Reply_io_service_get_authorization_id;
-	__Reply__io_service_set_authorization_id_t Reply_io_service_set_authorization_id;
-	__Reply__io_server_version_t Reply_io_server_version;
-	__Reply__io_registry_entry_get_properties_bin_t Reply_io_registry_entry_get_properties_bin;
-	__Reply__io_registry_entry_get_property_bin_t Reply_io_registry_entry_get_property_bin;
-	__Reply__io_service_get_matching_service_bin_t Reply_io_service_get_matching_service_bin;
-	__Reply__io_service_get_matching_services_bin_t Reply_io_service_get_matching_services_bin;
-	__Reply__io_service_match_property_table_bin_t Reply_io_service_match_property_table_bin;
-	__Reply__io_service_add_notification_bin_t Reply_io_service_add_notification_bin;
-	__Reply__io_registry_entry_get_path_ool_t Reply_io_registry_entry_get_path_ool;
-	__Reply__io_registry_entry_from_path_ool_t Reply_io_registry_entry_from_path_ool;
-};
-#endif /* !__RequestUnion__iokit_subsystem__defined */
-
-#ifndef subsystem_to_name_map_iokit
-#define subsystem_to_name_map_iokit \
-    { "io_object_get_class", 2800 },\
-    { "io_object_conforms_to", 2801 },\
-    { "io_iterator_next", 2802 },\
-    { "io_iterator_reset", 2803 },\
-    { "io_service_get_matching_services", 2804 },\
-    { "io_registry_entry_get_property", 2805 },\
-    { "io_registry_create_iterator", 2806 },\
-    { "io_registry_iterator_enter_entry", 2807 },\
-    { "io_registry_iterator_exit_entry", 2808 },\
-    { "io_registry_entry_from_path", 2809 },\
-    { "io_registry_entry_get_name", 2810 },\
-    { "io_registry_entry_get_properties", 2811 },\
-    { "io_registry_entry_get_property_bytes", 2812 },\
-    { "io_registry_entry_get_child_iterator", 2813 },\
-    { "io_registry_entry_get_parent_iterator", 2814 },\
-    { "io_service_close", 2816 },\
-    { "io_connect_get_service", 2817 },\
-    { "io_connect_set_notification_port", 2818 },\
-    { "io_connect_map_memory", 2819 },\
-    { "io_connect_add_client", 2820 },\
-    { "io_connect_set_properties", 2821 },\
-    { "io_connect_method_scalarI_scalarO", 2822 },\
-    { "io_connect_method_scalarI_structureO", 2823 },\
-    { "io_connect_method_scalarI_structureI", 2824 },\
-    { "io_connect_method_structureI_structureO", 2825 },\
-    { "io_registry_entry_get_path", 2826 },\
-    { "io_registry_get_root_entry", 2827 },\
-    { "io_registry_entry_set_properties", 2828 },\
-    { "io_registry_entry_in_plane", 2829 },\
-    { "io_object_get_retain_count", 2830 },\
-    { "io_service_get_busy_state", 2831 },\
-    { "io_service_wait_quiet", 2832 },\
-    { "io_registry_entry_create_iterator", 2833 },\
-    { "io_iterator_is_valid", 2834 },\
-    { "io_catalog_send_data", 2836 },\
-    { "io_catalog_terminate", 2837 },\
-    { "io_catalog_get_data", 2838 },\
-    { "io_catalog_get_gen_count", 2839 },\
-    { "io_catalog_module_loaded", 2840 },\
-    { "io_catalog_reset", 2841 },\
-    { "io_service_request_probe", 2842 },\
-    { "io_registry_entry_get_name_in_plane", 2843 },\
-    { "io_service_match_property_table", 2844 },\
-    { "io_async_method_scalarI_scalarO", 2845 },\
-    { "io_async_method_scalarI_structureO", 2846 },\
-    { "io_async_method_scalarI_structureI", 2847 },\
-    { "io_async_method_structureI_structureO", 2848 },\
-    { "io_service_add_notification", 2849 },\
-    { "io_service_add_interest_notification", 2850 },\
-    { "io_service_acknowledge_notification", 2851 },\
-    { "io_connect_get_notification_semaphore", 2852 },\
-    { "io_connect_unmap_memory", 2853 },\
-    { "io_registry_entry_get_location_in_plane", 2854 },\
-    { "io_registry_entry_get_property_recursively", 2855 },\
-    { "io_service_get_state", 2856 },\
-    { "io_service_get_matching_services_ool", 2857 },\
-    { "io_service_match_property_table_ool", 2858 },\
-    { "io_service_add_notification_ool", 2859 },\
-    { "io_object_get_superclass", 2860 },\
-    { "io_object_get_bundle_identifier", 2861 },\
-    { "io_service_open_extended", 2862 },\
-    { "io_connect_map_memory_into_task", 2863 },\
-    { "io_connect_unmap_memory_from_task", 2864 },\
-    { "io_connect_method", 2865 },\
-    { "io_connect_async_method", 2866 },\
-    { "io_registry_entry_get_registry_entry_id", 2871 },\
-    { "io_connect_method_var_output", 2872 },\
-    { "io_service_get_matching_service", 2873 },\
-    { "io_service_get_matching_service_ool", 2874 },\
-    { "io_service_get_authorization_id", 2875 },\
-    { "io_service_set_authorization_id", 2876 },\
-    { "io_server_version", 2877 },\
-    { "io_registry_entry_get_properties_bin", 2878 },\
-    { "io_registry_entry_get_property_bin", 2879 },\
-    { "io_service_get_matching_service_bin", 2880 },\
-    { "io_service_get_matching_services_bin", 2881 },\
-    { "io_service_match_property_table_bin", 2882 },\
-    { "io_service_add_notification_bin", 2883 },\
-    { "io_registry_entry_get_path_ool", 2885 },\
-    { "io_registry_entry_from_path_ool", 2886 }
-#endif
-
-#ifdef __AfterMigUserHeader
-__AfterMigUserHeader
-#endif /* __AfterMigUserHeader */
-
-#endif	 /* _iokit_user_ */
-
-#endif /* !__LP64__ */
diff --git a/external/ios-headers/IOKit/ps/IOPSKeys.h b/external/ios-headers/IOKit/ps/IOPSKeys.h
deleted file mode 100755
index 571951c..0000000
--- a/external/ios-headers/IOKit/ps/IOPSKeys.h
+++ /dev/null
@@ -1,773 +0,0 @@
-/*
- * Copyright (c) 2002-2010 Apple Computer, Inc. All rights reserved.
- *
- * @APPLE_LICENSE_HEADER_START@
- * 
- * This file contains Original Code and/or Modifications of Original Code
- * as defined in and that are subject to the Apple Public Source License
- * Version 2.0 (the 'License'). You may not use this file except in
- * compliance with the License. Please obtain a copy of the License at
- * http://www.opensource.apple.com/apsl/ and read it before using this
- * file.
- * 
- * The Original Code and all software distributed under the License are
- * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
- * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
- * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
- * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
- * Please see the License for the specific language governing rights and
- * limitations under the License.
- * 
- * @APPLE_LICENSE_HEADER_END@
- */
-
-/*!
- *  @header     IOPSKeys.h
- *  
- *  @discussion
- *              IOPSKeys.h defines C strings for use accessing power source data in IOPowerSource
- *              CFDictionaries, as returned by <code>@link //apple_ref/c/func/IOPSGetPowerSourceDescription IOPSGetPowerSourceDescription @/link</code>
- *              Note that all of these C strings must be converted to CFStrings before use. You can wrap
- *              them with the CFSTR() macro, or create a CFStringRef (that you must later CFRelease()) using CFStringCreateWithCString().
- */  
-
-#ifndef _IOPSKEYS_H_
-#define _IOPSKEYS_H_
-
-/*!
- * @group       IOPSPowerAdapter Keys
- * 
- * @discussion
- *              Use these kIOPSPowerAdapter keys to decipher the dictionary returned
- *              by @link //apple_ref/c/func/IOPSCopyExternalPowerAdapterDetails IOPSCopyExternalPowerAdapterDetails @/link
- */
- 
-/*!
- * @define      kIOPSPowerAdapterIDKey
- *
- * @abstract    This key refers to the attached external AC power adapter's ID.
- *              The value associated with this key is a CFNumberRef kCFNumberIntType integer.
- *
- * @discussion  This key may be present in the dictionary returned from 
- *              @link //apple_ref/c/func/IOPSCopyExternalPowerAdapterDetails IOPSCopyExternalPowerAdapterDetails @/link
- *              This key might not be defined in the adapter details dictionary.
- */
-#define kIOPSPowerAdapterIDKey          "AdapterID"
-
-/*!
- * @define      kIOPSPowerAdapterWattsKey
- *
- * @abstract    This key refers to the wattage of the external AC power adapter attached to a portable.
- *              The value associated with this key is a CFNumberRef kCFNumberIntType integer value, in units of watts.
- *
- * @discussion  This key may be present in the dictionary returned from 
- *              @link //apple_ref/c/func/IOPSCopyExternalPowerAdapterDetails IOPSCopyExternalPowerAdapterDetails @/link
- *              This key might not be defined in the adapter details dictionary.
- */
-#define kIOPSPowerAdapterWattsKey       "Watts"
-
-/*!
- * @define      kIOPSPowerAdapterRevisionKey
- *
- * @abstract    The power adapter's revision.
- *              The value associated with this key is a CFNumberRef kCFNumberIntType integer value
- *
- * @discussion  This key may be present in the dictionary returned from 
- *              @link //apple_ref/c/func/IOPSCopyExternalPowerAdapterDetails IOPSCopyExternalPowerAdapterDetails @/link
- *              This key might not be defined in the adapter details dictionary.
- */
-#define kIOPSPowerAdapterRevisionKey   "AdapterRevision"
-
-/*!
- * @define      kIOPSPowerAdapterSerialNumberKey
- *
- * @abstract    The power adapter's serial number.
- *              The value associated with this key is a CFNumberRef kCFNumberIntType integer value
- *
- * @discussion  This key may be present in the dictionary returned from 
- *              @link //apple_ref/c/func/IOPSCopyExternalPowerAdapterDetails IOPSCopyExternalPowerAdapterDetails @/link
- *              This key might not be defined in the adapter details dictionary.
- */ 
-#define kIOPSPowerAdapterSerialNumberKey    "SerialNumber"
-
-/*!
- * @define      kIOPSPowerAdapterFamilyKey
- *
- * @abstract    The power adapter's family code.
- *              The value associated with this key is a CFNumberRef kCFNumberIntType integer value
- *
- * @discussion  This key may be present in the dictionary returned from 
- *              @link //apple_ref/c/func/IOPSCopyExternalPowerAdapterDetails IOPSCopyExternalPowerAdapterDetails @/link
- *              This key might not be defined in the adapter details dictionary.
- */
-#define kIOPSPowerAdapterFamilyKey          "FamilyCode"
-
-
-
-
-/*! 
- * @group       Internal Keys
- * 
- */
-
-/*!
- * @define      kIOPSUPSManagementClaimed
- * 
- * @abstract    Claims UPS management for a third-party driver.
- * @discussion  kIOPSUPSManagementClaimed is obsolete. Do not use. 
- * @deprecated  Unsupported in OS X 10.5 and later.
- */
-#define kIOPSUPSManagementClaimed       "/IOKit/UPSPowerManagementClaimed"
-
-/*!
- * @define      kIOPSLowWarnLevelKey 
- *
- * @abstract    Key for the "Warning" UPS low power trigger-level. Default is 50%.
-*/
-#define kIOPSLowWarnLevelKey           "Low Warn Level"
-
-/*!
- * @define      kIOPSDeadWarnLevelKey 
- *
- * @abstract    Key for the "Shutdown System" low power trigger-level. Default is 20%.
- */
-#define kIOPSDeadWarnLevelKey          "Shutdown Level"
-
-
-/*!
- * @define      kIOPSDynamicStorePath
- *
- * @abstract    This is only used for internal bookkeeping, and should be ignored.
- */
-#define kIOPSDynamicStorePath          "/IOKit/PowerSources"
-
-
-/*!
- * @group       Power Source Commands (UPS)
- *
- */ 
-
-/*!
- * @define      kIOPSCommandDelayedRemovePowerKey
- *
- * @abstract    Command to give a UPS when it should remove power from its AC plugs in a specified amount of time
- * @discussion
- *              <ul>
- *                  <li>The matching argument should be a CFNumber of kCFNumberIntType specifying when the UPS should
- *                  <li>remove power from its AC power ports.
- *              </ul>
- */
-#define kIOPSCommandDelayedRemovePowerKey     "Delayed Remove Power"
-
-/*!
- * @define      kIOPSCommandEnableAudibleAlarmKey
- *
- * @abstract    Command to give a UPS when it should either enable or disable the audible alarm.
- * @discussion
- *              <ul>
- *                  <li>The matching argument should be a CFBooleanRef where kCFBooleanTrue enables the alarm and 
- *                  <li>kCFBooleanFalse diables the alarm
- *              </ul>
- */
-
-#define kIOPSCommandEnableAudibleAlarmKey     "Enable Audible Alarm"
-
-/*!
- * @define      kIOPSCommandStartupDelayKey
- *
- * @abstract Tell UPS how long it should wait for 
- * @discussion
- *              <ul>
- *                  <li>The matching argument should be a CFNumber of kCFNumberIntType specifying when the UPS should
- *                  <li>remove power from its AC power ports.
- *              </ul>
- */
-#define kIOPSCommandStartupDelayKey           "Startup Delay"
-
-
-/*!
- * @group       Power Source data keys
- *
- */
-
-/*              These keys specify the values in a dictionary of PowerSource details.
- *              Use these keys in conjunction with the dictionary returned by 
- *              <code>@link //apple_ref/c/func/IOPSGetPowerSourceDescription IOPSGetPowerSourceDescription @/link</code>
- * 
- *              Clients of <code>@link //apple_ref/c/func/IOPSCreatePowerSource IOPSCreatePowerSource @/link</code>
- *              must specify these keys in their power source dictionaries.
- *              Each key is labelled with one of these labels that indicate what information is REQUIRED. to
- *              represent a power source in OS X.
- *
- *              <ul>
- *                  <li> For power source creators: Providing this key is REQUIRED.
- *                  <li> For power source creators: Providing this key is RECOMMENDED.
- *                  <li> For power source creators: Providing this key is OPTIONAL.
- *                  <li> This key is DEPRECATED, do not provide it. 
- *              </ul>
- *
- */ 
-
-/*!
- * @define      kIOPSPowerSourceIDKey
- *
- * @abstract    CFNumber key uniquely identifying a UPS attached to the system.
- *
- * @discussion
- *              <ul>
- *              <li> Apple UPS power sources will publish this key.
- *              <li> Callers should not set this key; OS X power management will publish this key for UPS's.
- *              <li> Type CFNumber, kCFNumberIntType, uniquely identifying an attached UPS.
- *              </ul>
- */
- 
-#define kIOPSPowerSourceIDKey          "Power Source ID"
-
- 
-/*!
- * @define      kIOPSPowerSourceStateKey
- *
- * @abstract    CFDictionary key for the current source of power.
- *
- * @discussion
- *              <ul>
- *              <li> Apple-defined power sources will publish this key.
- *              <li> For power source creators: Providing this key is REQUIRED.
- *              <li> <code>@link kIOPSBatteryPowerValue @/link</code> indicates power source is drawing internal power; 
- *                   <code>@link kIOPSACPowerValue@/link</code> indicates power source is connected to an external power source.
- *              <li> Type CFString, value is <code>@link kIOPSACPowerValue@/link</code>, <code>@link kIOPSBatteryPowerValue@/link</code>, or <code>@link kIOPSOffLineValue@/link</code>.
- *              </ul>
- */
-
-#define kIOPSPowerSourceStateKey       "Power Source State"
-
-/*!
- * @define      kIOPSCurrentCapacityKey
- * @abstract    CFDictionary key for the current power source's capacity.
- * 
- * @discussion
- *              <ul>
- *              <li> Apple-defined power sources will publish this key in units of percent.
- *              <li> The power source's software may specify the units for this key. 
- *                   The units must be consistent for all capacities reported by this power source.
- *                   The power source will usually define this number in units of percent, or mAh.
- *              <li> Clients may derive a percentage of power source battery remaining by dividing "Current Capacity" by "Max Capacity"
- *              <li> For power source creators: Providing this key is REQUIRED.
- *              <li> Type CFNumber kCFNumberIntType (signed integer)
- *              </ul>
- */
-
-#define kIOPSCurrentCapacityKey        "Current Capacity"
-
-/*!
- * @define      kIOPSMaxCapacityKey
- * @abstract    CFDictionary key for the current power source's maximum or "Full Charge Capacity"
- * @discussion
- *              <ul>
- *              <li> Apple-defined power sources will publish this key in units of percent. The value is usually 100%.
- *              <li> The power source's software may specify the units for this key. The units must be consistent for all capacities reported by this power source.
- *              <li> For power source creators: Providing this key is REQUIRED.
- *              <li> Type CFNumber kCFNumberIntType (signed integer)
- *              </ul>
- */
-
-#define kIOPSMaxCapacityKey            "Max Capacity"
-
-/*!
- * @define      kIOPSDesignCapacityKey
- * @abstract    CFDictionary key for the current power source's design capacity
- * @discussion
- *              <ul>
- *              <li> Apple-defined power sources might not publish this key.
- *              <li> The power source's software may specify the units for this key. The units must be consistent for all capacities reported by this power source.
- *              <li> For power source creators: Providing this key is RECOMMENDED.
- *              <li> Type CFNumber kCFNumberIntType (signed integer)
- *              </ul>
- */
-
-#define kIOPSDesignCapacityKey          "DesignCapacity"
-
-/*!
- * @define      kIOPSTimeToEmptyKey
- * @abstract    CFDictionary key for the current power source's time remaining until empty.
- * @discussion
- *              Only valid if the power source is running off its own power. That's when the 
- *              <code>@link kIOPSPowerSourceStateKey @/link</code> has value <code>@link kIOPSBatteryPowerValue @/link</code> 
- *              and the value of <code>@link kIOPSIsChargingKey @/link</code> is kCFBooleanFalse.
- *              <ul>
- *              <li> Apple-defined power sources will publish this key.
- *              <li> For power source creators: Providing this key is RECOMMENDED.
- *              <li> Type CFNumber kCFNumberIntType (signed integer), units are minutes
- *              <li> A value of -1 indicates "Still Calculating the Time", otherwise estimated minutes left on the battery.
- *              </ul>
- */
-
-
-#define kIOPSTimeToEmptyKey            "Time to Empty"
-
-/*!
- * @define      kIOPSTimeToFullChargeKey
- * @abstract    CFDictionary key for the current power source's time remaining until empty.
- * @discussion
- *              Only valid if the value of <code>@link kIOPSIsChargingKey @/link</code> is kCFBooleanTrue.
- *              <ul>
- *              <li> Apple-defined power sources will publish this key.
- *              <li> For power source creators: Providing this key is RECOMMENDED.
- *              <li> Type CFNumber kCFNumberIntType (signed integer), units are minutes
- *              <li>A value of -1 indicates "Still Calculating the Time", otherwise estimated minutes until fully charged.
- *              </ul>
- */
-
-#define kIOPSTimeToFullChargeKey       "Time to Full Charge"
-
-/*!
- * @define      kIOPSIsChargingKey
- * @abstract    CFDictionary key for the current power source's charging state
- * @discussion
- *              <ul>
- *              <li> Apple-defined power sources will publish this key.
- *              <li> For power source creators: Providing this key is REQUIRED.
- *              <li> Type CFBoolean - kCFBooleanTrue or kCFBooleanFalse
- *              </ul>
- */
-
-#define kIOPSIsChargingKey             "Is Charging"
-
-/*!
- * @define      kIOPSIsPresentKey
- * @abstract    CFDictionary key for the current power source's presence. 
- * @discussion
- *              <ul>
- *              <li> Apple-defined power sources will publish this key.
- *              <li> For instance, a portable with the capacity for two batteries but 
- *                  with only one present would show two power source dictionaries, 
- *                  but kIOPSIsPresentKey would have the value kCFBooleanFalse in one of them.
- *              <li> For power source creators: Providing this key is REQUIRED.
- *              <li> Type CFBoolean - kCFBooleanTrue or kCFBooleanFalse
- *              </ul>
- */
-
-#define kIOPSIsPresentKey              "Is Present"
-
-/*!
- * @define      kIOPSVoltageKey
- * @abstract    CFDictionary key for the current power source's electrical voltage.
- * @discussion
- *              <ul>
- *              <li> Apple-defined power sources will publish this key.
- *              <li> For power source creators: Providing this key is RECOMMENDED.
- *              <li> Type CFNumber kCFNumberIntType (signed integer) - units are mV
- *              </ul>
- */
-
-#define kIOPSVoltageKey                "Voltage"
-
-/*!
- * @define      kIOPSCurrentKey
- * @abstract    CFDictionary key for the current power source's electrical current.
- * @discussion
- *              <ul>
- *              <li> Apple-defined power sources will publish this key.
- *              <li> For power source creators: Providing this key is RECOMMENDED.
- *              <li> Type CFNumber kCFNumberIntType (signed integer) - units are mA
- *              </ul>
- */
-
-#define kIOPSCurrentKey                "Current"
-
-/*!
- * @define      kIOPSNameKey
- * @abstract    CFDictionary key for the current power source's name.
- * @discussion
- *              <ul>
- *              <li> Apple-defined power sources will publish this key.
- *              <li> For power source creators: Providing this key is REQUIRED.
- *              <li> Type CFStringRef
- *              </ul>
- */
-
-#define kIOPSNameKey                   "Name"
-
-
-/*!
- * @define      kIOPSTypeKey
- * @abstract    CFDictionary key for the type of the power source
- * @discussion
- *              <ul>
- *              <li> Apple-defined power sources will publish this key.
- *              <li> For power source creators: Providing this key is REQUIRED.
- *              <li> Type CFStringRef. Valid transport types are kIOPSUPSType or kIOPSInternalBatteryType.
- *              </ul>
- */
-
-#define kIOPSTypeKey          "Type"
-
-
-/*!
- * @define      kIOPSTransportTypeKey
- * @abstract    CFDictionary key for the current power source's data transport type (e.g. the means that the power source conveys power source data to the OS X machine). 
- * @discussion
- *              <ul>
- *              <li> Apple-defined power sources will publish this key.
- *              <li> A value of <code>@link kIOPSInternalType @/link</code> describes an internal power source.
- *              <li> <code>@link kIOPSUSBTransportType @/link</code>, <code>@link kIOPSNetworkTransportType @/link</code>, and <code>@link kIOPSSerialTransportType @/link</code> usually describe UPS's.
- *              <li> For power source creators: Providing this key is REQUIRED.
- *              <li> Type CFStringRef. Valid transport types are kIOPSSerialTransportType, 
- *                  kIOPSUSBTransportType, kIOPSNetworkTransportType, kIOPSInternalType
- *              </ul>
- */
-
-#define kIOPSTransportTypeKey          "Transport Type"
-
-/*!
- * @define      kIOPSVendorDataKey
- * @abstract    CFDictionary key for arbitrary vendor data.
- * @discussion
- *              <ul>
- *              <li> Apple-defined power sources are not required to publish this key.
- *              <li> For power source creators: Providing this key is OPTIONAL.
- *              <li>CFDictionary; contents determined by the power source software. OS X will not look at this data.
- *              </ul>
- */
-
-#define kIOPSVendorDataKey          "Vendor Specific Data"
-
-/*!
- * @define      kIOPSBatteryHealthKey
- * @abstract    CFDictionary key for the current power source's "health" estimate.
- * @discussion
- *              <ul>
- *              <li> Apple-defined battery power sources will publish this key.
- *              <li> Use value <code>@link kIOPSGoodValue @/link</code> to describe a well-performing power source, 
- *              <li> Use <code>@link kIOPSFairValue @/link</code> to describe a functional power source with limited capacity
- *              <li> And use  <code>@link kIOPSPoorValue @/link</code> to describe a power source that's not capable of Providing power.
- *              <li> For power source creators: Providing this key is OPTIONAL.
- *              <li> Type CFStringRef
- *              </ul>
- */
-
-#define kIOPSBatteryHealthKey       "BatteryHealth"
-
-/*!
- * @define      kIOPSBatteryHealthConditionKey
- * @abstract    kIOPSBatteryHealthConditionKey broadly describes the battery's health.
- * @discussion
- *              <ul>
- *              <li> Apple-defined power sources will publish this key.
- *              <li> Value is one of the "Battery Health Condition Values" strings described in this file.
- *              <li> For power source creators: Providing this key is OPTIONAL - these keys have values only used by Apple power sources.
- *              <li> Type CFStringRef
- *              </ul>
- */
-
-#define kIOPSBatteryHealthConditionKey       "BatteryHealthCondition"
-
-/*!
- * @define      kIOPSBatteryFailureModesKey
- * @abstract    Enumerates a battery's failures and error conditions. 
- * @discussion 
- *              Various battery failures will be listed here. A battery may suffer from more than one 
- *              type of failure simultaneously, so this key has a CFArray value.
- *
- *              If BatteryFailureModesKey is not defined (or is set to an empty dictionary), 
- *                  then the battery has no detectable failures.
- *
- *              Each entry in the array should be a short descriptive string describing the error.
- *              <li> Apple-defined power sources will publish this key if any battery errors exist.
- *              <li> For power source creators: Providing this key is RECOMMENDED.
- *              <li> Type CFArrayRef
- *              </ul>
- */
-#define kIOPSBatteryFailureModesKey          "BatteryFailureModes"
-
-/*!
- * @define      kIOPSHealthConfidenceKey    
- * @abstract    CFDictionary key for our confidence in the accuracy of our 
- *              power source's "health" estimate. 
- * @deprecated  In OS X 10.6 and later.
- * @discussion
- *              <ul>
- *              <li> Apple-defined power sources will no longer publish this key.
- *              <li> Power source creators should not publish this key.
- *              <li> For power source creators: This key is DEPRECATED, do not implement it. 
- *              <li> Type CFStringRef
- *              </ul>
- */
-
-#define kIOPSHealthConfidenceKey    "HealthConfidence"
-
-
-/*!
- * @define      kIOPSMaxErrKey
- * @abstract    CFDictionary key for the current power source's percentage error in capacity reporting. 
- * @discussion
- *              In internal batteries, this refers to the battery pack's estimated percentage error.
- *              <ul>
- *              <li> Apple-defined battery power sources will publish this key, but only if it's defined for the battery.
- *              <li> For power source creators: Providing this key is OPTIONAL.
- *              <li> Type CFNumberRef kCFNumberIntType, non-negative integer
- *              </ul>
- */
-
-#define kIOPSMaxErrKey              "MaxErr"
-
-/*!
- * @define      kIOPSIsChargedKey
- * @abstract    CFDictionary key indicates whether the battery is charged. 
- * @discussion
- *              A battery must be plugged in to an external power source in order to be fully charged.
- *              Note that a battery may validly be plugged in, not charging, and <100% charge.
- *              e.g. A battery with capacity >= 95% and not charging, is defined as charged.
- *              <ul>
- *                  <li> Apple-defined power sources will publish this key.
- *                  <li> For power source creators: Providing this key is REQUIRED.
- *                  <li> Type CFBoolean - kCFBooleanTrue or kCFBooleanFalse
- *              </ul>
- */
-
-#define kIOPSIsChargedKey                   "Is Charged"
-
-/*!
- * @define      kIOPSIsFinishingChargeKey
- * @abstract    CFDictionary key indicates whether the battery is finishing off its charge.
- * @discussion
- *              When this is true, the system UI should indicate that the battery is "Finishing Charge."
- *              Some batteries may continue charging after they report 100% capacity.
- *              <ul>
- *              <li> Apple-defined battery power sources will publish this key.
- *              <li> For power source creators: Providing this key is RECOMMENDED.
- *              <li> Type CFBoolean - kCFBooleanTrue or kCFBooleanFalse
- *              </ul>
- */
-
-#define kIOPSIsFinishingChargeKey              "Is Finishing Charge"
-
-/*!
- * @define      kIOPSHardwareSerialNumberKey
- * @abstract    A unique serial number that identifies the power source.
- * @discussion  For Apple-manufactured batteries, this is an alphanumeric string generated
- *                  during the battery manufacturing process.
- *              <ul>
- *              <li> Apple-defined power sources will publish this key if the hardware provides the serial number.
- *              <li> For power source creators: Providing this key is RECOMMENDED.
- *              <li> Type CFStringRef
- *              </ul>
- */
-
-
-#define kIOPSHardwareSerialNumberKey            "Hardware Serial Number"
-
-
-
-/*
- * @group       Transport types
- * @abstract    Possible values for <code>@link kIOPSTransportTypeKey @/link</code>
- */
-/*!
- * @define      kIOPSSerialTransportType
- * @abstract    Value for key <code>@link kIOPSTransportTypeKey @/link</code>. 
- * @discussion  Indicates the power source is a UPS attached over a serial connection.
- */
-#define kIOPSSerialTransportType       "Serial"
-
-/*!
- * @define      kIOPSUSBTransportType
- * @abstract    Value for key <code>@link kIOPSTransportTypeKey @/link</code>. 
- * @discussion  Indicates the power source is a UPS attached over a USB connection.
- */
-#define kIOPSUSBTransportType          "USB"
-
-/*!
- * @define      kIOPSNetworkTransportType
- * @abstract    Value for key <code>@link kIOPSTransportTypeKey @/link</code>. 
- * @discussion  Indicates the power source is a UPS attached over a network connection (and it may be managing several computers).
- */
-#define kIOPSNetworkTransportType      "Ethernet"
-
-/*!
- * @define      kIOPSInternalType
- * @abstract    Value for key <code>@link kIOPSTransportTypeKey @/link</code>. Indicates the power source is an internal battery.
-*/
-#define kIOPSInternalType              "Internal"
-
-
-/*
- * @group       PowerSource Types
- * @discussion
- * A string that broadly describes the type of power source. One of these strings must be passed
- * as an argument to IOPSCreatePowerSource() when defining a new system power source.
- */
-
-/*!
- * @define      kIOPSInternalBatteryType 
- *
- * @abstract    Represents a battery residing inside a Mac.
- */
-#define kIOPSInternalBatteryType    "InternalBattery"
-
-/*!
- * @define      kIOPSUPSType 
- *
- * @abstract    Represents an external attached UPS.
- */
-#define kIOPSUPSType                "UPS"
-
-/*
- * PS state 
- */
-/*!
- * @define      kIOPSOffLineValue
- * @abstract    Value for key kIOPSPowerSourceStateKey. Power source is off-line or no longer connected.
-*/
-#define kIOPSOffLineValue              "Off Line"
-
-/*!
- * @define      kIOPSACPowerValue
- * @abstract    Value for key kIOPSPowerSourceStateKey. Power source is connected to external or AC power, and is not draining the internal battery.
-*/
-#define kIOPSACPowerValue              "AC Power"
-
-/*!
- * @define      kIOPSBatteryPowerValue
- * @abstract    Value for key kIOPSPowerSourceStateKey. Power source is currently using the internal battery.
-*/
-#define kIOPSBatteryPowerValue         "Battery Power"
-
-
-
-/*!
- * @group Battery Health values
- */
-/*!
- * @define      kIOPSPoorValue
- * @abstract    Value for key <code>@link kIOPSBatteryHealthKey @/link</code>.
-*/
-#define kIOPSPoorValue                  "Poor"
-
-/*!
- * @define      kIOPSFairValue
- * @abstract    Value for key <code>@link kIOPSBatteryHealthKey @/link</code>.
-*/
-#define kIOPSFairValue                  "Fair"
-
-/*!
- * @define      kIOPSGoodValue
- * @abstract    Value for key <code>@link kIOPSBatteryHealthKey @/link</code>.
-*/
-#define kIOPSGoodValue                  "Good"
-
-
-
-/*
- * @group       Battery Health Condition values
- */
-/*!
- * @define      kIOPSCheckBatteryValue
- *
- * @abstract    Value for key <code>@link kIOPSBatteryHealthConditionKey @/link</code>
- *
- * @discussion  This value indicates that the battery should be checked out by a licensed Mac repair service.
- */
-#define kIOPSCheckBatteryValue                      "Check Battery"
-
-/*!
- * @define      kIOPSPermanentFailureValue
- *
- * @abstract    Value for key <code>@link kIOPSBatteryHealthConditionKey @/link</code>
- *
- * @discussion  Indicates the battery needs replacement.
- */
-#define kIOPSPermanentFailureValue                  "Permanent Battery Failure"
-
-
-/*!
- * @group       Battery Failure Mode values
- */
-
-/*!
- * @define      kIOPSFailureExternalInput
- *
- * @abstract    Value for key <code>@link kIOPSBatteryFailureModesKey@/link</code>
- */
-#define kIOPSFailureExternalInput                   "Externally Indicated Failure"
-/*!
- *  @define     kIOPSFailureSafetyOverVoltage
- *
- *  @abstract   Potential value for key <code>@link kIOPSBatteryFailureModesKey@/link</code>
- */
-#define kIOPSFailureSafetyOverVoltage               "Safety Over-Voltage"
-/*!
- *  @define     kIOPSFailureChargeOverTemp
- *
- *  @abstract   Potential value for key <code>@link kIOPSBatteryFailureModesKey@/link</code>
- */
-#define kIOPSFailureChargeOverTemp                  "Charge Over-Temperature"
-/*!
- *  @define     kIOPSFailureDischargeOverTemp
- *
- *  @abstract   Potential value for key <code>@link kIOPSBatteryFailureModesKey@/link</code>
- */
-#define kIOPSFailureDischargeOverTemp               "Discharge Over-Temperature"
-/*!
- *  @define     kIOPSFailureCellImbalance
- *
- *  @abstract   Potential value for key <code>@link kIOPSBatteryFailureModesKey@/link</code>
- */
-#define kIOPSFailureCellImbalance                   "Cell Imbalance"
-/*!
- *  @define     kIOPSFailureChargeFET
- *
- *  @abstract   Potential value for key <code>@link kIOPSBatteryFailureModesKey@/link</code>
- */
-#define kIOPSFailureChargeFET                       "Charge FET"
-/*!
- *  @define     kIOPSFailureDischargeFET
- *
- *  @abstract   Potential value for key <code>@link kIOPSBatteryFailureModesKey@/link</code>
- */
-#define kIOPSFailureDischargeFET                    "Discharge FET"
-/*!
- *  @define     kIOPSFailureDataFlushFault
- *
- *  @abstract   Potential value for key <code>@link kIOPSBatteryFailureModesKey@/link</code>
- */
-#define kIOPSFailureDataFlushFault                  "Data Flush Fault"
-/*!
- *  @define     kIOPSFailurePermanentAFEComms
- *
- *  @abstract   Potential value for key <code>@link kIOPSBatteryFailureModesKey@/link</code>
- */
-#define kIOPSFailurePermanentAFEComms               "Permanent AFE Comms"
-/*!
- *  @define     kIOPSFailurePeriodicAFEComms
- *
- *  @abstract   Potential value for key <code>@link kIOPSBatteryFailureModesKey@/link</code>
- */
-#define kIOPSFailurePeriodicAFEComms                "Periodic AFE Comms"
-/*!
- *  @define     kIOPSFailureChargeOverCurrent
- *
- *  @abstract   Potential value for key <code>@link kIOPSBatteryFailureModesKey@/link</code>
- */
-#define kIOPSFailureChargeOverCurrent               "Charge Over-Current"
-/*!
- *  @define     kIOPSFailureDischargeOverCurrent
- *
- *  @abstract   Potential value for key <code>@link kIOPSBatteryFailureModesKey@/link</code>
- */
-#define kIOPSFailureDischargeOverCurrent            "Discharge Over-Current"
-/*!
- *  @define     kIOPSFailureOpenThermistor
- *
- *  @abstract   Potential value for key <code>@link kIOPSBatteryFailureModesKey@/link</code>
- */
-#define kIOPSFailureOpenThermistor                  "Open Thermistor"
-/*!
- *  @define     kIOPSFailureFuseBlown
- *
- *  @abstract   Potential value for key <code>@link kIOPSBatteryFailureModesKey@/link</code>
- */
-#define kIOPSFailureFuseBlown                       "Fuse Blown"
-
-
-#endif
diff --git a/external/ios-headers/IOKit/ps/IOPowerSources.h b/external/ios-headers/IOKit/ps/IOPowerSources.h
deleted file mode 100755
index 8ca1729..0000000
--- a/external/ios-headers/IOKit/ps/IOPowerSources.h
+++ /dev/null
@@ -1,276 +0,0 @@
-/*
- * Copyright (c) 2002 Apple Computer, Inc. All rights reserved.
- *
- * @APPLE_LICENSE_HEADER_START@
- * 
- * This file contains Original Code and/or Modifications of Original Code
- * as defined in and that are subject to the Apple Public Source License
- * Version 2.0 (the 'License'). You may not use this file except in
- * compliance with the License. Please obtain a copy of the License at
- * http://www.opensource.apple.com/apsl/ and read it before using this
- * file.
- * 
- * The Original Code and all software distributed under the License are
- * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
- * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
- * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
- * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
- * Please see the License for the specific language governing rights and
- * limitations under the License.
- * 
- * @APPLE_LICENSE_HEADER_END@
- */
-/*
- * HISTORY
- *
- */
-
-#ifndef _IOKIT_IOPOWERSOURCES_H
-#define _IOKIT_IOPOWERSOURCES_H
-
-#include <sys/cdefs.h>
-__BEGIN_DECLS
-
-
-/*! 
- * @header IOPowerSources.h
- *
- * @discussion  IOPowerSources provides uniform access to the state of power sources attached to the system.
- *              You can receive a change notification when any power source data changes.
- *              "Power sources" currently include batteries and UPS devices.
- *
- *              The header follows CF semantics in that it is the caller's responsibility to 
- *              CFRelease() anything returned by a "Copy" function, and the caller should not 
- *              CFRelease() anything returned by a "Get" function.
- */
-
-/*!
- *  @functiongroup Low Power Warnings
- */
-
-/*! @constant   kIOPSNotifyLowBattery
- *
- *  @abstract   Notify(3) key. The system delivers notifications on this key when the 
- *              battery time remaining drops into a warnable level.
- */
-#define kIOPSNotifyLowBattery   "com.apple.system.powersources.lowbattery"
-
-/*!
- * @enum       IOPSLowBatteryWarningLevel
- *
- * @discussion Possible return values from <code>@link IOPSGetBatteryWarningLevel@/link</code>
- */
-typedef enum {
-/*! @constant   kIOPSLowBatteryWarningNone
- *
- *  @abstract   The system is not in a low battery situation, or is on drawing from an external power source.
- *
- *  @discussion The system displays no low power warnings; neither should application clients of this
- *              API.
- */
-    kIOPSLowBatteryWarningNone  = 1,
-
-/*! @constant   kIOPSLowBatteryWarningEarly
- *
- *  @abstract   The system is in an early low battery situation.
- *
- *  @discussion Per Apple's definition, the battery has dropped below 22% remaining power.
- *              OS X alerts the user by changing the color of BatteryMonitor to red. 
- *              Warning the user is optional for full screen apps.
- */
-    kIOPSLowBatteryWarningEarly = 2,
-
-/*! @constant   kIOPSLowBatteryWarningFinal
- *
- *  @abstract   The battery can provide no more than 10 minutes of runtime.
- *
- *  @discussion OS X makes no guarantees that the system shall remain in Final Warning for 10 minutes.
- *              Batteries are frequently calibrated differently and may provide runtime 
- *              for more, or less, than the estimated 10 minutes.
- */
-    kIOPSLowBatteryWarningFinal = 3
-} IOPSLowBatteryWarningLevel;
-
-/*! @function   IOPSGetBatteryWarningLevel
- *
- *  @abstract   Indicates whether the system is at a low battery warning level.
- *
- *  @discussion If your app runs in full screen mode and occludes OS X's battery monitor's low
- *              battery warnings, you should alert the user at least when the system 
- *              is in kIOPSLowBatteryWarnFinal.
- */
-IOPSLowBatteryWarningLevel IOPSGetBatteryWarningLevel(void);
-
-/*!
- *  @functiongroup Quick Power Source Info
- */
-
-/*! 
- * @define      kIOPSTimeRemainingNotificationKey
- *
- * @abstract    C-string key for a notification that fires when the power source(s) time remaining changes.
- *
- * @discussion  Use notify(3) API to register for notifications.
- */
-#define kIOPSTimeRemainingNotificationKey        "com.apple.system.powersources.timeremaining"
-
-/*!
- * @constant    kIOPSTimeRemainingUnknown
- *
- * @abstract    Possible return value from <code>@link IOPSGetTimeRemainingEstimate@/link</code>
- *
- * @discussion  Indicates the system is connected to a limited power source, but the system is still
- *              calculating a time remaining estimate. Check for a valid estimate again when the notification
- *              <code>@link kIOPSPowerSourcesNotificationKey@/link</code> fires.
- */
-
-#define     kIOPSTimeRemainingUnknown           ((CFTimeInterval)-1.0)
-
-/*!
- * @constant    kIOPSTimeRemainingUnlimited
- *
- * @abstract    Possible return value from <code>@link IOPSGetTimeRemainingEstimate@/link</code>
- *
- * @discussion  Indicates the system is connected to an external power source, without a time limit.
- */
-
-#define     kIOPSTimeRemainingUnlimited         ((CFTimeInterval)-2.0)
-
-/*! 
- * @function    IOPSGetTimeRemainingEstimate
- *
- * @abstract    Returns the estimated minutes remaining until all power sources 
- *              (battery and/or UPS's) are empty, or returns <code>@link kIOPSTimeRemainingUnlimited@/link </code>
- *              if attached to an unlimited power source.
- *
- * @discussion  
- *              If attached to an "Unlimited" power source, like AC power or any external source, the 
- *              return value is <code>@link kIOPSTimeRemainingUnlimited@/link </code>
- *
- *              If the system is on "Limited" power, like a battery or UPS,
- *              but is still calculating the time remaining, which may 
- *              take several seconds after each system power event 
- *              (e.g. waking from sleep, or unplugging AC Power), the return value is 
- *              <code>@link kIOPSTimeRemainingUnknown@/link </code>
- *
- *              Otherwise, if the system is on "Limited" power and the system has an accurate time
- *              remaining estimate, the system returns a CFTimeInterval estimate of the time
- *              remaining until the system is out of battery power.
- *
- *              If you require more detailed battery information, use 
- *              <code>@link IOPSCopyPowerSourcesInfo @/link></code>
- *              and <code>@link IOPSGetPowerSourceDescription @/link></code>.
- *
- * @result      
- *              Returns <code>@link kIOPSTimeRemainingUnknown@/link</code> if the 
- *              OS cannot determine the time remaining. 
- *              
- *              Returns <code>@link kIOPSTimeRemainingUnlimited@/link</code> if the 
- *              system has an unlimited power source.
- *
- *              Otherwise returns a positive number of type CFTimeInterval, indicating the time
- *              remaining in seconds until all power sources are depleted.
- */
-CFTimeInterval IOPSGetTimeRemainingEstimate(void);
-
-
-/*! 
- *  @functiongroup Power Source Descriptions
- */
-
-typedef void  (*IOPowerSourceCallbackType)(void *context);
-
-/*! @function   IOPSCopyPowerSourcesInfo
- *
- *  @abstract   Returns a blob of Power Source information in an opaque CFTypeRef. 
- *
- *  @discussion Clients should not directly access data in the returned CFTypeRef - 
- *              they should use the accessor functions IOPSCopyPowerSourcesList and 
- *              IOPSGetPowerSourceDescription, instead.
- *
- *  @result     NULL if errors were encountered, a CFTypeRef otherwise.
- *              Caller must CFRelease() the return value when done accessing it.
- */
-CFTypeRef IOPSCopyPowerSourcesInfo(void);
-
-/*! 
- * @function    IOPSGetProvidingPowerSourceType
- *
- * @abstract    Indicates the power source the computer is currently drawing from.
- *
- * @discussion  Determines which power source is providing power.
- *
- * @param       snapshot The CFTypeRef returned by IOPSCopyPowerSourcesInfo(); caller may pass NULL.
- *
- * @result      One of: CFSTR(kIOPMACPowerKey), CFSTR(kIOPMBatteryPowerKey), CFSTR(kIOPMUPSPowerKey)
- */
-CFStringRef     IOPSGetProvidingPowerSourceType(CFTypeRef snapshot);
-
-/*! @function   IOPSCopyPowerSourcesList
- *
- *  @abstract   Returns a CFArray of Power Source handles, each of type CFTypeRef.
- *
- *  @discussion The caller shouldn't directly access the CFTypeRefs, but should use
- *              IOPSGetPowerSourceDescription on each member of the CFArrayRef.
- *
- *  @param      blob Takes the CFTypeRef returned by IOPSCopyPowerSourcesInfo()
- *
- *  @result     Returns NULL if errors were encountered, otherwise a CFArray of CFTypeRefs.
- *              Caller must CFRelease() the returned CFArrayRef.
- */
-CFArrayRef IOPSCopyPowerSourcesList(CFTypeRef blob);
-
-/*! @function   IOPSGetPowerSourceDescription
- *  
- *  @abstract Returns a CFDictionary with readable information about the specific power source.
- *
- *  @discussion See the C-strings defined in IOPSKeys.h for specific keys into the dictionary.
- *              Don't expect all keys to be present in any dictionary. Some power sources, for example,
- *              may not support the "Time Remaining To Empty" key and it will not be present in their dictionaries.
- *
- *  @param      blob The CFTypeRef returned by IOPSCopyPowerSourcesInfo()
- *
- *  @param      ps One of the CFTypeRefs in the CFArray returned by IOPSCopyPowerSourcesList()
- *
- *  @result     Returns NULL if an error was encountered, otherwise a CFDictionary. Caller should 
- *              NOT release the returned CFDictionary - it will be released as part of the CFTypeRef returned by
- *              IOPSCopyPowerSourcesInfo().
- */
-CFDictionaryRef IOPSGetPowerSourceDescription(CFTypeRef blob, CFTypeRef ps);
-
-/*! @function   IOPSNotificationCreateRunLoopSource
- *  
- *  @abstract   Returns a CFRunLoopSourceRef that notifies the caller when power source
- *              information changes.
- *
- *  @discussion Returns a CFRunLoopSourceRef for scheduling with your CFRunLoop. 
- *              If your project does not use a CFRunLoop, you can alternatively
- *              receive notifications via mach port, dispatch, or signal, via <code>notify.h</code>
- *              using the name <code>@link kIOPSTimeRemainingNotificationKey @/link</code>
- *
- *  @param      callback A function to be called whenever any power source is added, removed, or changes.
- *
- *  @param      context Any user-defined pointer, passed to the IOPowerSource callback.
- *
- *  @result     Returns NULL if an error was encountered, otherwise a CFRunLoopSource. Caller must
- *              release the CFRunLoopSource.
- */
-CFRunLoopSourceRef IOPSNotificationCreateRunLoopSource(IOPowerSourceCallbackType callback, void *context);
-
-
-/*! @function   IOPSCopyExternalPowerAdapterDetails
- *
- *  @abstract   Returns a CFDictionary that describes the attached (AC) external
- *              power adapter (if any external power adapter is attached.
- *
- *  @discussion Use the kIOPSPowerAdapter... keys described in IOPSKeys.h
- *              to interpret the returned CFDictionary.
- *
- *  @result     Returns a CFDictionary on success. Caller must release the returned
- *              dictionary. If no adapter is attached, or if there's an error,  returns NULL.
- */
-CFDictionaryRef IOPSCopyExternalPowerAdapterDetails(void);
-
-__END_DECLS
-
-#endif /* _IOKIT_IOPOWERSOURCES_H */
diff --git a/external/ios-headers/IOKit/ps/IOUPSPlugIn.h b/external/ios-headers/IOKit/ps/IOUPSPlugIn.h
deleted file mode 100755
index 10f8dd6..0000000
--- a/external/ios-headers/IOKit/ps/IOUPSPlugIn.h
+++ /dev/null
@@ -1,256 +0,0 @@
-/*
- *
- * @APPLE_LICENSE_HEADER_START@
- * 
- * This file contains Original Code and/or Modifications of Original Code
- * as defined in and that are subject to the Apple Public Source License
- * Version 2.0 (the 'License'). You may not use this file except in
- * compliance with the License. Please obtain a copy of the License at
- * http://www.opensource.apple.com/apsl/ and read it before using this
- * file.
- * 
- * The Original Code and all software distributed under the License are
- * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
- * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
- * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
- * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
- * Please see the License for the specific language governing rights and
- * limitations under the License.
- * 
- * @APPLE_LICENSE_HEADER_END@
- */
-
-/*! 
-    @header IOUPSPlugIn.h
-    
-    IOUPSPlugIn.h is the header that defines the software used by ioupsd in user-space to communicate with 
-    UPS devices.
-    <p>
-    <b>NOTE:</b>
-    Kernel extensions should have the following key/value pair in their personality in order to be 
-    recognized by ioupsd:
-    <pre>
-        <key>UPSDevice</key>
-        <true/>
-    </pre>
-    </p>
-    <p>
-    To communicate with a UPS device, an instance of IOUPSPlugInInterface (a struct which is defined below) 
-    is created. The methods of IOUPSPlugInInterface allow ioupsd to communicate with the device.
-    </p>
-    <p>
-    To obtain an IOUPSPlugInInterface for a UPS device, use the function IOCreatePlugInInterfaceForService() 
-    defined in IOKit/IOCFPlugIn.h. (Note the "i" in "PlugIn" is 
-    always upper-case.) Quick usage reference:<br>
-    <ul>
-            <li>'service' is a reference to the IOKit registry entry of the kernel object 
-                    (usually of type IOHIDDevice) representing the device
-                    of interest. This reference can be obtained using the functions defined in
-                    IOKit/IOKitLib.h.</li>
-            <li>'plugInType' should be CFUUIDGetUUIDBytes(kIOCFPlugInInterfaceID)</li>
-            <li>'interfaceType' should be CFUUIDGetUUIDBytes(kIOUPSPlugInTypeID) when using IOUPSPlugIn</li>
-    </ul>
-    The interface returned by IOCreatePlugInInterfaceForService() should be deallocated using 
-    IODestroyPlugInInterface(). Do not call Release() on it.
-    </p>
-*/
- 
-#ifndef _IOKIT_PM_IOUPSPLUGIN_H
-#define _IOKIT_PM_IOUPSPLUGIN_H
-
-#include <CoreFoundation/CoreFoundation.h>
-#include <IOKit/IOCFPlugIn.h>
-
-
-/* 40A57A4E-26A0-11D8-9295-000A958A2C78 */
-/*! 
-    @define kIOUPSPlugInTypeID
-    @discussion Type ID for the IOUPSPlugInInterface. Corresponds to an
-                 available UPS device. 
-*/
-#define kIOUPSPlugInTypeID CFUUIDGetConstantUUIDWithBytes(NULL, 	\
-    0x40, 0xa5, 0x7a, 0x4e, 0x26, 0xa0, 0x11, 0xd8,			\
-    0x92, 0x95, 0x00, 0x0a, 0x95, 0x8a, 0x2c, 0x78)
-
-/* 63F8BFC4-26A0-11D8-88B4-000A958A2C78 */
-/*! 
-    @define kIOUPSPlugInInterfaceID
-    @discussion Interface ID for the IOUPSPlugInInterface. Corresponds to an
-                 available UPS device. 
-*/
-#define kIOUPSPlugInInterfaceID CFUUIDGetConstantUUIDWithBytes(NULL, 	\
-    0x63, 0xf8, 0xbf, 0xc4, 0x26, 0xa0, 0x11, 0xd8, 			\
-    0x88, 0xb4, 0x0, 0xa, 0x95, 0x8a, 0x2c, 0x78)
-    
-/* E60E0799-9AA6-49DF-B55B-A5C94BA07A4A */
-/*! 
-    @define kIOUPSPlugInInterfaceID_v140
-    @discussion Interface ID for the IOUPSPlugInInterface. Corresponds to an
-                 available UPS device. 
-*/
-#define kIOUPSPlugInInterfaceID_v140 CFUUIDGetConstantUUIDWithBytes(NULL, 	\
-    0xe6, 0xe, 0x7, 0x99, 0x9a, 0xa6, 0x49, 0xdf,               \
-    0xb5, 0x5b, 0xa5, 0xc9, 0x4b, 0xa0, 0x7a, 0x4a)
-
-
-/*! 
-    @typedef IOUPSEventCallbackFunction
-    @discussion Type and arguments of callout C function that is used when a
-                completion routine is called.  This function pointer is set
-                via setEventCallback and is called when an event is available 
-                from the UPS. 
-    @param target void * pointer to your data, often a pointer to an object.
-    @param result Completion result of desired operation.
-    @param refcon void * pointer to more data.
-    @param sender Interface instance sending the completion routine.
-    @param event CFDictionaryRef containing event data.
-*/
-typedef void (*IOUPSEventCallbackFunction)
-              (void *	 		target,
-               IOReturn 		result,
-               void * 			refcon,
-               void * 			sender,
-               CFDictionaryRef  event);
-
-#define IOUPSPLUGINBASE							\
-    IOReturn (*getProperties)(	void * thisPointer, 			\
-                                CFDictionaryRef * properties);		\
-    IOReturn (*getCapabilities)(void * thisPointer, 			\
-                                CFSetRef * capabilities);		\
-    IOReturn (*getEvent)(	void * thisPointer, 			\
-                                CFDictionaryRef * event);		\
-    IOReturn (*setEventCallback)(void * thisPointer, 			\
-                                IOUPSEventCallbackFunction callback,	\
-                                void * callbackTarget,  		\
-                                void * callbackRefcon);			\
-    IOReturn (*sendCommand)(	void * thisPointer, 			\
-                                CFDictionaryRef command)
-                                
-#define IOUPSPLUGIN_V140							\
-    IOReturn (*createAsyncEventSource)(void * thisPointer,      \
-                                CFTypeRef * source)
-
-
-typedef struct IOUPSPlugInInterface {
-    IUNKNOWN_C_GUTS;
-    IOUPSPLUGINBASE;
-} IOUPSPlugInInterface;
-
-typedef struct IOUPSPlugInInterface_v140 {
-    IUNKNOWN_C_GUTS;
-    IOUPSPLUGINBASE;
-    IOUPSPLUGIN_V140;
-} IOUPSPlugInInterface_v140;
-
-//
-//  BEGIN READABLE STRUCTURE DEFINITIONS 
-//  
-//  This portion of uncompiled code provides a more reader friendly representation of 
-//  the CFPlugin methods defined above.
-
-#if 0
-/*!  
-	@interface IOUPSPlugInInterface
-	@discussion Represents and provides management functions for a UPS device.
-*/
-
-typedef struct IOUPSPlugInInterface {
-    IUNKNOWN_C_GUTS;
-
-    /*!
-            @function 	getProperties 
-            @abstract	Used to obtain the properties of the UPS device such as the 
-                        name and transport.
-            @discussion Property keys are defined in IOPSKeys.h.  This is not an 
-                        allocation method.  Thus the caller does not release the
-                        CFDictionary that is returned.
-            @param	thisPointer 	The UPS Interface to use.
-            @param   	properties 	Pointer to a CFDictionaryRef that contains 
-                                        the properties.
-            @result	An IOReturn error code.
-    */
-    IOReturn (*getProperties)(	void * thisPointer,
-                                CFDictionaryRef * properties);
-
-    /*!
-            @function 	getCapabilities 
-            @abstract	Used to obtain the capabilities of the UPS device.
-            @discussion Keys are defined in IOPSKeys.h and begin with kIOPS.  This 
-                        is not an allocation method.  Thus the caller does not 
-                        release the CFSet that is returned.
-            @param	thisPointer 	The UPS Interface to use.
-            @param   	capabilities 	Pointer to a CFSetRef that contains the 
-                                        capabilities.
-            @result	An IOReturn error code.
-    */
-    IOReturn (*getCapabilities)(void * thisPointer,
-                                CFSetRef * capabilities);
-
-    /*!
-            @function 	getEvent 
-            @abstract	Used to poll the current state of the UPS.  
-            @discussion Keys are defined in IOPSKeys.h and begin with kIOPS.  This 
-                        is not an allocation method.  Thus the caller does not 
-                        release the CFDictionary that is returned.
-            @param	thisPointer 	The UPS Interface to use.
-            @param   	event 		Pointer to a CFDictionaryRef that contains
-                                        the current event state.
-            @result	An IOReturn error code.
-    */
-    IOReturn (*getEvent)(	void * thisPointer,
-                                CFDictionaryRef * event);
-
-    /*!
-            @function	setEventCallback 
-            @abstract	Set the callback that should be called to handle an event 
-                        from the UPS.
-            @discussion The proivided callback method should be called whenever there
-                        is a change of state in the UPS.  This should be used in 
-                        conjunction with createAsyncEventSource.
-            @param      thisPointer     The UPS Interface to use.
-            @param   	callback        A callback handler of type 
-                                        IOUPSEventCallbackFunction.
-            @param   	callbackTarget	The address to be targeted by this callback.
-            @param   	callbackRefcon	A user specified reference value. This will 
-                                        be passed to all callback functions.
-            @result	An IOReturn error code.
-    */
-    IOReturn (*setEventCallback)(void * thisPointer,
-                                IOUPSEventCallbackFunction callback,
-                                void * callbackTarget,
-                                void * callbackRefcon);
-
-    /*!
-            @function 	sendCommand 
-            @abstract	Send a command to the UPS.
-            @discussion	Command keys are defined in IOPSKeys.h and begin with 
-                        kIOPSCommand.  An error should be returned if your device does
-                        not know how to respond to a command.
-            @param      thisPointer     The UPS Interface to use.
-            @param   	command         CFDictionaryRef that contains the command.
-            @result	An IOReturn error code.
-    */
-    IOReturn (*sendCommand)(	void * thisPointer,
-                                CFDictionaryRef command);
-                                
-    /*!
-            @function 	createAsyncEventSource 
-            @abstract	Used to create an async run loop event source of the plugin. 
-            @discussion This is an allocation method.  Thus the caller must 
-                        release the object that is returned.
-            @param      thisPointer 	The UPS Interface to use.
-            @param   	source          Pointer to a CFTypeRef.  It is expected that this
-                                        point to either a CFRunLoopSourceRef or a 
-                                        CFRunLoopTimerRef.
-            @result	An IOReturn error code.
-    */
-    IOReturn (*createAsyncEventSource)(	void * thisPointer,
-                                        CFTypeRef * source);
-
-
-} IOUPSPlugInInterface;
-#endif
-
-//  END READABLE STRUCTURE DEFINITIONS 
-
-#endif /* !_IOKIT_PM_IOUPSPLUGIN_H */
diff --git a/external/ios-headers/IOKit/pwr_mgt/IOPM.h b/external/ios-headers/IOKit/pwr_mgt/IOPM.h
deleted file mode 100755
index f0002d5..0000000
--- a/external/ios-headers/IOKit/pwr_mgt/IOPM.h
+++ /dev/null
@@ -1,823 +0,0 @@
-/*
- * Copyright (c) 1998-2005 Apple Computer, Inc. All rights reserved.
- *
- * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
- * 
- * This file contains Original Code and/or Modifications of Original Code
- * as defined in and that are subject to the Apple Public Source License
- * Version 2.0 (the 'License'). You may not use this file except in
- * compliance with the License. The rights granted to you under the License
- * may not be used to create, or enable the creation or redistribution of,
- * unlawful or unlicensed copies of an Apple operating system, or to
- * circumvent, violate, or enable the circumvention or violation of, any
- * terms of an Apple operating system software license agreement.
- * 
- * Please obtain a copy of the License at
- * http://www.opensource.apple.com/apsl/ and read it before using this file.
- * 
- * The Original Code and all software distributed under the License are
- * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
- * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
- * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
- * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
- * Please see the License for the specific language governing rights and
- * limitations under the License.
- * 
- * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
- */
-#ifndef _IOKIT_IOPM_H
-#define _IOKIT_IOPM_H
-
-#include <IOKit/IOTypes.h>
-#include <IOKit/IOMessage.h>
-#include <IOKit/IOReturn.h>
-
-/*! @header IOPM.h
-    @abstract Defines power management constants and keys used by both in-kernel and user space power management.
-    @discussion IOPM.h defines a range of power management constants used in several in-kernel and user space APIs. Most significantly, the IOPMPowerFlags used to specify the fields of an IOPMPowerState struct are defined here.
-
-    Most of the constants defined in IOPM.h are deprecated or for Apple internal use only, and are not elaborated on in headerdoc.
-*/
-
-enum {
-    kIOPMMaxPowerStates = 10,
-    IOPMMaxPowerStates = kIOPMMaxPowerStates
-};
-
-/*! @enum IOPMPowerFlags
-    @abstract Bits are used in defining capabilityFlags, inputPowerRequirements, and outputPowerCharacter in the IOPMPowerState structure.
-    @discussion These bits may be bitwise-OR'd together in the IOPMPowerState capabilityFlags field, the outputPowerCharacter field, and/or the inputPowerRequirement field. 
-    
-    The comments clearly mark whether each flag should be used in the capabilityFlags field, outputPowerCharacter field, and inputPowerRequirement field, or all three.
-    
-    The value of capabilityFlags, inputPowerRequirement or outputPowerCharacter may be 0. Most drivers implement their 'OFF' state, used when asleep, by defininf each of the 3 fields as 0.
-    
-    The bits listed below are only the most common bits used to define a device's power states. Your device's IO family may require that your device specify other input or output power flags to interact properly. Consult family-specific documentation to determine if your IOPower plane parents or children require other power flags; they probably don't.
-
-    @constant kIOPMPowerOn Indicates the device is on, requires power, and provides power. Useful as a: Capability, InputPowerRequirement, OutputPowerCharacter
-
-    @constant kIOPMDeviceUsable Indicates the device is usable in this state. Useful only as a Capability
-
-    @constant kIOPMLowPower 
-    Indicates device is in a low power state. May be bitwis-OR'd together
-    with kIOPMDeviceUsable flag, to indicate the device is still usable.
-    
-    A device with a capability of kIOPMLowPower may:
-       Require either 0 or kIOPMPowerOn from its power parent
-       Offer either kIOPMLowPower, kIOPMPowerOn, or 0 (no power at all)
-         to its power plane children.
-
-    Useful only as a Capability, although USB drivers should consult USB family documentation for other valid circumstances to use the kIOPMLowPower bit.
-
-    @constant kIOPMPreventIdleSleep
-    In the capability field of a power state, disallows idle system sleep while the device is in that state.
-    
-    For example, displays and disks set this capability for their ON power state; since the system may not idle sleep while the display (and thus keyboard or mouse) or the disk is active.
-
-    Useful only as a Capability.
-    
-    @constant kIOPMSleepCapability
-    Used only by certain IOKit Families (USB). Not defined or used by generic Power Management. Read your family documentation to see if you should define a powerstate using these capabilities.
-    
-    @constant kIOPMRestartCapability
-    Used only by certain IOKit Families (USB). Not defined or used by generic Power Management. Read your family documentation to see if you should define a powerstate using these capabilities.
-    
-    @constant kIOPMSleep
-    Used only by certain IOKit Families (USB). Not defined or used by generic Power Management. Read your family documentation to see if you should define a powerstate using these capabilities.
-
-    @constant kIOPMRestart
-    Used only by certain IOKit Families (USB). Not defined or used by generic Power Management. Read your family documentation to see if you should define a powerstate using these capabilities.
-
-    @constant kIOPMInitialDeviceState
-    Indicates the initial power state for the device. If <code>initialPowerStateForDomainState()</code> returns a power state with this flag set in the capability field, then the initial power change is performed without calling the driver's <code>setPowerState()</code>.
-*/
-typedef unsigned long IOPMPowerFlags;
-enum {
-    kIOPMPowerOn                    = 0x00000002,
-    kIOPMDeviceUsable               = 0x00008000,
-    kIOPMLowPower                   = 0x00010000,
-    kIOPMPreventIdleSleep           = 0x00000040,
-    kIOPMSleepCapability            = 0x00000004,
-    kIOPMRestartCapability          = 0x00000080,
-    kIOPMSleep                      = 0x00000001,
-    kIOPMRestart                    = 0x00000080,
-    kIOPMInitialDeviceState         = 0x00000100
-};
-
-/*
- * Private IOPMPowerFlags
- *
- * For Apple use only
- * Not for use with non-Apple drivers
- * Their behavior is undefined
- */
-enum {
-    kIOPMClockNormal                = 0x0004,
-    kIOPMClockRunning               = 0x0008,
-    kIOPMPreventSystemSleep         = 0x0010,
-    kIOPMDoze                       = 0x0400,
-    kIOPMChildClamp                 = 0x0080,
-    kIOPMChildClamp2                = 0x0200,
-    kIOPMNotPowerManaged            = 0x0800
-};
-
-/*
- * Deprecated IOPMPowerFlags
- * Their behavior is undefined when used in IOPMPowerState
- * Capability, InputPowerRequirement, or OutputPowerCharacter fields.
- */
-enum {
-    kIOPMMaxPerformance             = 0x4000,
-    kIOPMPassThrough                = 0x0100,
-    kIOPMAuxPowerOn                 = 0x0020,
-    kIOPMNotAttainable              = 0x0001,
-    kIOPMContextRetained            = 0x2000,
-    kIOPMConfigRetained             = 0x1000,
-    kIOPMStaticPowerValid           = 0x0800,
-    kIOPMSoftSleep                  = 0x0400,
-    kIOPMCapabilitiesMask =     kIOPMPowerOn | kIOPMDeviceUsable | 
-                                kIOPMMaxPerformance | kIOPMContextRetained | 
-                                kIOPMConfigRetained | kIOPMSleepCapability |
-                                kIOPMRestartCapability
-};
-
-/*
- * Support for old names of IOPMPowerFlag constants
- */
-enum {
-    IOPMNotAttainable           = kIOPMNotAttainable,
-    IOPMPowerOn                 = kIOPMPowerOn,
-    IOPMClockNormal             = kIOPMClockNormal,
-    IOPMClockRunning            = kIOPMClockRunning,
-    IOPMAuxPowerOn              = kIOPMAuxPowerOn,
-    IOPMDeviceUsable            = kIOPMDeviceUsable,
-    IOPMMaxPerformance          = kIOPMMaxPerformance,
-    IOPMContextRetained         = kIOPMContextRetained,
-    IOPMConfigRetained          = kIOPMConfigRetained,
-    IOPMNotPowerManaged         = kIOPMNotPowerManaged,
-    IOPMSoftSleep               = kIOPMSoftSleep
-};
-
-
-enum {
-    kIOPMNextHigherState        = 1,
-    kIOPMHighestState           = 2,
-    kIOPMNextLowerState         = 3,
-    kIOPMLowestState            = 4
-};
-
-enum {
-    IOPMNextHigherState         = kIOPMNextHigherState,
-    IOPMHighestState            = kIOPMHighestState,
-    IOPMNextLowerState          = kIOPMNextLowerState,
-    IOPMLowestState             = kIOPMLowestState
-};
-
-// Internal commands used by power managment command queue
-enum {
-    kIOPMBroadcastAggressiveness = 1,
-    kIOPMUnidleDevice
-};
-
-// Power consumption unknown value
-enum {
-    kIOPMUnknown = 0xFFFF
-};
-
-/*******************************************************************************
- *
- * Root Domain property keys of interest
- *
- ******************************************************************************/
-
-/* AppleClamshellState 
- * reflects the state of the clamshell (lid) on a portable.
- * It has a boolean value.
- *  true        == clamshell is closed
- *  false       == clamshell is open
- *  not present == no clamshell on this hardware
- */
-#define kAppleClamshellStateKey             "AppleClamshellState"
-
-/* AppleClamshellCausesSleep 
- * reflects the clamshell close behavior on a portable. 
- * It has a boolean value.
- *  true        == system will sleep when clamshell is closed
- *  false       == system will not sleep on clamshell close 
- *                  (typically external display mode)
- *  not present == no clamshell on this hardware
- */
-#define kAppleClamshellCausesSleepKey       "AppleClamshellCausesSleep"
-
-/* kIOPMSleepWakeUUIDKey
- * Key refers to a CFStringRef that will uniquely identify
- * a sleep/wake cycle for logging & tracking.
- * The key becomes valid at the beginning of a sleep cycle - before we
- * initiate any sleep/wake notifications.
- * The key becomes invalid at the completion of a system wakeup. The
- * property will not be present in the IOPMrootDomain's registry entry
- * when it is invalid.
- * 
- * See IOPMrootDomain notification kIOPMMessageSleepWakeUUIDChange
- */
- #define kIOPMSleepWakeUUIDKey              "SleepWakeUUID"
-
-/* kIOPMDeepSleepEnabledKey
- * Indicates the Deep Sleep enable state.
- * It has a boolean value.
- *  true        == Deep Sleep is enabled
- *  false       == Deep Sleep is disabled
- *  not present == Deep Sleep is not supported on this hardware
- */
-#define kIOPMDeepSleepEnabledKey            "Standby Enabled"
-
-/* kIOPMDeepSleepDelayKey
- * Key refers to a CFNumberRef that represents the delay in seconds before
- * entering Deep Sleep state. The property is not present if Deep Sleep is
- * unsupported.
- */
-#define kIOPMDeepSleepDelayKey              "Standby Delay"
-
-/* kIOPMDestroyFVKeyOnStandbyKey
- * Specifies if FileVault key can be stored when going to standby mode
- * It has a boolean value,
- *  true        == Destroy FV key when going to standby mode
- *  false       == Retain FV key when going to standby mode
- *  not present == Retain FV key when going to standby mode
- */
-#define kIOPMDestroyFVKeyOnStandbyKey            "DestroyFVKeyOnStandby"
-
-/*******************************************************************************
- *
- * Driver PM Assertions
- *
- ******************************************************************************/
-
-/* Driver Assertion bitfield description
- * Driver PM assertions are defined by these bits.
- */
-enum {
-    /*! kIOPMDriverAssertionCPUBit
-     * When set, PM kernel will prefer to leave the CPU and core hardware
-     * running in "Dark Wake" state, instead of sleeping.
-     */
-    kIOPMDriverAssertionCPUBit                      = 0x01,
-
-    /*! kIOPMDriverAssertionUSBExternalDeviceBit
-     * When set, driver is informing PM that an external USB device is attached.
-     */
-    kIOPMDriverAssertionUSBExternalDeviceBit        = 0x04,
-
-    /*! kIOPMDriverAssertionBluetoothHIDDevicePairedBit
-     * When set, driver is informing PM that a Bluetooth HID device is paired.
-     */
-    kIOPMDriverAssertionBluetoothHIDDevicePairedBit = 0x08,
-
-    /*! kIOPMDriverAssertionExternalMediaMountedBit
-     * When set, driver is informing PM that an external media is mounted.
-     */
-    kIOPMDriverAssertionExternalMediaMountedBit     = 0x10,
-
-    /*! kIOPMDriverAssertionReservedBit5
-     * Reserved for Thunderbolt.
-     */
-    kIOPMDriverAssertionReservedBit5                = 0x20,
-
-    /*! kIOPMDriverAssertionPreventDisplaySleepBit
-     * When set, the display should remain powered on while the system's awake.
-     */
-    kIOPMDriverAssertionPreventDisplaySleepBit      = 0x40,
-
-    kIOPMDriverAssertionReservedBit7                = 0x80
-};
-
- /* kIOPMAssertionsDriverKey
-  * This kIOPMrootDomain key refers to a CFNumberRef property, containing
-  * a bitfield describing the aggregate PM assertion levels.
-  * Example: A value of 0 indicates that no driver has asserted anything.
-  * Or, a value of <link>kIOPMDriverAssertionCPUBit</link>
-  *   indicates that a driver (or drivers) have asserted a need fro CPU and video.
-  */
-#define kIOPMAssertionsDriverKey            "DriverPMAssertions"
-
- /* kIOPMAssertionsDriverKey
-  * This kIOPMrootDomain key refers to a CFNumberRef property, containing
-  * a bitfield describing the aggregate PM assertion levels.
-  * Example: A value of 0 indicates that no driver has asserted anything.
-  * Or, a value of <link>kIOPMDriverAssertionCPUBit</link>
-  *   indicates that a driver (or drivers) have asserted a need fro CPU and video.
-  */
-#define kIOPMAssertionsDriverDetailedKey    "DriverPMAssertionsDetailed"
-
-/*******************************************************************************
- *
- * Kernel Driver assertion detailed dictionary keys
- *
- * Keys decode the Array & dictionary data structure under IOPMrootDomain property 
- *  kIOPMAssertionsDriverKey.
- *
- */
-#define kIOPMDriverAssertionIDKey               "ID"
-#define kIOPMDriverAssertionCreatedTimeKey      "CreatedTime"
-#define kIOPMDriverAssertionModifiedTimeKey     "ModifiedTime"
-#define kIOPMDriverAssertionOwnerStringKey      "Owner"
-#define kIOPMDriverAssertionOwnerServiceKey     "ServicePtr"
-#define kIOPMDriverAssertionLevelKey            "Level"
-#define kIOPMDriverAssertionAssertedKey         "Assertions"
-
-/*******************************************************************************
- *
- * Root Domain general interest messages
- *
- * Available by registering for interest type 'gIOGeneralInterest' 
- * on IOPMrootDomain. 
- *
- ******************************************************************************/
-
-/* kIOPMMessageClamshellStateChange
- * Delivered as a general interest notification on the IOPMrootDomain
- * IOPMrootDomain sends this message when state of either AppleClamshellState
- * or AppleClamshellCausesSleep changes. If this clamshell change results in
- * a sleep, the sleep will initiate soon AFTER delivery of this message.
- * The state of both variables is encoded in a bitfield argument sent with
- * the message. Check bits 0 and 1 using kClamshellStateBit & kClamshellSleepBit
- */
-enum {
-    kClamshellStateBit = (1 << 0),
-    kClamshellSleepBit = (1 << 1)
-};
-
-#define kIOPMMessageClamshellStateChange   \
-                iokit_family_msg(sub_iokit_powermanagement, 0x100)
-
-/* kIOPMMessageFeatureChange
- * Delivered when the set of supported features ("Supported Features" dictionary
- * under IOPMrootDomain registry) changes in some way. Typically addition or
- * removal of a supported feature.
- * RootDomain passes no argument with this message.
- */
-#define kIOPMMessageFeatureChange           \
-                iokit_family_msg(sub_iokit_powermanagement, 0x110)
-
-/* kIOPMMessageInflowDisableCancelled
- * The battery has drained completely to its "Fully Discharged" state. 
- * If a user process has disabled battery inflow for battery 
- * calibration, we forcibly re-enable Inflow at this point.
- * If inflow HAS been forcibly re-enabled, bit 0
- * (kInflowForciblyEnabledBit) will be set.
- */
-enum {
-    kInflowForciblyEnabledBit = (1 << 0)
-};
-
-/* kIOPMMessageInternalBatteryFullyDischarged
- * The battery has drained completely to its "Fully Discharged" state. 
- */
-#define kIOPMMessageInternalBatteryFullyDischarged  \
-                iokit_family_msg(sub_iokit_powermanagement, 0x120)
-
-/* kIOPMMessageSystemPowerEventOccurred
- * Some major system thermal property has changed, and interested clients may
- * modify their behavior.
- */
-#define kIOPMMessageSystemPowerEventOccurred  \
-                iokit_family_msg(sub_iokit_powermanagement, 0x130)
-
-/* kIOPMMessageSleepWakeUUIDChange
- * Either a new SleepWakeUUID has been specified at the beginning of a sleep,
- * or we're removing the existing property upon completion of a wakeup.
- */
-#define kIOPMMessageSleepWakeUUIDChange  \
-                iokit_family_msg(sub_iokit_powermanagement, 0x140)
-                
-/* kIOPMMessageSleepWakeUUIDSet
- * Argument accompanying the kIOPMMessageSleepWakeUUIDChange notification when 
- * a new UUID has been specified.
- */
-#define kIOPMMessageSleepWakeUUIDSet                    ((void *)1)
-
-/* kIOPMMessageSleepWakeUUIDCleared
- * Argument accompanying the kIOPMMessageSleepWakeUUIDChange notification when 
- * the current UUID has been removed.
- */
-#define kIOPMMessageSleepWakeUUIDCleared                ((void *)0)
-
-/*! kIOPMMessageDriverAssertionsChanged
- *  Sent when kernel PM driver assertions have changed.
- */
-#define kIOPMMessageDriverAssertionsChanged  \
-                iokit_family_msg(sub_iokit_powermanagement, 0x150)
-
-/*******************************************************************************
- *
- * Power commands issued to root domain
- * Use with IOPMrootDomain::receivePowerNotification()
- *
- * These commands are issued from system drivers only:
- *      ApplePMU, AppleSMU, IOGraphics, AppleACPIFamily
- *
- * TODO: deprecate kIOPMAllowSleep and kIOPMPreventSleep
- ******************************************************************************/
-enum {
-  kIOPMSleepNow                 = (1<<0),  // put machine to sleep now
-  kIOPMAllowSleep               = (1<<1),  // allow idle sleep
-  kIOPMPreventSleep             = (1<<2),  // do not allow idle sleep
-  kIOPMPowerButton              = (1<<3),  // power button was pressed
-  kIOPMClamshellClosed          = (1<<4),  // clamshell was closed
-  kIOPMPowerEmergency           = (1<<5),  // battery dangerously low
-  kIOPMDisableClamshell         = (1<<6),  // do not sleep on clamshell closure
-  kIOPMEnableClamshell          = (1<<7),  // sleep on clamshell closure
-  kIOPMProcessorSpeedChange     = (1<<8),  // change the processor speed
-  kIOPMOverTemp                 = (1<<9),  // system dangerously hot
-  kIOPMClamshellOpened          = (1<<10)  // clamshell was opened
-};
-
-
-/*******************************************************************************
- *
- * Power Management Return Codes
- *
- ******************************************************************************/
-enum {
-    kIOPMNoErr                  = 0,
-
-    // Returned by driver's setPowerState(), powerStateWillChangeTo(),
-    // powerStateDidChangeTo(), or acknowledgeSetPowerState() to
-    // implicitly acknowledge power change upon function return.
-    kIOPMAckImplied             = 0,
-
-    // Deprecated
-    kIOPMWillAckLater           = 1,
-
-    // Returned by requestPowerDomainState() to indicate
-    // unrecognized specification parameter.
-    kIOPMBadSpecification       = 4,
-
-    // Returned by requestPowerDomainState() to indicate
-    // no power state matches search specification.
-    kIOPMNoSuchState            = 5,
-
-    // Deprecated
-    kIOPMCannotRaisePower       = 6,
-
-    // Deprecated
-    kIOPMParameterError         = 7,
-
-    // Returned when power management state is accessed
-    // before driver has called PMinit().
-    kIOPMNotYetInitialized      = 8,
-
-    // And the old constants; deprecated
-    IOPMNoErr = kIOPMNoErr,
-    IOPMAckImplied = kIOPMAckImplied, 
-    IOPMWillAckLater = kIOPMWillAckLater,
-    IOPMBadSpecification = kIOPMBadSpecification,
-    IOPMNoSuchState = kIOPMNoSuchState,
-    IOPMCannotRaisePower = kIOPMCannotRaisePower,
-    IOPMParameterError = kIOPMParameterError,
-    IOPMNotYetInitialized = kIOPMNotYetInitialized
-};
-
-
-// IOPMPowerSource class descriptive strings
-// Power Source state is published as properties to the IORegistry under these 
-// keys.
-#define kIOPMPSExternalConnectedKey                 "ExternalConnected"
-#define kIOPMPSExternalChargeCapableKey             "ExternalChargeCapable"
-#define kIOPMPSBatteryInstalledKey                  "BatteryInstalled"
-#define kIOPMPSIsChargingKey                        "IsCharging"
-#define kIOPMFullyChargedKey                        "FullyCharged"
-#define kIOPMPSAtWarnLevelKey                       "AtWarnLevel"
-#define kIOPMPSAtCriticalLevelKey                   "AtCriticalLevel"
-#define kIOPMPSCurrentCapacityKey                   "CurrentCapacity"
-#define kIOPMPSMaxCapacityKey                       "MaxCapacity"
-#define kIOPMPSDesignCapacityKey                    "DesignCapacity"
-#define kIOPMPSTimeRemainingKey                     "TimeRemaining"
-#define kIOPMPSAmperageKey                          "Amperage"
-#define kIOPMPSVoltageKey                           "Voltage"
-#define kIOPMPSCycleCountKey                        "CycleCount"
-#define kIOPMPSMaxErrKey                            "MaxErr"
-#define kIOPMPSAdapterInfoKey                       "AdapterInfo"
-#define kIOPMPSLocationKey                          "Location"
-#define kIOPMPSErrorConditionKey                    "ErrorCondition"
-#define kIOPMPSManufacturerKey                      "Manufacturer"
-#define kIOPMPSManufactureDateKey                   "ManufactureDate"
-#define kIOPMPSModelKey                             "Model"
-#define kIOPMPSSerialKey                            "Serial"
-#define kIOPMDeviceNameKey                          "DeviceName"
-#define kIOPMPSLegacyBatteryInfoKey                 "LegacyBatteryInfo"
-#define kIOPMPSBatteryHealthKey                     "BatteryHealth"
-#define kIOPMPSHealthConfidenceKey                  "HealthConfidence"
-#define kIOPMPSCapacityEstimatedKey	                "CapacityEstimated"
-#define kIOPMPSBatteryChargeStatusKey               "ChargeStatus"
-#define kIOPMPSBatteryTemperatureKey                "Temperature"
-#define kIOPMPSAdapterDetailsKey		    "AdapterDetails"
-#define kIOPMPSChargerConfigurationKey		    "ChargerConfiguration"
-
-// kIOPMPSBatteryChargeStatusKey may have one of the following values, or may have
-// no value. If kIOPMBatteryChargeStatusKey has a NULL value (or no value) associated with it
-// then charge is proceeding normally. If one of these battery charge status reasons is listed,
-// then the charge may have been interrupted.
-#define kIOPMBatteryChargeStatusTooHot              "HighTemperature"
-#define kIOPMBatteryChargeStatusTooCold             "LowTemperature"
-#define kIOPMBatteryChargeStatusTooHotOrCold	    "HighOrLowTemperature"
-#define kIOPMBatteryChargeStatusGradient            "BatteryTemperatureGradient"
-
-// Definitions for battery location, in case of multiple batteries.
-// A location of 0 is unspecified
-// Location is undefined for single battery systems
-enum {
-    kIOPMPSLocationLeft = 1001,
-    kIOPMPSLocationRight = 1002
-};
-
-// Battery quality health types, specified by BatteryHealth and HealthConfidence
-// properties in an IOPMPowerSource battery kext.
-enum {
-    kIOPMUndefinedValue = 0,
-    kIOPMPoorValue      = 1,
-    kIOPMFairValue      = 2,
-    kIOPMGoodValue      = 3
-};
-
-// Keys for kIOPMPSAdapterDetailsKey dictionary
-#define kIOPMPSAdapterDetailsIDKey		    "AdapterID"
-#define kIOPMPSAdapterDetailsWattsKey		    "Watts"
-#define kIOPMPSAdapterDetailsRevisionKey	    "AdapterRevision"
-#define kIOPMPSAdapterDetailsSerialNumberKey	    "SerialNumber"
-#define kIOPMPSAdapterDetailsFamilyKey		    "FamilyCode"
-#define kIOPMPSAdapterDetailsAmperageKey	    "Amperage"
-#define kIOPMPSAdapterDetailsDescriptionKey	    "Description"
-#define kIOPMPSAdapterDetailsPMUConfigurationKey    "PMUConfiguration"
-
-// Battery's time remaining estimate is invalid this long (seconds) after a wake
-#define kIOPMPSInvalidWakeSecondsKey           "BatteryInvalidWakeSeconds"
-
-// Battery must wait this long (seconds) after being completely charged before
-// the battery is settled.
-#define kIOPMPSPostChargeWaitSecondsKey        "PostChargeWaitSeconds"
-
-// Battery must wait this long (seconds) after being completely discharged 
-// before the battery is settled.
-#define kIOPMPSPostDishargeWaitSecondsKey      "PostDischargeWaitSeconds"
-
-
-/* CPU Power Management status keys
- * Pass as arguments to IOPMrootDomain::systemPowerEventOccurred
- * Or as arguments to IOPMSystemPowerEventOccurred()
- * Or to decode the dictionary obtained from IOPMCopyCPUPowerStatus()
- * These keys reflect restrictions placed on the CPU by the system
- * to bring the CPU's power consumption within allowable thermal and 
- * power constraints.
- */
-
-
-/* kIOPMGraphicsPowerLimitsKey
- *   The key representing the dictionary of graphics power limits.
- *   The dictionary contains the other kIOPMCPUPower keys & their associated
- *   values (e.g. Speed limit, Processor Count, and Schedule limits).
- */
-#define kIOPMGraphicsPowerLimitsKey                     "Graphics_Power_Limits"
-
-/* kIOPMGraphicsPowerLimitPerformanceKey
- *   The key representing the percent of overall performance made available
- *   by the graphics chip as a percentage (integer 0 - 100).
- */
-#define kIOPMGraphicsPowerLimitPerformanceKey           "Graphics_Power_Performance"
-
-
-
-/* kIOPMCPUPowerLimitsKey
- *   The key representing the dictionary of CPU Power Limits.
- *   The dictionary contains the other kIOPMCPUPower keys & their associated
- *   values (e.g. Speed limit, Processor Count, and Schedule limits).
- */
-#define kIOPMCPUPowerLimitsKey                          "CPU_Power_Limits"
-
-/* kIOPMCPUPowerLimitProcessorSpeedKey defines the speed & voltage limits placed 
- *   on the CPU.
- *   Represented as a percentage (0-100) of maximum CPU speed.
- */
-#define kIOPMCPUPowerLimitProcessorSpeedKey             "CPU_Speed_Limit"
-
-/* kIOPMCPUPowerLimitProcessorCountKey reflects how many, if any, CPUs have been
- *   taken offline. Represented as an integer number of CPUs (0 - Max CPUs).
- */
-#define kIOPMCPUPowerLimitProcessorCountKey             "CPU_Available_CPUs"
-
-/* kIOPMCPUPowerLimitSchedulerTimeKey represents the percentage (0-100) of CPU time 
- *   available. 100% at normal operation. The OS may limit this time for a percentage
- *   less than 100%.
- */
-#define kIOPMCPUPowerLimitSchedulerTimeKey              "CPU_Scheduler_Limit"
-
-
-/* Thermal Level Warning Key
- * Indicates the thermal constraints placed on the system. This value may 
- * cause clients to action to consume fewer system resources.
- * The value associated with this warning is defined by the platform.
- */
-#define kIOPMThermalLevelWarningKey                     "Thermal_Level_Warning"
-
-/* Thermal Warning Level values
- *      kIOPMThermalWarningLevelNormal - under normal operating conditions
- *      kIOPMThermalWarningLevelDanger - thermal pressure may cause system slowdown
- *      kIOPMThermalWarningLevelCrisis - thermal conditions may cause imminent shutdown
- *
- * The platform may define additional thermal levels if necessary.
- */
-enum {
-  kIOPMThermalWarningLevelNormal    = 0,
-  kIOPMThermalWarningLevelDanger    = 5,
-  kIOPMThermalWarningLevelCrisis    = 10
-};
-
-
-// PM Settings Controller setting types
-// Settings types used primarily with:
-//      IOPMrootDomain::registerPMSettingController
-// The values are identical to the similarly named keys for use in user space
-// PM settings work. Those keys are defined in IOPMLibPrivate.h.
-#define kIOPMSettingWakeOnRingKey                   "Wake On Modem Ring"
-#define kIOPMSettingRestartOnPowerLossKey           "Automatic Restart On Power Loss"
-#define kIOPMSettingWakeOnACChangeKey               "Wake On AC Change"
-#define kIOPMSettingSleepOnPowerButtonKey           "Sleep On Power Button"
-#define kIOPMSettingWakeOnClamshellKey              "Wake On Clamshell Open"
-#define kIOPMSettingReduceBrightnessKey             "ReduceBrightness"
-#define kIOPMSettingDisplaySleepUsesDimKey          "Display Sleep Uses Dim"
-#define kIOPMSettingTimeZoneOffsetKey               "TimeZoneOffsetSeconds"
-#define kIOPMSettingMobileMotionModuleKey           "MobileMotionModule"
-#define kIOPMSettingGraphicsSwitchKey               "GPUSwitch"
-
-// Setting controlling drivers can register to receive scheduled wake data
-// Either in "CF seconds" type, or structured calendar data in a formatted
-// IOPMCalendarStruct defined below.
-#define kIOPMSettingAutoWakeSecondsKey              "wake"
-#define kIOPMSettingAutoWakeCalendarKey             "WakeByCalendarDate"
-#define kIOPMSettingAutoPowerSecondsKey             "poweron"
-#define kIOPMSettingAutoPowerCalendarKey            "PowerByCalendarDate"
-
-// Debug seconds auto wake
-// Used by sleep cycling debug tools
-#define kIOPMSettingDebugWakeRelativeKey            "WakeRelativeToSleep"
-#define kIOPMSettingDebugPowerRelativeKey           "PowerRelativeToShutdown"
-
-// Maintenance wake calendar.
-#define kIOPMSettingMaintenanceWakeCalendarKey      "MaintenanceWakeCalendarDate"
-
-struct IOPMCalendarStruct {
-    UInt32      year;
-    UInt8       month;
-    UInt8       day;
-    UInt8       hour;
-    UInt8       minute;
-    UInt8       second;
-};
-typedef struct IOPMCalendarStruct IOPMCalendarStruct;
-
-// SetAggressiveness types
-enum {
-    kPMGeneralAggressiveness = 0,
-    kPMMinutesToDim,
-    kPMMinutesToSpinDown,
-    kPMMinutesToSleep,
-    kPMEthernetWakeOnLANSettings,
-    kPMSetProcessorSpeed,
-    kPMPowerSource,
-    kPMMotionSensor,
-    kPMLastAggressivenessType
-};
-#define kMaxType (kPMLastAggressivenessType-1)
-
-// SetAggressiveness values for the kPMPowerSource aggressiveness type
-enum {
-    kIOPMInternalPower = 1,
-    kIOPMExternalPower
-};
-
-#define kIOREMSleepEnabledKey               "REMSleepEnabled"
-
-// Strings for deciphering the dictionary returned from IOPMCopyBatteryInfo
-#define kIOBatteryInfoKey                   "IOBatteryInfo"
-#define kIOBatteryCurrentChargeKey          "Current"
-#define kIOBatteryCapacityKey               "Capacity"
-#define kIOBatteryFlagsKey                  "Flags"
-#define kIOBatteryVoltageKey                "Voltage"
-#define kIOBatteryAmperageKey               "Amperage"
-#define kIOBatteryCycleCountKey             "Cycle Count"
-
-enum {
-    kIOBatteryInstalled         = (1 << 2),
-    kIOBatteryCharge            = (1 << 1),
-    kIOBatteryChargerConnect    = (1 << 0)
-};
-
-// Private power management message indicating battery data has changed
-// Indicates new data resides in the IORegistry
-#define kIOPMMessageBatteryStatusHasChanged         iokit_family_msg(sub_iokit_pmu, 0x100)
-
-// Apple private Legacy messages for re-routing AutoWake and AutoPower messages to the PMU
-// through newer user space IOPMSchedulePowerEvent API
-#define kIOPMUMessageLegacyAutoWake                 iokit_family_msg(sub_iokit_pmu, 0x200)
-#define kIOPMUMessageLegacyAutoPower                iokit_family_msg(sub_iokit_pmu, 0x210)
-
-// For use with IOPMPowerSource bFlags
-#define IOPM_POWER_SOURCE_REV   2
-enum {
-  kIOPMACInstalled      = kIOBatteryChargerConnect,
-  kIOPMBatteryCharging  = kIOBatteryCharge,
-  kIOPMBatteryInstalled = kIOBatteryInstalled,
-  kIOPMUPSInstalled     = (1<<3),
-  kIOPMBatteryAtWarn    = (1<<4),
-  kIOPMBatteryDepleted  = (1<<5),
-  kIOPMACnoChargeCapability = (1<<6),     // AC adapter cannot charge battery
-  kIOPMRawLowBattery    = (1<<7),         // used only by  Platform Expert
-  kIOPMForceLowSpeed    = (1<<8),         // set by Platfm Expert, chk'd by Pwr Plugin
-  kIOPMClosedClamshell  = (1<<9),         // set by PMU - reflects state of the clamshell
-  kIOPMClamshellStateOnWake = (1<<10)     // used only by Platform Expert
-};
-
-// **********************************************
-// Internal power management data structures
-// **********************************************
-
-#if KERNEL && __cplusplus
-class IOService;
-
-enum {
-    kIOPowerEmergencyLevel = 1000
-};
-
-enum {
-    kIOPMSubclassPolicy,
-    kIOPMSuperclassPolicy1
-};
-
-struct stateChangeNote {
-    IOPMPowerFlags    stateFlags;
-    unsigned long    stateNum;
-    void *         powerRef;
-};
-typedef struct stateChangeNote stateChangeNote;
-
-struct IOPowerStateChangeNotification {
-    void *        powerRef;
-    unsigned long    returnValue;
-    unsigned long    stateNumber;
-    IOPMPowerFlags    stateFlags;
-};
-typedef struct IOPowerStateChangeNotification IOPowerStateChangeNotification;
-typedef IOPowerStateChangeNotification sleepWakeNote;
-#endif /* KERNEL && __cplusplus */
-
-/*! @struct IOPMSystemCapabilityChangeParameters
-    @abstract A structure describing a system capability change.
-    @discussion A system capability change is a system level transition from a set
-        of system capabilities to a new set of system capabilities. Power management
-        sends a <code>kIOMessageSystemCapabilityChange</code> message and provides
-        this structure as the message data (by reference) to
-        <code>gIOPriorityPowerStateInterest</code> clients when system capability
-        changes.
-    @field notifyRef An identifier for this message notification. Clients with pending
-        I/O can signal completion by calling <code>allowPowerChange()</code> with this
-        value as the argument. Clients that are able to process the notification
-        synchronously should ignore this field.
-    @field maxWaitForReply A return value to the caller indicating the maximum time in
-        microseconds to wait for the <code>allowPowerChange()</code> call. The default
-        value is zero, which indicates the client processing has finished, and power
-        management should not wait for an <code>allowPowerChange()</code> call.
-    @field changeFlags Flags will be set to indicate whether the notification precedes
-        the capability change (<code>kIOPMSystemCapabilityWillChange</code>), or after
-        the capability change has occurred (<code>kIOPMSystemCapabilityDidChange</code>).
-    @field __reserved1 Set to zero.
-    @field fromCapabilities The system capabilities at the start of the transition.
-    @field toCapabilities The system capabilities at the end of the transition.
-    @field __reserved2 Set to zero.
- */
-struct IOPMSystemCapabilityChangeParameters {
-    uint32_t    notifyRef;
-    uint32_t    maxWaitForReply;
-    uint32_t    changeFlags;
-    uint32_t    __reserved1;
-    uint32_t    fromCapabilities;
-    uint32_t    toCapabilities;
-    uint32_t    __reserved2[4];
-};
-
-/*! @enum IOPMSystemCapabilityChangeFlags
-    @constant kIOPMSystemCapabilityWillChange Indicates the system capability will change.
-    @constant kIOPMSystemCapabilityDidChange Indicates the system capability has changed.
-*/
-enum {
-    kIOPMSystemCapabilityWillChange = 0x01,
-    kIOPMSystemCapabilityDidChange  = 0x02
-};
-
-enum {
-    kIOPMSystemCapabilityCPU        = 0x01,
-    kIOPMSystemCapabilityGraphics   = 0x02,
-    kIOPMSystemCapabilityAudio      = 0x04,
-    kIOPMSystemCapabilityNetwork    = 0x08
-};
-
-#endif /* ! _IOKIT_IOPM_H */
diff --git a/external/ios-headers/IOKit/pwr_mgt/IOPMKeys.h b/external/ios-headers/IOKit/pwr_mgt/IOPMKeys.h
deleted file mode 100755
index 906c128..0000000
--- a/external/ios-headers/IOKit/pwr_mgt/IOPMKeys.h
+++ /dev/null
@@ -1,100 +0,0 @@
-/*
- * Copyright (c) 2006 Apple Computer, Inc. All rights reserved.
- *
- * @APPLE_LICENSE_HEADER_START@
- * 
- * This file contains Original Code and/or Modifications of Original Code
- * as defined in and that are subject to the Apple Public Source License
- * Version 2.0 (the 'License'). You may not use this file except in
- * compliance with the License. Please obtain a copy of the License at
- * http://www.opensource.apple.com/apsl/ and read it before using this
- * file.
- * 
- * The Original Code and all software distributed under the License are
- * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
- * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
- * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
- * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
- * Please see the License for the specific language governing rights and
- * limitations under the License.
- * 
- * @APPLE_LICENSE_HEADER_END@
- */
-
-/*!
-    @header IOPMKeys.h
-    
-    IOPMKeys.h defines C strings for use accessing power management data.
-    Note that all of these C strings must be converted to CFStrings before use. You can wrap
-    them with the CFSTR() macro, or create a CFStringRef (that you must later CFRelease()) using CFStringCreateWithCString()
- */
- 
-#ifndef _IOPMKEYS_H_
-#define _IOPMKEYS_H_
- 
-/*
- * Types of power event
- * These are potential arguments to IOPMSchedulePowerEvent().
- * These are all potential values of the kIOPMPowerEventTypeKey in the CFDictionaries
- * returned by IOPMCopyScheduledPowerEvents().
- */
-/*!
-    @define kIOPMAutoWake 
-    @abstract Value for scheduled wake from sleep.
-*/
-#define kIOPMAutoWake                                   "wake"
-
-/*!
-    @define kIOPMAutoPowerOn 
-    @abstract Value for scheduled power on from off state.
-*/
-#define kIOPMAutoPowerOn                                "poweron"
-
-/*!
-    @define kIOPMAutoWakeOrPowerOn 
-    @abstract Value for scheduled wake from sleep, or power on. The system will either wake OR
-        power on, whichever is necessary.
-*/
-
-#define kIOPMAutoWakeOrPowerOn                          "wakepoweron"
-/*!
-    @define kIOPMAutoSleep
-    @abstract Value for scheduled sleep.
-*/
-
-#define kIOPMAutoSleep                                   "sleep"
-/*!
-    @define kIOPMAutoShutdown 
-    @abstract Value for scheduled shutdown.
-*/
-
-#define kIOPMAutoShutdown                               "shutdown"
-/*!
-    @define kIOPMAutoRestart 
-    @abstract Value for scheduled restart.
-*/
-
-#define kIOPMAutoRestart                                "restart"
-
-/*
- * Keys for evaluating the CFDictionaries returned by IOPMCopyScheduledPowerEvents()
- */
-/*!
-    @define kIOPMPowerEventTimeKey 
-    @abstract Key for the time of the scheduled power event. Value is a CFDateRef.
-*/
-#define kIOPMPowerEventTimeKey                          "time"
-
-/*!
-    @define kIOPMPowerEventAppNameKey 
-    @abstract Key for the CFBundleIdentifier of the app that scheduled the power event. Value is a CFStringRef.
-*/
-#define kIOPMPowerEventAppNameKey                       "scheduledby"
-
-/*!
-    @define kIOPMPowerEventTypeKey 
-    @abstract Key for the type of power event. Value is a CFStringRef, with the c-string value of one of the "kIOPMAuto" strings.
-*/
-#define kIOPMPowerEventTypeKey                          "eventtype"
-
-#endif
diff --git a/external/ios-headers/IOKit/pwr_mgt/IOPMLib.h b/external/ios-headers/IOKit/pwr_mgt/IOPMLib.h
deleted file mode 100755
index 06a15f8..0000000
--- a/external/ios-headers/IOKit/pwr_mgt/IOPMLib.h
+++ /dev/null
@@ -1,1021 +0,0 @@
-/*
- * Copyright (c) 1998-2005 Apple Computer, Inc. All rights reserved.
- *
- * @APPLE_LICENSE_HEADER_START@
- * 
- * This file contains Original Code and/or Modifications of Original Code
- * as defined in and that are subject to the Apple Public Source License
- * Version 2.0 (the 'License'). You may not use this file except in
- * compliance with the License. Please obtain a copy of the License at
- * http://www.opensource.apple.com/apsl/ and read it before using this
- * file.
- * 
- * The Original Code and all software distributed under the License are
- * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
- * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
- * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
- * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
- * Please see the License for the specific language governing rights and
- * limitations under the License.
- * 
- * @APPLE_LICENSE_HEADER_END@
- */
-
-#include <CoreFoundation/CFArray.h>
-#include <IOKit/IOKitLib.h>
-#include <IOKit/pwr_mgt/IOPMLibDefs.h>
-#include <IOKit/pwr_mgt/IOPMKeys.h>
-#include <Availability.h>
-
-#ifndef _IOKIT_PWRMGT_IOPMLIB_
-#define _IOKIT_PWRMGT_IOPMLIB_
-
-#ifdef __cplusplus
-extern "C" {
-#endif
-
-/*!
-@header IOPMLib.h
-    IOPMLib provides access to common power management facilities, like initiating 
-    system sleep, getting current idle timer values, registering for sleep/wake notifications, 
-    and preventing system sleep.
-*/
-
-/*! @function IOPMFindPowerManagement
-    @abstract Finds the Root Power Domain IOService.
-    @param master_device_port  Just pass in MACH_PORT_NULL for master device port.
-    @result Returns a io_connect_t handle on the root domain. Must be released with IOServiceClose() when done.
- */
-io_connect_t IOPMFindPowerManagement( mach_port_t master_device_port )
-                            AVAILABLE_MAC_OS_X_VERSION_10_0_AND_LATER;
-    
-/*! @function IOPMSetAggressiveness
-    @abstract Sets one of the aggressiveness factors in IOKit Power Management.
-    @param fb  Representation of the Root Power Domain from IOPMFindPowerManagement.
-    @param type Specifies which aggressiveness factor is being set.
-    @param aggressiveness New value of the aggressiveness factor.
-    @result Returns kIOReturnSuccess or an error condition if request failed.
-*/
-IOReturn IOPMSetAggressiveness (io_connect_t fb, unsigned long type, unsigned long aggressiveness )
-                            AVAILABLE_MAC_OS_X_VERSION_10_0_AND_LATER;
-                            
-/*! @function IOPMGetAggressiveness
-    @abstract Retrieves the current value of one of the aggressiveness factors in IOKit Power Management.
-    @param fb  Representation of the Root Power Domain from IOPMFindPowerManagement.
-    @param type Specifies which aggressiveness factor is being retrieved.
-    @param aggressiveness Points to where to store the retrieved value of the aggressiveness factor.
-    @result Returns kIOReturnSuccess or an error condition if request failed. 
- */
-IOReturn IOPMGetAggressiveness ( io_connect_t fb, unsigned long type, unsigned long * aggressiveness )
-                            AVAILABLE_MAC_OS_X_VERSION_10_0_AND_LATER;
-
-/*! @function IOPMSleepEnabled
-    @abstract Tells whether the system supports full sleep, or just doze
-    @result Returns true if the system supports sleep, false if some hardware prevents full sleep.
- */
-boolean_t IOPMSleepEnabled ( void ) AVAILABLE_MAC_OS_X_VERSION_10_0_AND_LATER;
-
-/*! @function IOPMSleepSystem
-    @abstract Request that the system initiate sleep.
-    @discussion For security purposes, caller must be root or the console user.
-    @param fb  Port used to communicate to the kernel,  from IOPMFindPowerManagement.
-    @result Returns kIOReturnSuccess or an error condition if request failed.
- */
-IOReturn IOPMSleepSystem ( io_connect_t fb ) AVAILABLE_MAC_OS_X_VERSION_10_0_AND_LATER;
-
-/*! @function IOPMCopyBatteryInfo
-    @abstract Request raw battery data from the system. 
-    @discussion WARNING! IOPMCoyBatteryInfo is unsupported on ALL Intel CPU based systems. For PPC CPU based systems, it remains not recommended. For almost all purposes, developers should use the richer IOPowerSources API (with change notifications) instead of using IOPMCopyBatteryInfo. Keys to decipher IOPMCopyBatteryInfo's return CFArray exist in IOPM.h.
-    @param masterPort The master port obtained from IOMasterPort(). Just pass MACH_PORT_NULL.
-    @param info A CFArray of CFDictionaries containing raw battery data. 
-    @result Returns kIOReturnSuccess or an error condition if request failed.
- */
-IOReturn IOPMCopyBatteryInfo( mach_port_t masterPort, CFArrayRef * info )
-                            AVAILABLE_MAC_OS_X_VERSION_10_0_AND_LATER;
-
-
-
-/*!
-    @functiongroup Notifications
-*/    
-
-
-/*! @function IORegisterApp
-    @abstract Connects the caller to an IOService for the purpose of receiving power state change notifications for the device controlled by the IOService.
-    @discussion IORegisterApp requires that the IOService of interest implement an IOUserClient. In addition, that IOUserClient must implement the allowPowerChange and cancelPowerChange methods defined in IOPMLibDefs.h. If you're interested in receiving power state notifications from a device without an IOUserClient, try using IOServiceAddInterestNotification with interest type gIOGeneralInterest instead.
-    @param refcon Data returned on power state change notifications and not used by the kernel.
-    @param theDriver  Representation of the IOService, probably from IOServiceGetMatchingService.
-    @param thePortRef Pointer to a port on which the caller will receive power state change notifications. The port is allocated by the calling application.
-    @param callback  A c-function which is called during the notification.
-    @param notifier  Pointer to a notifier which caller must keep and pass to subsequent call to IODeregisterApp.
-    @result Returns a io_connect_t session for the IOService or MACH_PORT_NULL if request failed. Caller must close return value via IOServiceClose() after calling IODeregisterApp on the notifier argument.
-*/
-io_connect_t IORegisterApp( void * refcon,
-                            io_service_t theDriver,
-                            IONotificationPortRef * thePortRef,
-                            IOServiceInterestCallback callback,
-                            io_object_t * notifier )
-                            AVAILABLE_MAC_OS_X_VERSION_10_0_AND_LATER;
-
-/*! @function       IORegisterForSystemPower
-    @abstract       Connects the caller to the Root Power Domain IOService for the purpose of receiving sleep & wake notifications for the system.
-				    Does not provide system shutdown and restart notifications.
-    @discussion     Provides sleep/wake notifications to applications. Requires that applications acknowledge
-                    some, but not all notifications. Register for sleep/wake notifications will deliver these messages
-                    over the sleep/wake lifecycle:
-
-            - kIOMessageSystemWillSleep is delivered at the point the system is initiating a 
-                non-abortable sleep.
-                Callers MUST acknowledge this event by calling @link IOAllowPowerChange @/link.
-                If a caller does not acknowledge the sleep notification, the sleep will continue anyway after
-                a 30 second timeout (resulting in bad user experience). 
-                Delivered before any hardware is powered off.
-
-            - kIOMessageSystemWillPowerOn is delivered at early wakeup time, before most hardware has been
-                powered on. Be aware that any attempts to access disk, network, the display, etc. may result
-                in errors or blocking your process until those resources become available.
-                Caller must NOT acknowledge kIOMessageSystemWillPowerOn; the caller must simply return from its handler.
-            
-            - kIOMessageSystemHasPoweredOn is delivered at wakeup completion time, after all device drivers and
-                hardware have handled the wakeup event. Expect this event 1-5 or more seconds after initiating
-                system wakeup.
-                Caller must NOT acknowledge kIOMessageSystemHasPoweredOn; the caller must simply return from its handler.
-
-            - kIOMessageCanSystemSleep indicates the system is pondering an idle sleep, but gives apps the
-                chance to veto that sleep attempt. 
-                Caller must acknowledge kIOMessageCanSystemSleep by calling @link IOAllowPowerChange @/link
-                or @link IOCancelPowerChange @/link. Calling IOAllowPowerChange will not veto the sleep; any
-                app that calls IOCancelPowerChange will veto the idle sleep. A kIOMessageCanSystemSleep 
-                notification will be followed up to 30 seconds later by a kIOMessageSystemWillSleep message.
-                or a kIOMessageSystemWillNotSleep message.
-
-            - kIOMessageSystemWillNotSleep is delivered when some app client has vetoed an idle sleep
-                request. kIOMessageSystemWillNotSleep may follow a kIOMessageCanSystemSleep notification,
-                but will not otherwise be sent.
-                Caller must NOT acknowledge kIOMessageSystemWillNotSleep; the caller must simply return from its handler.
-                
-        To deregister for sleep/wake notifications, the caller must make two calls, in this order:
-            - Call IODeregisterForSystemPower with the 'notifier' argument returned here.
-            - Then call IONotificationPortDestroy passing the 'thePortRef' argument
-                returned here.
-  
-    @param refcon       Caller may provide data to receive s an argument to 'callback' on power state changes.
-    @param thePortRef   On return, thePortRef is a pointer to an IONotificationPortRef, which will deliver the power notifications. 
-                        The port is allocated by this function and must be later released by the caller (after calling <code>@link IODeregisterForSystemPower @/link</code>). 
-                        The caller should also enable IONotificationPortRef by calling <code>@link IONotificationPortGetRunLoopSource @/link</code>, or 
-                        <code>@link IONotificationPortGetMachPort @/link</code>, or <code>@link IONotificationPortSetDispatchQueue @/link</code>.
-    @param callback     A c-function which is called during the notification.
-    @param notifier     On success, returns a pointer to a unique notifier which caller must keep and pass to a subsequent call to IODeregisterForSystemPower.
-    @result             Returns a io_connect_t session for the IOPMrootDomain or MACH_PORT_NULL if request failed. 
-                        Caller must close return value via IOServiceClose() after calling IODeregisterForSystemPower on the notifier argument.
- */
-io_connect_t IORegisterForSystemPower ( void * refcon,
-                                        IONotificationPortRef * thePortRef,
-                                        IOServiceInterestCallback callback,
-                                        io_object_t * notifier )
-                                        AVAILABLE_MAC_OS_X_VERSION_10_0_AND_LATER;                                        
-/*! @function           IODeregisterApp
-    @abstract           Disconnects the caller from an IOService after receiving power state change notifications from the IOService. (Caller must also release IORegisterApp's return io_connect_t and returned IONotificationPortRef for complete clean-up).
-    @param notifier     An object from IORegisterApp.
-    @result             Returns kIOReturnSuccess or an error condition if request failed.
- */
-IOReturn IODeregisterApp ( io_object_t * notifier ) AVAILABLE_MAC_OS_X_VERSION_10_0_AND_LATER;
-
-/*! @function           IODeregisterForSystemPower
-    @abstract           Disconnects the caller from the Root Power Domain IOService after receiving system power state change notifications. (Caller must also destroy the IONotificationPortRef returned from IORegisterForSystemPower.)
-    @param notifier     The object returned from IORegisterForSystemPower.
-    @result             Returns kIOReturnSuccess or an error condition if request failed.
-*/
-IOReturn IODeregisterForSystemPower ( io_object_t * notifier )
-                            AVAILABLE_MAC_OS_X_VERSION_10_0_AND_LATER;
-                            
-/*! @function           IOAllowPowerChange
-    @abstract           The caller acknowledges notification of a power state change on a device it has registered for notifications for via IORegisterForSystemPower or IORegisterApp.
-    @discussion         Must be used when handling kIOMessageCanSystemSleep and kIOMessageSystemWillSleep messages from IOPMrootDomain system power. The caller should not call IOAllowPowerChange in response to any messages 
-                        except for these two.
-    @param kernelPort   Port used to communicate to the kernel,  from IORegisterApp or IORegisterForSystemPower.
-    @param notificationID A copy of the notification ID which came as part of the power state change notification being acknowledged.
-    @result             Returns kIOReturnSuccess or an error condition if request failed.
-*/
-IOReturn IOAllowPowerChange ( io_connect_t kernelPort, long notificationID )
-                            AVAILABLE_MAC_OS_X_VERSION_10_0_AND_LATER;
-
-/*! @function IOCancelPowerChange
-    @abstract The caller denies an idle system sleep power state change.
-    @discussion Should only called in response to kIOMessageCanSystemSleep messages from IOPMrootDomain. IOCancelPowerChange has no meaning for responding to kIOMessageSystemWillSleep (which is non-abortable) or any other messages. 
-    
-    When an app responds to a kIOMessageCanSystemSleep message by calling IOCancelPowerChange, the app
-    vetoes the idle sleep request. The system will stay awake. 
-    The idle timer will elapse again after a period of inactivity, and the system will
-    send out the same kIOMessageCanSystemSleep message, and interested applications will respond gain.
- 
-    @param kernelPort  Port used to communicate to the kernel,  from IORegisterApp or IORegisterForSystemPower.
-    @param notificationID A copy of the notification ID which came as part of the power state change notification being acknowledged.
-    @result Returns kIOReturnSuccess or an error condition if request failed.
- */
-IOReturn IOCancelPowerChange ( io_connect_t kernelPort, long notificationID )
-                            AVAILABLE_MAC_OS_X_VERSION_10_0_AND_LATER;
-
-/*!
-    @functiongroup ScheduledEvents
-*/    
-
-/*! @function IOPMSchedulePowerEvent
-    @abstract Schedule the machine to wake from sleep, power on, go to sleep, or shutdown. 
-    @discussion This event will be added to the system's queue of power events and stored persistently on disk. The sleep and shutdown events present a graphical warning and allow a console user to cancel the event. Must be called as root.
-    @param time_to_wake Date and time that the system will power on/off.
-    @param my_id A CFStringRef identifying the calling app by CFBundleIdentifier. May be NULL.
-    @param type The type of power on you desire, either wake from sleep or power on. Choose from:
-                CFSTR(kIOPMAutoWake) == wake machine, 
-                CFSTR(kIOPMAutoPowerOn) == power on machine, 
-                CFSTR(kIOPMAutoWakeOrPowerOn) == wake or power on,
-                CFSTR(kIOPMAutoSleep) == sleep machine, 
-                CFSTR(kIOPMAutoShutdown) == power off machine,
-                CFSTR(kIOPMAutoRestart) == restart the machine.
-    @result kIOReturnSuccess on success, otherwise on failure
-*/
-IOReturn IOPMSchedulePowerEvent(CFDateRef time_to_wake, CFStringRef my_id, CFStringRef type);
-
-/*! @function IOPMCancelScheduledPowerEvent
-    @abstract Cancel a previously scheduled power event.
-    @discussion Arguments mirror those to IOPMSchedulePowerEvent. All arguments must match the original arguments from when the power on was scheduled. Must be called as root.
-    @param time_to_wake Cancel entry with this date and time.
-    @param my_id Cancel entry with this name.
-    @param type Type to cancel
-    @result kIOReturnSuccess on success, otherwise on failure
-*/
-IOReturn IOPMCancelScheduledPowerEvent(CFDateRef time_to_wake, CFStringRef my_id, CFStringRef type);
-
-/*! @function IOPMCopyScheduledPowerEvents
-    @abstract List all scheduled system power events
-    @discussion Returns a CFArray of CFDictionaries of power events. Each CFDictionary  contains keys for CFSTR(kIOPMPowerEventTimeKey), CFSTR(kIOPMPowerEventAppNameKey), and CFSTR(kIOPMPowerEventTypeKey).
-    @result A CFArray of CFDictionaries of power events. The CFArray must be released by the caller. NULL if there are no scheduled events.
-*/
-CFArrayRef IOPMCopyScheduledPowerEvents(void); 
-
-
-
-/*! 
- * @defineblock    IOPMAssertionDictionaryKeys
- *
- * @discussion      Keys into dictionaries describing assertions.
- */
-
-/*!
- * @define          kIOPMAssertionTimeoutKey
- * @abstract        kIOPMAssertionTimeoutKey specifies an outer bound, in seconds, that this assertion should be asserted.
- *
- * @discussion      If your application hangs, or is unable to complete its assertion task in a reasonable amount of time,
- *                  specifying a timeout allows PM to disable your assertion so the system can resume normal activity.
- *                  Once a timeout with the <code>@link kIOPMAssertionTimeoutActionTurnOff@/link</code> assertion fires, the level
- *                  will be set to <code>@link kIOPMAssertionTimeoutActionTurnOff@/link</code>. The assertion may be re-armed by calling
- *                  <code>@link IOPMAssertionSetLevel@/link</code>.
- *
- * 
- *                  This key may be specified in the dictionary passed to <code>@link IOPMAssertionCreateWithProperties@/link</code>.
- *
- *                  This key may be present in the dictionary returned from <code>@link IOPMAssertionCopyProperties@/link</code>.
- */
-#define kIOPMAssertionTimeoutKey                CFSTR("TimeoutSeconds")
-
-
-/*!
- * @define          kIOPMAssertionTimeoutActionKey
- *
- * @abstract        Specifies the action to take upon timeout expiration.
- *
- * @discussion      Specifying the timeout action only has meaning if you also specify an <code>@link kIOPMAssertionTimeoutKey@/link</code>
- *                  If the caller does not specify a timeout action, the default action is <code>@link kIOPMAssertionTimeoutActionTurnOff@/link</code>
- *
- *                  This key may be specified in the dictionary passed to <code>@link IOPMAssertionCreateWithProperties@/link</code>.
- *
- *                  This key may be present in the dictionary returned from <code>@link IOPMAssertionCopyProperties@/link</code>.
- */
-#define kIOPMAssertionTimeoutActionKey          CFSTR("TimeoutAction")
-
-/*!
- * @define          kIOPMAssertionTimeoutActionLog
- * 
- * @abstract        A potential value for <code>@link kIOPMAssertionTimeoutActionKey@/link</code>
- *
- * @discussion      When this timeout action is specified, PM will log the timeout event
- *                  but will not turn off or affect the setting of the assertion in any way.
- *
- */
-#define kIOPMAssertionTimeoutActionLog          CFSTR("TimeoutActionLog")
-
-/*! 
- * @define          kIOPMAssertionTimeoutActionTurnOff
- *
- * @discussion      When a timeout expires with this action, Power Management will log the timeout event,
- *                  and will set the assertion's level to <code>@link kIOPMAssertionLevelOff@/link</code>.
- */
-#define kIOPMAssertionTimeoutActionTurnOff      CFSTR("TimeoutActionTurnOff")
-
-/*! 
- * @define          kIOPMAssertionTimeoutActionRelease
- *
- * @discussion      When a timeout expires with this action, Power Management will log the timeout event,
- *                  and will release the assertion.
- */
-#define kIOPMAssertionTimeoutActionRelease      CFSTR("TimeoutActionRelease")
-    
-/*!
- * @define          kIOPMAssertionRetainCountKey
- *
- * @discussion      kIOPMAssertionRetainCountKey reflects the CoreFoundation-style retain count on this assertion.
- *                  Creating or retaining an assertion increments its retain count.
- *                  Release an assertion decrements its retain count.
- *                  When the retain count decrements to zero, the OS will destroy the object. 
- *
- * This key can be found in the dictionary returned from <code>@link IOPMAssertionCopyProperties@/link</code>.
- */
-#define kIOPMAssertionRetainCountKey            CFSTR("RetainCount")
-
-/*!
- * @define          kIOPMAssertionNameKey
- *
- * @abstract        The CFDictionary key for assertion name. Setting this key is required when you're creating an assertion.
- *
- * @discussion      <code>kIOPMAssertionNameKey</code> describes the the activity the assertion is protecting. The creator should
- *                  specify a CFString value for this key in the dictionary passed to <code>@link IOPMAssertionCreateWithProperties@/link</code>
- *
- *                  The assertion name is separate from the assertion type's behavior - specify a CFString 
- *                  like "Checking mail" or "Compiling" that describes the task that this assertion protects.
- *
- *                  The CFString you associate with this key does not have to be localizable (OS X will not attempt to localize it.)
- *
- *                  Describe your assertion as thoroughly as possible. See these other keys that can you can also set to add explanation
- *                  to an assertion:
- *                   OPTIONAL <code>@link kIOPMAssertionDetailsKey@/link</code>
- *                   OPTIONAL <code>@link kIOPMAssertionHumanReadableReasonKey @/link</code>
- *                   OPTIONAL <code>@link kIOPMAssertionLocalizationBundlePathKey@/link</code>
- */
-#define kIOPMAssertionNameKey                  CFSTR("AssertName")
-
-/*!
- * @define          kIOPMAssertionDetailsKey
- *
- * @abstract        You may provide extra, contextual information about an assertion for admins and for debugging
- *                  in this key. Setting this key in an assertion dictionary is optional.
- *
- @discussion        Please name your assertion something unique with <code>@link kIOPMAssertionNameKey@/link</code> first.
- *                  If you have more data to describe this assertion, put it here as a CFString.
- *                  
- *  '               EXAMPLE: OS X creates an assertion named <code>com.apple.powermanagement.tty</code> to prevent sleep for 
- *                  remote-logged in users. To identify the cause for these assertions, OS X sets <code>kIOPMAssertionDetailsKey</code>
- *                  to the CFString device path of the active remote session(s), e.g. "/dev/ttys000 /dev/ttys004"
- *
- *                  The CFString you associate with this key does not have to be localizable (OS X will not attempt to localize it.)
- *
- *                  Describe your assertion as thoroughly as possible. See these other keys that can you can set to add explanation
- *                  to an assertion:
- *                   REQUIRED <code>@link kIOPMAssertionNameKey@/link</code>
- *                   OPTIONAL <code>@link kIOPMAssertionHumanReadableReasonKey @/link</code>
- *                   OPTIONAL <code>@link kIOPMAssertionLocalizationBundlePathKey@/link</code>
- */
-#define kIOPMAssertionDetailsKey             CFSTR("Details")
-    
-/*!
- * @define          kIOPMAssertionHumanReadableReasonKey
- *
- * @abstract        Optional key that provides a localizable string for OS X to display PM Assertions in the GUI.
- *
- * @discussion      The caller should specify this string in <code>@link IOPMAssertionCreateWithProperties@/link</code>.
- *                  If present, OS X may display this string, localized to the user's language, to explain changes in system
- *                  behavior caused by the assertion.
- *                   
- *                  If set, the caller must also specify a bundle path for the key 
- *                      <code>@link kIOPMAssertionLocalizationBundlePathKey@/link</code>
- *                  The bundle at that path should contain localization info for the specified string.
- *
- *                  This key may be specified in the dictionary passed to <code>@link IOPMAssertionCreateWithProperties@/link</code>.
- *
- *                  This key may be present in the dictionary returned from <code>@link IOPMAssertionCopyProperties@/link</code>.
- *
- *                  Describe your assertion as thoroughly as possible. See these other keys that can you can set to add explanation
- *                  to an assertion:
- *                   REQUIRED <code>@link kIOPMAssertionNameKey@/link</code>
- *                   OPTIONAL <code>@link kIOPMAssertionDetailsKey @/link</code>
- */
-#define kIOPMAssertionHumanReadableReasonKey    CFSTR("HumanReadableReason")
-
-/*!
- * @define          kIOPMAssertionLocalizationBundlePathKey
- *
- * @abstract        Refers to a CFURL, as a CFString, identifying the path to the caller's 
- *                  bundle, which contains localization info. 
- *
- * @discussion      The bundle must contain localizations for
- *                  <code>@link kIOPMAssertionHumanReadableReasonKey@/link</code>
- *
- *                  This key may be specified in the dictionary passed to <code>@link IOPMAssertionCreateWithProperties@/link</code>.
- *
- *                  This key may be present in the dictionary returned from <code>@link IOPMAssertionCopyProperties@/link</code>.
- */
-#define kIOPMAssertionLocalizationBundlePathKey   CFSTR("BundlePath")
-
-/*!
- * @define          kIOPMAssertionFrameworkIDKey
- *
- * @abstract        Specify if the assertion creator is a framework. 
- *
- * @discussion      If the code that creates the assertion resides in a framework or library, the caller
- *                  should specify a CFBundleIdentifier, as a CFString, identifying that bundle here.
- *                  This info helps developers and administrators determine the source of an assertion.
- *
- *                  This key may be specified in the dictionary passed to <code>@link IOPMAssertionCreateWithProperties@/link</code>.
- *
- *                  This key may be present in the dictionary returned from <code>@link IOPMAssertionCopyProperties@/link</code>.
- */
-#define kIOPMAssertionFrameworkIDKey            CFSTR("FrameworkBundleID")
-
-/*!
- * @define          kIOPMAssertionPlugInIDKey
- *
- * @abstract        Specify if the assertion creator is a plugin.
- *
- * @discussion      If the code that creates the assertion resides in a plugin, the caller
- *                  should specify a CFBundleIdentifier, as a CFString, identifying the plugin's bundle here.
- *                  This info helps developers and administrators determine the source of an assertion.
- *
- *                  This key may be specified in the dictionary passed to <code>@link IOPMAssertionCreateWithProperties@/link</code>.
- *
- *                  This key may be present in the dictionary returned from <code>@link IOPMAssertionCopyProperties@/link</code>.
- */
-#define kIOPMAssertionPlugInIDKey               CFSTR("PlugInBundleID")
-
-/*!
- * @define          kIOPMAssertionTypeKey
- *
- * @abstract        The CFDictionary key for assertion type in an assertion info dictionary.
- *
- * @discussion      The value for this key will be a CFStringRef, with the value of the assertion
- *                  type specified at creation time.
- *                  Note that OS X may substitute a support assertion type string if the caller
- *                  specifies a deprecated assertion type; in that case the value for this key could
- *                  differ from the caller-provided assertion type.
- */
-#define kIOPMAssertionTypeKey                   CFSTR("AssertType")
-
-/*!
- * @define          kIOPMAssertionLevelKey
- *
- * @abstract        The CFDictionary key for assertion level in an assertion info dictionary.
- *
- * @discussion      The value for this key will be a CFNumber, kCFNumberIntType with value
- *                  <code>kIOPMAssertionLevelOff</code> or <code>kIOPMAssertionLevelOn</code>.
- *                  The level reflects the assertion's level set at creation, or adjusted via
- *                  <code>@link IOPMAssertionSetLevel@/link</code>
- */
-#define kIOPMAssertionLevelKey                  CFSTR("AssertLevel")
-
-/*! @/defineblock   IOPMAssertionDictionary Keys*/
-
-/*!
- * @typedef         IOPMAssertionID
- *
- * @abstract        Type for AssertionID arguments to <code>@link IOPMAssertionCreateWithProperties@/link</code> 
- *                  and <code>@link IOPMAssertionRelease@/link</code>
- */
-typedef uint32_t IOPMAssertionID;
-
-    
-
-/*! 
- * @defineblock     IOPMAssertionTypes 
- */
-     
-    
-/*!
- * @define          kIOPMAssertionTypePreventUserIdleSystemSleep
- *
- * @abstract        Prevents the system from sleeping automatically due to a lack of user activity.
- *
- * @discussion      When asserted and set to level <code>@link kIOPMAssertionLevelOn@/link</code>,
- *                  will prevent the system from sleeping due to a period of idle user activity.
- *
- *                  The display may dim and idle sleep while kIOPMAssertionTypePreventUserIdleSystemSleep is
- *                  enabled, but the system may not idle sleep.
- *
- *                  The system may still sleep for lid close, Apple menu, low battery, or other sleep reasons.
- *
- *                  This assertion does not put the system into Dark Wake.
- *
- *                  A caller publish the AssertionType in its assertion properties dictionary.
- *                  The AssertionType should be a key in the properties dictionary, with a value
- *                  of a CFNumber containing the kCFNumberIntegerType value 
- *                  <code>@link kIOPMAssertionLevelOff@/link</code> or <code>@link kIOPMAssertionLevelOn@/link</code>.
- */
-
-#define kIOPMAssertionTypePreventUserIdleSystemSleep    CFSTR("PreventUserIdleSystemSleep")
-
-
-/*!
- * @define          kIOPMAssertionTypePreventUserIdleDisplaySleep
- *
- * @abstract        Prevents the display from dimming automatically.
- *
- * @discussion      When asserted and set to level <code>@link kIOPMAssertionLevelOn@/link</code>,
- *                  will prevent the display from turning off due to a period of idle user activity.
- *                  Note that the display may still sleep from other reasons, like a user closing a
- *                  portable's lid or the machine sleeping.
- *
- *                  While the display is prevented from dimming, the system cannot go into idle sleep.
- *
- *                  This assertion does not put the system into Dark Wake.
- *
- *                  A caller publish the AssertionType in its assertion properties dictionary.
- *                  The AssertionType should be a key in the properties dictionary, with a value
- *                  of a CFNumber containing the kCFNumberIntegerType value 
- *                  <code>@link kIOPMAssertionLevelOff@/link</code> or <code>@link kIOPMAssertionLevelOn@/link</code>.
- */
-
-#define kIOPMAssertionTypePreventUserIdleDisplaySleep    CFSTR("PreventUserIdleDisplaySleep")
-
-
-/*!
- * @define          kIOPMAssertionTypePreventSystemSleep
- *
- * @abstract        Prevents the system from sleeping and allows the system to reside in Dark Wake
- *                  for an arbitrary length of time.
- *
- * @discussion      When asserted and set to level <code>@link kIOPMAssertionLevelOn@/link</code>,
- *                  the system will prefer to enter the Dark Wake state, or remain in Dark Wake if
- *                  already there, rather than go to sleep.
- *
- *                  Assertions are just suggestions to the OS, and the OS can only honor them
- *                  to the best of its ability. In the case of low power or a thermal emergency,
- *                  the system may sleep anyway despite the assertion.
- *
- *                  An assertion must publish the AssertionType in its assertion properties dictionary.
- *                  The AssertionType should be a key in the properties dictionary, with a value
- *                  of a CFNumber containing the kCFNumberIntegerType value 
- *                  <code>@link kIOPMAssertionLevelOff@/link</code> or <code>@link kIOPMAssertionLevelOn@/link</code>.
- */
-
-#define kIOPMAssertionTypePreventSystemSleep            CFSTR("PreventSystemSleep")
-
- 
-/*!
- * @define          kIOPMAssertionTypeNoIdleSleep
- *
- * @deprecated      Deprecated in 10.7; Please use assertion type <code>@link kIOPMAssertionTypePreventUserIdleSystemSleep@/link</code> instead.
- *
- * @abstract        Pass as the AssertionType argument to <code>@link IOPMAssertionCreate@/link</code>. 
- *                  The system will not idle sleep when enabled (display may sleep). Note that the system may sleep
- *                  for other reasons.
- *
- */
-#define kIOPMAssertionTypeNoIdleSleep                 CFSTR("NoIdleSleepAssertion")
-
-/*!
- * @define          kIOPMAssertionTypeNoDisplaySleep
- *
- * @deprecated      Deprecated in 10.7; Please use assertion type <code>@link kIOPMAssertionTypePreventUserIdleDisplaySleep@/link</code>.
- *
- * @abstract        Use as AssertionType argument to <code>@link IOPMAssertionCreate@/link</code>. 
- *                  The idle display will not sleep when enabled, and consequently the system will not idle sleep.
- */
-#define kIOPMAssertionTypeNoDisplaySleep              CFSTR("NoDisplaySleepAssertion")
-
-
-/*!
- * @enum            kIOPMNullAssertionID
- *
- * @abstract        This value represents a non-initialized assertion ID
- *
- * @constant        kIOPMNullAssertionID
- *                  This value represents a non-initialized assertion ID.
- *
- */
-enum {
-    kIOPMNullAssertionID = 0
-};
-
-/*!
- * @typedef         IOPMAssertionLevel
- *
- * @abstract        Type for AssertionLevel argument to IOPMAssertionCreate
- *
- * @discussion      Possible values for <code>IOPMAssertionLevel</code> are
- *                  <code>@link kIOPMAssertionLevelOff@/link</code>
- *                  and <code>@link kIOPMAssertionLevelOn@/link</code>
- */
-typedef uint32_t IOPMAssertionLevel;
-
-/*!
- * @enum            Assertion Levels
- */
-enum {
-    /*!
-     * @constant    kIOPMAssertionLevelOff
-     * @abstract    Level for a disabled assertion, passed as an argument to IOPMAssertionCreate.
-    */
-    kIOPMAssertionLevelOff = 0,
-
-    /*!
-     * @constant    kIOPMAssertionLevelOn
-     * @abstract    Level for an enabled assertion, passed as an argument to IOPMAssertionCreate.
-    */
-    kIOPMAssertionLevelOn  = 255
- };
-
-
-/*!
- * @functiongroup   Assertions
- */    
-
-    
-/*! @function           IOPMAssertionCreateWithDescription
- *
- * @description         Creates an IOPMAssertion. This is the preferred API to call to create an assertion.
- *                      It allows the caller to specify the Name, Details, and HumanReadableReason at creation time.
- *                      There are other keys that can further describe an assertion, but most developers don't need
- *                      to use them. Use <code>@link IOPMAssertionSetProperties @/link</code> or 
- *                      <code>@link IOPMAssertionCreateWithProperties @/link</code> if you need to specify properties
- *                      that aren't avilable here.
- * 
- * @param AssertionType An assertion type constant. 
- *	                    Caller must specify this argument.
- *
- * @param Name          A CFString value to correspond to key <code>@link kIOPMAssertionNameKey@/link</code>.
- *	                    Caller must specify this argument.
- *
- * @param Details 	    A CFString value to correspond to key <code>@link kIOPMAssertionDetailsKey@/link</code>.
- *	                    Caller my pass NULL, but it helps power users and administrators identify the
- *                      reasons for this assertion.
- *
- * @param HumanReadableReason
- *	                    A CFString value to correspond to key <code>@link kIOPMAssertionHumanReadableReasonKey@/link</code>.
- *	                    Caller may pass NULL, but if it's specified OS X may display it to users 
- *                      to describe the active assertions on their sysstem.
- *
- * @param LocalizationBundlePath
- *	                    A CFString value to correspond to key <code>@link kIOPMAssertionLocalizationBundlePathKey@/link</code>.
- *                      This bundle path should include a localization for the string <code>HumanReadableReason</code>
- *                      Caller may pass NULL, but this argument is required if caller specifies <code>HumanReadableReason</code> 
- *
- * @param Timeout       Specifies a timeout for this assertion. Pass 0 for no timeout.
- *
- * @param TimeoutAction Specifies a timeout action. Caller my pass NULL. If a timeout is specified but a TimeoutAction is not, 
- *                      the default timeout action is <code>kIOPMAssertionTimeoutActionTurnOff</code>
- *
- * @param AssertionID   (Output) On successful return, contains a unique reference to a PM assertion.
- *
- * @result              kIOReturnSuccess, or another IOKit return code on error.
- */
-IOReturn	IOPMAssertionCreateWithDescription(
-                                           CFStringRef  AssertionType, 
-                                           CFStringRef  Name, 
-                                           CFStringRef  Details,
-                                           CFStringRef  HumanReadableReason,
-                                           CFStringRef  LocalizationBundlePath,
-                                           CFTimeInterval   Timeout,
-                                           CFStringRef  TimeoutAction,
-                                           IOPMAssertionID  *AssertionID)
-__OSX_AVAILABLE_STARTING(__MAC_10_7, __IPHONE_4_3);
-    
-
-
-/*!
- * @function                    IOPMAssertionCreateWithProperties
- *
- * @abstract                    Creates an IOPMAssertion with more flexibility than <code>@link IOPMAssertionCreateWithDescription @/link</code>.
- * @param AssertionType         The CFString assertion type to request from the PM system.
- * @param AssertionLevel        Pass <code>@link kIOPMAssertionLevelOn@/link</code> or <code>@link kIOPMAssertionLevelOff@/link</code>.
- * @param AssertionProperties   Caller must describe the assertion to be created, and the caller itself.
- * @param AssertionID           (Output) On successful return, contains a unique reference to a PM assertion.
- *
- * @discussion          
- *      Create a new PM assertion - the caller must specify the type of assertion, initial level, and its 
- *      properties as @link IOPMAssertionDictionaryKeys@/link keys in the <code>AssertionProperties</code> dictionary.
- *      The following keys are recommend and/or required to be specified in the AssertionProperties 
- *      dictionary argument.
- *      <ul>
- *          <li> REQUIRED: Define at least one assertion as a key, with its initial level as a value:
- *                     <code>@link kIOPMAssertionTypePreventSystemSleep@/link</code> 
- *                  or <code>@link kIOPMAssertionTypeNoIdleSleep@/link</code> 
- *                  or <code>@link kIOPMAssertionTypePreventSystemSleep@/link</code> 
- *
- *          <li> REQUIRED: <code>kIOPMAssertionNameKey</code> Caller must describe the name for the activity that
- *               requires the change in behavior provided by the assertion. 
- *
- *          <li> OPTIONAL: <code>kIOPMAssertionDetailsKey</code> Caller may describe context-specific data about the
- *               assertion. 
- *
- *          <li> OPTIONAL: <code>kIOPMAssertionHumanReadableReasonKey</code> Caller may describe the reason for creating the assertion
- *              in a localizable CFString. This should be a human readable phrase that describes the actions the
- *              calling process is taking while the assertion is held, like "Downloading TV episodes", or "Compiling Projects"
- *
- *          <li> OPTIONAL: <code>kIOPMAssertionLocalizationBundlePathKey</code> Caller may provide its bundle's path, where OS X
- *              can localize for GUI display the CFString specified by <code>@link kIOPMAssertionHumanReadableReasonKey@/link</code>.
- *
- *          <li> OPTIONAL: <code>kIOPMAssertionPlugInIDKey</code> if the caller is a plugin with a different identity than the process
- *              it's loaded in.
- *
- *          <li> OPTIONAL: <code>kIOPMAssertionFrameworkIDKey</code> if the caller is a framework acting on behalf of a process.
- *
- *          <li> OPTIONAL: The caller may specify a timeout.
- *      </ul>
- */
-IOReturn IOPMAssertionCreateWithProperties(
-                             CFDictionaryRef      AssertionProperties,
-                             IOPMAssertionID      *AssertionID)
-                            __OSX_AVAILABLE_STARTING(__MAC_10_7, __IPHONE_3_2);
-
-/*!
- * @function            IOPMAssertionRetain
- *
- * @abstract            Increments the assertion's retain count.
- * @discussion          Increments the retain count according to CoreFoundation style retain/release semantics.
- *                      Retain count can be inspected in the assertion's info dictionary at
- *                      key <code>@link kIOPMAssertionRetainCountKey@/link</code>
- * @param theAssertion  The assertion ID to retain.
- */    
-void IOPMAssertionRetain(IOPMAssertionID theAssertion)
-                            __OSX_AVAILABLE_STARTING(__MAC_10_7, __IPHONE_3_2);
-
-/*!
- * @function            IOPMAssertionRelease
- *
- * @abstract            Decrements the assertion's retain count.
- *
- * @discussion          If the retain count becomes zero, then this also frees and deactivates
- *                      the assertion referred to by <code>assertionID</code>
- *
- *                      Calls to <code>@link IOPMAssertionCreate@/link</code> and <code>@link IOPMAssertionRelease@/link</code> 
- *                      must each be paired with calls to IOPMAssertionRelease.
- *
- * @param               AssertionID The assertion_id, returned from IOPMAssertionCreate, to cancel.
- *
- * @result              Returns kIOReturnSuccess on success.
- */
-IOReturn IOPMAssertionRelease(IOPMAssertionID AssertionID)
-                            AVAILABLE_MAC_OS_X_VERSION_10_5_AND_LATER;
-    
-
-/*!
- * @function            IOPMAssertionCopyProperties
- * @abstract            Copies details about an <code>IOPMAssertion</code.
- * @discussion          Returns a dictionary describing an IOPMAssertion's specifications and current state.
- * @param theAssertion  The assertion ID to copy info about.
- * @result              A dictionary describing the assertion with keys specified in See @link IOPMAssertionDictionaryKeys@/link. 
- *                      It's the caller's responsibility to release this dictionary.
- */
-CFDictionaryRef IOPMAssertionCopyProperties(IOPMAssertionID theAssertion)
-                            __OSX_AVAILABLE_STARTING(__MAC_10_7, __IPHONE_3_2);
-
-/*!
- * @function            IOPMAssertionSetProperty
- * @abstract            Sets a property in the assertion.
- * @discussion          Only the process that created an assertion may change its properties.
- * @param theAssertion  The <code>@link IOPMAssertionID@/link</code> of the assertion to modify.
- * @param theProperty   The CFString key, from <code>@link IOPMAssertionDictionaryKeys@/link</code> to modify.
- * @param theValue      The property to set. It must be a CFNumber or CFString, as specified by the property key named in whichProperty.
- * @result              Returns <code>@link kIOReturnNotPriviliged@/link</code> if the caller doesn't 
- *                          have permission to modify this assertion.
- *                      Returns <code>@link kIOReturnNotFound@/link</code> if PM can't locate this assertion.
- *                      Returns <code>@link kIOReturnError@/link</code> upon an unidentified error.
- *                      Returns <code>@link kIOReturnSuccess@/link</code> otherwise.
- */
-IOReturn IOPMAssertionSetProperty(IOPMAssertionID theAssertion, CFStringRef theProperty, CFTypeRef theValue)
-                            __OSX_AVAILABLE_STARTING(__MAC_10_7, __IPHONE_3_2);
-
-/*!
- * @function            IOPMCopyAssertionsByProcess
- *
- * @abstract            Returns a dictionary listing all assertions, grouped by their owning process.
- *
- * @discussion          Notes: One process may have multiple assertions. Several processes may
- *                      have asserted the same assertion to different levels.
- *
- * @param AssertionsByPID On success, this returns a dictionary of assertions per process.
- *                      At the top level, keys to the CFDictionary are pids stored as CFNumbers (kCFNumberIntType).
- *                      The value associated with each CFNumber pid is a CFArray of active assertions.
- *                      Each entry in the CFArray is an assertion represented as a CFDictionary. See the keys
- *                      kIOPMAssertionTypeKey and kIOPMAssertionLevelKey. 
- *                      Caller must CFRelease() this dictionary when done.
- *
- * @result              Returns kIOReturnSuccess on success.
- */
-IOReturn IOPMCopyAssertionsByProcess(CFDictionaryRef *AssertionsByPID)
-                            AVAILABLE_MAC_OS_X_VERSION_10_5_AND_LATER;
-
-/*!
- * @function            IOPMCopyAssertionsStatus
- *
- * @abstract            Returns a list of available assertions and their system-wide levels.
- *
- * @discussion          The system-wide level is the maximum of all individual assertions' levels.
- *
- * @param AssertionsStatus On success, this returns a CFDictionary of all assertions currently available.
- *                      The keys in the dictionary are the assertion types, and the value of each is a CFNumber that
- *                      represents the aggregate level for that assertion.  Caller must CFRelease() this dictionary when done.
- *
- * @result Returns      kIOReturnSuccess on success.
- */
-IOReturn IOPMCopyAssertionsStatus(CFDictionaryRef *AssertionsStatus)
-                            AVAILABLE_MAC_OS_X_VERSION_10_5_AND_LATER;
-
-    
-    
-
-/*!
- * @function            IOPMAssertionCreate
- *
- * @abstract            Dynamically requests a system behavior from the power management system.
- *
- * @deprecated          IOPMAssertionCreate is deprecated in favor of <code>@link IOPMAssertionCreateWithProperties@/link</code>.
- *                      Please use that version of this API instead.
- *
- * @discussion          No special privileges necessary to make this call - any process may
- *                      activate a power assertion.
- *
- * @param AssertionType     The CFString assertion type to request from the PM system.
- * @param AssertionLevel    Pass kIOPMAssertionLevelOn or kIOPMAssertionLevelOff.
- * @param AssertionID       On success, a unique id will be returned in this parameter.
- *
- * @result              Returns kIOReturnSuccess on success, any other return indicates
- *                          PM could not successfully activate the specified assertion.
- */
-IOReturn IOPMAssertionCreate(CFStringRef        AssertionType, 
-                           IOPMAssertionLevel   AssertionLevel,
-                           IOPMAssertionID      *AssertionID)
-                            __OSX_AVAILABLE_BUT_DEPRECATED
-                            (__MAC_10_5,__MAC_10_6,__IPHONE_2_0, __IPHONE_2_1);
-
-/*!
- * @function            IOPMAssertionCreateWithName
- *
- * @abstract            Dynamically requests a system behavior from the power management system.
- *
- * @deprecated          IOPMAssertionCreate is deprecated in favor of <code>@link IOPMAssertionCreateWithProperties@/link</code>.
- *                      Please use that version of this API instead.
- *
- * @discussion          No special privileges are necessary to make this call - any process may
- *                      activate a power assertion. Caller must specify an AssertionName - NULL is not
- *                      a valid input.
- *
- * @param AssertionType     The CFString assertion type to request from the PM system.
- * @param AssertionLevel    Pass kIOPMAssertionLevelOn or kIOPMAssertionLevelOff.
- * @param AssertionName     A string that describes the name of the caller and the activity being
- *                          handled by this assertion (e.g. "Mail Compacting Mailboxes"). Name may be no longer 
- *                          than 128 characters.
- *
- * @param AssertionID       On success, a unique id will be returned in this parameter.
- *
- * @result                  Returns kIOReturnSuccess on success, any other return indicates
- *                          PM could not successfully activate the specified assertion.
- */
-IOReturn IOPMAssertionCreateWithName(
-                        CFStringRef          AssertionType, 
-                        IOPMAssertionLevel   AssertionLevel,
-                        CFStringRef          AssertionName,
-                        IOPMAssertionID      *AssertionID)
-                        AVAILABLE_MAC_OS_X_VERSION_10_6_AND_LATER;                           
-                           
-
-/*!
- * @functiongroup IOSystemLoadAdvisory
- */
-
-/*! @define kIOSystemLoadAdvisoryNotifyName
-   @abstract The notification by this name fires when system "SystemLoadAdvisory" status changes.
-   @discussion Pass this string as an argument to register via notify(3).
-            You can query SystemLoadAdvisory state via notify_get_state() when this notification
-            fires - this is more efficient than calling IOGetSystemLoadAdvisory(), and returns
-            an identical combined SystemLoadAdvisory value.
- */
-#define kIOSystemLoadAdvisoryNotifyName   "com.apple.system.powermanagement.SystemLoadAdvisory"
-
-/*! @typedef IOSystemLoadAdvisoryLevel
-   @abstract Return type for IOGetSystemLoadAdvisory
-   @discussion Value is one of kIOSystemLoadAdvisoryLevelGreat, kIOSystemLoadAdvisoryLevelOK,
-       or kIOSystemLoadAdvisoryLevelBad.
- */
-typedef int IOSystemLoadAdvisoryLevel;
-
-enum {
-    kIOSystemLoadAdvisoryLevelBad       = 1,
-    kIOSystemLoadAdvisoryLevelOK        = 2,
-    kIOSystemLoadAdvisoryLevelGreat     = 3
-};
-
-/*! @define kIOSystemLoadAdvisoryUserLevelKey
-   @abstract Key for dictionary returned by IOCopySystemLoadAdvisoryDetailed
-   @discussion Indicates user activity constraints on the current SystemLoadAdvisory level.
- */
-#define kIOSystemLoadAdvisoryUserLevelKey             CFSTR("UserLevel")
-
-/*! @define kIOSystemLoadAdvisoryBatteryLevelKey
-   @abstract Key for dictionary returned by IOCopySystemLoadAdvisoryDetailed
-   @discussion Indicates battery constraints on the current SystemLoadAdvisory level.
- */
-#define kIOSystemLoadAdvisoryBatteryLevelKey          CFSTR("BatteryLevel")
-
-/*! @define kIOSystemLoadAdvisoryThermalLevelKey
-   @abstract Key for dictionary returned by IOCopySystemLoadAdvisoryDetailed
-   @discussion Indicates thermal constraints on the current SystemLoadAdvisory level.
- */
-#define kIOSystemLoadAdvisoryThermalLevelKey          CFSTR("ThermalLevel")
-
-/*! @define kIOSystemLoadAdvisoryCombinedLevelKey
-   @abstract Key for dictionary returned by IOCopySystemLoadAdvisoryDetailed
-   @discussion Provides a combined level based on UserLevel, BatteryLevel,
-        and ThermalLevels; the combined level is the minimum of these levels. 
-        In the future, this combined level may represent new levels as well.
-        The combined level is identical to the value returned by IOGetSystemLoadAdvisory().
- */
-#define kIOSystemLoadAdvisoryCombinedLevelKey         CFSTR("CombinedLevel")
-
-/*! @function IOGetSystemLoadAdvisory
-   @abstract Returns a hint about whether now would be a good time to perform time-insensitive 
-        work.
-   @discussion Based on user and system load, IOGetSystemLoadAdvisory determines "better" and "worse"
-   times to run optional or time-insensitive CPU or disk work.
-    
-   Applications may use this result to avoid degrading the user experience. If it is a 
-   "Bad" or "OK" time to perform work, applications should slow down and perform work
-   less aggressively.
-   
-   There is no guarantee that the system will ever be in "Great" condition to perform work -
-   all essential work must still be performed even in "Bad", or "OK" times. 
-   Completely optional work, such as updating caches, may be postponed indefinitely.
-   
-   Note: You may more efficiently read the SystemLoadAdvisory level using notify_get_state() instead
-        of IOGetSystemLoadAdvisory. The results are identical. notify_get_state() requires that you
-        pass the token argument received by registering for SystemLoadAdvisory notifications.
-   
-   @return IOSystemLoadAdvisoryLevel - one of:
-        kIOSystemLoadAdvisoryLevelGreat - A Good time to perform time-insensitive work.
-        kIOSystemLoadAdvisoryLevelOK - An OK time to perform time-insensitive work.
-        kIOSystemLoadAdvisoryLevelBad - A Bad time to perform time-insensitive work.
- */
-   
-IOSystemLoadAdvisoryLevel IOGetSystemLoadAdvisory( void );
-
-/*! @function IOCopySystemLoadAdvisoryDetailed
-   @abstract Indicates how user activity, battery level, and thermal level each 
-        contribute to the overall "SystemLoadAdvisory" level. In the future, 
-        this combined level may represent new levels as well.
-   @discussion See dictionary keys defined above.
-   @return Returns a CFDictionaryRef, or NULL on error. Caller must release the
-        returned dictionary.
- */
-CFDictionaryRef IOCopySystemLoadAdvisoryDetailed(void);
-
-
-/*!
- * @functiongroup CPU Power & Thermal
- */
-/*! 
- * @define      kIOPMCPUPowerNotificationKey
- * @abstract    Key to register for BSD style notifications on CPU power or thermal change.
- */
-
-#define kIOPMCPUPowerNotificationKey            "com.apple.system.power.CPU"
-/*! 
- * @define      kIOPMThermalWarningNotificationKey
- * @abstract    Key to register for BSD style notifications on system thermal warnings.
- */
-#define kIOPMThermalWarningNotificationKey      "com.apple.system.power.thermal_warning"
-    
-/*!
- * @function    IOPMCopyCPUPowerStatus
- * @abstract    Copy status of all current CPU power levels.
- * @discussion  The returned dictionary may define some of these keys, 
- *              as defined in IOPM.h:
- *                  - kIOPMCPUPowerLimitProcessorSpeedKey
- *                  - kIOPMCPUPowerLimitProcessorCountKey
- *                  - kIOPMCPUPowerLimitSchedulerTimeKey        
- * @param       cpuPowerStatus Upon success, a pointer to a dictionary defining CPU power; 
- *              otherwise NULL. Pointer will be populated with a newly created dictionary 
- *              upon successful return. Caller must release dictionary.
- * @result      kIOReturnSuccess, or other error report. Returns kIOReturnNotFound if 
- *              CPU PowerStatus has not been published.
- */
-IOReturn IOPMCopyCPUPowerStatus(CFDictionaryRef *cpuPowerStatus);
-    
-/*! 
- * @function    IOPMGetThermalWarningLevel
- * @abstract    Get thermal warning level of the system.
- * @result      An integer pointer declaring the power warning level of the system. 
- *              The value of the integer is one of (defined in IOPM.h):
- *                  kIOPMThermalWarningLevelNormal
- *                  kIOPMThermalWarningLevelDanger
- *                  kIOPMThermalWarningLevelCrisis
- *              Upon success the thermal level value will be found at the 
- *              pointer argument.
- * @result      kIOReturnSuccess, or other error report. Returns kIOReturnNotFound if 
- *              thermal warning level has not been published.
- */
-IOReturn IOPMGetThermalWarningLevel(uint32_t *thermalLevel);
-    
-
-
-#ifdef __cplusplus
-}
-#endif
-
-#endif
diff --git a/external/ios-headers/IOKit/pwr_mgt/IOPMLibDefs.h b/external/ios-headers/IOKit/pwr_mgt/IOPMLibDefs.h
deleted file mode 100755
index 7e49682..0000000
--- a/external/ios-headers/IOKit/pwr_mgt/IOPMLibDefs.h
+++ /dev/null
@@ -1,41 +0,0 @@
-/*
- * Copyright (c) 1998-2000 Apple Computer, Inc. All rights reserved.
- *
- * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
- * 
- * This file contains Original Code and/or Modifications of Original Code
- * as defined in and that are subject to the Apple Public Source License
- * Version 2.0 (the 'License'). You may not use this file except in
- * compliance with the License. The rights granted to you under the License
- * may not be used to create, or enable the creation or redistribution of,
- * unlawful or unlicensed copies of an Apple operating system, or to
- * circumvent, violate, or enable the circumvention or violation of, any
- * terms of an Apple operating system software license agreement.
- * 
- * Please obtain a copy of the License at
- * http://www.opensource.apple.com/apsl/ and read it before using this file.
- * 
- * The Original Code and all software distributed under the License are
- * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
- * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
- * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
- * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
- * Please see the License for the specific language governing rights and
- * limitations under the License.
- * 
- * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
- */
-
-
-#define	kPMSetAggressiveness            0
-#define	kPMGetAggressiveness            1
-#define	kPMSleepSystem                  2
-#define	kPMAllowPowerChange             3
-#define	kPMCancelPowerChange            4
-#define	kPMShutdownSystem               5
-#define	kPMRestartSystem                6
-#define kPMSleepSystemOptions           7
-#define kPMSetMaintenanceWakeCalendar   8
-#define kPMSetUserAssertionLevels       9
-
-#define kNumPMMethods                   10
diff --git a/external/ios-headers/netinet/ip_var.h b/external/ios-headers/netinet/ip_var.h
deleted file mode 100644
index 78659dc..0000000
--- a/external/ios-headers/netinet/ip_var.h
+++ /dev/null
@@ -1,141 +0,0 @@
-/*
- * Copyright (c) 2000-2017 Apple Inc. All rights reserved.
- *
- * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
- *
- * This file contains Original Code and/or Modifications of Original Code
- * as defined in and that are subject to the Apple Public Source License
- * Version 2.0 (the 'License'). You may not use this file except in
- * compliance with the License. The rights granted to you under the License
- * may not be used to create, or enable the creation or redistribution of,
- * unlawful or unlicensed copies of an Apple operating system, or to
- * circumvent, violate, or enable the circumvention or violation of, any
- * terms of an Apple operating system software license agreement.
- *
- * Please obtain a copy of the License at
- * http://www.opensource.apple.com/apsl/ and read it before using this file.
- *
- * The Original Code and all software distributed under the License are
- * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
- * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
- * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
- * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
- * Please see the License for the specific language governing rights and
- * limitations under the License.
- *
- * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
- */
-/*
- * Copyright (c) 1982, 1986, 1993
- *	The Regents of the University of California.  All rights reserved.
- *
- * Redistribution and use in source and binary forms, with or without
- * modification, are permitted provided that the following conditions
- * are met:
- * 1. Redistributions of source code must retain the above copyright
- *    notice, this list of conditions and the following disclaimer.
- * 2. Redistributions in binary form must reproduce the above copyright
- *    notice, this list of conditions and the following disclaimer in the
- *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *	This product includes software developed by the University of
- *	California, Berkeley and its contributors.
- * 4. Neither the name of the University nor the names of its contributors
- *    may be used to endorse or promote products derived from this software
- *    without specific prior written permission.
- *
- * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
- * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
- * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
- * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
- * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
- * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
- * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
- * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
- * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
- * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
- * SUCH DAMAGE.
- *
- *	@(#)ip_var.h	8.2 (Berkeley) 1/9/95
- */
-/*
- * NOTICE: This file was modified by SPARTA, Inc. in 2007 to introduce
- * support for mandatory and extensible security protections.  This notice
- * is included in support of clause 2.2 (b) of the Apple Public License,
- * Version 2.0.
- */
-
-#ifndef _NETINET_IP_VAR_H_
-#define	_NETINET_IP_VAR_H_
-#include <sys/appleapiopts.h>
-
-/*
- * Overlay for ip header used by other protocols (tcp, udp).
- */
-struct ipovly {
-	u_char	ih_x1[9];		/* (unused) */
-	u_char	ih_pr;			/* protocol */
-	u_short	ih_len;			/* protocol length */
-	struct	in_addr ih_src;		/* source internet address */
-	struct	in_addr ih_dst;		/* destination internet address */
-};
-
-#define	MAX_IPOPTLEN	40
-
-struct	ipstat {
-	u_int32_t ips_total;		/* total packets received */
-	u_int32_t ips_badsum;		/* checksum bad */
-	u_int32_t ips_tooshort;		/* packet too short */
-	u_int32_t ips_toosmall;		/* not enough data */
-	u_int32_t ips_badhlen;		/* ip header length < data size */
-	u_int32_t ips_badlen;		/* ip length < ip header length */
-	u_int32_t ips_fragments;	/* fragments received */
-	u_int32_t ips_fragdropped;	/* frags dropped (dups, out of space) */
-	u_int32_t ips_fragtimeout;	/* fragments timed out */
-	u_int32_t ips_forward;		/* packets forwarded */
-	u_int32_t ips_fastforward;	/* packets fast forwarded */
-	u_int32_t ips_cantforward;	/* packets rcvd for unreachable dest */
-	u_int32_t ips_redirectsent;	/* packets forwarded on same net */
-	u_int32_t ips_noproto;		/* unknown or unsupported protocol */
-	u_int32_t ips_delivered;	/* datagrams delivered to upper level */
-	u_int32_t ips_localout;		/* total ip packets generated here */
-	u_int32_t ips_odropped;		/* lost packets due to nobufs, etc. */
-	u_int32_t ips_reassembled;	/* total packets reassembled ok */
-	u_int32_t ips_fragmented;	/* datagrams successfully fragmented */
-	u_int32_t ips_ofragments;	/* output fragments created */
-	u_int32_t ips_cantfrag;		/* don't fragment flag was set, etc. */
-	u_int32_t ips_badoptions;	/* error in option processing */
-	u_int32_t ips_noroute;		/* packets discarded due to no route */
-	u_int32_t ips_badvers;		/* ip version != 4 */
-	u_int32_t ips_rawout;		/* total raw ip packets generated */
-	u_int32_t ips_toolong;		/* ip length > max ip packet size */
-	u_int32_t ips_notmember;	/* multicasts for unregistered grps */
-	u_int32_t ips_nogif;		/* no match gif found */
-	u_int32_t ips_badaddr;		/* invalid address on header */
-	u_int32_t ips_pktdropcntrl;	/* pkt dropped, no mbufs for ctl data */
-	u_int32_t ips_rcv_swcsum;	/* ip hdr swcksum (inbound), packets */
-	u_int32_t ips_rcv_swcsum_bytes;	/* ip hdr swcksum (inbound), bytes */
-	u_int32_t ips_snd_swcsum;	/* ip hdr swcksum (outbound), packets */
-	u_int32_t ips_snd_swcsum_bytes;	/* ip hdr swcksum (outbound), bytes */
-	u_int32_t ips_adj;		/* total packets trimmed/adjusted */
-	u_int32_t ips_adj_hwcsum_clr;	/* hwcksum discarded during adj */
-	u_int32_t ips_rxc_collisions;	/* rx chaining collisions */
-	u_int32_t ips_rxc_chained;	/* rx chains */
-	u_int32_t ips_rxc_notchain;	/* rx bypassed chaining */
-	u_int32_t ips_rxc_chainsz_gt2;	/* rx chain size greater than 2 */
-	u_int32_t ips_rxc_chainsz_gt4;  /* rx chain size greater than 4 */
-	u_int32_t ips_rxc_notlist;	/* count of pkts through ip_input */
-	u_int32_t ips_raw_sappend_fail;	/* sock append failed */
-	u_int32_t ips_necp_policy_drop; /* NECP policy related drop */
-};
-
-struct ip_linklocal_stat {
-	u_int32_t	iplls_in_total;
-	u_int32_t	iplls_in_badttl;
-	u_int32_t	iplls_out_total;
-	u_int32_t	iplls_out_badttl;
-};
-
-
-#endif /* !_NETINET_IP_VAR_H_ */
diff --git a/external/ios-headers/netinet/udp_var.h b/external/ios-headers/netinet/udp_var.h
deleted file mode 100644
index c2766c3..0000000
--- a/external/ios-headers/netinet/udp_var.h
+++ /dev/null
@@ -1,126 +0,0 @@
-/*
- * Copyright (c) 2008-2016 Apple Inc. All rights reserved.
- *
- * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
- * 
- * This file contains Original Code and/or Modifications of Original Code
- * as defined in and that are subject to the Apple Public Source License
- * Version 2.0 (the 'License'). You may not use this file except in
- * compliance with the License. The rights granted to you under the License
- * may not be used to create, or enable the creation or redistribution of,
- * unlawful or unlicensed copies of an Apple operating system, or to
- * circumvent, violate, or enable the circumvention or violation of, any
- * terms of an Apple operating system software license agreement.
- * 
- * Please obtain a copy of the License at
- * http://www.opensource.apple.com/apsl/ and read it before using this file.
- * 
- * The Original Code and all software distributed under the License are
- * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
- * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
- * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
- * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
- * Please see the License for the specific language governing rights and
- * limitations under the License.
- * 
- * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
- */
-/*
- * Copyright (c) 1982, 1986, 1989, 1993
- *	The Regents of the University of California.  All rights reserved.
- *
- * Redistribution and use in source and binary forms, with or without
- * modification, are permitted provided that the following conditions
- * are met:
- * 1. Redistributions of source code must retain the above copyright
- *    notice, this list of conditions and the following disclaimer.
- * 2. Redistributions in binary form must reproduce the above copyright
- *    notice, this list of conditions and the following disclaimer in the
- *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *	This product includes software developed by the University of
- *	California, Berkeley and its contributors.
- * 4. Neither the name of the University nor the names of its contributors
- *    may be used to endorse or promote products derived from this software
- *    without specific prior written permission.
- *
- * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
- * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
- * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
- * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
- * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
- * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
- * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
- * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
- * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
- * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
- * SUCH DAMAGE.
- *
- *	@(#)udp_var.h	8.1 (Berkeley) 6/10/93
- */
-
-#ifndef _NETINET_UDP_VAR_H_
-#define _NETINET_UDP_VAR_H_
-
-#include <sys/appleapiopts.h>
-#include <sys/sysctl.h>
-
-/*
- * UDP kernel structures and variables.
- */
-struct	udpiphdr {
-	struct	ipovly ui_i;		/* overlaid ip structure */
-	struct	udphdr ui_u;		/* udp header */
-};
-#define	ui_x1		ui_i.ih_x1
-#define	ui_pr		ui_i.ih_pr
-#define	ui_len		ui_i.ih_len
-#define	ui_src		ui_i.ih_src
-#define	ui_dst		ui_i.ih_dst
-#define	ui_sport	ui_u.uh_sport
-#define	ui_dport	ui_u.uh_dport
-#define	ui_ulen		ui_u.uh_ulen
-#define	ui_sum		ui_u.uh_sum
-#define ui_next		ui_i.ih_next
-#define ui_prev		ui_i.ih_prev
-
-struct	udpstat {
-	/* input statistics: */
-	u_int32_t udps_ipackets;	/* total input packets */
-	u_int32_t udps_hdrops;		/* packet shorter than header */
-	u_int32_t udps_badsum;		/* checksum error */
-	u_int32_t udps_badlen;		/* data length larger than packet */
-	u_int32_t udps_noport;		/* no socket on port */
-	u_int32_t udps_noportbcast;	/* of above, arrived as broadcast */
-	u_int32_t udps_fullsock;	/* not delivered, input socket full */
-	u_int32_t udpps_pcbcachemiss;	/* input packets missing pcb cache */
-	u_int32_t udpps_pcbhashmiss;	/* input packets not for hashed pcb */
-	/* output statistics: */
-	u_int32_t udps_opackets;	/* total output packets */
-	u_int32_t udps_fastout;		/* output packets on fast path */
-	u_int32_t udps_nosum;		/* no checksum */
-	u_int32_t udps_noportmcast;	/* of no socket on port, multicast */
-	u_int32_t udps_filtermcast;	/* blocked by multicast filter */
-	/* checksum statistics: */
-	u_int32_t udps_rcv_swcsum;	  /* udp swcksum (inbound), packets */
-	u_int32_t udps_rcv_swcsum_bytes;  /* udp swcksum (inbound), bytes */
-	u_int32_t udps_rcv6_swcsum;	  /* udp6 swcksum (inbound), packets */
-	u_int32_t udps_rcv6_swcsum_bytes; /* udp6 swcksum (inbound), bytes */
-	u_int32_t udps_snd_swcsum;	  /* udp swcksum (outbound), packets */
-	u_int32_t udps_snd_swcsum_bytes;  /* udp swcksum (outbound), bytes */
-	u_int32_t udps_snd6_swcsum;	  /* udp6 swcksum (outbound), packets */
-	u_int32_t udps_snd6_swcsum_bytes; /* udp6 swcksum (outbound), bytes */
-};
-
-/*
- * Names for UDP sysctl objects
- */
-#define	UDPCTL_CHECKSUM		1	/* checksum UDP packets */
-#define UDPCTL_STATS		2	/* statistics (read-only) */
-#define	UDPCTL_MAXDGRAM		3	/* max datagram size */
-#define	UDPCTL_RECVSPACE	4	/* default receive buffer space */
-#define	UDPCTL_PCBLIST		5	/* list of PCBs for UDP sockets */
-#define UDPCTL_MAXID		6
-
-#endif /* _NETINET_UDP_VAR_H_ */
diff --git a/external/ios-headers/sys/vmmeter.h b/external/ios-headers/sys/vmmeter.h
deleted file mode 100644
index dd00db4..0000000
--- a/external/ios-headers/sys/vmmeter.h
+++ /dev/null
@@ -1,141 +0,0 @@
-/*
- * Copyright (c) 2000-2002 Apple Computer, Inc. All rights reserved.
- *
- * @APPLE_OSREFERENCE_LICENSE_HEADER_START@
- * 
- * This file contains Original Code and/or Modifications of Original Code
- * as defined in and that are subject to the Apple Public Source License
- * Version 2.0 (the 'License'). You may not use this file except in
- * compliance with the License. The rights granted to you under the License
- * may not be used to create, or enable the creation or redistribution of,
- * unlawful or unlicensed copies of an Apple operating system, or to
- * circumvent, violate, or enable the circumvention or violation of, any
- * terms of an Apple operating system software license agreement.
- * 
- * Please obtain a copy of the License at
- * http://www.opensource.apple.com/apsl/ and read it before using this file.
- * 
- * The Original Code and all software distributed under the License are
- * distributed on an 'AS IS' basis, WITHOUT WARRANTY OF ANY KIND, EITHER
- * EXPRESS OR IMPLIED, AND APPLE HEREBY DISCLAIMS ALL SUCH WARRANTIES,
- * INCLUDING WITHOUT LIMITATION, ANY WARRANTIES OF MERCHANTABILITY,
- * FITNESS FOR A PARTICULAR PURPOSE, QUIET ENJOYMENT OR NON-INFRINGEMENT.
- * Please see the License for the specific language governing rights and
- * limitations under the License.
- * 
- * @APPLE_OSREFERENCE_LICENSE_HEADER_END@
- */
-/* Copyright (c) 1995 NeXT Computer, Inc. All Rights Reserved */
-/*-
- * Copyright (c) 1982, 1986, 1993
- *	The Regents of the University of California.  All rights reserved.
- *
- * Redistribution and use in source and binary forms, with or without
- * modification, are permitted provided that the following conditions
- * are met:
- * 1. Redistributions of source code must retain the above copyright
- *    notice, this list of conditions and the following disclaimer.
- * 2. Redistributions in binary form must reproduce the above copyright
- *    notice, this list of conditions and the following disclaimer in the
- *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *      This product includes software developed by the University of
- *      California, Berkeley and its contributors.
- * 4. Neither the name of the University nor the names of its contributors
- *    may be used to endorse or promote products derived from this software
- *    without specific prior written permission.
- *
- * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
- * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
- * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
- * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
- * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
- * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
- * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
- * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
- * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
- * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
- * SUCH DAMAGE.
- *
- *	@(#)vmmeter.h	8.2 (Berkeley) 7/10/94
- */
-
-#ifndef _SYS_VMMETER_H_
-#define	_SYS_VMMETER_H_
-
-#include <sys/appleapiopts.h>
-
-#ifdef __APPLE_API_OBSOLETE
-/*
- * System wide statistics counters.
- */
-struct vmmeter {
-	/*
-	 * General system activity.
-	 */
-	unsigned int v_swtch;		/* context switches */
-	unsigned int v_trap;		/* calls to trap */
-	unsigned int v_syscall;	/* calls to syscall() */
-	unsigned int v_intr;		/* device interrupts */
-	unsigned int v_soft;		/* software interrupts */
-	unsigned int v_faults;		/* total faults taken */
-	/*
-	 * Virtual memory activity.
-	 */
-	unsigned int v_lookups;	/* object cache lookups */
-	unsigned int v_hits;		/* object cache hits */
-	unsigned int v_vm_faults;	/* number of address memory faults */
-	unsigned int v_cow_faults;	/* number of copy-on-writes */
-	unsigned int v_swpin;		/* swapins */
-	unsigned int v_swpout;		/* swapouts */
-	unsigned int v_pswpin;		/* pages swapped in */
-	unsigned int v_pswpout;	/* pages swapped out */
-	unsigned int v_pageins;	/* number of pageins */
-	unsigned int v_pageouts;	/* number of pageouts */
-	unsigned int v_pgpgin;		/* pages paged in */
-	unsigned int v_pgpgout;	/* pages paged out */
-	unsigned int v_intrans;	/* intransit blocking page faults */
-	unsigned int v_reactivated;	/* number of pages reactivated from free list */
-	unsigned int v_rev;		/* revolutions of the hand */
-	unsigned int v_scan;		/* scans in page out daemon */
-	unsigned int v_dfree;		/* pages freed by daemon */
-	unsigned int v_pfree;		/* pages freed by exiting processes */
-	unsigned int v_zfod;		/* pages zero filled on demand */
-	unsigned int v_nzfod;		/* number of zfod's created */
-	/*
-	 * Distribution of page usages.
-	 */
-	unsigned int v_page_size;	/* page size in bytes */
-	unsigned int v_kernel_pages;	/* number of pages in use by kernel */
-	unsigned int v_free_target;	/* number of pages desired free */
-	unsigned int v_free_min;	/* minimum number of pages desired free */
-	unsigned int v_free_count;	/* number of pages free */
-	unsigned int v_wire_count;	/* number of pages wired down */
-	unsigned int v_active_count;	/* number of pages active */
-	unsigned int v_inactive_target; /* number of pages desired inactive */
-	unsigned int v_inactive_count;  /* number of pages inactive */
-};
-
-/* systemwide totals computed every five seconds */
-struct vmtotal
-{
-	int16_t	t_rq;		/* length of the run queue */
-	int16_t	t_dw;		/* jobs in ``disk wait'' (neg priority) */
-	int16_t	t_pw;		/* jobs in page wait */
-	int16_t	t_sl;		/* jobs sleeping in core */
-	int16_t	t_sw;		/* swapped out runnable/short block jobs */
-	int32_t	t_vm;		/* total virtual memory */
-	int32_t	t_avm;		/* active virtual memory */
-	int32_t	t_rm;		/* total real memory in use */
-	int32_t	t_arm;		/* active real memory */
-	int32_t	t_vmshr;	/* shared virtual memory */
-	int32_t	t_avmshr;	/* active shared virtual memory */
-	int32_t	t_rmshr;	/* shared real memory */
-	int32_t	t_armshr;	/* active shared real memory */
-	int32_t	t_free;		/* free memory pages */
-};
-
-#endif /*__APPLE_API_OBSOLETE */
-
-#endif /* !_SYS_VMMETER_H_ */
diff --git a/src/blockchain_utilities/blocksdat_file.h b/src/blockchain_utilities/blocksdat_file.h
index 70a1f30..8f9ef4a 100644
--- a/src/blockchain_utilities/blocksdat_file.h
+++ b/src/blockchain_utilities/blocksdat_file.h
@@ -43,7 +43,6 @@
 #include <algorithm>
 #include <cstdio>
 #include <fstream>
-#include <boost/iostreams/copy.hpp>
 #include <atomic>
 
 #include "common/command_line.h"
diff --git a/src/blockchain_utilities/bootstrap_file.h b/src/blockchain_utilities/bootstrap_file.h
index 187db09..3cd656b 100644
--- a/src/blockchain_utilities/bootstrap_file.h
+++ b/src/blockchain_utilities/bootstrap_file.h
@@ -41,7 +41,6 @@
 #include <algorithm>
 #include <cstdio>
 #include <fstream>
-#include <boost/iostreams/copy.hpp>
 #include <atomic>
 
 #include "common/command_line.h"
diff --git a/src/checkpoints/checkpoints.cpp b/src/checkpoints/checkpoints.cpp
index f6a43f8..c7dd195 100644
--- a/src/checkpoints/checkpoints.cpp
+++ b/src/checkpoints/checkpoints.cpp
@@ -35,6 +35,7 @@
 #include "string_tools.h"
 #include "storages/portable_storage_template_helper.h" // epee json include
 #include "serialization/keyvalue_serialization.h"
+#include <functional>
 #include <vector>
 
 using namespace epee;
@@ -134,11 +135,9 @@ namespace cryptonote
   //---------------------------------------------------------------------------
   uint64_t checkpoints::get_max_height() const
   {
-    std::map< uint64_t, crypto::hash >::const_iterator highest =
-        std::max_element( m_points.begin(), m_points.end(),
-                         ( boost::bind(&std::map< uint64_t, crypto::hash >::value_type::first, _1) <
-                           boost::bind(&std::map< uint64_t, crypto::hash >::value_type::first, _2 ) ) );
-    return highest->first;
+    if(m_points.empty())
+      return 0;
+    return m_points.rbegin()->first;
   }
   //---------------------------------------------------------------------------
   const std::map<uint64_t, crypto::hash>& checkpoints::get_points() const
diff --git a/src/common/CMakeLists.txt b/src/common/CMakeLists.txt
index 45bd1c2..5d4e36a 100644
--- a/src/common/CMakeLists.txt
+++ b/src/common/CMakeLists.txt
@@ -27,7 +27,7 @@
 # STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF
 # THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
-include_directories(SYSTEM ${OPENSSL_INCLUDE_DIR})
+include_directories(${OPENSSL_INCLUDE_DIR})
 
 set(common_sources
   base58.cpp
diff --git a/src/cryptonote_core/blockchain.h b/src/cryptonote_core/blockchain.h
index e41ac6c..8ceec25 100644
--- a/src/cryptonote_core/blockchain.h
+++ b/src/cryptonote_core/blockchain.h
@@ -43,8 +43,8 @@
 #include <functional>
 #include <unordered_map>
 #include <unordered_set>
-#include <zmq.hpp>
 
+#include "morelo_mq/zmq_addon.hpp"
 #include "span.h"
 #include "syncobj.h"
 #include "string_tools.h"
@@ -1500,4 +1500,4 @@ namespace cryptonote
      */
     void cache_block_template(const block &b, const cryptonote::account_public_address &address, const blobdata &nonce, const difficulty_type &diff, uint64_t height, uint64_t expected_reward, uint64_t pool_cookie);
   };
-}  // namespace cryptonote
\ No newline at end of file
+}  // namespace cryptonote
diff --git a/src/morelo_mq/moreloMQ.cpp b/src/morelo_mq/moreloMQ.cpp
index af5b895..8af5595 100644
--- a/src/morelo_mq/moreloMQ.cpp
+++ b/src/morelo_mq/moreloMQ.cpp
@@ -63,7 +63,7 @@ using namespace epee;
 #undef MORELO_DEFAULT_LOG_CATEGORY
 #define MORELO_DEFAULT_LOG_CATEGORY "daemon.zmq"
 
-namespace moreloMQ 
+namespace moreloMQ
 {
 
 	 extern "C" void message_buffer_destroy(void*, void* hint) {
@@ -205,4 +205,4 @@ namespace moreloMQ
         }
         zmq_close(&listener);
     }
-} 
\ No newline at end of file
+} 
diff --git a/src/morelo_mq/moreloMQ.h b/src/morelo_mq/moreloMQ.h
index 96008ef..e689025 100644
--- a/src/morelo_mq/moreloMQ.h
+++ b/src/morelo_mq/moreloMQ.h
@@ -49,7 +49,7 @@
 #include <iostream>
 #include <string>
 #include <thread>
-#include <zmq.hpp>
+#include "zmq_addon.hpp"
 #include <map>
 #include <iterator>
 #include "INotifier.h"
@@ -57,7 +57,7 @@
 
 #include <boost/algorithm/string.hpp>
 #include <boost/asio/ip/address.hpp>
-#include <boost/bind.hpp>
+#include <boost/bind/bind.hpp>
 #include "common/command_line.h"
 
 #include "cryptonote_basic/cryptonote_basic_impl.h"
@@ -149,4 +149,4 @@ namespace moreloMQ {
             bool m_enabled = false;
 			zmq::message_t create_message(std::string &&data);
     };
-}
\ No newline at end of file
+}
diff --git a/src/rpc/CMakeLists.txt b/src/rpc/CMakeLists.txt
index 309f0ab..7ff26b3 100644
--- a/src/rpc/CMakeLists.txt
+++ b/src/rpc/CMakeLists.txt
@@ -27,7 +27,7 @@
 # STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF
 # THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
-include_directories(SYSTEM ${ZMQ_INCLUDE_DIRS})
+include_directories(${ZMQ_INCLUDE_DIRS})
 
 set(rpc_base_sources
   rpc_args.cpp
diff --git a/src/rpc/rpc_args.cpp b/src/rpc/rpc_args.cpp
index c2b9048..730edbf 100644
--- a/src/rpc/rpc_args.cpp
+++ b/src/rpc/rpc_args.cpp
@@ -31,7 +31,7 @@
 
 #include <boost/algorithm/string.hpp>
 #include <boost/asio/ip/address.hpp>
-#include <boost/bind.hpp>
+#include <functional>
 #include "common/command_line.h"
 #include "common/i18n.h"
 #include "hex.h"
@@ -182,7 +182,7 @@ namespace cryptonote
 
       std::vector<std::string> access_control_origins;
       boost::split(access_control_origins, access_control_origins_input, boost::is_any_of(","));
-      std::for_each(access_control_origins.begin(), access_control_origins.end(), boost::bind(&boost::trim<std::string>, _1, std::locale::classic()));
+      std::for_each(access_control_origins.begin(), access_control_origins.end(), std::bind(&boost::trim<std::string>, std::placeholders::_1, std::locale::classic()));
       config.access_control_origins = std::move(access_control_origins);
     }
 
diff --git a/src/simplewallet/simplewallet.cpp b/src/simplewallet/simplewallet.cpp
index c7097d1..c9c83cd 100644
--- a/src/simplewallet/simplewallet.cpp
+++ b/src/simplewallet/simplewallet.cpp
@@ -2625,81 +2625,81 @@ simple_wallet::simple_wallet()
   , m_rpc_payment_hash_rate(-1.0f)
 {
   m_cmd_binder.set_handler("start_mining",
-                           boost::bind(&simple_wallet::start_mining, this, _1),
+                           std::bind(&simple_wallet::start_mining, this, std::placeholders::_1),
                            tr(USAGE_START_MINING),
                            tr("Start mining in the daemon (bg_mining and ignore_battery are optional booleans)."));
   m_cmd_binder.set_handler("stop_mining",
-                           boost::bind(&simple_wallet::stop_mining, this, _1),
+                           std::bind(&simple_wallet::stop_mining, this, std::placeholders::_1),
                            tr("Stop mining in the daemon."));
   m_cmd_binder.set_handler("set_daemon",
-                           boost::bind(&simple_wallet::set_daemon, this, _1),
+                           std::bind(&simple_wallet::set_daemon, this, std::placeholders::_1),
                            tr(USAGE_SET_DAEMON),
                            tr("Set another daemon to connect to."));
   m_cmd_binder.set_handler("save_bc",
-                           boost::bind(&simple_wallet::save_bc, this, _1),
+                           std::bind(&simple_wallet::save_bc, this, std::placeholders::_1),
                            tr("Save the current blockchain data."));
   m_cmd_binder.set_handler("refresh",
-                           boost::bind(&simple_wallet::refresh, this, _1),
+                           std::bind(&simple_wallet::refresh, this, std::placeholders::_1),
                            tr("Synchronize the transactions and balance."));
   m_cmd_binder.set_handler("balance",
-                           boost::bind(&simple_wallet::show_balance, this, _1),
+                           std::bind(&simple_wallet::show_balance, this, std::placeholders::_1),
                            tr(USAGE_SHOW_BALANCE),
                            tr("Show the wallet's balance of the currently selected account."));
   m_cmd_binder.set_handler("incoming_transfers",
-                           boost::bind(&simple_wallet::show_incoming_transfers, this, _1),
+                           std::bind(&simple_wallet::show_incoming_transfers, this, std::placeholders::_1),
                            tr(USAGE_INCOMING_TRANSFERS),
                            tr("Show the incoming transfers, all or filtered by availability and address index.\n\n"
                               "Output format:\n"
                               "Amount, Spent(\"T\"|\"F\"), \"locked\"|\"unlocked\", RingCT, Global Index, Transaction Hash, Address Index, [Public Key, Key Image] "));
   m_cmd_binder.set_handler("payments",
-                           boost::bind(&simple_wallet::show_payments, this, _1),
+                           std::bind(&simple_wallet::show_payments, this, std::placeholders::_1),
                            tr(USAGE_PAYMENTS),
                            tr("Show the payments for the given payment IDs."));
   m_cmd_binder.set_handler("bc_height",
-                           boost::bind(&simple_wallet::show_blockchain_height, this, _1),
+                           std::bind(&simple_wallet::show_blockchain_height, this, std::placeholders::_1),
                            tr("Show the blockchain height."));
-  m_cmd_binder.set_handler("transfer", boost::bind(&simple_wallet::transfer, this, _1),
+  m_cmd_binder.set_handler("transfer", std::bind(&simple_wallet::transfer, this, std::placeholders::_1),
                            tr(USAGE_TRANSFER),
                            tr("Transfer <amount> to <address>. If the parameter \"index=<N1>[,<N2>,...]\" is specified, the wallet uses outputs received by addresses of those indices. If omitted, the wallet randomly chooses address indices to be used. In any case, it tries its best not to combine outputs across multiple addresses. <priority> is the priority of the transaction. The higher the priority, the higher the transaction fee. Valid values in priority order (from lowest to highest) are: unimportant, normal, elevated, priority. If omitted, the default value (see the command \"set priority\") is used. <ring_size> is the number of inputs to include for untraceability. Multiple payments can be made at once by adding URI_2 or <address_2> <amount_2> etcetera (before the payment ID, if it's included)"));
   m_cmd_binder.set_handler("locked_transfer",
-                           boost::bind(&simple_wallet::locked_transfer, this, _1),
+                           std::bind(&simple_wallet::locked_transfer, this, std::placeholders::_1),
                            tr(USAGE_LOCKED_TRANSFER),
                            tr("Transfer <amount> to <address> and lock it for <lockblocks> (max. 1000000). If the parameter \"index=<N1>[,<N2>,...]\" is specified, the wallet uses outputs received by addresses of those indices. If omitted, the wallet randomly chooses address indices to be used. In any case, it tries its best not to combine outputs across multiple addresses. <priority> is the priority of the transaction. The higher the priority, the higher the transaction fee. Valid values in priority order (from lowest to highest) are: unimportant, normal, elevated, priority. If omitted, the default value (see the command \"set priority\") is used. <ring_size> is the number of inputs to include for untraceability. Multiple payments can be made at once by adding URI_2 or <address_2> <amount_2> etcetera (before the payment ID, if it's included)"));
   m_cmd_binder.set_handler("locked_sweep_all",
-                           boost::bind(&simple_wallet::locked_sweep_all, this, _1),
+                           std::bind(&simple_wallet::locked_sweep_all, this, std::placeholders::_1),
                            tr(USAGE_LOCKED_SWEEP_ALL),
                            tr("Send all unlocked balance to an address and lock it for <lockblocks> (max. 1000000). If the parameter \"index<N1>[,<N2>,...]\" is specified, the wallet sweeps outputs received by those address indices. If omitted, the wallet randomly chooses an address index to be used. <priority> is the priority of the sweep. The higher the priority, the higher the transaction fee. Valid values in priority order (from lowest to highest) are: unimportant, normal, elevated, priority. If omitted, the default value (see the command \"set priority\") is used. <ring_size> is the number of inputs to include for untraceability."));
   m_cmd_binder.set_handler("sweep_unmixable",
-                           boost::bind(&simple_wallet::sweep_unmixable, this, _1),
+                           std::bind(&simple_wallet::sweep_unmixable, this, std::placeholders::_1),
                            tr("Send all unmixable outputs to yourself with ring_size 1"));
-  m_cmd_binder.set_handler("sweep_all", boost::bind(&simple_wallet::sweep_all, this, _1),
+  m_cmd_binder.set_handler("sweep_all", std::bind(&simple_wallet::sweep_all, this, std::placeholders::_1),
                            tr(USAGE_SWEEP_ALL),
                            tr("Send all unlocked balance to an address. If the parameter \"index<N1>[,<N2>,...]\" is specified, the wallet sweeps outputs received by those address indices. If omitted, the wallet randomly chooses an address index to be used. If the parameter \"outputs=<N>\" is specified and  N > 0, wallet splits the transaction into N even outputs."));
   m_cmd_binder.set_handler("sweep_below",
-                           boost::bind(&simple_wallet::sweep_below, this, _1),
+                           std::bind(&simple_wallet::sweep_below, this, std::placeholders::_1),
                            tr(USAGE_SWEEP_BELOW),
                            tr("Send all unlocked outputs below the threshold to an address."));
   m_cmd_binder.set_handler("sweep_single",
-                           boost::bind(&simple_wallet::sweep_single, this, _1),
+                           std::bind(&simple_wallet::sweep_single, this, std::placeholders::_1),
                            tr(USAGE_SWEEP_SINGLE),
                            tr("Send a single output of the given key image to an address without change."));
   m_cmd_binder.set_handler("donate",
-                           boost::bind(&simple_wallet::donate, this, _1),
+                           std::bind(&simple_wallet::donate, this, std::placeholders::_1),
                            tr(USAGE_DONATE),
                            tr("Donate <amount> to the development team (donations.morelo-project.rf.gd)."));
   m_cmd_binder.set_handler("sign_transfer",
-                           boost::bind(&simple_wallet::sign_transfer, this, _1),
+                           std::bind(&simple_wallet::sign_transfer, this, std::placeholders::_1),
                            tr(USAGE_SIGN_TRANSFER),
                            tr("Sign a transaction from a file. If the parameter \"export_raw\" is specified, transaction raw hex data suitable for the daemon RPC /sendrawtransaction is exported."));
   m_cmd_binder.set_handler("submit_transfer",
-                           boost::bind(&simple_wallet::submit_transfer, this, _1),
+                           std::bind(&simple_wallet::submit_transfer, this, std::placeholders::_1),
                            tr("Submit a signed transaction from a file."));
   m_cmd_binder.set_handler("set_log",
-                           boost::bind(&simple_wallet::set_log, this, _1),
+                           std::bind(&simple_wallet::set_log, this, std::placeholders::_1),
                            tr(USAGE_SET_LOG),
                            tr("Change the current log detail (level must be <0-4>)."));
   m_cmd_binder.set_handler("account",
-                           boost::bind(&simple_wallet::account, this, _1),
+                           std::bind(&simple_wallet::account, this, std::placeholders::_1),
                            tr(USAGE_ACCOUNT),
                            tr("If no arguments are specified, the wallet shows all the existing accounts along with their balances.\n"
                               "If the \"new\" argument is specified, the wallet creates a new account with its label initialized by the provided label text (which can be empty).\n"
@@ -2709,34 +2709,34 @@ simple_wallet::simple_wallet()
                               "If the \"untag\" argument is specified, the tags assigned to the specified accounts <account_index_1>, <account_index_2> ..., are removed.\n"
                               "If the \"tag_description\" argument is specified, the tag <tag_name> is assigned an arbitrary text <description>."));
   m_cmd_binder.set_handler("address",
-                           boost::bind(&simple_wallet::print_address, this, _1),
+                           std::bind(&simple_wallet::print_address, this, std::placeholders::_1),
                            tr(USAGE_ADDRESS),
                            tr("If no arguments are specified or <index> is specified, the wallet shows the default or specified address. If \"all\" is specified, the wallet shows all the existing addresses in the currently selected account. If \"new \" is specified, the wallet creates a new address with the provided label text (which can be empty). If \"label\" is specified, the wallet sets the label of the address specified by <index> to the provided label text."));
   m_cmd_binder.set_handler("integrated_address",
-                           boost::bind(&simple_wallet::print_integrated_address, this, _1),
+                           std::bind(&simple_wallet::print_integrated_address, this, std::placeholders::_1),
                            tr(USAGE_INTEGRATED_ADDRESS),
                            tr("Encode a payment ID into an integrated address for the current wallet public address (no argument uses a random payment ID), or decode an integrated address to standard address and payment ID"));
   m_cmd_binder.set_handler("address_book",
-                           boost::bind(&simple_wallet::address_book, this, _1),
+                           std::bind(&simple_wallet::address_book, this, std::placeholders::_1),
                            tr(USAGE_ADDRESS_BOOK),
                            tr("Print all entries in the address book, optionally adding/deleting an entry to/from it."));
   m_cmd_binder.set_handler("save",
-                           boost::bind(&simple_wallet::save, this, _1),
+                           std::bind(&simple_wallet::save, this, std::placeholders::_1),
                            tr("Save the wallet data."));
   m_cmd_binder.set_handler("save_watch_only",
-                           boost::bind(&simple_wallet::save_watch_only, this, _1),
+                           std::bind(&simple_wallet::save_watch_only, this, std::placeholders::_1),
                            tr("Save a watch-only keys file."));
   m_cmd_binder.set_handler("viewkey",
-                           boost::bind(&simple_wallet::viewkey, this, _1),
+                           std::bind(&simple_wallet::viewkey, this, std::placeholders::_1),
                            tr("Display the private view key."));
   m_cmd_binder.set_handler("spendkey",
-                           boost::bind(&simple_wallet::spendkey, this, _1),
+                           std::bind(&simple_wallet::spendkey, this, std::placeholders::_1),
                            tr("Display the private spend key."));
   m_cmd_binder.set_handler("seed",
-                           boost::bind(&simple_wallet::seed, this, _1),
+                           std::bind(&simple_wallet::seed, this, std::placeholders::_1),
                            tr("Display the Electrum-style mnemonic seed"));
   m_cmd_binder.set_handler("set",
-                           boost::bind(&simple_wallet::set_variable, this, _1),
+                           std::bind(&simple_wallet::set_variable, this, std::placeholders::_1),
                            tr(USAGE_SET_VARIABLE),
                            tr("Available options:\n "
                                   "seed language\n "
@@ -2789,51 +2789,51 @@ simple_wallet::simple_wallet()
                                   "credits-target <unsigned int>\n"
                                   "  The RPC payment credits balance to target."));
   m_cmd_binder.set_handler("encrypted_seed",
-                           boost::bind(&simple_wallet::encrypted_seed, this, _1),
+                           std::bind(&simple_wallet::encrypted_seed, this, std::placeholders::_1),
                            tr("Display the encrypted Electrum-style mnemonic seed."));
   m_cmd_binder.set_handler("rescan_spent",
-                           boost::bind(&simple_wallet::rescan_spent, this, _1),
+                           std::bind(&simple_wallet::rescan_spent, this, std::placeholders::_1),
                            tr("Rescan the blockchain for spent outputs."));
   m_cmd_binder.set_handler("get_tx_key",
-                           boost::bind(&simple_wallet::get_tx_key, this, _1),
+                           std::bind(&simple_wallet::get_tx_key, this, std::placeholders::_1),
                            tr(USAGE_GET_TX_KEY),
                            tr("Get the transaction key (r) for a given <txid>."));
   m_cmd_binder.set_handler("set_tx_key",
-                           boost::bind(&simple_wallet::set_tx_key, this, _1),
+                           std::bind(&simple_wallet::set_tx_key, this, std::placeholders::_1),
                            tr(USAGE_SET_TX_KEY),
                            tr("Set the transaction key (r) for a given <txid> in case the tx was made by some other device or 3rd party wallet."));
   m_cmd_binder.set_handler("check_tx_key",
-                           boost::bind(&simple_wallet::check_tx_key, this, _1),
+                           std::bind(&simple_wallet::check_tx_key, this, std::placeholders::_1),
                            tr(USAGE_CHECK_TX_KEY),
                            tr("Check the amount going to <address> in <txid>."));
   m_cmd_binder.set_handler("get_tx_proof",
-                           boost::bind(&simple_wallet::get_tx_proof, this, _1),
+                           std::bind(&simple_wallet::get_tx_proof, this, std::placeholders::_1),
                            tr(USAGE_GET_TX_PROOF),
                            tr("Generate a signature proving funds sent to <address> in <txid>, optionally with a challenge string <message>, using either the transaction secret key (when <address> is not your wallet's address) or the view secret key (otherwise), which does not disclose the secret key."));
   m_cmd_binder.set_handler("check_tx_proof",
-                           boost::bind(&simple_wallet::check_tx_proof, this, _1),
+                           std::bind(&simple_wallet::check_tx_proof, this, std::placeholders::_1),
                            tr(USAGE_CHECK_TX_PROOF),
                            tr("Check the proof for funds going to <address> in <txid> with the challenge string <message> if any."));
   m_cmd_binder.set_handler("get_spend_proof",
-                           boost::bind(&simple_wallet::get_spend_proof, this, _1),
+                           std::bind(&simple_wallet::get_spend_proof, this, std::placeholders::_1),
                            tr(USAGE_GET_SPEND_PROOF),
                            tr("Generate a signature proving that you generated <txid> using the spend secret key, optionally with a challenge string <message>."));
   m_cmd_binder.set_handler("check_spend_proof",
-                           boost::bind(&simple_wallet::check_spend_proof, this, _1),
+                           std::bind(&simple_wallet::check_spend_proof, this, std::placeholders::_1),
                            tr(USAGE_CHECK_SPEND_PROOF),
                            tr("Check a signature proving that the signer generated <txid>, optionally with a challenge string <message>."));
   m_cmd_binder.set_handler("get_reserve_proof",
-                           boost::bind(&simple_wallet::get_reserve_proof, this, _1),
+                           std::bind(&simple_wallet::get_reserve_proof, this, std::placeholders::_1),
                            tr(USAGE_GET_RESERVE_PROOF),
                            tr("Generate a signature proving that you own at least this much, optionally with a challenge string <message>.\n"
                               "If 'all' is specified, you prove the entire sum of all of your existing accounts' balances.\n"
                               "Otherwise, you prove the reserve of the smallest possible amount above <amount> available in your current account."));
   m_cmd_binder.set_handler("check_reserve_proof",
-                           boost::bind(&simple_wallet::check_reserve_proof, this, _1),
+                           std::bind(&simple_wallet::check_reserve_proof, this, std::placeholders::_1),
                            tr(USAGE_CHECK_RESERVE_PROOF),
                            tr("Check a signature proving that the owner of <address> holds at least this much, optionally with a challenge string <message>."));
   m_cmd_binder.set_handler("show_transfers",
-                           boost::bind(&simple_wallet::show_transfers, this, _1),
+                           std::bind(&simple_wallet::show_transfers, this, std::placeholders::_1),
                            tr(USAGE_SHOW_TRANSFERS),
                            // Seemingly broken formatting to compensate for the backslash before the quotes.
                            tr("Show the incoming/outgoing transfers within an optional height range.\n\n"
@@ -2845,170 +2845,170 @@ simple_wallet::simple_wallet()
                               "* Excluding change and fee.\n"
                               "** Set of address indices used as inputs in this transfer."));
   m_cmd_binder.set_handler("export_transfers",
-                           boost::bind(&simple_wallet::export_transfers, this, _1),
+                           std::bind(&simple_wallet::export_transfers, this, std::placeholders::_1),
                            tr(USAGE_EXPORT_TRANSFERS),
                            tr("Export to CSV the incoming/outgoing transfers within an optional height range."));
   m_cmd_binder.set_handler("unspent_outputs",
-                           boost::bind(&simple_wallet::unspent_outputs, this, _1),
+                           std::bind(&simple_wallet::unspent_outputs, this, std::placeholders::_1),
                            tr(USAGE_UNSPENT_OUTPUTS),
                            tr("Show the unspent outputs of a specified address within an optional amount range."));
   m_cmd_binder.set_handler("rescan_bc",
-                           boost::bind(&simple_wallet::rescan_blockchain, this, _1),
+                           std::bind(&simple_wallet::rescan_blockchain, this, std::placeholders::_1),
                            tr(USAGE_RESCAN_BC),
                            tr("Rescan the blockchain from scratch. If \"hard\" is specified, you will lose any information which can not be recovered from the blockchain itself."));
   m_cmd_binder.set_handler("set_tx_note",
-                           boost::bind(&simple_wallet::set_tx_note, this, _1),
+                           std::bind(&simple_wallet::set_tx_note, this, std::placeholders::_1),
                            tr(USAGE_SET_TX_NOTE),
                            tr("Set an arbitrary string note for a <txid>."));
   m_cmd_binder.set_handler("get_tx_note",
-                           boost::bind(&simple_wallet::get_tx_note, this, _1),
+                           std::bind(&simple_wallet::get_tx_note, this, std::placeholders::_1),
                            tr(USAGE_GET_TX_NOTE),
                            tr("Get a string note for a txid."));
   m_cmd_binder.set_handler("set_description",
-                           boost::bind(&simple_wallet::set_description, this, _1),
+                           std::bind(&simple_wallet::set_description, this, std::placeholders::_1),
                            tr(USAGE_SET_DESCRIPTION),
                            tr("Set an arbitrary description for the wallet."));
   m_cmd_binder.set_handler("get_description",
-                           boost::bind(&simple_wallet::get_description, this, _1),
+                           std::bind(&simple_wallet::get_description, this, std::placeholders::_1),
                            tr(USAGE_GET_DESCRIPTION),
                            tr("Get the description of the wallet."));
   m_cmd_binder.set_handler("status",
-                           boost::bind(&simple_wallet::status, this, _1),
+                           std::bind(&simple_wallet::status, this, std::placeholders::_1),
                            tr("Show the wallet's status."));
   m_cmd_binder.set_handler("wallet_info",
-                           boost::bind(&simple_wallet::wallet_info, this, _1),
+                           std::bind(&simple_wallet::wallet_info, this, std::placeholders::_1),
                            tr("Show the wallet's information."));
   m_cmd_binder.set_handler("sign",
-                           boost::bind(&simple_wallet::sign, this, _1),
+                           std::bind(&simple_wallet::sign, this, std::placeholders::_1),
                            tr(USAGE_SIGN),
                            tr("Sign the contents of a file."));
   m_cmd_binder.set_handler("verify",
-                           boost::bind(&simple_wallet::verify, this, _1),
+                           std::bind(&simple_wallet::verify, this, std::placeholders::_1),
                            tr(USAGE_VERIFY),
                            tr("Verify a signature on the contents of a file."));
   m_cmd_binder.set_handler("export_key_images",
-                           boost::bind(&simple_wallet::export_key_images, this, _1),
+                           std::bind(&simple_wallet::export_key_images, this, std::placeholders::_1),
                            tr(USAGE_EXPORT_KEY_IMAGES),
                            tr("Export a signed set of key images to a <filename>."));
   m_cmd_binder.set_handler("import_key_images",
-                           boost::bind(&simple_wallet::import_key_images, this, _1),
+                           std::bind(&simple_wallet::import_key_images, this, std::placeholders::_1),
                            tr(USAGE_IMPORT_KEY_IMAGES),
                            tr("Import a signed key images list and verify their spent status."));
   m_cmd_binder.set_handler("hw_reconnect",
-                           boost::bind(&simple_wallet::hw_reconnect, this, _1),
+                           std::bind(&simple_wallet::hw_reconnect, this, std::placeholders::_1),
                            tr(USAGE_HW_RECONNECT),
                            tr("Attempts to reconnect HW wallet."));
   m_cmd_binder.set_handler("export_outputs",
-                           boost::bind(&simple_wallet::export_outputs, this, _1),
+                           std::bind(&simple_wallet::export_outputs, this, std::placeholders::_1),
                            tr(USAGE_EXPORT_OUTPUTS),
                            tr("Export a set of outputs owned by this wallet."));
   m_cmd_binder.set_handler("import_outputs",
-                           boost::bind(&simple_wallet::import_outputs, this, _1),
+                           std::bind(&simple_wallet::import_outputs, this, std::placeholders::_1),
                            tr(USAGE_IMPORT_OUTPUTS),
                            tr("Import a set of outputs owned by this wallet."));
   m_cmd_binder.set_handler("show_transfer",
-                           boost::bind(&simple_wallet::show_transfer, this, _1),
+                           std::bind(&simple_wallet::show_transfer, this, std::placeholders::_1),
                            tr(USAGE_SHOW_TRANSFER),
                            tr("Show information about a transfer to/from this address."));
   m_cmd_binder.set_handler("password",
-                           boost::bind(&simple_wallet::change_password, this, _1),
+                           std::bind(&simple_wallet::change_password, this, std::placeholders::_1),
                            tr("Change the wallet's password."));
   m_cmd_binder.set_handler("payment_id",
-                           boost::bind(&simple_wallet::payment_id, this, _1),
+                           std::bind(&simple_wallet::payment_id, this, std::placeholders::_1),
                            tr(USAGE_PAYMENT_ID),
                            tr("Generate a new random full size payment id. These will be unencrypted on the blockchain, see integrated_address for encrypted short payment ids."));
   m_cmd_binder.set_handler("fee",
-                           boost::bind(&simple_wallet::print_fee_info, this, _1),
+                           std::bind(&simple_wallet::print_fee_info, this, std::placeholders::_1),
                            tr("Print the information about the current fee and transaction backlog."));
-  m_cmd_binder.set_handler("prepare_multisig", boost::bind(&simple_wallet::prepare_multisig, this, _1),
+  m_cmd_binder.set_handler("prepare_multisig", std::bind(&simple_wallet::prepare_multisig, this, std::placeholders::_1),
                            tr("Export data needed to create a multisig wallet"));
-  m_cmd_binder.set_handler("make_multisig", boost::bind(&simple_wallet::make_multisig, this, _1),
+  m_cmd_binder.set_handler("make_multisig", std::bind(&simple_wallet::make_multisig, this, std::placeholders::_1),
                            tr(USAGE_MAKE_MULTISIG),
                            tr("Turn this wallet into a multisig wallet"));
   m_cmd_binder.set_handler("finalize_multisig",
-                           boost::bind(&simple_wallet::finalize_multisig, this, _1),
+                           std::bind(&simple_wallet::finalize_multisig, this, std::placeholders::_1),
                            tr(USAGE_FINALIZE_MULTISIG),
                            tr("Turn this wallet into a multisig wallet, extra step for N-1/N wallets"));
   m_cmd_binder.set_handler("exchange_multisig_keys",
-                           boost::bind(&simple_wallet::exchange_multisig_keys, this, _1),
+                           std::bind(&simple_wallet::exchange_multisig_keys, this, std::placeholders::_1),
                            tr(USAGE_EXCHANGE_MULTISIG_KEYS),
                            tr("Performs extra multisig keys exchange rounds. Needed for arbitrary M/N multisig wallets"));
   m_cmd_binder.set_handler("export_multisig_info",
-                           boost::bind(&simple_wallet::export_multisig, this, _1),
+                           std::bind(&simple_wallet::export_multisig, this, std::placeholders::_1),
                            tr(USAGE_EXPORT_MULTISIG_INFO),
                            tr("Export multisig info for other participants"));
   m_cmd_binder.set_handler("import_multisig_info",
-                           boost::bind(&simple_wallet::import_multisig, this, _1),
+                           std::bind(&simple_wallet::import_multisig, this, std::placeholders::_1),
                            tr(USAGE_IMPORT_MULTISIG_INFO),
                            tr("Import multisig info from other participants"));
   m_cmd_binder.set_handler("sign_multisig",
-                           boost::bind(&simple_wallet::sign_multisig, this, _1),
+                           std::bind(&simple_wallet::sign_multisig, this, std::placeholders::_1),
                            tr(USAGE_SIGN_MULTISIG),
                            tr("Sign a multisig transaction from a file"));
   m_cmd_binder.set_handler("submit_multisig",
-                           boost::bind(&simple_wallet::submit_multisig, this, _1),
+                           std::bind(&simple_wallet::submit_multisig, this, std::placeholders::_1),
                            tr(USAGE_SUBMIT_MULTISIG),
                            tr("Submit a signed multisig transaction from a file"));
   m_cmd_binder.set_handler("export_raw_multisig_tx",
-                           boost::bind(&simple_wallet::export_raw_multisig, this, _1),
+                           std::bind(&simple_wallet::export_raw_multisig, this, std::placeholders::_1),
                            tr(USAGE_EXPORT_RAW_MULTISIG_TX),
                            tr("Export a signed multisig transaction to a file"));
   m_cmd_binder.set_handler("print_ring",
-                           boost::bind(&simple_wallet::print_ring, this, _1),
+                           std::bind(&simple_wallet::print_ring, this, std::placeholders::_1),
                            tr(USAGE_PRINT_RING),
                            tr("Print the ring(s) used to spend a given key image or transaction (if the ring size is > 1)\n\n"
                               "Output format:\n"
                               "Key Image, \"absolute\", list of rings"));
   m_cmd_binder.set_handler("set_ring",
-                           boost::bind(&simple_wallet::set_ring, this, _1),
+                           std::bind(&simple_wallet::set_ring, this, std::placeholders::_1),
                            tr(USAGE_SET_RING),
                            tr("Set the ring used for a given key image, so it can be reused in a fork"));
   m_cmd_binder.set_handler("save_known_rings",
-                           boost::bind(&simple_wallet::save_known_rings, this, _1),
+                           std::bind(&simple_wallet::save_known_rings, this, std::placeholders::_1),
                            tr(USAGE_SAVE_KNOWN_RINGS),
                            tr("Save known rings to the shared rings database"));
   m_cmd_binder.set_handler("mark_output_spent",
-                           boost::bind(&simple_wallet::blackball, this, _1),
+                           std::bind(&simple_wallet::blackball, this, std::placeholders::_1),
                            tr(USAGE_MARK_OUTPUT_SPENT),
                            tr("Mark output(s) as spent so they never get selected as fake outputs in a ring"));
   m_cmd_binder.set_handler("mark_output_unspent",
-                           boost::bind(&simple_wallet::unblackball, this, _1),
+                           std::bind(&simple_wallet::unblackball, this, std::placeholders::_1),
                            tr(USAGE_MARK_OUTPUT_UNSPENT),
                            tr("Mark an output as unspent so it may get selected as a fake output in a ring"));
   m_cmd_binder.set_handler("is_output_spent",
-                           boost::bind(&simple_wallet::blackballed, this, _1),
+                           std::bind(&simple_wallet::blackballed, this, std::placeholders::_1),
                            tr(USAGE_IS_OUTPUT_SPENT),
                            tr("Checks whether an output is marked as spent"));
   m_cmd_binder.set_handler("public_nodes",
-                           boost::bind(&simple_wallet::public_nodes, this, _1),
+                           std::bind(&simple_wallet::public_nodes, this, std::placeholders::_1),
                            tr(USAGE_PUBLIC_NODES),
                            tr("Lists known public nodes"));
   m_cmd_binder.set_handler("net_stats",
-                           boost::bind(&simple_wallet::net_stats, this, _1),
+                           std::bind(&simple_wallet::net_stats, this, std::placeholders::_1),
                            tr(USAGE_NET_STATS),
                            tr("Prints simple network stats"));
   m_cmd_binder.set_handler("welcome",
-                           boost::bind(&simple_wallet::welcome, this, _1),
+                           std::bind(&simple_wallet::welcome, this, std::placeholders::_1),
                            tr(USAGE_WELCOME),
                            tr("Prints basic info about Morelo for first time users"));
   m_cmd_binder.set_handler("version",
-                           boost::bind(&simple_wallet::version, this, _1),
+                           std::bind(&simple_wallet::version, this, std::placeholders::_1),
                            tr(USAGE_VERSION),
                            tr("Returns version information"));
   m_cmd_binder.set_handler("rpc_payment_info",
-                           boost::bind(&simple_wallet::rpc_payment_info, this, _1),
+                           std::bind(&simple_wallet::rpc_payment_info, this, std::placeholders::_1),
                            tr(USAGE_RPC_PAYMENT_INFO),
                            tr("Get info about RPC payments to current node"));
   m_cmd_binder.set_handler("start_mining_for_rpc",
-                           boost::bind(&simple_wallet::start_mining_for_rpc, this, _1),
+                           std::bind(&simple_wallet::start_mining_for_rpc, this, std::placeholders::_1),
                            tr(USAGE_START_MINING_FOR_RPC),
                            tr("Start mining to pay for RPC access"));
   m_cmd_binder.set_handler("stop_mining_for_rpc",
-                           boost::bind(&simple_wallet::stop_mining_for_rpc, this, _1),
+                           std::bind(&simple_wallet::stop_mining_for_rpc, this, std::placeholders::_1),
                            tr(USAGE_STOP_MINING_FOR_RPC),
                            tr("Stop mining to pay for RPC access"));
   m_cmd_binder.set_handler("help",
-                           boost::bind(&simple_wallet::help, this, _1),
+                           std::bind(&simple_wallet::help, this, std::placeholders::_1),
                            tr(USAGE_HELP),
                            tr("Show the help section or the documentation about a <command>."));
 }
